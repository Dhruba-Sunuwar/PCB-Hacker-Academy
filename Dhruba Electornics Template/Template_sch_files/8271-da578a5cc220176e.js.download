"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8271],{33850:function(e,t,n){n.d(t,{M6:function(){return m},TH:function(){return f},Wb:function(){return u},h4:function(){return p},lF:function(){return c}});var r=n(50029),o=n(64687),i=n.n(o),a=n(95419),s=n(8667),l=n(5095);function c(e){return"9767da2c1d954f229741a4128e6a324f"===e||"b2e41a32611c4a578a161ac40d10e85c"===e||"7eafef1b60874392a5f9b4e4182132bb"===e||"80e8099798ce4164950ba9d0bce79004"===e||"e038eb963f8344a9bdd1cc3e9646b96a"===e||"371f94853280407c9e9c6f3236d5fdf9"===e}function u(){(0,s.q)("[AppPush]: Registering for push notifications");var e=window&&window.enablePushNotifications;e?e():(0,s.q)("[AppPush]: Function 'enablePushNotifications' not found.")}function d(e){var t=window&&window.updateAppIconBadgeCount;t?t(e):(0,s.q)("[AppPush]: Function 'updateAppIconBadgeCount' not found.")}function p(e){var t,n=null===(t=window)||void 0===t?void 0:t.enableAppDarkMode;n?n(e):(0,s.q)("[AppPush]: Function 'enableAppDarkMode' not found.")}function f(e){d((e.unread||0)+(e.unread_chat||0))}function m(e,t){(0,s.q)("[AppPush] Updating app callbacks for path: "+e.pathname),t||d(0),void 0===window.updatePushNotificationsDeviceTokenForUser&&(window.updatePushNotificationsDeviceTokenForUser=function(e){(0,r.Z)(i().mark(function t(){var n,r,o;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.Z.registerAppPushToken(e);case 2:r=(n=t.sent).code,o=n.error,(0,s.q)("[AppPush] Update device token: "+e.token+", status: "+(null!=r?r:o&&o.status));case 6:case"end":return t.stop()}},t)}))()}),void 0===window.removePushNotificationsDeviceTokenForUser&&(window.removePushNotificationsDeviceTokenForUser=function(e,t){(0,r.Z)(i().mark(function n(){var r,o,l;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.Z.unregisterAppPushToken(e,t);case 2:o=(r=n.sent).code,l=r.error,(0,s.q)("[AppPush] Remove device token: "+e+", status: "+(null!=o?o:l&&l.status));case 6:case"end":return n.stop()}},n)}))()}),void 0===window.didSelectInAppPushNotification&&(window.didSelectInAppPushNotification=function(e){try{var t=JSON.parse(e),n=t.msg_id,o=t.channel;n&&(0,r.Z)(i().mark(function e(){var t,r,o;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.markMessageAsRead({messageID:n});case 2:r=(t=e.sent).code,o=t.error,(0,s.q)("[AppPush] Mark message read: "+n+", status: "+(null!=r?r:o&&o.status));case 6:case"end":return e.stop()}},e)}))(),o&&(0,r.Z)(i().mark(function e(){var t,n,r;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.markChatMessageRead({channelId:o});case 2:n=(t=e.sent).code,r=t.error,(0,s.q)("[AppPush] Mark chat message read: "+o+", status: "+(null!=n?n:r&&r.status));case 6:case"end":return e.stop()}},e)}))()}catch(e){}}),window.shouldShowInAppPushNotification=function(t){try{var n=JSON.parse(t);if((0,l.n3)(e)&&"chat"==n.type){var r=(0,l.bR)(e.query),o=n.channel;if("debug_wildcard"===o||o===r)return(0,s.q)("[AppPush] Blocking chat notification from channel: "+o),!1}if("debug_force_false"==n.type)return(0,s.q)("[AppPush] Blocking notification with debug payload: "+t),!1}catch(e){}return(0,s.q)("[AppPush] Allowing notification with payload: "+t),!0}}},33894:function(e,t,n){n.d(t,{O:function(){return i}});var r=n(75331),o=n(12967),i=function(){if((0,o.i7)()&&!(0,r.tv)({key:r.H0.chatAlert}).value){var e=new Audio("https://assets.skool.com/skool/8d0e1e625d824564bcb318a5c4cc71be.mp3");(0,r.co)({key:r.H0.chatAlert,value:!0,expireInMSec:5e3}),e.play()}}},99802:function(e,t,n){n.d(t,{O5:function(){return o},jY:function(){return r}});var r={AED:{name:"United Arab Emirates Dirham",symbol:"د.إ",multiplier:100,max:366800,min:400,isRight:!0},AUD:{name:"Australian Dollar",symbol:"A$",multiplier:100,max:15e4,min:200},BGN:{name:"Bulgarian Lev",symbol:"лв",multiplier:100,max:9999999,isRight:!0,min:100},BRL:{name:"Brazilian Real",symbol:"R$",multiplier:100,max:493e3,min:500},CAD:{name:"Canadian Dollar",symbol:"CAD $",multiplier:100,max:134500,min:200},CHF:{name:"Swiss Franc",symbol:"₣",multiplier:100,max:89500,min:100},CZK:{name:"Czech Republic Koruna",symbol:"Kč",multiplier:100,max:2175400,min:2200},DKK:{name:"Danish Krone",symbol:"kr",multiplier:100,max:684400,isRight:!0,min:700},EUR:{name:"Euro",symbol:"€",multiplier:100,max:91900,min:100},GBP:{name:"British Pound Sterling",symbol:"\xa3",multiplier:100,max:8e4,min:100},HKD:{name:"Hong Kong Dollar",symbol:"HK $",multiplier:100,max:782900,min:800},HUF:{name:"Hungarian Forint",symbol:"Ft",multiplier:100,max:33904300,isRight:!0,min:34e3},INR:{name:"Indian Rupee",symbol:"₹",multiplier:100,max:8219900,min:8300},JPY:{name:"Japanese Yen",symbol:"\xa5",multiplier:1,max:136178,min:200},MXN:{name:"Mexican Peso",symbol:"$",multiplier:100,max:1743800,min:1800},MYR:{name:"Malaysian Ringgit",symbol:"RM",multiplier:100,max:449200,min:500},NOK:{name:"Norwegian Krone",symbol:"kr",multiplier:100,max:1070400,min:1100},NZD:{name:"New Zealand Dollar",symbol:"NZ$",multiplier:100,max:160400,min:200},PLN:{name:"Polish Zloty",symbol:"zł",multiplier:100,max:412600,isRight:!0,min:500},RON:{name:"Romanian Leu",symbol:"L",multiplier:100,max:454900,min:500},SEK:{name:"Swedish Krona",symbol:"kr",multiplier:100,max:1039e3,isRight:!0,min:1100},SGD:{name:"Singapore Dollar",symbol:"SGD$",multiplier:100,max:133800,min:200},USD:{name:"United States Dollar",symbol:"$",multiplier:100,max:99900,min:100}},o=function(e){var t=e.amount,n=e.currency,o=e.showZeroes,i=r[n.toUpperCase()],a=i.symbol,s=i.isRight,l=(t/i.multiplier).toLocaleString("en-US",o?{maximumFractionDigits:2,minimumFractionDigits:2}:void 0);return"".concat(s?"":a).concat(l).concat(s?a:"")}},500:function(e,t,n){n.d(t,{V:function(){return a}});var r=n(67294),o=[];function i(e){for(var t=-1,n=0;n<o.length;n+=1)if(o[n]===e){t=n;break}return -1===t&&(t=o.length,o.push(e)),t}var a=function(){return[!1]},s=[0];document.body.addEventListener("dragenter",function(){s[0]+=1,document.body.dispatchEvent(new Event("dragAndDropFile"))}),document.body.addEventListener("dragleave",function(){s[0]-=1,document.body.dispatchEvent(new Event("dragAndDropFile"))}),document.body.addEventListener("drop",function(){s[0]=0,document.body.dispatchEvent(new Event("dragAndDropFile"))}),a=function(e){var t=(0,r.useState)(s[0]>0),n=t[0],a=t[1];(0,r.useEffect)(function(){var t=function(){a(s[0]>0)};return document.body.addEventListener("dragAndDropFile",t),function(){var n=i(e);o.splice(n,1),document.body.removeEventListener("dragAndDropFile",t)}},[e]);var l=i(e);return[n&&l===o.length-1]}},64727:function(e,t,n){n.d(t,{DE:function(){return m},F5:function(){return v},FA:function(){return C},PN:function(){return y},QT:function(){return k},Yw:function(){return w},ZP:function(){return f},cT:function(){return g}});var r=n(17674),o=n(90116),i=n(50029),a=n(64687),s=n.n(a),l=n(95364),c=n.n(l),u=n(95419),d=n(30899),p=["image/heic","image/heif"],f=function(e){return p.includes(e)},m={PDF:"pdf",Download:"download",GoogleDrive:"google-drive",Image:"image",Audio:"audio"},h=[{name:"PDF",ext:[".pdf"],mime:["application/pdf"],iconName:"pdf",preview:m.PDF,mobilePreview:m.Download},{name:"CSV",ext:[".csv"],mime:["text/csv"],iconName:"excel",preview:m.Download,mobilePreview:m.Download},{name:"Excel",ext:[".xls",".xlsx",".xlsb",".xlsm",".xltx"],mime:["application/vnd.ms-excel"],iconName:"excel",preview:m.GoogleDrive,mobilePreview:m.Download},{name:"Text",ext:[".txt",".rtf"],mime:["text/plain","application/rtf"],iconName:"text",preview:m.GoogleDrive,mobilePreview:m.Download},{name:"Word",ext:[".doc",".docx",".dotx"],mime:["application/msword"],iconName:"text",preview:m.GoogleDrive,mobilePreview:m.Download},{name:"Keynote",ext:[".key"],mime:[],iconName:"ppt",preview:m.Download,mobilePreview:m.Download},{name:"Powerpoint",ext:[".ppt",".pptx"],mime:["application/vnd.ms-powerpoint"],iconName:"ppt",preview:m.GoogleDrive,mobilePreview:m.Download},{name:"Audio",ext:[],mime:["audio/"],iconName:"audio",preview:m.Download,mobilePreview:m.Download},{name:".HEIC Image",ext:[".heic",".heif"],mime:["image/heic","image/heif"],iconName:"generic",preview:m.Download,mobilePreview:m.Download},{name:"Image",ext:[],mime:["image/"],iconName:"generic",preview:m.Image,mobilePreview:m.Image}];function v(e){var t=e.ext,n=e.contentType;return h.find(function(e){return e.ext.includes(t)||!!e.mime.find(function(e){return n.startsWith(e)})})}function b(){return(b=(0,i.Z)(s().mark(function e(t){var n,r,o,i;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.readFiles({fileIDs:[t]});case 2:return o=(r=e.sent).data,i=r.error,e.abrupt("return",[null!=o&&null!==(n=o.files)&&void 0!==n&&n.length?o.files[0]:void 0,i]);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e){return x.apply(this,arguments)}function x(){return(x=(0,i.Z)(s().mark(function e(t){var n,o,i,a,l,c,p,f,m,h,v,g;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileID,o=t.writeUrl,i=t.acl,a=t.contentType,l=t.data,c=t.waitToken,p=t.userID,m=void 0===(f=t.timeout)?6e4:f,e.next=3,u.Z.uploadS3({url:o,contentType:a,acl:i,body:l});case 3:if(!(h=e.sent.error)){e.next=10;break}throw console.error("Error uploading file",h),{error:h,fileID:n};case 10:if(!c){e.next=19;break}return e.prev=11,e.next=14,(0,d.Cx)({token:c,userID:p,timeoutMS:m});case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(11),{error:e.t0,fileID:n};case 19:return e.next=21,function(e){return b.apply(this,arguments)}(n);case 21:return v=e.sent,g=(0,r.Z)(v,1)[0],e.abrupt("return",g);case 25:case"end":return e.stop()}},e,null,[[11,16]])}))).apply(this,arguments)}function y(){return 10}function w(){return"*"}function C(e){return j.apply(this,arguments)}function j(){return(j=(0,i.Z)(s().mark(function e(t){var n,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.downloadURL,r=t.fileName,e.abrupt("return",new(c())({url:n,filename:r,headers:[{name:"cache-control",value:"no-cache"}]}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var k=function(e){var t,n=e.e,r=e.accept;if(null!=n&&null!==(t=n.clipboardData)&&void 0!==t&&null!==(t=t.files)&&void 0!==t&&t.length){if(!r||"*"===r)return n.clipboardData.files;var i=(0,o.Z)(n.clipboardData.files).filter(function(e){return r.includes(e.type)});if(i.length)return i}return null}},42668:function(e,t,n){n.d(t,{Bi:function(){return s},GN:function(){return l},Rj:function(){return u},YY:function(){return c},_c:function(){return a},s4:function(){return i}});var r=n(49303),o=n.n(r);function i(e){var t=e.file,n=e.minWidth,r=e.minHeight,i=e.maxWidth,a=e.maxHeight;return new Promise(function(e,s){o()(t,function(t,n){if("error"===t.type){e([null,null,t]);return}var r=(null==n?void 0:n.exif)||{};e([t,!!r["274"]&&1!==r["274"]])},{canvas:!0,orientation:!0,meta:!0,minWidth:n,minHeight:r,maxWidth:i,maxHeight:a})||s(Error("images: loadImageFile failed"))})}function a(e){var t=e.canvas,n=e.contentType,r=e.quality;return new Promise(function(e){t.toBlob(function(t){e(t)},n,r)})}function s(e){var t=e.src;return new Promise(function(e,n){var r=new Image;r.addEventListener("load",function(){return e(r)}),r.addEventListener("error",function(e){return n(e)}),r.setAttribute("crossOrigin","anonymous"),r.src=t})}function l(e){return new Promise(function(t,n){var r={},o=new FileReader;o.onload=function(){var e=new Image;e.src=o.result,e.onload=function(){r.width=e.width,r.height=e.height,t(r)},e.onerror=n},o.onerror=n,o.readAsDataURL(e)})}function c(e,t,n,r){var o=Math.min(n/e,r/t);return{width:e*o,height:t*o}}var u={profilePictureMinWidth:400,profilePictureMinHeight:400,profilePictureMaxSaveSize:400,attachmentImageMinWidth:200,attachmentImageMinHeight:200,attachmentFileMaxSizeMB:100,attachmentFileMaxSize:104857600,attachmentImageFileMaxSizeMB:20,attachmentImageFileMaxSize:20971520,iconWidth:128,iconHeight:128,coverWidth:1084,coverHeight:576,courseCoverWidth:1460,courseCoverHeight:752,eventCoverWidth:1460,eventCoverHeight:752}},5565:function(e,t,n){function r(e){var t=e.amount,n=e.currency,r=e.decimal,o=e.locale;return t=t||0,n=(n||"").toUpperCase(),r=r||0,o=o||"en-US",new Intl.NumberFormat(o,{compactDisplay:"short",currency:n,currencyDisplay:"symbol",maximumFractionDigits:r,minimumFractionDigits:r,signDisplay:"auto",style:"currency"}).format(t)}n.d(t,{g:function(){return o},v:function(){return r}});var o={visa:{logo:"https://assets.skool.com/skool/0a37a76226194714ac3c1a6f4a90cbb1.svg"},mastercard:{logo:"https://assets.skool.com/skool/f5078d5a76264cf395b0201e6fe9911a.svg"},amex:{logo:"https://assets.skool.com/skool/4a3007896c314edd856558aeb457ded3.svg"},discover:{logo:"https://assets.skool.com/skool/2fe44c67799c4084b07b9fe7211865a1.svg"},diners:{logo:"https://assets.skool.com/skool/520fd9dfcca347278cf90e7b02dad629.svg"},unionpay:{logo:"https://assets.skool.com/skool/f1bc464ec1a7419f925ce38376f67008.svg"},jcb:{logo:"https://assets.skool.com/skool/420d978c05e84a32a9efd3247c542204.svg"}}},50591:function(e,t,n){n.d(t,{Cq:function(){return d},IG:function(){return h},LS:function(){return u},Ld:function(){return v},Rq:function(){return b},U5:function(){return c},WK:function(){return m},aN:function(){return s},b5:function(){return p},jT:function(){return a},jy:function(){return l},lF:function(){return o},lf:function(){return i},p2:function(){return f},v4:function(){return g}});var r=n(95419);function o(e,t){return"pup:".concat(e,":").concat(t)}function i(e,t){return"tup:".concat(e,":").concat(t)}function a(e){return"gnp:".concat(e)}function s(e){return"gps:".concat(e)}function l(e){return"ccm:".concat(e)}function c(e){return"cty:".concat(e)}function u(e){return"cmu:".concat(e)}function d(e){return"uss:".concat(e)}function p(e){return"usp:".concat(e)}function f(e){return"cun:".concat(e)}function m(e){return"nbc:".concat(e)}function h(e){return"ncp:".concat(e)}function v(e,t){var n=r.Z.subscribe({topics:e,fn:t});return function(){r.Z.unsubscribe({topics:e,id:n})}}function b(){return r.Z.suspendPubSub()}function g(){return r.Z.resumePubSub()}},77902:function(e,t){t.Z=function(e){var t=e.Router,n=e.ctx,r=e.url,o=e.as,i=e.status;if(null!=n&&n.res){n.res.writeHead(void 0===i?302:i,{Location:o||r,"Content-Type":"text/html; charset-utf-8"}),n.res.end();return}t.replace(r,o)}},20142:function(e,t,n){n.d(t,{n:function(){return r}});var r=[{key:"linkWebsite",label:"Website",regex:/(^|\s)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?)/,icon:"Link"},{key:"linkInstagram",label:"Instagram",regex:/(?:(?:http|https):\/\/)?(?:www.)?(?:instagram.com|instagr.am|instagr.com)\/(\w+)/,icon:"Instagram"},{key:"linkTwitter",label:"X",regex:/(?:http:\/\/)?(?:www\.)?(twitter\.com|x\.com)\/(?:(?:\w)*#!\/)?(?:pages\/)?(?:[\w-]*\/)*([\w-]*)/,icon:"X"},{key:"linkYoutube",label:"YouTube",regex:/(youtu.*be.*)\/(watch\?v=|embed\/|v|shorts|)(.*?((?=[&#?])|$))/,icon:"Youtube"},{key:"linkLinkedin",label:"LinkedIn",regex:/http(s)?:\/\/([\w]+\.)?linkedin\.com\/in\/[A-z0-9_-]+\/?/,icon:"Linkedin"},{key:"linkFacebook",label:"Facebook",regex:/(?:https?:\/\/)?(?:www\.)?facebook\.com\/(?:(?:\w)*#!\/)?(?:pages\/)?(?:[\w-]*\/)*?(\/)?([\w\-.]{5,})/,icon:"Facebook"}]},51577:function(e,t,n){n.d(t,{$K:function(){return a},Hs:function(){return o},J$:function(){return r},zD:function(){return i}});var r=[{value:"",text:"Select a Country"},{value:"AL",text:"Albania"},{value:"DZ",text:"Algeria"},{value:"AO",text:"Angola"},{value:"AG",text:"Antigua & Barbuda"},{value:"AR",text:"Argentina"},{value:"AU",text:"Australia"},{value:"AT",text:"Austria"},{value:"AZ",text:"Azerbaijan"},{value:"BS",text:"Bahamas"},{value:"BH",text:"Bahrain"},{value:"BD",text:"Bangladesh"},{value:"BE",text:"Belgium"},{value:"BJ",text:"Benin"},{value:"BT",text:"Bhutan"},{value:"BO",text:"Bolivia"},{value:"BA",text:"Bosnia & Herzegovina"},{value:"BW",text:"Botswana"},{value:"BN",text:"Brunei"},{value:"BG",text:"Bulgaria"},{value:"KH",text:"Cambodia"},{value:"CA",text:"Canada"},{value:"CL",text:"Chile"},{value:"CO",text:"Colombia"},{value:"CR",text:"Costa Rica"},{value:"HR",text:"Croatia"},{value:"CY",text:"Cyprus"},{value:"CZ",text:"Czech Republic"},{value:"CI",text:"Ivory Coast"},{value:"DK",text:"Denmark"},{value:"DO",text:"Dominican Republic"},{value:"EC",text:"Ecuador"},{value:"EG",text:"Egypt"},{value:"SV",text:"El Salvador"},{value:"EE",text:"Estonia"},{value:"ET",text:"Ethiopia"},{value:"FI",text:"Finland"},{value:"FR",text:"France"},{value:"GA",text:"Gabon"},{value:"GM",text:"Gambia"},{value:"DE",text:"Germany"},{value:"GH",text:"Ghana"},{value:"GR",text:"Greece"},{value:"GT",text:"Guatemala"},{value:"GY",text:"Guyana"},{value:"HK",text:"Hong Kong"},{value:"HU",text:"Hungary"},{value:"IS",text:"Iceland"},{value:"IN",text:"India"},{value:"ID",text:"Indonesia"},{value:"IE",text:"Ireland"},{value:"IL",text:"Israel"},{value:"IT",text:"Italy"},{value:"JM",text:"Jamaica"},{value:"JP",text:"Japan"},{value:"JO",text:"Jordan"},{value:"KE",text:"Kenya"},{value:"KW",text:"Kuwait"},{value:"LA",text:"Laos"},{value:"LV",text:"Latvia"},{value:"LI",text:"Liechtenstein"},{value:"LT",text:"Lithuania"},{value:"LU",text:"Luxembourg"},{value:"MO",text:"Macau"},{value:"MG",text:"Madagascar"},{value:"MY",text:"Malaysia"},{value:"MT",text:"Malta"},{value:"MU",text:"Mauritius"},{value:"MX",text:"Mexico"},{value:"MD",text:"Moldova"},{value:"MC",text:"Monaco"},{value:"MN",text:"Mongolia"},{value:"MA",text:"Morocco"},{value:"MZ",text:"Mozambique"},{value:"NA",text:"Namibia"},{value:"NL",text:"Netherlands"},{value:"NZ",text:"New Zealand"},{value:"NE",text:"Niger"},{value:"NG",text:"Nigeria"},{value:"MK",text:"North Macedonia"},{value:"NO",text:"Norway"},{value:"OM",text:"Oman"},{value:"PA",text:"Panama"},{value:"PY",text:"Paraguay"},{value:"PE",text:"Peru"},{value:"PH",text:"Philippines"},{value:"PL",text:"Poland"},{value:"PT",text:"Portugal"},{value:"QA",text:"Qatar"},{value:"RO",text:"Romania"},{value:"RW",text:"Rwanda"},{value:"SM",text:"San Marino"},{value:"SA",text:"Saudi Arabia"},{value:"SN",text:"Senegal"},{value:"RS",text:"Serbia"},{value:"SG",text:"Singapore"},{value:"SK",text:"Slovakia"},{value:"SI",text:"Slovenia"},{value:"ZA",text:"South Africa"},{value:"KR",text:"South Korea"},{value:"ES",text:"Spain"},{value:"LK",text:"Sri Lanka"},{value:"LC",text:"St. Lucia"},{value:"SE",text:"Sweden"},{value:"CH",text:"Switzerland"},{value:"TW",text:"Taiwan"},{value:"TZ",text:"Tanzania"},{value:"TH",text:"Thailand"},{value:"TT",text:"Trinidad & Tobago"},{value:"TN",text:"Tunisia"},{value:"TR",text:"Turkey"},{value:"AE",text:"United Arab Emirates"},{value:"GB",text:"United Kingdom"},{value:"US",text:"United States"},{value:"UY",text:"Uruguay"},{value:"UZ",text:"Uzbekistan"},{value:"VN",text:"Vietnam"}],o=[{value:"",text:"Select a Country"},{value:"AL",text:"Albania"},{value:"DZ",text:"Algeria"},{value:"AO",text:"Angola"},{value:"AG",text:"Antigua & Barbuda"},{value:"AR",text:"Argentina"},{value:"AM",text:"Armenia"},{value:"AU",text:"Australia"},{value:"AT",text:"Austria"},{value:"AZ",text:"Azerbaijan"},{value:"BS",text:"Bahamas"},{value:"BH",text:"Bahrain"},{value:"BD",text:"Bangladesh"},{value:"BE",text:"Belgium"},{value:"BJ",text:"Benin"},{value:"BT",text:"Bhutan"},{value:"BO",text:"Bolivia"},{value:"BA",text:"Bosnia & Herzegovina"},{value:"BW",text:"Botswana"},{value:"BR",text:"Brazil"},{value:"BN",text:"Brunei"},{value:"BG",text:"Bulgaria"},{value:"KH",text:"Cambodia"},{value:"CA",text:"Canada"},{value:"CI",text:"C\xf4te d'Ivoire"},{value:"CL",text:"Chile"},{value:"CO",text:"Colombia"},{value:"CR",text:"Costa Rica"},{value:"HR",text:"Croatia"},{value:"CY",text:"Cyprus"},{value:"CZ",text:"Czech Republic"},{value:"DK",text:"Denmark"},{value:"DO",text:"Dominican Republic"},{value:"EC",text:"Ecuador"},{value:"EG",text:"Egypt"},{value:"SV",text:"El Salvador"},{value:"EE",text:"Estonia"},{value:"ET",text:"Ethiopia"},{value:"FI",text:"Finland"},{value:"FR",text:"France"},{value:"GA",text:"Gabon"},{value:"GM",text:"Gambia"},{value:"DE",text:"Germany"},{value:"GH",text:"Ghana"},{value:"GI",text:"Gibraltar"},{value:"GR",text:"Greece"},{value:"GT",text:"Guatemala"},{value:"GY",text:"Guyana"},{value:"HK",text:"Hong Kong"},{value:"HU",text:"Hungary"},{value:"IS",text:"Iceland"},{value:"IN",text:"India"},{value:"ID",text:"Indonesia"},{value:"IE",text:"Ireland"},{value:"IL",text:"Israel"},{value:"IT",text:"Italy"},{value:"JM",text:"Jamaica"},{value:"JP",text:"Japan"},{value:"JO",text:"Jordan"},{value:"KE",text:"Kenya"},{value:"KW",text:"Kuwait"},{value:"KZ",text:"Kazakhstan"},{value:"LA",text:"Laos"},{value:"LV",text:"Latvia"},{value:"LI",text:"Liechtenstein"},{value:"LT",text:"Lithuania"},{value:"LU",text:"Luxembourg"},{value:"MO",text:"Macau"},{value:"MG",text:"Madagascar"},{value:"MY",text:"Malaysia"},{value:"MT",text:"Malta"},{value:"MU",text:"Mauritius"},{value:"MX",text:"Mexico"},{value:"MD",text:"Moldova"},{value:"MC",text:"Monaco"},{value:"MN",text:"Mongolia"},{value:"MZ",text:"Mozambique"},{value:"MA",text:"Morocco"},{value:"NA",text:"Namibia"},{value:"NE",text:"Niger"},{value:"NG",text:"Nigeria"},{value:"NL",text:"Netherlands"},{value:"NZ",text:"New Zealand"},{value:"MK",text:"North Macedonia"},{value:"NO",text:"Norway"},{value:"OM",text:"Oman"},{value:"PK",text:"Pakistan"},{value:"PA",text:"Panama"},{value:"PY",text:"Paraguay"},{value:"PE",text:"Peru"},{value:"PH",text:"Philippines"},{value:"PL",text:"Poland"},{value:"PT",text:"Portugal"},{value:"QA",text:"Qatar"},{value:"RO",text:"Romania"},{value:"RW",text:"Rwanda"},{value:"SM",text:"San Marino"},{value:"SA",text:"Saudi Arabia"},{value:"SN",text:"Senegal"},{value:"RS",text:"Serbia"},{value:"SG",text:"Singapore"},{value:"SK",text:"Slovakia"},{value:"SI",text:"Slovenia"},{value:"ZA",text:"South Africa"},{value:"KR",text:"South Korea"},{value:"ES",text:"Spain"},{value:"LK",text:"Sri Lanka"},{value:"LC",text:"St. Lucia"},{value:"SE",text:"Sweden"},{value:"CH",text:"Switzerland"},{value:"TW",text:"Taiwan"},{value:"TZ",text:"Tanzania"},{value:"TH",text:"Thailand"},{value:"TN",text:"Tunisia"},{value:"TT",text:"Trinidad & Tobago"},{value:"TR",text:"Turkey"},{value:"AE",text:"United Arab Emirates"},{value:"GB",text:"United Kingdom"},{value:"US",text:"United States"},{value:"UY",text:"Uruguay"},{value:"UZ",text:"Uzbekistan"},{value:"VN",text:"Vietnam"}],i={1:"Transaction fee (2.9% + 30c)"},a=1},29610:function(e,t,n){n.d(t,{Kv:function(){return m},Ne:function(){return p},W1:function(){return s},bk:function(){return u},en:function(){return d},fV:function(){return l},kC:function(){return c},uq:function(){return f}});var r=n(96486),o=n.n(r),i=/^\s*```.*$/,a=/^\s*```\s*$/,s=function(e){for(var t,n=e.content,r=/\b\d\d?:\d\d(?::\d\d)?\b/g,o=[];null!=(t=r.exec(n));){var i=t.index,a=i+t[0].length-1;o.push({label:{start:i,end:a,text:t[0]},destination:{start:i,end:a,timestamp:!0}})}return o};function l(e){var t=e.content;if(!t)return[];for(var n=[],r={},o=!1,i=!1,a="",s="",l=!1,c=0;c<t.length;c++){var u=t.charAt(c);if(l){l=!1;continue}switch(u){case"[":i?s+=u:(o=!0,a="",s="",r={label:{start:c+1},destination:{}});break;case"]":o?(c<t.length-1&&"("===t.charAt(c+1)&&(r.label.end=c,r.label.text=a,l=!0,r.destination.start=c+2,i=!0),o=!1):i&&(s+=u);break;case")":i?(r.destination.end=c,r.destination.text=s,n.push(r),i=!1):o&&(a+=u);break;case"\\":var d=c<t.length-1?t.charAt(c+1):"";switch(d){case"[":case"]":case"(":case")":case"\\":o?a+=d:i&&(s+=d),l=!0}break;default:o?a+=u:i&&(s+=u)}}return n}function c(e){return o().capitalize(e)}function u(e){return e.replace(/([\\\[\]\(\)])/g,"\\$1")}function d(e){return e.replace(/\\([\\\[\]\(\)])/g,"$1")}function p(e){var t=e.content,n=null,r=1;if(t.startsWith("[ul]"))n="unorderedList",t=t.slice(4);else{var o=/^\[ol(?::(\d+))?]/.exec(t);o&&(n="orderedList",r=parseInt(o[1])||1,t=t.slice(o[0].length))}if(!n||!t.startsWith("[li]"))return null;t=t.slice(4);for(var i=[];;){var a=t.indexOf("[li]");if(a<0){i.push(t);break}i.push(t.slice(0,a)),t=t.slice(a+4)}return{listType:n,items:i,start:r}}function f(e){var t=e.content,n=e.allowCode,r=void 0!==n&&n,o=e.noLists,s=void 0!==o&&o,l=[],c={type:"text",lines:[]};t.split("\n").forEach(function(e){if("text"===c.type&&r&&e.match(i)){var t;(null===(t=c.lines)||void 0===t?void 0:t.length)>0&&l.push(c),c={type:"code",begin:e,lines:[]}}else"code"===c.type&&e.match(a)?(c.end=e,l.push(c),c={type:"text",lines:[]}):c.lines.push(e)}),("code"===c.type||c.lines.length>0)&&l.push(c),l.length>1&&"text"===l[l.length-1].type&&0===l[l.length-1].lines.length&&l.pop();var u=0,d=[];return l.forEach(function(e){if("code"===e.type){u++,d.push(e);return}e.lines.forEach(function(e){if(s)d.push({type:"text",lines:[e]});else{var t=p({content:e});t?d.push({type:t.listType,lines:t.items,start:t.start}):d.push({type:"text",lines:[e]})}})}),{blocks:d,numCodeBlocks:u,numUnorderedListBlocks:0,numOrderedListBlocks:0}}function m(e){var t=e.content,n=e.preserveNewLines;if(!t)return"";var r=t,o=l({content:t});if(null!=o&&o.length){r="";var i=0;o.forEach(function(e){e.label.start-1>i&&(r+=t.slice(i,e.label.start-1)),i=e.destination.end+1,r+=e.label.text}),i<t.length-1&&(r+=t.slice(i))}var a=[],s=f({content:r});return s?(s.blocks.forEach(function(e){switch(e.type){case"code":case"text":a.push(e.lines.join(" "));break;case"unorderedList":e.lines.length>0&&a.push("- "+e.lines.join(" - "));break;case"orderedList":var t=[];e.lines.forEach(function(n,r){t.push("".concat((e.start||1)+r,". ").concat(n))}),a.push(t.join(" "))}}),d(r=void 0!==n&&n?a.join("\n"):a.join(" "))):""}},37500:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){var t;return(null==e||null===(t=e.normalize("NFD"))||void 0===t||null===(t=t.match(/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])|(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDEC0-\uDEC9\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9])/g))||void 0===t||null===(t=t.join(""))||void 0===t?void 0:t.toLowerCase())||""}},31545:function(e,t,n){n.d(t,{$q:function(){return P},BI:function(){return M},Hh:function(){return g},Rl:function(){return I},UO:function(){return w},Wh:function(){return S},YD:function(){return x},a:function(){return v},ak:function(){return C},bi:function(){return N},sw:function(){return b}});var r=n(59499),o=n(50029),i=n(64687),a=n.n(i),s=n(63144),l=n.n(s),c=n(80008),u=n.n(c),d=n(12967),p=n(95419),f=n(96486),m=n.n(f);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var v={Unsupported:0,YouTube:1,Vimeo:2,Loom:3,Wistia:4,Bunny:5};function b(e){return(0,d.W4)(JSON.parse(e||"[]"))}var g=function(e){return e.includes("bunnycdn")},x=function(e){if(!e)return"";var t=e.split("/");return t.pop(),t.push("playlist.m3u8"),t.join("/")},y={},w=function(e){var t=new URL(e);return t.searchParams.delete("width"),t.toString()};function C(e){try{e=new URL(e)}catch(t){return{url:e.toString(),provider:v.Unsupported}}switch(e.hostname){case"www.youtube.com":case"youtube.com":case"m.youtube.com":if(e.pathname.startsWith("/shorts/")){var t,n,r,o,i,a,s=e.pathname.slice(8);return{url:"https://www.youtube.com/watch?v=".concat(s),provider:v.YouTube,videoID:s}}return{url:e.toString(),provider:v.YouTube,videoID:e.searchParams.get("v")||""};case"youtu.be":return{url:e.toString(),provider:v.YouTube,videoID:e.pathname.slice(1)};case"youtube.googleapis.com":return i=/\/(?:v|video|share|medias|embed)\/(.+)/.exec(e.pathname),{url:e.toString(),provider:v.YouTube,videoID:(null===(t=i)||void 0===t?void 0:t.length)>1?i[1]:""};case"www.vimeo.com":case"vimeo.com":return i=e.pathname.split("/"),{url:e.toString(),provider:v.Vimeo,videoID:i.length>1?i[1]:""};case"player.vimeo.com":return i=/\/(?:v|video|share|medias|embed)\/(.+)/.exec(e.pathname),{url:e.toString(),provider:v.Vimeo,videoID:(null===(n=i)||void 0===n?void 0:n.length)>1?i[1]:""};case"www.loom.com":case"loom.com":return i=/\/(?:v|video|share|medias|embed)\/(.+)/.exec(e.pathname),{url:e.toString(),provider:v.Loom,videoID:(null===(r=i)||void 0===r?void 0:r.length)>1?i[1]:""};case"video.bunnycdn.com":return i=/^\/play\/[^/]+\/(.+)/.exec(e.pathname),{url:e.toString(),provider:v.Bunny,videoID:(null===(o=i)||void 0===o?void 0:o.length)>1?i[1]:""};default:if(e.hostname.endsWith("wistia.com")||e.hostname.endsWith("wi.st"))return i=/\/(?:v|video|share|medias|embed)\/(.+)/.exec(e.pathname),{url:e.toString().replace("/embed",""),provider:v.Wistia,videoID:(null===(a=i)||void 0===a?void 0:a.length)>1?i[1]:""};return{url:e.toString(),provider:v.Unsupported}}}function j(){return(j=(0,o.Z)(a().mark(function e(t){var n,r,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.provider,r=t.url,e.t0=n,e.next=e.t0===v.YouTube?4:e.t0===v.Loom?6:e.t0===v.Vimeo?8:e.t0===v.Wistia?10:12;break;case 4:return o="https://www.youtube.com/oembed?format=json&url=".concat(encodeURIComponent(r)),e.abrupt("break",13);case 6:return o="https://www.loom.com/v1/oembed?url=".concat(encodeURIComponent(r)),e.abrupt("break",13);case 8:return o="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(r),"&width=1280&height=720"),e.abrupt("break",13);case 10:return o="https://fast.wistia.com/oembed?format=json&url=".concat(encodeURIComponent(r)),e.abrupt("break",13);case 12:return e.abrupt("return",!1);case 13:return e.next=15,l()(o);case 15:if((i=e.sent).ok){e.next=18;break}return e.abrupt("return",!0);case 18:return e.next=20,i.json();case 20:if(e.t1=e.sent,e.t1){e.next=23;break}e.t1=!1;case 23:return e.abrupt("return",e.t1);case 24:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(e){return O.apply(this,arguments)}function O(){return(O=(0,o.Z)(a().mark(function e(t){var n,r,o,i,s,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y[t],m().isUndefined(n)){e.next=3;break}return e.abrupt("return",n);case 3:if(o=(r=C(t)).provider,i=r.videoID,!(!o||!i)){e.next=7;break}return y[t]=null,e.abrupt("return",null);case 7:s=0;case 8:if(!(s<3)){e.next=27;break}return e.next=11,function(e){return j.apply(this,arguments)}({provider:o,url:t});case 11:if(!1!==(l=e.sent)){e.next=17;break}return y[t]=null,e.abrupt("return",null);case 17:if(!0!==l){e.next=22;break}return e.next=20,new Promise(function(e){return setTimeout(e,1e3)});case 20:e.next=24;break;case 22:return y[t]=l,e.abrupt("return",l);case 24:s++,e.next=8;break;case 27:return e.abrupt("return",null);case 28:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(e){return D.apply(this,arguments)}function D(){return(D=(0,o.Z)(a().mark(function e(t){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.title)||null);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,o.Z)(a().mark(function e(t){var n,r,o,i,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n.thumbnail_url);case 7:if(o=(r=C(t)).provider,i=r.videoID,o!==v.YouTube){e.next=10;break}return e.abrupt("return","https://img.youtube.com/vi/".concat(i,"/0.jpg"));case 10:if(o!==v.Bunny){e.next=16;break}return e.next=13,p.Z.getVideoMeta({url:t});case 13:return s=e.sent.data,e.abrupt("return",null==s?void 0:s.thumbnail);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e){return _.apply(this,arguments)}function _(){return(_=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:return e.abrupt("return",!!e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var M=function(e){if(!e)return"";var t=u().duration(e);if(t){var n=t.hours(),r=t.minutes(),o=t.seconds();return n||r||o?n>0?"".concat(n,":").concat(String(r).padStart(2,"0"),":").concat(String(o).padStart(2,"0")):"".concat(r,":").concat(String(o).padStart(2,"0")):""}return""};function N(e){var t=e.provider,n=e.videoID,o=e.startsAt,i=e.autoPlay,a=void 0!==i&&i,s=e.isMobile,l=e.additionalQueries;switch(t){case v.YouTube:return"https://www.youtube.com/embed/".concat(n,"?autoplay=").concat(a?1:0)+(o?"&start=".concat(o):"");case v.Vimeo:return"https://player.vimeo.com/video/".concat(n,"?autoplay=").concat(a?1:0,"&playsinline=").concat(s?0:1);case v.Loom:return"https://www.loom.com/embed/".concat(n,"?").concat((0,d.B7)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({autoplay:a?1:0,t:o||void 0},l)));case v.Wistia:return"https://fast.wistia.net/embed/iframe/".concat(n);case v.Bunny:return"https://iframe.mediadelivery.net/embed/".concat(n,"?autoplay=").concat(a?"true":"false");default:return null}}},30899:function(e,t,n){n.d(t,{Cx:function(){return u},k9:function(){return c}});var r=n(50029),o=n(64687),i=n.n(o),a=n(95419),s=Error("token is required"),l=Error("invalid timeout"),c=Error("wait timeout");function u(e){var t=e.token,n=e.userID,o=e.timeoutMS,u=void 0===o?1e4:o,d=e.successState,p=void 0===d?"completed":d;return new Promise(function(e,o){if(!t){o(s);return}if(u<=0){o(l);return}var d,f,m=["wat:".concat(n||"",":").concat(t)];f=a.Z.subscribe({topics:m,fn:function(t){var n=t.state;a.Z.unsubscribe({topics:m,id:f}),d=!0,n===p?e(n):o(n)}}),(0,r.Z)(i().mark(function n(){var r,s,l;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.Z.getWait({waitToken:t});case 2:s=(r=n.sent).data,l=r.error,d||l||"in-progress"===s||(a.Z.unsubscribe({topics:m,id:f}),d=!0,s===p?e(s):o(s));case 6:case"end":return n.stop()}},n)}))(),setTimeout(function(){d||(a.Z.unsubscribe({topics:m,id:f}),o(c))},u)})}},15474:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(67294),o=n(96276),i=n(50378),a=n(20668),s=n(14251),l=i.ZP.div.withConfig({displayName:"styled__ActionStatusWrapper",componentId:"sc-zi8z54-0"})(["display:flex;gap:8px;color:",";",""],function(e){return e.$completed?s.O9.success:s.O9.e2},a.c.t10),c=n(85893),u=(0,r.memo)(function(e){var t=e.completed;return(0,c.jsxs)(l,{$completed:t,children:[(0,c.jsx)(o.J,{name:t?"ActionAlt":"Action",style:{width:15,height:21}}),t?"Action complete":"Complete action"]})})},29027:function(e,t,n){n.d(t,{Z:function(){return W}});var r,o=n(50029),i=n(4730),a=n(59499),s=n(64687),l=n.n(s),c=n(67294),u=n(73935),d=n(95419),p=n(64727),f=n(73793),m=n(30697),h=n(14251),v=n(50378),b=n(85064),g=v.ZP.div.withConfig({displayName:"styled__GoogleDrivePreviewWrapper",componentId:"sc-pqx3q9-0"})(["position:relative;width:","px;height:","px;"," border-radius:10px;overflow:hidden;"],function(e){return e.$width},function(e){return e.$height},function(e){var t=e.$maxWidth;return void 0!==t?"max-width: ".concat(t,"px;"):""}),x=(0,v.ZP)(b.D).withConfig({displayName:"styled__LoadingIcon",componentId:"sc-pqx3q9-1"})(["position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);"],function(e){return e.size/2},function(e){return e.size/2}),y=n(85893);function w(e){var t=e.src,n=e.width,r=e.height,o=e.maxWidth,i=e.frameBorder,a=e.allowFullScreen,s=(0,c.useState)(!0),l=s[0],u=s[1],d=(0,c.useState)(0),p=d[0],f=d[1],m=(0,c.useRef)(),v=(0,c.useRef)(0);(0,c.useEffect)(function(){return u(!0),v.current=setInterval(function(){var e;null!==(e=m.current)&&void 0!==e&&e.contentDocument&&!m.current.contentDocument.title&&f(function(e){return e+1})},1e3),function(){clearInterval(v.current)}},[]);var b=(0,c.useCallback)(function(){u(!1),clearInterval(v.current)},[]),w=(0,c.useCallback)(function(e){console.error("error",e),u(!1),clearInterval(v.current)},[]);return(0,y.jsxs)(g,{$width:n,$height:r,$maxWidth:o,children:[l&&(0,y.jsx)(x,{size:40,color:h.O9.n5}),(0,y.jsx)("iframe",{onLoad:b,onError:w,frameBorder:i,allowFullScreen:a,ref:m,src:t,style:{width:n,height:r,maxWidth:o}},p)]})}w.defaultProps={frameBorder:0,allowFullScreen:!0};var C=(0,c.memo)(w),j=n(59607),k=n(65009),O=n(36581),P=n(74109),D=n(31545),I=n(20668),Z=v.ZP.div.withConfig({displayName:"styled__AttachmentPreviewWrapper",componentId:"sc-rf23wn-0"})(["z-index:1300;position:fixed;width:100vw;height:calc(var(--rvh));top:0;left:0;"]),S=v.ZP.div.withConfig({displayName:"styled__AttachmentPreviewContent",componentId:"sc-rf23wn-1"})(["position:relative;width:100vw;height:calc(var(--rvh));padding-top:","px;display:flex;align-items:center;justify-content:center;"],function(e){return e.$headerHeight}),_=v.ZP.div.withConfig({displayName:"styled__AttachmentPreviewInnerContent",componentId:"sc-rf23wn-2"})(["position:relative;border-radius:10px;overflow:hidden;margin:",";background-color:transparent;display:flex;align-items:center;justify-content:center;"],function(e){var t=e.$marginX,n=e.$marginTop,r=e.$marginBottom;return"".concat(n,"px ").concat(t,"px ").concat(r,"px")}),M=v.ZP.div.withConfig({displayName:"styled__AttachmentPreviewBackdrop",componentId:"sc-rf23wn-3"})(["position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.8);"]),N=v.ZP.div.withConfig({displayName:"styled__AttachmentPreviewHeader",componentId:"sc-rf23wn-4"})(["position:absolute;top:8px;right:8px;left:8px;z-index:1301;display:flex;align-items:center;justify-content:space-between;"]),E=v.ZP.div.withConfig({displayName:"styled__AttachmentPreviewTitle",componentId:"sc-rf23wn-5"})([""," "," color:",";padding:0 16px;"],I.c.t5,I.c.ellipsis,function(e){return e.theme.isDarkTheme?h.O9.n7:h.O9.n1}),A=v.ZP.div.withConfig({displayName:"styled__AttachmentDownload",componentId:"sc-rf23wn-6"})(["width:424px;background-color:",";"],h.O9.n1),L=v.ZP.div.withConfig({displayName:"styled__AttachmentDownloadHeader",componentId:"sc-rf23wn-7"})([""," text-align:center;"],I.c.t1),T=v.ZP.div.withConfig({displayName:"styled__AttachmentDownloadSubheader",componentId:"sc-rf23wn-8"})([""," text-align:center;word-break:break-word;"],I.c.t7),F=(0,v.iv)(["z-index:1301;position:fixed;"," ",""],function(e){var t=e.theme,n=e.$arrowSize;return t.isMobile?void 0:"top: calc(var(--rvh) / 2 - ".concat(n/2,"px);")},function(e){return e.theme.isMobile?"bottom: 8px;":void 0}),B=v.ZP.div.withConfig({displayName:"styled__LeftArrowWrapper",componentId:"sc-rf23wn-9"})([""," left:8px;"],F),R=v.ZP.div.withConfig({displayName:"styled__RightArrowWrapper",componentId:"sc-rf23wn-10"})([""," right:8px;"],F),z=["initialIdx","onClose","previewAttachments"];function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var $=(r={},(0,a.Z)(r,D.a.YouTube,{width:1280,height:720}),(0,a.Z)(r,D.a.Vimeo,{width:1280,height:720}),(0,a.Z)(r,D.a.Loom,{width:1280,height:720}),(0,a.Z)(r,D.a.Wistia,{width:1280,height:720}),(0,a.Z)(r,D.a.Bunny,{width:1280,height:720}),r),W=(0,c.memo)(function(e){var t,n=e.initialIdx,r=e.onClose,s=e.previewAttachments,h=(0,i.Z)(e,z),v=(0,c.useState)(n),b=v[0],g=v[1],x=(0,c.useState)({}),w=x[0],D=x[1],I=(0,f.bI)("isMobile"),F=I.dispatch,G=I.isMobile,W=G?8:64,H=G?8:32,q=G?56:32,V=s[b],Y=b<s.length-1,J=(0,c.useMemo)(function(){return w[null==V?void 0:V.id]},[V,w]);(0,c.useEffect)(function(){g(n)},[n]);var X=(0,c.useCallback)(function(){g(function(e){return Math.max(0,e-1)})},[]),K=(0,c.useCallback)(function(){g(function(e){return Math.min(e+1,s.length-1)})},[s]);(0,c.useEffect)(function(){var e=!0,t=document.body.style.overflow;document.body.style.overflow="hidden";var n=window.onkeyup;window.onkeyup=function(t){if(e)switch(t.code){case"Escape":r&&r();break;case"ArrowLeft":X();break;case"ArrowRight":K()}};var o=function(){var e=window.innerHeight;document.documentElement.style.setProperty("--rvh","".concat(e,"px"))};return o(),window.addEventListener("resize",o),function(){document.body.style.overflow=t,window.onkeyup=n,window.removeEventListener("resize",o),e=!1}},[r,X,K]);var Q=(0,c.useCallback)(function(){r&&r()},[r]),ee=(0,c.useCallback)((0,o.Z)(l().mark(function e(){var t,n,r,o,i,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=V.metadata).readUrl,r=t.srcReadUrl,!(n||r)){e.next=13;break}return i=(null===(o=V.metadata)||void 0===o?void 0:o.fileName)||"file",e.prev=3,e.next=6,(0,p.FA)({downloadURL:J,fileName:i});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),F(m.bI,{message:"Failed to download attachment",severity:"error"});case 11:e.next=18;break;case 13:(a=document.createElement("a")).href=J,a.download=!0,a.target="_blank",a.click();case 18:case"end":return e.stop()}},e,null,[[3,8]])})),[V,J,F]),et=(0,c.useMemo)(function(){if(V){var e,t;return(null===(e=V.metadata)||void 0===e?void 0:e.title)||(null===(t=V.metadata)||void 0===t?void 0:t.fileName)||"File attachment"}},[V]),en=(0,c.useCallback)((t=(0,o.Z)(l().mark(function e(t){var n,r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.getResourceUrl({fileId:t});case 2:return r=(n=e.sent).data,n.error&&F(m.bI,{message:"Failed to download file",severity:"error"}),e.abrupt("return",null!=r?r:null);case 7:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[F]);(0,c.useEffect)(function(){(0,o.Z)(l().mark(function e(){var t,n,r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(void 0===J&&!(null!=V&&V.videoLink))){e.next=7;break}if(r=(null===(t=V.metadata)||void 0===t?void 0:t.readUrl)||(null===(n=V.metadata)||void 0===n?void 0:n.srcReadUrl)){e.next=6;break}return e.next=5,en(null==V?void 0:V.id);case 5:r=e.sent;case 6:D(function(e){return U(U({},e),{},(0,a.Z)({},null==V?void 0:V.id,r))});case 7:case"end":return e.stop()}},e)}))()},[J,V,en]);var er=(0,c.useMemo)(function(){if(V&&!V.videoLink){var e,t,n=(null===(e=V.metadata)||void 0===e?void 0:e.fileName)||"file",r=n.lastIndexOf(".")>=0?n.slice(n.lastIndexOf(".")):"",o=(null===(t=V.metadata)||void 0===t?void 0:t.contentType)||"";if(!J)return null;var i=(0,p.F5)({ext:r,contentType:o}),a=(G?null==i?void 0:i.mobilePreview:null==i?void 0:i.preview)||p.DE.Download;if(a===p.DE.Download)return(0,y.jsx)(A,{children:(0,y.jsxs)(O.s,{gap:32,margin:32,children:[(0,y.jsxs)(O.s,{gap:8,children:[(0,y.jsx)(L,{children:"No preview available"}),(0,y.jsx)(T,{children:"for ".concat(n)})]}),(0,y.jsx)(j.z,{onClick:ee,label:"Download",style:{width:"100%"}})]})});if(a===p.DE.GoogleDrive){var s="https://docs.google.com/viewer?embedded=true&url=".concat(encodeURIComponent(J));return(0,y.jsx)(C,{src:s,width:"calc(100vw - ".concat(2*W,"px)"),height:"calc(var(--rvh) - ".concat(56,"px - ").concat(H,"px - ").concat(q,"px)"),maxWidth:1024,frameBorder:0,allowFullScreen:!1},s)}if(a===p.DE.Image){var l={maxWidth:"calc(100vw - ".concat(2*W,"px)"),maxHeight:"calc(var(--rvh) - ".concat(56,"px - ").concat(H,"px - ").concat(q,"px)")};return J.includes("giphy.com")&&!G&&(l.minHeight=420),(0,y.jsx)("img",{src:J,alt:n,style:l})}if(a===p.DE.PDF){var c={width:"calc(100vw - ".concat(2*W,"px)"),height:"calc(var(--rvh) - ".concat(56,"px - ").concat(H,"px - ").concat(q,"px)"),maxWidth:1024},u="".concat(J,"#toolbar=0");return(0,y.jsx)("iframe",{style:c,frameBorder:0,src:u})}}else if(V&&V.videoLink){var d,f,m,h=$[V.metadata.provider],v=h.height/h.width,b={width:"calc(100vw - ".concat(2*W,"px)"),height:"calc((100vw - ".concat(2*W,"px) * ").concat(v,")"),maxWidth:h.width,maxHeight:h.height};return(0,y.jsx)(P.Z,{url:V.metadata.url,thumbnailUrl:(null==V||null===(d=V.metadata)||void 0===d?void 0:d.thumbnail)||null,duration:(null==V||null===(f=V.metadata)||void 0===f?void 0:f.lenMs)||null,style:b,autoplay:!0,streamURL:null==V||null===(m=V.metadata)||void 0===m?void 0:m.stream})}return null},[V,J,G,W,H,q,ee]);return(0,u.createPortal)((0,y.jsxs)(Z,U(U({},h),{},{children:[(0,y.jsxs)(N,{children:[(0,y.jsx)(E,{children:et}),(0,y.jsxs)(k.X,{gap:8,children:[!!V&&!!J&&(0,y.jsx)(j.z,{variant:"icon",icon:"Download",onClick:ee,iconSize:16.66}),(0,y.jsx)(j.z,{variant:"icon",icon:"Close",onClick:Q,iconSize:16.66})]})]}),b>0&&(0,y.jsx)(B,{$arrowSize:40,children:(0,y.jsx)(j.z,{variant:"icon",icon:"ArrowLeft",onClick:X,iconSize:16.66})}),Y&&(0,y.jsx)(R,{$arrowSize:40,children:(0,y.jsx)(j.z,{variant:"icon",icon:"ArrowRight",onClick:K,iconSize:16.66})}),(0,y.jsxs)(S,{$headerHeight:56,children:[(0,y.jsx)(M,{onClick:Q}),(0,y.jsx)(_,{$marginX:W,$marginTop:H,$marginBottom:q,children:er})]})]})),document.body)})},99682:function(e,t,n){n.d(t,{F:function(){return k}});var r=n(59499),o=n(17674),i=n(4730),a=n(67294),s=n(73793),l=n(54361),c=n(12476),u=n(47691),d=n(50378),p=n(96276),f=n(36581),m=n(14251),h=(0,d.ZP)(f.s).withConfig({displayName:"styled__AutocompleteWrapper",componentId:"sc-1mcevak-0"})(["position:relative;"]),v=d.ZP.div.withConfig({displayName:"styled__InputWrapper",componentId:"sc-1mcevak-1"})(["position:relative;input{padding-right:48px;min-width:96px;text-overflow:ellipsis;background-color:",";}"],m.O9.n1),b=d.ZP.div.withConfig({displayName:"styled__DropdownWrapper",componentId:"sc-1mcevak-2"})(["position:absolute;inset:0;.skool-ui-dropdown-option{padding:8px 16px;}> div > div:first-child{width:100%;> button{width:100%;}}"]),g=d.ZP.label.withConfig({displayName:"styled__DropdownButtonLabel",componentId:"sc-1mcevak-3"})(["position:absolute;right:16px;top:50%;transform:translateY(-50%);padding:8px;cursor:pointer;"]),x=(0,d.ZP)(p.J).withConfig({displayName:"styled__DropdownButtonIcon",componentId:"sc-1mcevak-4"})(["width:12px;height:12px;color:",";"],function(e){return e.$dropdownVisible?m.O9.n7:m.O9.n5}),y=n(85893),w=["options","value","label","onChange","onBlur","placeholder","showDropdownButton","noAnimation","dataTestId"];function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var j=(0,a.forwardRef)(function(e,t){var n=e.options,d=e.value,p=e.label,f=e.onChange,m=e.onBlur,j=e.placeholder,k=e.showDropdownButton,O=e.noAnimation,P=(e.dataTestId,(0,i.Z)(e,w)),D=(0,s.bI)("isMobile").isMobile,I=(0,a.useRef)(),Z=(0,l.c8)(),S=(0,o.Z)(Z,3),_=S[0],M=S[1],N=S[2],E=(0,a.useState)(!1),A=E[0],L=E[1],T=!!(null!=n&&n.length&&A),F=(0,a.useCallback)(function(){M(),setTimeout(function(){null==t||t.current.select()},0)},[M,t]),B=(0,a.useCallback)(function(){N(),null==m||m()},[N,m]);(0,a.useEffect)(function(){var e,t;T?null==I||null===(e=I.current)||void 0===e||e.openDropdown():T||null==I||null===(t=I.current)||void 0===t||t.closeDropdown()},[T]);var R=(0,a.useCallback)(function(e){f(e.target.value)},[f]),z=(0,a.useCallback)(function(){L(!A)},[A]);(0,l.YB)(function(){if(!(null!=n&&n.length)){L(!1);return}L(_)},[n,d,_]);var G=(0,a.useCallback)(function(e){null==e||e.preventDefault()},[]);return(0,y.jsxs)(h,{children:[(0,y.jsx)(b,{children:(0,y.jsx)(c.h_,{ref:I,options:n,fitButton:!0,yOffset:11,backgroundDisabled:!0,noAnimation:O,flipDisabled:D,scrollToActive:!0,style:{visibility:"hidden",height:"100%"}})}),(0,y.jsxs)(v,{children:[(0,y.jsx)(u.I,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({ref:t,onFocus:F,onBlur:B,placeholder:j,onChange:R,value:d,label:p,autoComplete:"off",id:"autocomplete-input"},P)),k&&(0,y.jsx)(g,{onClick:z,onMouseDown:G,htmlFor:"autocomplete-input",children:(0,y.jsx)(x,{$dropdownVisible:A,name:A?"ArrowUp":"ArrowDown"})})]})]})}),k=(0,a.memo)(j)},10925:function(e,t,n){n.d(t,{x:function(){return j}});var r=n(23450),o=n.n(r),i=n(67294),a=n(14251),s=n(66703),l=n(12967),c=n(50378),u=n(36581),d=n(65009),p=n(20668),f=n(70299),m=(0,c.ZP)(u.s).withConfig({displayName:"styled__HeatmapWrapper",componentId:"sc-euc2r5-0"})(["overflow-x:auto;overflow-y:hidden;position:relative;",""],f.KZ),h=c.ZP.div.withConfig({displayName:"styled__Heatmap",componentId:"sc-euc2r5-1"})(["display:grid;grid-template-rows:",";grid-template-columns:",";gap:","px;grid-auto-flow:column;"],function(e){var t=e.$rows,n=e.$squareSize;return"repeat(".concat(t,", ").concat(n,"px)")},function(e){var t=e.$columns,n=e.$squareSize;return"repeat(".concat(t,", ").concat(n,"px)")},function(e){return e.$gap}),v=(0,c.ZP)(d.X).withConfig({displayName:"styled__MonthLabelsWrapper",componentId:"sc-euc2r5-2"})(["align-items:center;height:28px;width:100%;"]),b=c.ZP.div.withConfig({displayName:"styled__MonthLabel",componentId:"sc-euc2r5-3"})(["color:",";font-size:13px;position:absolute;left:","px;user-select:none;"],a.O9.n5,function(e){return e.$left}),g=c.ZP.div.withConfig({displayName:"styled__Square",componentId:"sc-euc2r5-4"})(["background-color:",";border-radius:2px;",""],function(e){var t=e.$backgroundColor;return null!=t?t:a.O9.n2},function(e){var t=e.$size;return t&&"\n      height: ".concat(t,"px;\n      width: ").concat(t,"px;\n    ")}),x=c.ZP.div.withConfig({displayName:"styled__TooltipText",componentId:"sc-euc2r5-5"})(["color:",";",";"],function(e){var t=e.$color,n=e.theme;return null!=t?t:n.isDarkTheme?a.O9.n7:a.O9.n1},p.c.t10),y=function(e,t,n){},w=n(85893),C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],j=(0,i.memo)(function(e){var t=e.counts,n=e.startDate,r=e.ranks,c=e.since,u=t.length,d=Math.ceil(u/7),p=13*d-1,f=c?c.diff(n,"day"):-1,j=(0,i.useRef)();(0,i.useEffect)(function(){y(n,u,d)},[u,d,n]),(0,i.useEffect)(function(){setTimeout(function(){if(j.current){var e;j.current.scrollLeft=(null===(e=j.current)||void 0===e?void 0:e.scrollWidth)||p}},0)},[p]);var k=(0,i.useCallback)(function(e,i){if(i<0||i>=u)return null;if(i<f)return(0,w.jsx)(g,{$size:11},i);var c=t[i],d=r.find(function(e){return c>=e.min})||r[0],p=c>0?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(x,{children:o()("activity",(0,l.x6)(c),!0)}),(0,w.jsx)(x,{$color:a.O9.n5,children:"".concat(n.clone().add(i,"day").format("dddd, MMMM D, YYYY"))}),i===f&&(0,w.jsx)(x,{children:"First day \uD83C\uDF89"})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(x,{children:"No activities"}),(0,w.jsx)(x,{$color:a.O9.n5,children:"".concat(n.clone().add(i,"day").format("dddd, MMMM D, YYYY"))}),i===f&&(0,w.jsx)(x,{children:"First day \uD83C\uDF89"})]});return(0,w.jsx)(s.u,{content:p,animated:!1,placement:"bottom",children:(0,w.jsx)(g,{$backgroundColor:d.color,$size:11})},i)},[t,u,r,f,n]),O=(0,i.useCallback)(function(e){for(var t=[],n=0;n<7;n++)t.push(k(n,7*e+n));return t},[k]),P=(0,i.useMemo)(function(){for(var e=[],t=0;t<d-1;t++){var r=13*t,o=n.clone().add((t+1)*7-1,"day");o.date()>=1&&7>=o.date()&&e.push((0,w.jsx)(b,{$left:r,children:C[o.month()]},t))}return e},[d,n]),D=(0,i.useMemo)(function(){for(var e=[],t=0;t<d;t++)e.push(O(t));return e},[d,O]);return(0,w.jsxs)(m,{ref:j,children:[(0,w.jsx)(v,{children:P}),(0,w.jsx)(h,{$rows:7,$columns:d,$gap:2,$squareSize:11,children:D})]})})},16695:function(e,t,n){n.d(t,{e:function(){return h}});var r=n(59499),o=n(4730),i=n(50378),a=(0,i.iv)(["flex-direction:column;gap:8px;"]),s=i.ZP.div.withConfig({displayName:"styled__ConfirmCancelButtonsWrapper",componentId:"sc-125bufn-0"})(["display:flex;",""],function(e){return e.theme.isMobile&&a}),l=n(59607),c=n(73793),u=n(67294),d=n(85893),p=["confirmLabel","cancelLabel","confirmDisabled","confirmVariant","confirmTestId","cancelTestId","onConfirm","onCancel","loading"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=(0,u.memo)(function(e){var t=e.confirmLabel,n=e.cancelLabel,r=e.confirmDisabled,i=e.confirmVariant,a=(e.confirmTestId,e.cancelTestId,e.onConfirm),u=e.onCancel,f=e.loading,h=(0,o.Z)(e,p),v=(0,c.bI)("isMobile").isMobile;return(0,d.jsxs)(s,m(m({},h),{},{children:[(0,d.jsx)(l.z,{variant:i,disabled:r,label:void 0===t?"Confirm":t,onClick:a,loading:f}),(0,d.jsx)(l.z,{variant:v?"secondary":"borderless",label:void 0===n?"Cancel":n,onClick:u,disabled:f})]}))})},96166:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(67294),o=n(59607),i=n(20668),a=n(14251),s=n(50378),l=(0,s.iv)(["> h2{","}"],i.c.t4),c=s.ZP.div.withConfig({displayName:"styled__ConnectStripeWrapper",componentId:"sc-lne6dj-0"})(["margin-top:32px;padding:16px;border-radius:10px;background:",";color:",";> h2{margin:0px 0px 8px 0px;","}> p{margin:0px 0px 16px 0px;","}",""],a.O9.p1,a.O9.fgPrimary,i.c.t2,i.c.t7,function(e){return e.theme.isMobile&&l}),u=n(85893),d=(0,r.memo)(function(e){var t=e.onClick;return(0,u.jsxs)(c,{children:[(0,u.jsx)("h2",{children:"Connect your bank account"}),(0,u.jsx)("p",{children:"Skool uses Stripe to send payouts to your bank account. Complete setup to monetize your group."}),(0,u.jsx)(o.z,{onClick:t,label:"CONTINUE →",variant:"blue"})]})})},13053:function(e,t,n){n.d(t,{ZP:function(){return M}});var r=n(59499),o=n(4730),i=n(90116),a=n(67294),s=n(14251),l=n(29610),c=n(5095),u=n(73793),d=n(70120),p=n(12065),f=n(20668),m=n(96486),h=n.n(m),v=n(50378),b=v.ZP.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-y5pp90-0"})(["word-break:break-word;color:",";text-align:",";",""],function(e){return e.$color},function(e){return e.$textAlign},function(e){var t=e.$variant;return f.c[t]}),g=(0,v.iv)(["cursor:default;color:",";&:hover{text-decoration:unset;}"],s.O9.n5),x=v.ZP.span.withConfig({displayName:"styled__ShowMore",componentId:"sc-y5pp90-1"})(["cursor:pointer;user-select:none;color:",";&:hover{text-decoration:underline;}",""],s.O9.sd1,function(e){return e.$disabled&&g}),y=v.ZP.pre.withConfig({displayName:"styled__CodeBlock",componentId:"sc-y5pp90-2"})(["background-color:",";padding:10px;font-family:monospace;font-size:14px;line-height:1.5;border-radius:6px;border:1px dashed ",";overflow:auto;"],s.O9.n3,s.O9.n5),w=v.ZP.div.withConfig({displayName:"styled__Paragraph",componentId:"sc-y5pp90-3"})(["margin:0;&:last-child{margin-bottom:0;}a{color:",";text-decoration:none;&:hover{text-decoration:underline;}}"],s.O9.sd1),C=v.ZP.div.withConfig({displayName:"styled__EmptyParagraph",componentId:"sc-y5pp90-4"})(["height:16px;margin:0;"]),j=(0,v.iv)(["margin:0;&:last-child{margin-bottom:0;}a{color:",";text-decoration:none;&:hover{text-decoration:underline;}}margin-block-start:0;margin-block-end:0;margin-inline-start:0;margin-inline-end:0;padding-inline-start:0;li{list-style-position:inside;}"],s.O9.sd1),k=v.ZP.ol.withConfig({displayName:"styled__OrderedList",componentId:"sc-y5pp90-5"})(["",""],j),O=v.ZP.ul.withConfig({displayName:"styled__UnorderedList",componentId:"sc-y5pp90-6"})(["",""],j),P=n(85893),D=["value","textVariant","textColor","textAlign","showMoreLimit","showMoreDisabled","showMoreHidden","showTimestamps","onTimestampClick"];function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var S=function(e,t){var n=e.split(":");t(3===n.length?3600*n[0]+60*n[1]+ +n[2]:60*n[0]+ +n[1])};function _(e){var t=e.value,n=e.textVariant,f=e.textColor,m=e.textAlign,v=e.showMoreLimit,g=e.showMoreDisabled,j=e.showMoreHidden,I=e.showTimestamps,_=e.onTimestampClick,M=(0,o.Z)(e,D),N=(0,a.useState)(!1),E=N[0],A=N[1],L=(0,u.bI)("currentGroup","isMobile"),T=L.currentGroup,F=L.isMobile,B=(0,a.useState)({}),R=B[0],z=B[1],G=(0,a.useCallback)(function(){return[(0,P.jsx)("span",{children:"... "},"see-more-ellipsis"),j?null:(0,P.jsx)(x,{$disabled:g,onClick:function(){g||A(!0)},children:"See more"},"see-more")]},[g,j]),U=(0,a.useCallback)(function(e,t){var n=e.label,r=n.text,o=n.start;return(0,P.jsx)("span",{style:{color:s.O9.sd1,cursor:"pointer"},onClick:function(){return S(r,_)},children:0===o?r:" ".concat(r)},"timestamp-".concat(t))},[_]),$=(0,a.useCallback)(function(e,t,n){if(t.startsWith("obj://user/")){var o=t.slice(11),i=(0,c.sB)({userName:o,group:T}),s=i.href,l=i.as;return(0,P.jsxs)(a.Fragment,{children:[F&&(0,P.jsx)(d.r,{label:e,href:s,as:l,underline:"none"}),!F&&(0,P.jsx)(p.Z,{component:"span",user:{id:o},group:T,showDialog:R[n]||!1,onDialogClose:function(){return z(function(e){return Z(Z({},e),{},(0,r.Z)({},n,!1))})},children:(0,P.jsx)("span",{children:(0,P.jsx)(d.r,{href:s,as:l,children:e})})})]},"link-".concat(n))}if(t.startsWith("obj://course/")){var u=/obj:\/\/course\/(.{32})\?cn=(.+)/.exec(t);if(u){var f=u[1],m=u[2],h=(0,c.rE)({course:{name:m},courseModule:f,group:T}),v=h.href,b=h.as;return(0,P.jsx)(d.r,{href:v,as:b,underline:"none",children:e},"link-".concat(n))}}return(0,P.jsx)("a",{href:(0,c.X2)(t),title:(0,c.X2)(t),target:"_blank",rel:"noopener noreferrer",children:e},"link-".concat(n))},[T,R,F]),W=(0,a.useMemo)(function(){if(!t)return null;var e=E?function(e){return function(e,t){var n={stop:!1,charCount:0,elements:[]},r=(0,l.fV)({content:e}),o=0;if(r.forEach(function(r,i){if(o<r.label.start-1){var a=(0,l.en)(e.slice(o,r.label.start-1));n.elements.push((0,P.jsx)("span",{children:a},"text-".concat(n.elements.length)))}o=r.destination.end+1;var s=t(r.label.text,r.destination.text,i);s&&n.elements.push(s)}),o<e.length){var i=(0,l.en)(e.slice(o));n.elements.push((0,P.jsx)("span",{children:i},"text-".concat(n.elements.length)))}return n}(e,$)}:function(e,t,n){var r,o=function(e,t,n,r,o,a,s){var c={stop:!1,charCount:t,elements:[]},u=(0,l.fV)({content:e}),d=s?(0,l.W1)({content:e}):[],p=[].concat((0,i.Z)(u),(0,i.Z)(d));s&&p.sort(function(e,t){return e.label.start>t.label.start?1:-1});var f=0;if(p.forEach(function(t,i){if(!c.stop){if(f<t.label.start-1){var s=(0,l.en)(e.slice(f,t.label.start-1)),u=r-c.charCount;if(c.charCount+=s.length,u>=s.length){if(c.elements.push((0,P.jsx)("span",{children:s},"text-".concat(c.elements.length))),u===s.length){c.stop=!0;return}}else if(n&&r-c.charCount>=-100)c.elements.push((0,P.jsx)("span",{children:s},"text-".concat(c.elements.length)));else{u>0&&c.elements.push((0,P.jsx)("span",{children:s.slice(0,u)},"text-".concat(c.elements.length))),c.stop=!0;return}}if(f=t.destination.end+1,t.destination.timestamp){var d=a(t,i);c.elements.push(d);return}var p=t.label.text,m=o(p,t.destination.text,i);if(m){c.elements.push(m),c.charCount+=p.length;var h=r-c.charCount;h<0&&(!n||h<-100)&&(c.stop=!0)}}}),c.stop&&n&&f>=e.length&&(c.stop=!1),!c.stop&&f<e.length){var m=(0,l.en)(e.slice(f)),h=r-c.charCount;c.charCount+=m.length,h>=m.length?c.elements.push((0,P.jsx)("span",{children:m},"text-".concat(c.elements.length))):n&&r-c.charCount>=-100?c.elements.push((0,P.jsx)("span",{children:m},"text-".concat(c.elements.length))):(h>0&&c.elements.push((0,P.jsx)("span",{children:m.slice(0,h)},"text-".concat(c.elements.length))),c.stop=!0)}return c}(e,t,n,v,$,U,I);return o.stop&&(r=o.elements).push.apply(r,(0,i.Z)(G())),o},n=t;h().isString(n)&&(n=(0,l.uq)({content:t,allowCode:!1,noLists:!0}).blocks);var r=!1,o=0;return n.map(function(t,i){if(!E&&r)return null;switch(t.type){case"code":var s=E?t.lines.map(function(e){return(0,l.en)(e)}).join("\n"):t.lines.map(function(e){if(o>v)return null;var t=(0,l.en)(e);return o+=t.length,t}).filter(function(e){return!h().isNull(e)}).join("\n");return r=v<o,(0,P.jsxs)(a.Fragment,{children:[(0,P.jsx)(y,{children:s}),!E&&r&&i<n.length-1&&(0,P.jsx)(x,{disabled:g,onClick:function(){g||A(!0)},children:"See more"})]},i);case"unorderedList":case"orderedList":var c="unorderedList"===t.type?O:k;return(0,P.jsx)(c,{start:t.start,children:t.lines.map(function(a,s){if(r)return null;var l=e(a,o,i===n.length-1&&s===t.lines.length-1);return r=l.stop,o=l.charCount,l.elements?(0,P.jsx)("li",{children:l.elements},s):null})},i);default:if(!t.lines||1!==t.lines.length)return console.error("invalid text block",t),null;if(!t.lines[0])return 0===i?null:(0,P.jsx)(C,{},i);var u=e(t.lines[0],o,i===n.length-1);return r=u.stop,o=u.charCount,u.elements?(0,P.jsx)(w,{children:u.elements},i):null}}).filter(function(e){return!!e})},[t,E,v,$,G,g,I,U]);return(0,P.jsx)(b,{$variant:n,$color:f,$textAlign:m,style:Z({},M),children:W})}_.defaultProps={textVariant:"t9",textColor:s.O9.n7,showMoreLimit:Number.MAX_SAFE_INTEGER};var M=(0,a.memo)(_)},53541:function(e,t,n){n.d(t,{h:function(){return w}});var r=n(59499),o=n(4730),i=n(5152),a=n.n(i),s=n(67294),l=n(20452),c=n(12967),u=n(12476),d=n(59607),p=n(50378),f=p.ZP.div.withConfig({displayName:"styled__EmojiPickerStyles",componentId:"sc-kal3bp-0"})(['.emoji-search{font-size:16px;line-height:1.5px;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:normal;font-style:normal;}']),m=p.ZP.div.withConfig({displayName:"styled__PreloadPicker",componentId:"sc-kal3bp-1"})(["display:none;"]),h=n(85893),v=["onClick"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=a()(function(){return n.e(8307).then(n.bind(n,63048))},{ssr:!1,loadableGenerated:{webpack:function(){return[63048]}}}),y={showPreview:!1},w=(0,s.memo)(function(e){var t=e.onClick,n=(0,o.Z)(e,v),r=(0,s.useState)(!1),i=r[0],a=r[1],p=(0,s.useRef)(),b=(0,s.useCallback)(function(e){var n;t(e.emoji),null===(n=p.current)||void 0===n||n.closeDropdown()},[t]),w=(0,s.useCallback)(function(){a(!0)},[]),C=(0,s.useMemo)(function(){return(0,h.jsx)(f,{children:(0,h.jsx)(x,{emojiStyle:(0,c.eE)()?"apple":"native",onEmojiClick:b,theme:(0,l.$o)()?"dark":"light",suggestedEmojisMode:"recent",width:288,height:370,previewConfig:y})})},[b]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u.h_,g(g({ref:p,customContent:C,contentPadding:0,onShow:w,shouldFlip:!0},n),{},{children:(0,h.jsx)(d.z,{variant:"icon-borderless",icon:"Emoji",iconSize:16})})),!i&&(0,h.jsx)(m,{children:C})]})})},34295:function(e,t,n){n.d(t,{g:function(){return X}});var r=n(90116),o=n(50029),i=n(59499),a=n(4730),s=n(64687),l=n.n(s),c=n(12476),u=n(96276),d=n(59607),p=n(66703),f=n(85064),m=n(67294),h=n(70131),v=n(73793),b=n(63144),g=n.n(b),x=n(30697),y=n(12967),w=function(e,t){var n=(0,m.useState)(e),r=n[0],o=n[1];return(0,m.useEffect)(function(){var n=setTimeout(function(){o(e)},t);return function(){clearTimeout(n)}},[e,t]),r},C=n(50378),j=n(20668),k=n(14251),O=n(47691),P=(0,C.F4)(["0%{background-color:",";}25%{background-color:",";}50%{background-color:",";}75%{background-color:",";}100%{background-color:",";}"],k.O9.n3,k.O9.n4,k.O9.n3,k.O9.n4,k.O9.n3),D=C.ZP.div.withConfig({displayName:"styled__GifPickerWrapper",componentId:"sc-2rxy6o-0"})(["height:396px;width:281px;max-width:100%;overflow:auto;> div{&:first-child{width:100%;padding:16px 16px 0px 16px;display:flex;flex-direction:column;align-items:center;padding-bottom:44px;> div{&:first-child{margin-bottom:16px;width:100%;height:40px;}}}}"]),I=C.ZP.div.withConfig({displayName:"styled__GifBlocksPlaceholder",componentId:"sc-2rxy6o-1"})(["width:100%;height:665px;"]),Z=C.ZP.div.withConfig({displayName:"styled__GifBlocks",componentId:"sc-2rxy6o-2"})(["display:flex;flex-wrap:wrap;justify-content:space-between;width:100%;"]),S=C.ZP.div.withConfig({displayName:"styled__GifItemWrapper",componentId:"sc-2rxy6o-3"})(["height:77px;margin-bottom:8px;width:calc(50% - 4px);border-radius:4px;overflow:hidden;cursor:pointer;background-size:400px;animation:"," 4s infinite linear;"],P),_=C.ZP.div.withConfig({displayName:"styled__GifItem",componentId:"sc-2rxy6o-4"})(["height:100%;width:100%;background-size:cover;background-position:center;"]),M=C.ZP.div.withConfig({displayName:"styled__Loader",componentId:"sc-2rxy6o-5"})(["padding:20px;"]),N=C.ZP.div.withConfig({displayName:"styled__PoweredByLogoContainer",componentId:"sc-2rxy6o-6"})(["background:",";position:absolute;bottom:0px;left:0px;height:44px;width:100%;display:flex;align-items:center;padding-left:12px;"],k.O9.n1),E=C.ZP.div.withConfig({displayName:"styled__PoweredByLogo",componentId:"sc-2rxy6o-7"})(["height:44px;width:106px;background-position:center;background-image:",";background-size:contain;background-repeat:no-repeat;"],function(e){var t=e.theme;return"url(".concat(t.isDarkTheme?"https://assets.skool.com/skool/1edbfc977420400caabd54d706899d0f.png":"https://assets.skool.com/skool/a73ebc0217dc4f6381a16b7cee53528b.png",")")}),A=C.ZP.div.withConfig({displayName:"styled__PickerInfo",componentId:"sc-2rxy6o-8"})(["color:",";padding:16px 0px;",""],k.O9.n5,j.c.t11),L=(0,C.ZP)(O.I).withConfig({displayName:"styled__SearchInput",componentId:"sc-2rxy6o-9"})(["height:40px;min-height:40px;"]),T=n(17674),F=n(73935),B=n(54361),R=n(88889),z=n(70299),G=C.ZP.div.withConfig({displayName:"styled__MobileGifPickerWrapper",componentId:"sc-1ddgthv-0"})(["position:relative;"]),U=C.ZP.div.withConfig({displayName:"styled__MobileGifPickerContent",componentId:"sc-1ddgthv-1"})(["position:fixed;z-index:1400;overflow:hidden;top:181px;left:50%;transform:translateX(-50%);border-radius:10px;background-color:",";"," ",""],k.O9.n1,z.Wn,z.KZ),$=C.ZP.div.withConfig({displayName:"styled__MobileGifPickerBackdrop",componentId:"sc-1ddgthv-2"})(["position:fixed;top:0;bottom:0;width:100%;z-index:1399;"]),W=n(85893),H=(0,m.forwardRef)(function(e,t){var n=e.pickerContent,r=e.onOpen,o=e.onClose,i=(0,B.C1)(),a=(0,T.Z)(i,3),s=a[0],l=a[1],c=a[2],u=(0,m.useRef)(),p=(0,m.useRef)();(0,R.P)(s);var f=(0,m.useCallback)(function(){l(),null==r||r()},[r,l]);(0,m.useEffect)(function(){(0,y.Dt)(navigator.userAgent)&&0===window.scrollY&&window.scrollTo(0,1)},[s]),(0,m.useImperativeHandle)(t,function(){return{closeDropdown:c}}),(0,B.YB)(function(){p.current&&(p.current.style.top=s?"".concat(30,"px"):null)},[s]);var h=(0,m.useCallback)(function(){c(),o()},[c,o]),v=(0,m.useMemo)(function(){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)($,{onClick:h}),(0,W.jsx)(U,{ref:p,children:n})]})},[n,h]);return(0,W.jsxs)(G,{children:[s&&(0,F.createPortal)(v,document.body),(0,W.jsx)("div",{ref:u,children:(0,W.jsx)(d.z,{variant:"icon-borderless",icon:"Gif",iconSize:40,onClick:f})})]})}),q=(0,m.memo)(H),V=["tooltip","onSelect","onOpen"];function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var X=(0,m.memo)(function(e){var t=e.tooltip,n=e.onSelect,i=e.onOpen,s=(0,a.Z)(e,V),b=(0,v.bI)("isMobile"),C=b.isMobile,j=b.dispatch,k=(0,m.useState)(""),O=k[0],P=k[1],T=w(O,500),F=(0,m.useState)(0),B=F[0],R=F[1],z=(0,m.useState)([]),G=z[0],U=z[1],$=(0,m.useState)(0),H=$[0],Y=$[1],X=(0,m.useState)(!1),K=X[0],Q=X[1],ee=(0,m.useRef)(!1),et=(0,m.useRef)(),en=(0,m.useCallback)(function(){Y(0),Q(!1),P(""),R(0),U([])},[]),er=(0,m.useCallback)(function(e){n(J(J({},e),{},{query:O.replace(/ /g,"-")||"_default_"})),en(),et.current.closeDropdown()},[n,en,O]),eo=(0,m.useCallback)((0,o.Z)(l().mark(function e(){var t,n,o,i;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,y.B7)({api_key:"eTYZVZGLxZxgS3w15EgAx6IgBwalxCoz",q:O||"happy",limit:16,offset:B,rating:"pg-13",language:"en"}),e.prev=1,ee.current=!0,e.next=5,g()("".concat("https://api.giphy.com/v1/gifs/search","?").concat(t));case 5:return n=e.sent,e.next=8,n.json();case 8:i=(o=e.sent).data.map(function(e){return{id:e.id,sm:e.images.fixed_height_small.url,md:e.images.fixed_height.url}}),o.data.length&&o.pagination.count!==o.pagination.total_count||Q(!0),U(function(e){return[].concat((0,r.Z)(e),[i])}),ee.current=!1,e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",j(x.bI,{message:"Something went wrong, please try again later.",severity:"error"}));case 18:case"end":return e.stop()}},e,null,[[1,15]])})),[O,j,B]);(0,m.useEffect)(function(){U([]),R(0),Q(!1),Y(0)},[T]),(0,m.useEffect)(function(){G.length||K||ee.current||(eo(),R(function(e){return e+16}))},[G,K,eo]);var ei=(0,m.useCallback)(function(e,t){return(0,W.jsx)(S,{onClick:function(){return er(e)},children:(0,W.jsx)(_,{style:{backgroundImage:'url("'.concat(e.sm,'")')}})},t)},[er]),ea=(0,m.useCallback)(function(e,t){var n=H-1330,r=H+1330,o=665*t;return n<o&&r>o?(0,W.jsx)(Z,{children:e.map(ei)},t):(0,W.jsx)(I,{},t)},[ei,H]),es=(0,m.useCallback)(function(e){e&&!ee.current&&(eo(),R(function(e){return e+16}))},[eo]),el=(0,m.useCallback)(function(e){P(e.target.value)},[]),ec=(0,m.useCallback)(function(){P("")},[]),eu=(0,m.useCallback)(function(e){Y(e.target.scrollTop)},[]),ed=(0,m.useMemo)(function(){if(K){var e;return(0,W.jsx)(A,{children:null!==(e=G[0])&&void 0!==e&&e.length?"End of results":"No results"})}return(0,W.jsx)(h.df,{onChange:es,children:(0,W.jsx)(M,{children:(0,W.jsx)(f.D,{})})})},[es,K,G]),ep=(0,m.useMemo)(function(){return(0,W.jsxs)(D,{onScroll:eu,children:[(0,W.jsxs)("div",{children:[(0,W.jsx)(L,{value:O,autoFocus:!0,staticLabel:!0,icon:"SearchIcon",placeholder:"Search",onClear:ec,testId:"gif-picker-input",onChange:el,prefix:(0,W.jsx)(u.J,{name:"Search",style:{height:20,width:20}}),inputProps:{"data-testid":"gif-picker-input"}}),G.map(ea),ed]}),(0,W.jsx)(N,{children:(0,W.jsx)(E,{})})]})},[G,O,ed,ea,ec,eu,el]);return C?(0,W.jsx)(q,{pickerContent:ep,onOpen:i,onClose:en,ref:et}):(0,W.jsx)(p.u,{content:t,placement:"top",children:(0,W.jsx)(c.h_,J(J({customContent:ep,onShow:i,onClose:en,ref:et,contentPadding:0,shouldFlip:!0},s),{},{children:(0,W.jsx)(d.z,{variant:"icon-borderless",icon:"Gif",iconSize:40})}))})})},17590:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(59499),o=n(4730),i=n(67294),a=n(12967),s=n(73793),l=n(60678),c=n(76667),u=n(50378),d=n(20668),p=u.ZP.div.withConfig({displayName:"styled__GroupAvatarInitials",componentId:"sc-4rjnbh-0"})([""," color:",";line-height:1;"],function(e){var t=e.$variant;return d.c[t]},function(e){return e.$color}),f=n(85893),m=["group","iconSize","disableLink","newTab","borderRadius"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){var t=e.group,n=e.iconSize,u=e.disableLink,d=e.newTab,v=e.borderRadius,b=(0,o.Z)(e,m),g=(0,s.bI)("isMobile").isMobile,x=(0,i.useMemo)(function(){var e=t.metadata.logoUrl,o=t.metadata.displayName,i={width:n,height:n,borderRadius:v||(g?"5px":"10px"),backgroundColor:t.metadata.color||"inherit",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none"};if(!e){var s=g?n>32?"t1":"t11":"t4";return(0,f.jsx)("div",{style:i,children:(0,f.jsx)(p,{$variant:s,$color:(0,a.zP)(t.metadata.color),children:t.metadata.initials})})}return(0,f.jsx)(c.q,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({variant:"rounded",style:i,alt:o,title:o,src:e},b))},[t,n,b,g,v]);return u?x:(0,f.jsx)(l.Z,{newTab:d,group:t,children:x})}v.defaultProps={iconSize:30};var b=(0,i.memo)(v)},56726:function(e,t,n){n.d(t,{Z:function(){return z}});var r=n(59499),o=n(67294),i=n(65009),a=n(14760),s=n(96276),l=n(14251),c=n(73793),u=n(85893),d=(0,o.memo)(function(e){var t,n=e.group,r=e.iconOnly,o=(0,c.bI)("isMobile").isMobile,d=(null==n||null===(t=n.metadata)||void 0===t?void 0:t.privacy)!==0,p=d?(0,u.jsx)(s.J,{name:"Private",color:l.O9.n5,size:14}):(0,u.jsx)(s.J,{name:"Public",color:l.O9.n5,size:14}),f=(0,u.jsx)(u.Fragment,{children:"".concat(d?"Private":"Public"," group")});return(0,u.jsxs)(i.X,{alignItems:"center",justifyContent:o?"center":"flex-start",children:[(0,u.jsx)("div",{style:{marginRight:8},children:p}),!r&&(0,u.jsx)(a.Z,{variant:"t11",color:l.O9.n5,ellipsis:!0,children:f})]})});d.defaultProps={iconOnly:!1};var p=(0,o.memo)(d),f=n(26201),m=n(5095),h=n(53531),v=n(91194),b=n(13053),g=n(11163),x=n(35306),y=n(50591),w=n(12967),C=n(84236),j=n(36581),k=n(73674),O=n(50378),P=(0,O.ZP)(i.X).withConfig({displayName:"styled__StatsRow",componentId:"sc-1ptbmdu-0"})(["justify-content:space-around;border-width:1px 0px;border-color:",";border-style:solid;padding:8px 0px;& > *{flex:1 1 0;}"],l.O9.n3),D=(0,o.memo)(function(){var e,t,n=(0,c.bI)("currentGroup","self","isMobile"),r=n.currentGroup,s=n.self,d=n.isMobile,p=(0,o.useState)((null==r||null===(e=r.metadata)||void 0===e?void 0:e.totalMembers)||0),f=p[0],m=p[1],v=(0,o.useState)((null==r||null===(t=r.metadata)||void 0===t?void 0:t.totalOnlineMembers)||0),b=v[0],g=v[1],x=(0,o.useState)((null==r?void 0:r.onlineUsers)||[]),O=x[0],D=x[1],I=(0,o.useState)(0),Z=I[0],S=I[1],_=(0,o.useRef)(O.map(function(e){return e.id})),M=(0,o.useRef)(!1),N=(0,o.useRef)(),E=(0,w.s$)()?o.useEffect:o.useLayoutEffect;(0,o.useEffect)(function(){M.current=!0;var e,t=(null===(e=N.current)||void 0===e?void 0:e.clientWidth)||0;return S(t>0?Math.floor((t+2)/27):9),function(){M.current=!1}},[]),(0,o.useEffect)(function(){if((0,h.Rj)({member:null==s?void 0:s.member}))return(0,y.Ld)([(0,y.aN)(r.id)],function(e){if(M.current){m(e.totalMembers||0),g(e.totalOnlineMembers||0);var t=e.onlineUsers||[];(_.current.length!==t.length||t.find(function(e,t){return e.id!==_.current[t]}))&&(_.current=t.map(function(e){return e.id}),D(e.onlineUsers||[]))}})},[r.id,s]),E(function(){if(r&&M.current){m(null===(e=r.metadata)||void 0===e?void 0:e.totalMembers),g(null===(t=r.metadata)||void 0===t?void 0:t.totalOnlineMembers);var e,t,n=r.onlineUsers||[];(_.current.length!==n.length||n.find(function(e,t){return e.id!==_.current[t]}))&&(_.current=n.map(function(e){return e.id}),D(r.onlineUsers||[]))}},[r]);var A=(0,o.useMemo)(function(){var e,t=s&&(0,h.Wr)({member:null==s?void 0:s.member,group:r})||(null==r||null===(e=r.metadata)||void 0===e?void 0:e.privacy)===0,n=[];return t&&O.length&&Z>0&&O.forEach(function(e){n.push((0,u.jsx)(k.Z,{userPreview:!0,size:25,user:e,group:r},e.id))}),n=n.slice(0,Z)},[s,r,O,Z]),L=(0,o.useMemo)(function(){var e;return(0,u.jsxs)(j.s,{gap:16,children:[(0,u.jsxs)(P,{children:[(0,u.jsx)("div",{style:{position:"relative"},children:(0,u.jsx)(C.Z,{group:r,children:(0,u.jsxs)(j.s,{alignItems:"center",children:[(0,u.jsx)(a.Z,{variant:"t4",children:(0,w.TN)(f)}),(0,u.jsx)(a.Z,{variant:"t11",color:l.O9.n5,children:"Members"})]})})}),(0,u.jsx)(C.Z,{group:r,online:!0,children:(0,u.jsxs)(j.s,{alignItems:"center",style:{borderWidth:"0px 1px",borderColor:l.O9.n3,borderStyle:"solid"},children:[(0,u.jsx)(a.Z,{variant:"t4",children:(0,w.TN)(b)}),(0,u.jsx)(a.Z,{variant:"t11",color:l.O9.n5,children:"Online"})]})}),(0,u.jsx)(C.Z,{group:r,admin:!0,children:(0,u.jsxs)(j.s,{alignItems:"center",children:[(0,u.jsx)(a.Z,{variant:"t4",children:null==r||null===(e=r.metadata)||void 0===e?void 0:e.totalAdmins}),(0,u.jsx)(a.Z,{variant:"t11",color:l.O9.n5,children:"Admins"})]})})]}),!!A.length&&(0,u.jsx)(i.X,{gap:2,justifyContent:d?"center":"flex-start",children:A})]})},[d,A,r,f,b]);return(0,u.jsx)("div",{ref:N,children:L})}),I=n(21877),Z=n(70120),S=n(59607),_=n(79698),M=n(20668),N=O.ZP.div.withConfig({displayName:"styled__MobileGroupCardWrapper",componentId:"sc-ls68c6-0"})(["background-color:",";border-bottom:1px solid ",";"],l.O9.n1,l.O9.n3),E=O.ZP.div.withConfig({displayName:"styled__MobileGroupCardContentWrapper",componentId:"sc-ls68c6-1"})(["padding:12px 16px 16px;display:flex;flex-direction:column;align-items:center;"]),A=O.ZP.div.withConfig({displayName:"styled__MobileGroupCardImageWrapper",componentId:"sc-ls68c6-2"})(["& img{width:100%;}"]),L=O.ZP.div.withConfig({displayName:"styled__GroupLinkWrapper",componentId:"sc-ls68c6-3"})(["display:flex;align-items:center;justify-content:",";"],function(e){return e.theme.isMobile?"center":void 0}),T=O.ZP.div.withConfig({displayName:"styled__GroupNameWrapper",componentId:"sc-ls68c6-4"})(["",""],M.c.t4),F=O.ZP.div.withConfig({displayName:"styled__GroupDescriptionWrapper",componentId:"sc-ls68c6-5"})(["",""],M.c.t7);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}l.O9.n5,M.c.t11,l.O9.n1;var z=(0,o.memo)(function(e){var t,n,r=e.group,i=e.canAccessGroup,a=e.groupPrivacyMessage,d=(0,c.bI)("self","isMobile"),y=d.self,w=d.isMobile,C=d.dispatch,j=(0,g.useRouter)(),k=(null==y||null===(t=y.member)||void 0===t?void 0:t.role)||"",O=(0,o.useState)(!1),P=O[0],M=O[1],B=(0,m.VO)(j.query),z=(0,h.CP)({user:y,member:null==y?void 0:y.member,group:r}),G=(null==r||null===(n=r.metadata)||void 0===n?void 0:n.archived)===1,U="userMembership";z&&(U=G?"adminBilling":"adminInvite"),(0,o.useEffect)(function(){B&&(0,v.cq)(j,(0,m.AZ)({groupName:r.name}))},[B,r.name,j]);var $=(0,o.useCallback)(function(){M(!1)},[M]),W=(0,o.useCallback)(function(){C("setSettingsModalState",function(e){return R(R({},e),{},{settingsModal:U})})},[C,U]),H=null;switch(k){case _.oN:case _.xC:case _.bD:break;case _.th:case _.JR:default:H=(0,u.jsx)(I.F,{})}var q=(0,o.useMemo)(function(){var e,t=(null!==(e=r.metadata)&&void 0!==e&&e.links?JSON.parse(r.metadata.links):{}).links,n=void 0===t?[]:t;if(!n.length)return null;var o={color:l.O9.n5,height:12,width:12,marginRight:8,flexShrink:0,flexBasis:12},i={color:l.O9.n5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"};return(0,u.jsx)(u.Fragment,{children:n.map(function(e,t){return(0,u.jsxs)(L,{children:[(0,u.jsx)(s.J,{name:"Link",style:o}),(0,u.jsx)(Z.r,{href:e.url,label:e.label||e.url,style:i,newTab:!0})]},t)})})},[r]);if(w){var V=r.metadata.logoBigUrl;return(0,u.jsxs)(N,{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)(A,{children:(0,u.jsx)("img",{src:V})}),(0,u.jsxs)(E,{children:[(0,u.jsx)("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:(0,u.jsx)(T,{children:(0,u.jsx)(x.Z,{group:r,disableLink:!0})})}),(0,u.jsx)("div",{style:{marginBottom:16},children:(0,u.jsx)(p,{group:r})}),(0,u.jsxs)("div",{style:{marginBottom:16},children:[!r.metadata.description&&z&&(0,u.jsx)(F,{children:"Add your group description here by clicking the “Settings” button."}),r.metadata.description&&(0,u.jsx)(b.ZP,{value:r.metadata.description,textVariant:"t7",textColor:l.O9.n7,textAlign:"center"})]}),(0,u.jsx)("div",{style:{marginBottom:16},children:q}),(0,u.jsx)("div",{style:{width:"100%",marginBottom:w?24:16},children:(0,u.jsx)(D,{})}),a&&(0,u.jsx)("div",{style:{width:"100%",marginBottom:16},children:a}),i&&(k===_.oN||k===_.xC||k===_.bD)&&(0,u.jsx)(S.z,{label:"Settings",variant:"secondary",onClick:W}),!!H&&H]})]}),(0,u.jsx)(f.Z,{type:"group",open:P,onClose:$})]})}return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{style:{marginBottom:16},children:[(0,u.jsx)("div",{style:{marginBottom:4},children:(0,u.jsx)(T,{children:(0,u.jsx)(x.Z,{group:r})})}),(0,u.jsx)("div",{children:(0,u.jsx)(p,{group:r})})]}),(0,u.jsxs)("div",{style:{marginBottom:16},children:[(0,u.jsxs)("div",{style:{marginBottom:12},children:[!r.metadata.description&&z&&(0,u.jsx)(F,{children:"Add your group description here by clicking the “Settings” button."}),r.metadata.description&&(0,u.jsx)(b.ZP,{value:r.metadata.description,textVariant:"t7"})]}),q]}),(0,u.jsx)("div",{style:{marginBottom:16},children:(0,u.jsx)(D,{})}),i&&(k===_.oN||k===_.xC||k===_.bD)&&(0,u.jsx)(S.z,{onClick:function(){return C("setSettingsModalState",function(e){return R(R({},e),{},{settingsModal:U})})},label:"Settings",variant:"secondary",style:{width:"100%"}}),!!H&&(0,u.jsx)("div",{style:{marginBottom:8},children:H})]}),(0,u.jsx)(f.Z,{type:"group",open:P,onClose:$})]})})},193:function(e,t,n){var r=n(67294),o=n(14760);n(20668);var i=n(17590),a=n(35306),s=n(65009),l=n(85893);function c(e){var t=e.group,n=e.iconSize,r=e.variant,c=e.iconOnly,u=e.disableLink,d=e.borderRadius;return(0,l.jsxs)(s.X,{gap:8,alignItems:"center",children:[(0,l.jsx)(i.Z,{group:t,iconSize:n,disableLink:u,borderRadius:d}),!c&&(0,l.jsx)(o.Z,{variant:r,style:{lineHeight:1.2,textTransform:"inherit"},children:(0,l.jsx)(a.Z,{group:t,underline:"none",disableLink:u})})]})}c.defaultProps={iconSize:30,variant:"t1",iconOnly:!1,disableLink:!1},t.Z=(0,r.memo)(c)},35306:function(e,t,n){var r=n(67294),o=n(60678),i=n(85893);function a(e){var t=e.group,n=e.disableLink,r=e.underline,a=t?t.metadata.displayName:"";return!t||n?a:(0,i.jsx)(o.Z,{group:t,underline:r,children:a})}a.defaultProps={underline:"hover"},t.Z=(0,r.memo)(a)},11990:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(50029),o=n(64687),i=n.n(o),a=n(67294),s=n(83913),l=n(95419),c=n(14251),u=n(64727),d=n(42668),p=n(73793),f=n(20452),m=n(36581),h=n(16531),v=n(50378),b=n(59607),g=n(65009),x=n(20668),y=(0,v.ZP)(b.z).withConfig({displayName:"styled__ConfirmButton",componentId:"sc-1xokg6b-0"})(["width:100%;"]),w=v.ZP.div.withConfig({displayName:"styled__DragLabel",componentId:"sc-1xokg6b-1"})(["text-align:center;color:",";",";"],function(e){return e.theme.isDarkTheme?c.O9.n7:c.O9.n1},x.c.t7),C=v.ZP.div.withConfig({displayName:"styled__ZoomLabel",componentId:"sc-1xokg6b-2"})(["color:",";",";"],function(e){return e.theme.isDarkTheme?c.O9.n7:c.O9.n1},x.c.t7),j=(0,v.iv)(["display:none;"]),k=(0,v.ZP)(g.X).withConfig({displayName:"styled__ChangeImageRow",componentId:"sc-1xokg6b-3"})(["justify-content:center;margin-top:16px;",";",""],x.c.t7,function(e){return e.theme.isMobile&&j}),O=v.ZP.span.withConfig({displayName:"styled__ChangeImageLink",componentId:"sc-1xokg6b-4"})(["cursor:pointer;color:",";"],c.O9.sd1),P=(0,v.iv)(["background:",";height:2px;background:linear-gradient( 90deg,"," 0%,"," var(--percentage),","61 var(--percentage),","61 100% );"],c.O9.n3,c.O9.n3,c.O9.n3,c.O9.n5,c.O9.n5),D=(0,v.iv)(["-webkit-appearance:none;appearance:none;margin-top:-6px;border:none;border-radius:50%;background-color:",";height:14px;width:14px;"],c.O9.primary),I=v.ZP.input.withConfig({displayName:"styled__Slider",componentId:"sc-1xokg6b-5"})(["-webkit-appearance:none;appearance:none;background:transparent;cursor:pointer;margin:0;width:100%;height:15px;&::-webkit-slider-runnable-track{","}&::-moz-range-track{","}&::-ms-track{","}&::-webkit-slider-thumb{","}&::-moz-range-thumb{","}&::-ms-thumb{","}"],P,P,P,D,D,D),Z=n(85893),S=(0,f.$o)();function _(){return(_=(0,r.Z)(i().mark(function e(t,n,r){var o,a,s,l,c,u,p,f,m,h,v,b,g;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(o=document.createElement("canvas")).getContext("2d"),l=Math.sqrt(Math.min(1,16777216/((s=2*Math.max(t.width,t.height))*s))),s*=l,o.width=s,o.height=s,c=s/2-.5*t.width*l,u=s/2-.5*t.height*l,p=t.width*l,f=t.height*l,a.drawImage(t,c,u,p,f),m=a.getImageData(0,0,s,s),h=n.width*l,v=n.height*l,o.width=h,o.height=v,b=0-s/2+.5*t.width*l-n.x*l,g=0-s/2+.5*t.height*l-n.y*l,a.putImageData(m,b,g),e.abrupt("return",(0,d.Bi)({src:o.toDataURL(r)}));case 22:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(e,t,n,r){var o=document.createElement("canvas"),i=o.getContext("2d");return o.width=t,o.height=n,i.drawImage(e,0,0,t,n),new Promise(function(e){o.toBlob(function(t){return e(t)},r)})}function N(e){var t=e.open,n=e.image,o=e.imageContentType,d=e.title,f=e.cropShape,v=e.minWidth,b=e.minHeight,g=e.uploadFileName,x=e.onSuccess,j=e.onError,P=e.onCancel,D=e.waitForPostProcessing,N=e.fileInputRef,E=e.fileOwnerID,A=(0,a.useState)(null),L=A[0],T=A[1],F=(0,a.useState)(!1),B=F[0],R=F[1],z=(0,a.useState)({x:0,y:0}),G=z[0],U=z[1],$=(0,a.useState)(1),W=$[0],H=$[1],q=(0,a.useState)(null),V=q[0],Y=q[1],J=(0,p.bI)("self","isMobile"),X=J.self,K=J.isMobile,Q=v/b,ee=Math.max(1,Math.min(n.width/v,n.height/b));(0,a.useEffect)(function(){T(n.toDataURL(o)),H(1),U({x:0,y:0}),Y(null)},[n,o]);var et=(0,a.useCallback)(function(e,t){Y(t)},[]),en=(0,a.useCallback)((0,r.Z)(i().mark(function e(){var t,r,o,a,s,c;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),t="image/jpeg",e.next=4,function(e,t,n){return _.apply(this,arguments)}(n,V,t);case 4:if(!((r=e.sent).height<b||r.width<v)){e.next=11;break}return e.next=8,M(r,r.width,r.height,t);case 8:o=e.sent,e.next=14;break;case 11:return e.next=13,M(r,v,b,t);case 13:o=e.sent;case 14:return e.next=16,l.Z.createFile({fileName:"".concat(g,".jpg"),contentType:t,contentLength:o.size,ownerID:E});case 16:if(s=(a=e.sent).data,!a.error){e.next=22;break}return j&&j("Failed to upload profile picture"),e.abrupt("return");case 22:return e.prev=22,e.next=25,(0,u.cT)({fileID:s.file.id,writeUrl:s.writeUrl,acl:s.acl,contentType:s.contentType,data:o,timeout:6e4,waitToken:D?s.waitToken:void 0,userID:D?null==X?void 0:X.id:void 0});case 25:(c=e.sent)&&x&&x(c),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(22),j&&j("Failed to process profile picture");case 32:case"end":return e.stop()}},e,null,[[22,29]])})),[V,E,n,b,v,j,x,X,g,D]);(0,a.useEffect)(function(){K&&V&&n&&en()},[K,en,n,V]);var er=(0,a.useCallback)(function(e){H(e.target.value)},[]),eo=(0,a.useMemo)(function(){return{position:"relative",minWidth:200,minHeight:200,backgroundColor:"#000000",marginTop:20}},[]),ei=(0,a.useMemo)(function(){return Math.floor(10*ee)/10},[ee]),ea=(0,a.useMemo)(function(){return"".concat((W-1)/(ei-1)*100,"%")},[ei,W]),es=(0,Z.jsxs)(m.s,{style:{backgroundColor:"#000000",borderRadius:10,visibility:K?"hidden":void 0,height:K?0:void 0,overflow:K?"hidden":void 0},gap:4,marginBottom:16,children:[(0,Z.jsx)("div",{style:eo,children:(0,Z.jsx)(s.Z,{cropShape:f,image:L,crop:G,zoom:W,maxZoom:ee,aspect:Q,showGrid:!0,onCropChange:U,onCropComplete:et,style:{cropAreaStyle:{border:"2px solid ".concat(S?c.O9.n7:c.O9.n1)}},onZoomChange:H})}),1!==ee&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(w,{children:"Drag to reposition photo"}),(0,Z.jsx)("div",{style:{paddingLeft:18,paddingRight:16},children:(0,Z.jsx)(C,{children:"Zoom"})}),(0,Z.jsx)("div",{style:{padding:"6px 16px 6px 18px"},children:(0,Z.jsx)(I,{type:"range",value:W,min:1,max:ei,step:.1,onChange:er,style:{"--percentage":ea}})})]})]});return(0,Z.jsxs)(h.u_,{open:t,size:"small",onClose:P,children:[(0,Z.jsx)(h.xB,{style:{textAlign:"center"},children:K?"Uploading image...":d}),(0,Z.jsx)(h.fe,{children:es}),(0,Z.jsxs)(h.mz,{children:[(0,Z.jsx)(y,{label:B?"Processing...":"Save",onClick:en,disabled:B}),N?(0,Z.jsxs)(k,{justifyContent:"center",marginTop:16,children:["Or,","\xa0",(0,Z.jsx)(O,{onClick:function(){N.current.click(),N.current.value=null},children:"upload a different photo"})]}):void 0]})]})}N.defaultProps={cropShape:"round"};var E=(0,a.memo)(N)},21877:function(e,t,n){n.d(t,{F:function(){return I}});var r=n(50029),o=n(64687),i=n.n(o),a=n(67294),s=n(73793),l=n(14251),c=n(59607),u=n(11163),d=n(95419),p=n(5095),f=n(91194),m=n(99802),h=n(53531),v=n(67256),b=n(79698),g=n(30697),x=n(50378),y=n(20668),w=x.ZP.div.withConfig({displayName:"styled__JoinGroupButtonWrapper",componentId:"sc-f3r574-0"})(["display:flex;flex-direction:column;"]),C=(0,x.iv)(["text-align:center;margin-top:16px;"]),j=x.ZP.div.withConfig({displayName:"styled__MembershipMessage",componentId:"sc-f3r574-1"})(["margin-top:8px;"," color:",";",""],y.c.t11,l.O9.n5,function(e){return e.theme.isMobile&&C});l.O9.n1;var k=x.ZP.button.withConfig({displayName:"styled__CancelButton",componentId:"sc-f3r574-4"})(["background:none;border:none;cursor:pointer;padding:0 5px;margin-top:8px;align-self:center;color:",";"," &:hover{text-decoration:underline;}"],l.O9.n5,y.c.t11),O=n(97221),P=n(5212),D=n(85893),I=(0,a.memo)(function(e){var t,n=e.joinLabel,o=e.autoJoin,x=void 0===o||o,y=(0,s.bI)("self","isMobile","currentGroup","canShowSurvey","joinGroupPending"),C=y.self,P=y.isMobile,I=y.dispatch,Z=y.canShowSurvey,S=y.currentGroup,_=y.joinGroupPending,M=(0,u.useRouter)(),N=(null==C||null===(t=C.member)||void 0===t?void 0:t.role)||"",E=(0,p.VO)(M.query);(0,a.useEffect)(function(){E&&((0,f.cq)(M,(0,p.AZ)({groupName:S.name})),I(g.Nb,!1))},[E,S,M,I]);var A=(0,a.useCallback)(function(){P?(0,f.gx)(M,(0,p.jQ)({group:S,pending:!0})):(0,f.gx)(M,(0,p.AZ)({groupName:S.name,pending:!0}))},[P,M,S]),L=(0,a.useCallback)((0,r.Z)(i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,f.gx)(M,(0,p.AZ)({groupName:S.name}));case 1:case"end":return e.stop()}},e)})),[M,S]),T=(0,a.useCallback)(function(){I(g.nx,!0)},[I]),F=(0,a.useCallback)((0,r.Z)(i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.cancelJoinGroup({groupName:S.name});case 2:return e.sent.error&&(0,v.Lx)({message:"There was an issue with your request, please try again.",severity:"error"}),e.next=7,(0,f.H5)(M);case 7:case"end":return e.stop()}},e)})),[M,null==S?void 0:S.name]),B=(0,a.useMemo)(function(){return N===b.JR&&Z?(0,D.jsx)(c.z,{onClick:T,label:"Answer Questions",style:{width:"100%"}}):null},[N,Z,T]),R=(0,a.useMemo)(function(){var e="",t="JOIN GROUP",r=null,o=null;if(null!=S&&null!==(i=S.metadata)&&void 0!==i&&i.currentMBp){var i,a,s=(0,m.O5)(JSON.parse(null==S||null===(a=S.metadata)||void 0===a?void 0:a.currentMBp));t="JOIN ".concat(s," /month")}switch(n&&(t=n),N){case b.oN:case b.xC:case b.bD:break;case b.th:e="Sorry, you've been banned from this group.",r=(0,D.jsx)(c.z,{label:"Banned",disabled:!0,style:{width:"100%"}});break;case b.JR:o=(0,D.jsx)(k,{type:"button",onClick:F,children:"Cancel membership request"}),r=(0,D.jsx)(O.Z,{showDialog:E?"pending":"",children:function(){return(0,D.jsx)(c.z,{disabled:!0,label:"Membership Pending",style:{width:"100%",color:l.O9.n7}})}});break;default:r=(0,D.jsx)(O.Z,{reason:h.lT.JoinGroup,onSuccess:L,onPending:A,showSignUp:!0,joinGroup:!0,autoJoin:x,children:function(e){var n=e.onClick;return(0,D.jsx)(c.z,{onClick:n,label:t,boxShadow:!0,disabled:_,style:{width:"100%",textTransform:"none",padding:"0px 16px"}})}})}return{membershipMessage:e?(0,D.jsx)(j,{children:e}):null,membershipButton:r,cancelRequestButton:o}},[L,F,S,E,N,A,_,n,x]),z=R.membershipMessage,G=R.membershipButton,U=R.cancelRequestButton;return(0,D.jsxs)(w,{children:[G,!!B&&(0,D.jsx)("div",{style:{marginTop:8,width:"100%"},children:B}),U,z]})});I.propTypes={joinLabel:(0,P.nz)({required:!1}),autoJoin:(0,P.gZ)({required:!1})}},26201:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(90116),o=n(4730),i=n(59499),a=n(50029),s=n(64687),l=n.n(s),c=n(67294),u=n(12476),d=n(73793),p=n(95419),f=n(96486),m=n.n(f),h=n(30697),v=n(36581),b=n(64597),g=[{key:"digest",header:"Digest email frequency",label:"A summary of popular posts and member activity when you don’t visit the group",defaultLabel:"Weekly",selections:[{value:"1d",label:"Daily"},{value:"7d",label:"Weekly"},{value:"14d",label:"Every 14-Days"},{value:"30d",label:"Monthly"},{value:"off",label:"Never"}]},{header:"Notifications email frequency",key:"emails",label:"A bundled summary of unread likes, comments, mentions and activity for posts/members I follow",defaultLabel:"Hourly",selections:[{value:"5m",label:"5-mins"},{value:"1h",label:"Hourly"},{value:"3h",label:"3-hours"},{value:"6h",label:"6-hours"},{value:"12h",label:"12-hours"},{value:"1d",label:"Daily"},{value:"2d",label:"Every 2nd day"},{value:"7d",label:"Weekly"},{value:"off",label:"Never"}]},{key:"likes",header:"Post likes notifications",label:"Notify me when somebody likes my post",defaultLabel:"Notify me",selections:[{value:"on",label:"Notify me"},{value:"off",label:"Don't notify me"}]},{key:"admin-posts",header:"Admin announcements",label:"Notify me when group admins make announcement posts",defaultLabel:"Yes",selections:[{value:"on",label:"Yes"},{value:"off",label:"No"}]},{key:"calendar-event",header:"Event reminders",label:"Notify me of calendar events the day before they happen",defaultLabel:"Yes (default)",selections:[{value:"on",label:"Yes (default)"},{value:"off",label:"No"}]}],x=[{key:"new-post",labelFunc:function(e){var t=e.firstName;return"When ".concat(t," posts in a group I’m in")},defaultLabel:"Notify me",selections:[{value:"on",label:"Notify me"},{value:"off",label:"Don't notify me"}]},{key:"new-comment",labelFunc:function(e){var t=e.firstName;return"When ".concat(t," comments in a group I’m in")},defaultLabel:"Don't notify me",selections:[{value:"on",label:"Notify me"},{value:"off",label:"Don't notify me"}]}],y=[{key:"new-member-billing-email",header:"New customer emails",label:"Notify me when my group gets a new customer",defaultLabel:"Yes (default)",selections:[{value:"on",label:"Yes (default)"},{value:"off",label:"No"}]}],w=n(50378),C=n(20668),j=w.ZP.div.withConfig({displayName:"styled__PrefHeader",componentId:"sc-214xon-0"})(["",""],C.c.t4),k=w.ZP.div.withConfig({displayName:"styled__PrefLabel",componentId:"sc-214xon-1"})(["word-wrap:break-word;",""],C.c.t7),O=w.ZP.div.withConfig({displayName:"styled__DropdownMenuWrapper",componentId:"sc-214xon-2"})(["margin-top:16px;width:100%;> div > div:first-child{width:100%;button{width:100%;}}"]),P=n(85893),D=["key"];function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var S=(0,c.memo)(function(e){var t,n=e.onClose,s=e.open,f=e.type,w=e.group,C=e.handleUpdated,I=(0,c.useState)({}),S=I[0],_=I[1],M=(0,c.useState)(!0),N=M[0],E=M[1],A=(0,d.bI)("currentGroup","currentUser"),L=A.currentGroup,T=A.currentUser,F=A.dispatch,B=(0,c.useRef)(null),R="group"===f,z=w||L,G=R?"nfg-".concat(null==z?void 0:z.id):"nfu-".concat(null==T?void 0:T.id);(0,c.useEffect)(function(){(0,a.Z)(l().mark(function e(){var t,n;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=8;break}return E(!0),e.next=4,p.Z.getPrefs({category:G});case 4:null!=(t=e.sent.data)&&t.length?(n={},t.forEach(function(e){var t=e.key,r=e.value;n[t]=r}),_(n),B.current=n):(B.current={},_({})),E(!1);case 8:case"end":return e.stop()}},e)}))()},[s,R,G]);var U=(0,c.useCallback)((0,a.Z)(l().mark(function e(){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),t=Object.keys(S).map(function(e){return{key:e,value:S[e]}}),e.next=4,p.Z.postPrefs({category:G,body:t});case 4:F(h.bI,{message:"Notification settings updated"}),E(!1),n(),C&&C();case 8:case"end":return e.stop()}},e)})),[G,F,C,n,S]),$=(0,c.useCallback)(function(e,t){_(function(n){return Z(Z({},n),{},(0,i.Z)({},e,t))})},[]),W=(0,c.useCallback)(function(e){var t=e.key,n=(0,o.Z)(e,D);return Z(Z({key:t},n),{},{selections:n.selections.map(function(e){return Z(Z({},e),{},{active:S[t]?S[t]===e.value:n.defaultLabel===e.label,onClick:function(){return $(t,e.value)}})})})},[$,S]),H=(0,c.useMemo)(function(){var e=g.map(W);if(null!=z&&z.billingMgr){var t=y.map(W);return[].concat((0,r.Z)(e),(0,r.Z)(t))}return e},[W,null==z?void 0:z.billingMgr]),q=(0,c.useMemo)(function(){return x.map(W)},[W]),V=(0,c.useCallback)(function(e,t){var n,r=e.key,o=e.label,i=e.labelFunc,a=e.defaultLabel,s=e.selections,l=e.header,c=s.find(function(e){return e.value===S[r]}),d=null!==(n=null==c?void 0:c.label)&&void 0!==n?n:a;return(0,P.jsxs)(v.s,{gap:8,children:[(0,P.jsx)(j,{children:l}),(0,P.jsx)(k,{children:R?o:i(T)}),(0,P.jsx)(O,{children:(0,P.jsx)(u.h_,{variant:"input",fitButton:!0,label:d,options:s,shouldFlip:!0})})]},t)},[T,R,S]),Y=R?H:q;return(0,P.jsx)(b.T,{size:"small",open:s,header:R?null==z||null===(t=z.metadata)||void 0===t?void 0:t.displayName:"".concat(null==T?void 0:T.firstName," ").concat(null==T?void 0:T.lastName),disabled:N||m().isEqual(B.current,S),onConfirm:U,onCancel:n,onClose:n,confirmLabel:"Save",scrollable:!0,children:(0,P.jsxs)(v.s,{gap:32,children:["Notification settings",(0,P.jsx)(v.s,{gap:32,children:Y.map(V)})]})})})},66271:function(e,t,n){n.d(t,{t:function(){return I}});var r=n(50029),o=n(64687),i=n.n(o),a=n(67294),s=n(12476),l=n(96276),c=n(59607),u=n(85064),d=n(73793),p=n(50378),f=n(20668),m=n(14251),h=p.ZP.div.withConfig({displayName:"styled__PaymentMethodFieldDropdownWrapper",componentId:"sc-td3dmq-0"})(["display:flex;flex-direction:column;> div{> div:first-child{width:100%;> button{width:100%;}}}"]),v=p.ZP.div.withConfig({displayName:"styled__PaymentMethodItem",componentId:"sc-td3dmq-1"})(["display:flex;align-items:center;> img{width:24px;margin-right:14px;border-radius:2px;border:1px solid ",";}> div{text-transform:capitalize;","}"],m.O9.n3,f.c.t6),b=(0,p.ZP)(v).withConfig({displayName:"styled__AddNewCardItem",componentId:"sc-td3dmq-2"})(["padding-left:6px;> div:first-child{height:14px;width:14px;margin-right:20px;color:",";}> div{text-transform:none;}"],m.O9.n5),g=p.ZP.div.withConfig({displayName:"styled__AddNewCardWrapper",componentId:"sc-td3dmq-3"})(["display:flex;flex-direction:column;"]),x=p.ZP.div.withConfig({displayName:"styled__NewCardLabel",componentId:"sc-td3dmq-4"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;"," > button{align-self:flex-end;height:fit-content;width:fit-content;}"],f.c.t11),y=n(95419),w=n(5565),C=n(23332),j=n(30697),k=n(85893),O=(0,a.forwardRef)(function(e,t){var n=e.paymentMethodsCount,o=e.onReady,s=e.addPaymentMethod,l=void 0===s||s,c=e.paymentElementOnChange,u=(0,d.bI)().dispatch,p=(0,a.useState)(null),f=p[0],m=p[1],h=(0,a.useState)(!1),v=h[0],b=h[1],g=(0,a.useRef)(),x=(0,a.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"There was an issue with your request, please try again.";u(j.bI,{message:e,severity:"error"})},[u]),w=(0,a.useCallback)((0,r.Z)(i().mark(function e(){var t,n;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.Z.createMembershipBilling();case 2:n=(t=e.sent).data,(t.error||!(null!=n&&n.clientSecret))&&x(),m(n);case 7:case"end":return e.stop()}},e)})),[x]);return(0,a.useEffect)(function(){w()},[w]),(0,a.useImperativeHandle)(t,function(){var e;return{refetchIntent:w,addNewCard:(e=(0,r.Z)(i().mark(function e(){var t,r,o,a,s;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.current.handleIntentConfirmation("setupIntent");case 3:t=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),b(!1),e.abrupt("return",{stripeError:e.t0.message||!0});case 10:if(!l){e.next=22;break}return e.next=13,y.Z.addPaymentMethod({paymentToken:t,setupIntentId:f.setupIntentId});case 13:if(a=(o=e.sent).data,s=o.error,(null==a||null===(r=a.paymentMethods)||void 0===r?void 0:r.length)!==n){e.next=19;break}return x("Card already added"),e.abrupt("return",{stripeError:!0});case 19:if(!s){e.next=22;break}return x(),e.abrupt("return",{stripeError:!0});case 22:return e.abrupt("return",{id:t,newCard:!0});case 23:case"end":return e.stop()}},e,null,[[0,6]])})),function(){return e.apply(this,arguments)})}}),(0,k.jsx)(C.Z,{onReady:o,isBilling:!0,ref:g,style:{margin:0},isLoading:v,intentClientSecret:null==f?void 0:f.clientSecret,paymentElementOnChange:c})}),P=(0,a.memo)(O),D=(0,a.forwardRef)(function(e,t){var n=e.onAddNewCard,o=e.fetchPayments,p=void 0===o||o,f=e.paymentMethods,m=e.addPaymentMethod,C=e.allowAddNewCard,j=void 0===C||C,O=e.label,D=e.onPaymentMethodChange,I=e.initialPaymentId,Z=e.hiddenCards,S=void 0===Z?[]:Z,_=e.initLoading,M=e.onReady,N=e.paymentElementOnChange,E=(0,a.useState)(!0),A=E[0],L=E[1],T=(0,a.useState)([]),F=T[0],B=T[1],R=(0,a.useState)(0),z=R[0],G=R[1],U=(0,a.useState)(!1),$=U[0],W=U[1],H=(0,a.useRef)(),q=(0,a.useRef)(!1),V=(0,d.bI)("isMobile").isMobile;(0,a.useEffect)(function(){null==M||M(!!F.length)},[F,M]);var Y=(0,a.useMemo)(function(){return F.filter(function(e){return!S.includes(e.stripePaymentMethodId)})},[F,S]),J=(0,a.useMemo)(function(){return $||!Y.length},[$,Y]);(0,a.useEffect)(function(){f&&(B(f),L(!1))},[f]),(0,a.useEffect)(function(){if(!A&&I&&!q.current){q.current=!0;var e=F.findIndex(function(e){return e.stripePaymentMethodId===I});e>-1&&G(e)}},[A,I,F]),(0,a.useEffect)(function(){null==D||D(J?null:F[z])},[J,D,F,z]);var X=(0,a.useCallback)((0,r.Z)(i().mark(function e(){var t,n,r,o=arguments;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(o.length>0&&void 0!==o[0]?o[0]:{}).selectedPaymentMethodId,e.next=3,y.Z.getPaymentMethods();case 3:B(r=(null==(n=e.sent.data)?void 0:n.paymentMethods)||[]),t&&(G(r.findIndex(function(e){return e.stripePaymentMethodId===t})),W(!1)),L(!1);case 9:case"end":return e.stop()}},e)})),[]);(0,a.useImperativeHandle)(t,function(){var e,t,n;return{refetchIntent:null==H||null===(e=H.current)||void 0===e?void 0:e.refetchIntent,getSelectedPayment:(t=(0,r.Z)(i().mark(function e(){var t;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!J){e.next=5;break}return e.next=3,H.current.addNewCard();case 3:return t=e.sent,e.abrupt("return",t);case 5:return e.abrupt("return",{id:Y[z].stripePaymentMethodId});case 6:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),handleDeclinedCard:(n=(0,r.Z)(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X({selectedPaymentMethodId:t});case 2:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})}}),(0,a.useEffect)(function(){p&&X()},[X,p]);var K=(0,a.useCallback)(function(e){var t,n=e.brand,r=e.last4;return(0,k.jsxs)(v,{children:[(0,k.jsx)("img",{src:null===(t=w.g[n])||void 0===t?void 0:t.logo}),(0,k.jsx)("div",{children:"".concat(n," ").concat(V?"••••":"•••• •••• ••••"," ").concat(r)})]})},[V]),Q=(0,a.useMemo)(function(){var e=Y.map(function(e,t){return{label:K(e),active:t===z,onClick:function(){return G(t)}}});return j&&F.length<20&&e.push({label:(0,k.jsxs)(b,{children:[(0,k.jsx)(l.J,{name:"Plus"}),(0,k.jsx)("div",{children:"Add new card"})]}),onClick:function(){null==n||n(),W(!0)}}),e},[F,Y,K,z,j,n]),ee=(0,a.useMemo)(function(){return Y.length?K(Y[z]):null},[z,Y,K]),et=(0,a.useCallback)(function(){W(!1)},[]);return A||void 0!==_&&_?(0,k.jsx)(u.D,{fitWidth:!0}):J?(0,k.jsxs)(g,{children:[(0,k.jsxs)(x,{children:[(0,k.jsx)("span",{children:O}),!!Y.length&&(0,k.jsx)(c.z,{variant:"link",label:"Use an existing card",onClick:et})]}),(0,k.jsx)(P,{onReady:M,ref:H,addPaymentMethod:void 0===m||m,paymentMethodsCount:F.length,paymentElementOnChange:N})]}):(0,k.jsxs)(h,{children:[O&&(0,k.jsx)(x,{children:O}),(0,k.jsx)(s.h_,{options:Q,label:ee,variant:"input",fitButton:!0})]})}),I=(0,a.memo)(D)},15673:function(e,t,n){n.d(t,{J:function(){return f}});var r=n(67294),o=n(85064),i=n(50378),a=n(14251),s=i.ZP.div.withConfig({displayName:"styled__PopoverListWrapper",componentId:"sc-1ucrcaa-0"})(["position:relative;display:flex;flex-direction:column;"]),l=(0,i.iv)(["height:62px;"]),c=i.ZP.div.withConfig({displayName:"styled__PopoverHeader",componentId:"sc-1ucrcaa-1"})(["height:52px;padding:0px 16px;background-color:",";border-bottom:1px solid ",";top:0px;width:100%;position:sticky;z-index:1;",""],a.O9.n1,a.O9.n3,function(e){return e.theme.isMobile&&l}),u=i.ZP.div.withConfig({displayName:"styled__PopoverItems",componentId:"sc-1ucrcaa-2"})([""]),d=i.ZP.div.withConfig({displayName:"styled__LoadingWrapper",componentId:"sc-1ucrcaa-3"})(["height:60px;display:flex;justify-content:center;align-items:center;"]),p=n(85893),f=(0,r.memo)(function(e){var t=e.headerItem,n=e.items,i=e.loading,a=(0,r.useMemo)(function(){return i?(0,p.jsx)(d,{children:(0,p.jsx)(o.D,{})}):(0,p.jsxs)(s,{children:[t&&(0,p.jsx)(c,{children:t}),(0,p.jsx)(u,{children:n})]})},[i,t,n]);return(0,p.jsx)(s,{children:a})})},36195:function(e,t,n){n.d(t,{Z:function(){return eg}});var r=n(17674),o=n(90116),i=n(4730),a=n(59499),s=n(50029),l=n(64687),c=n.n(l),u=n(67294),d=n(96486),p=n.n(d),f=n(15948),m=n(95419),h=n(64727),v=n(42668),b=n(12967),g=n(31545),x=n(73793),y={imageSize:210,videoWidth:369.6,videoHeight:210},w={imageSize:100,videoWidth:176,videoHeight:100},C=n(96276),j=n(14251),k=n(50378),O=n(70299),P=k.ZP.div.withConfig({displayName:"styled__ScrollWrapper",componentId:"sc-gakbut-0"})(["display:flex;overflow:auto;margin-top:8px;margin-bottom:0px;",""],O.KZ),D=k.ZP.div.withConfig({displayName:"styled__ScrollRight",componentId:"sc-gakbut-1"})(["position:absolute;right:8px;"]),I=k.ZP.div.withConfig({displayName:"styled__ScrollLeft",componentId:"sc-gakbut-2"})(["position:absolute;left:8px;"]),Z="\n  background-color: transparent;\n  position: relative;\n  border-radius: 10px;\n  border: 1px solid ".concat(j.O9.n3,";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n"),S=k.ZP.div.withConfig({displayName:"styled__FilePlaceholder",componentId:"sc-gakbut-3"})([""," width:","px;height:","px;"],Z,function(e){return e.$size},function(e){return e.$size}),_=k.ZP.div.withConfig({displayName:"styled__VideoPlaceholder",componentId:"sc-gakbut-4"})([""," width:","px;height:","px;background-position:center center;background-size:cover;background-repeat:no-repeat;"],Z,function(e){return e.$width},function(e){return e.$height}),M=k.ZP.div.withConfig({displayName:"styled__AddAttachmentWrapper",componentId:"sc-gakbut-5"})(["width:","px;height:","px;position:relative;border-radius:10px;border:2px dashed ",";cursor:pointer;background-color:transparent;display:flex;align-items:center;justify-content:center;"],function(e){return e.$size},function(e){return e.$size},j.O9.n3),N=n(85893),E=(0,u.memo)(function(e){var t=e.onFileInputChange,n=e.isComment,r=(0,u.useRef)((0,b.c9)()),o=(0,u.useCallback)(function(e){t&&t(e)},[t]),i=n?w.imageSize:y.imageSize;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("input",{type:"file",style:{display:"none"},accept:(0,h.Yw)(),multiple:!0,onChange:o,id:"file-upload-input-".concat(r.current)}),(0,N.jsx)("label",{htmlFor:"file-upload-input-".concat(r.current),children:(0,N.jsx)(M,{$size:i,children:(0,N.jsx)(C.J,{name:"Add",color:j.O9.n5,size:20})})})]})}),A=n(59607),L=n(36581),T=n(85064),F=n(320),B=n(20668),R=(0,k.iv)(["background-color:rgba(255,255,255,0.7);border-radius:50%;position:absolute;top:4px;visibility:",";z-index:1;display:flex;justify-content:center;align-items:center;"],function(e){return e.theme.isMobile?"inherit":"hidden"}),z=k.ZP.div.withConfig({displayName:"styled__ExpandThumbnailButton",componentId:"sc-p0svxm-0"})([""," left:4px;"],R),G=k.ZP.div.withConfig({displayName:"styled__DeleteThumbnailButton",componentId:"sc-p0svxm-1"})([""," right:4px;"],R),U=k.ZP.div.withConfig({displayName:"styled__PostAttachmentsImage",componentId:"sc-p0svxm-2"})(["&:hover ",",&:hover ","{visibility:inherit;}overflow:hidden;"],z,G),$=k.ZP.div.withConfig({displayName:"styled__FileName",componentId:"sc-p0svxm-3"})(["word-break:break-word;max-height:39px;overflow-y:hidden;",""],B.c.t10),W=k.ZP.div.withConfig({displayName:"styled__FileMeta",componentId:"sc-p0svxm-4"})(["color:",";",""],j.O9.n5,B.c.t11),H=k.ZP.div.withConfig({displayName:"styled__FileThumbnailGeneralFile",componentId:"sc-p0svxm-5"})(["position:absolute;top:0;left:0;width:100%;height:100%;user-select:none;cursor:",";background:",";"],function(e){return e.$isEditing?"move":"inherit"},j.O9.n1),q="processing",V="ready";function Y(e){var t,n,r,o,i=e.post,a=e.file,l=e.editing,d=e.onClick,p=e.onDelete,f=e.onUpload,m=e.onShowPreview,v=e.isComment,b=(0,u.useState)(a.upload?q:V),g=b[0],x=b[1],C=v?w.imageSize:y.imageSize;if(a.upload)o=a.upload.src;else{var k=a.metadata,O=k.imageMdHeight,P=k.imageMdWidth,D=k.imageMdUrl;"image/gif"===a.metadata.contentType?o=a.metadata.readUrl:D&&O>=C&&P>=C&&(o=D),o=o||a.metadata.readUrl||a.metadata.srcReadUrl}var I=(0,u.useState)(o),Z=I[0],S=I[1],_=(0,u.useRef)(!1),M=(null===(t=a.metadata)||void 0===t?void 0:t.fileName)||"file",E=M.lastIndexOf(".")>=0?M.slice(M.lastIndexOf(".")):"",B=(null===(n=a.metadata)||void 0===n?void 0:n.contentType)||"",R=B.startsWith("image/")&&!(0,h.ZP)(B),Y=parseInt(null===(r=a.metadata)||void 0===r?void 0:r.srcContentLength)||0,J=(0,u.useRef)(!1);(0,u.useEffect)(function(){return _.current=!0,function(){_.current=!1}},[]),(0,u.useEffect)(function(){J.current=!1},[a]),(0,u.useEffect)(function(){a.upload&&!J.current&&(J.current=!0,(0,s.Z)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,h.cT)({fileID:a.id,writeUrl:a.upload.writeUrl,acl:a.upload.acl,contentType:a.upload.contentType,data:a.upload.data,timeout:6e4});case 3:(t=e.sent)&&(_.current&&(R&&S(t.metadata.srcReadUrl),x(V)),f&&f(t)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),p&&p(a);case 11:case"end":return e.stop()}},e,null,[[0,7]])}))())},[a,p,f,R]);var X=(0,u.useCallback)(function(){!l&&d&&d({post:i,file:a})},[d,l,i,a]),K=(0,u.useMemo)(function(){switch(g){case"uploading":return{width:C,height:C,borderRadius:10,border:"1px solid ".concat(j.O9.n3),backgroundColor:j.O9.n3,display:"flex",alignItems:"center",justifyContent:"center"};case q:return{backgroundColor:j.O9.n3,width:C,height:C,position:"relative",borderRadius:10,border:"1px solid ".concat(j.O9.n3),cursor:l?"default":"zoom-in",display:"flex",alignItems:"center",justifyContent:"center",opacity:1};case V:return{backgroundColor:j.O9.n3,width:C,height:C,position:"relative",borderRadius:10,border:"1px solid ".concat(j.O9.n3),backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat",cursor:l?"move":"zoom-in",backgroundImage:R?'url("'.concat(Z,'")'):void 0}}},[g,l,Z,R,C]),Q=(0,u.useMemo)(function(){var e=(0,h.F5)({ext:E,contentType:B}),t=(null==e?void 0:e.name)||"File";return(0,N.jsx)(H,{$isEditing:l,style:{opacity:g!==V?0:1},children:(0,N.jsxs)(L.s,{padding:12,gap:24,style:{height:"100%"},children:[(0,N.jsx)(F.a,{fileName:M,contentType:B,size:v?24:48}),(0,N.jsxs)(L.s,{gap:8,style:{overflowY:"hidden"},children:[(0,N.jsx)($,{children:M}),(0,N.jsx)(W,{children:"".concat(t," • ").concat(Y>=1048576?"".concat(Math.round(Y/1048576),"mb"):Y>=1024?"".concat(Math.round(Y/1024),"kb"):"1kb")})]})]})})},[M,E,B,Y,g,v,l]);return(0,N.jsxs)(U,{style:K,onClick:X,children:[l&&g===V&&(0,N.jsx)(z,{children:(0,N.jsx)(A.z,{variant:"icon",icon:"Expand",onClick:m,iconSize:16.66})}),l&&g===V&&(0,N.jsx)(G,{children:(0,N.jsx)(A.z,{variant:"icon",icon:"Close",onClick:function(){return p(a)},iconSize:16.66})}),!R&&Q,g!==V&&(0,N.jsx)(T.D,{color:j.O9.sd1,size:75})]})}Y.defaultProps={editing:!1};var J=(0,u.memo)(Y),X=n(29677),K=(0,k.iv)(["background-color:rgba(255,255,255,0.7);border-radius:50%;position:absolute;top:4px;visibility:",";z-index:1;display:flex;justify-content:center;align-items:center;"],function(e){return e.theme.isMobile?"inherit":"hidden"}),Q=k.ZP.div.withConfig({displayName:"styled__ExpandThumbnailButton",componentId:"sc-1k73vxa-0"})([""," left:4px;"],K),ee=k.ZP.div.withConfig({displayName:"styled__DeleteThumbnailButton",componentId:"sc-1k73vxa-1"})([""," right:4px;"],K),et=k.ZP.div.withConfig({displayName:"styled__VideoThumbnailWrapper",componentId:"sc-1k73vxa-2"})(["&:hover ","{visibility:inherit;}&:hover ","{visibility:inherit;}width:","px;height:","px;position:relative;border-radius:10px;border:1px solid ",";background-position:center center;background-size:cover;background-repeat:no-repeat;cursor:",";"," display:flex;align-items:center;justify-content:center;"],Q,ee,function(e){return e.$width},function(e){return e.$height},j.O9.n3,function(e){return e.$editing?"default":"zoom-in"},function(e){var t=e.$thumbnailSrc;return t?'background-image: url("'.concat(t,'");'):void 0}),en=k.ZP.div.withConfig({displayName:"styled__VideThumbnailDuration",componentId:"sc-1k73vxa-3"})(["position:absolute;right:8px;bottom:8px;background-color:",";color:",";border-radius:5px;padding:2px 5px;",""],j.O9.n7,j.O9.n1,B.c.t11),er=(0,u.memo)(function(e){var t=e.post,n=e.videoLink,r=e.index,o=e.editing,i=e.onClick,a=e.onDelete,l=e.videoLinkData,d=e.isComment,p=e.onShowPreview,f=(0,u.useState)(null),m=f[0],h=f[1],v=(0,u.useRef)(!1);(0,u.useEffect)(function(){return v.current=!0,function(){v.current=!1}},[]),(0,u.useEffect)(function(){(0,s.Z)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(t=null==l?void 0:l.thumbnail)&&n.provider!==g.a.Bunny)){e.next=5;break}return e.next=4,(0,g.Rl)(n.url);case 4:t=e.sent;case 5:v.current&&h(t);case 6:case"end":return e.stop()}},e)}))()},[null==n?void 0:n.provider,null==n?void 0:n.url,null==l?void 0:l.thumbnail]);var b=d?w:y,x=(0,u.useCallback)(function(){o||null==i||i({post:t,videoLink:n})},[o,i,t,n]);return(0,N.jsxs)(et,{$width:b.videoWidth,$height:b.videoHeight,$thumbnailSrc:m,$editing:o,onClick:x,children:[o&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(Q,{children:(0,N.jsx)(A.z,{variant:"icon",icon:"Expand",onClick:p,iconSize:16.66})}),(0,N.jsx)(ee,{children:(0,N.jsx)(A.z,{variant:"icon",icon:"Close",onClick:function(){return a(r)},iconSize:16.66})})]}),!!l.lenMs&&(0,N.jsx)(en,{children:(0,g.BI)(l.lenMs)}),(0,N.jsx)(X.Z,{fillOpacity:1})]})}),eo=(0,u.memo)(function(e){var t=e.isComment?w:y;return(0,N.jsx)(_,{$width:t.videoWidth,$height:t.videoHeight,children:(0,N.jsx)(T.D,{color:j.O9.n3,size:42})})}),ei=(0,u.memo)(function(e){var t=e.isComment?w.imageSize:y.imageSize;return(0,N.jsx)(S,{$size:t,children:(0,N.jsx)(T.D,{color:j.O9.n3,size:42})})}),ea=n(29027),es=n(30697),el=n(70131),ec=n(65009),eu=n(64487),ed=["videoId"],ep=["file"],ef=["file"];function em(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ev(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eb=(0,u.forwardRef)(function(e,t){var n,a=e.post,l=e.editing,d=e.onItemClick,C=e.onChange,j=e.onFileInputChange,k=e.onStateChange,O=e.level,Z=e.style,S=e.isChatInput,_=e.isChatInputUploading,M=e.lazyLoad,L=(0,u.useState)([]),T=L[0],F=L[1],B=(0,u.useState)([]),R=B[0],z=B[1],G=(0,u.useState)([]),U=G[0],$=G[1],W=(0,u.useState)([]),H=W[0],q=W[1],V=(0,x.bI)("currentGroup","isMobile"),Y=V.currentGroup,X=V.isMobile,K=V.dispatch,Q=(0,u.useRef)(0),ee=T.length+R.length,et=(null==a||null===(n=a.metadata)||void 0===n?void 0:n.attachments)||"",en=(0,u.useState)(et.split(",")),eh=en[0],eb=en[1],eg=(0,u.useState)(!1),ex=eg[0],ey=eg[1],ew=(0,u.useState)(!1),eC=ew[0],ej=ew[1],ek=(0,u.useRef)(function(){var e;return(0,g.sw)(null==a||null===(e=a.metadata)||void 0===e?void 0:e.videoLinksData)}),eO=(0,u.useRef)(),eP=(0,u.useState)({left:!1,right:!1}),eD=eP[0],eI=eP[1],eZ=(0,el.YD)({triggerOnce:!0,skip:!M}),eS=eZ.ref,e_=eZ.inView,eM=(0,u.useState)({}),eN=eM[0],eE=eM[1],eA=(0,u.useRef)(!1),eL=(0,u.useMemo)(function(){return l?O>0?34:80:O>0?40:100},[l,O]);(0,u.useEffect)(function(){(0,s.Z)(c().mark(function e(){var t,n,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={},n=c().mark(function e(){var n,o;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=R[r],o=(null==U?void 0:U.find(function(e){return e.url===n}))||{},!((0,g.Hh)(n)&&!eN[n]&&!(null!=o&&o.thumbnail))){e.next=6;break}return e.next=5,(0,g.Rl)(n);case 5:t[n]=e.sent;case 6:case"end":return e.stop()}},e)}),r=0;case 3:if(!(r<R.length)){e.next=8;break}return e.delegateYield(n(),"t0",5);case 5:r++,e.next=3;break;case 8:Object.keys(t).length&&eE(function(e){return ev(ev({},e),t)});case 9:case"end":return e.stop()}},e)}))()},[R,U,eN]);var eT=O>0?w.imageSize:y.imageSize;(0,u.useEffect)(function(){eb(et.split(","))},[et]);var eF=(0,u.useCallback)(function(){if(eO.current){var e=eO.current,t=e.scrollLeft,n=e.offsetWidth,r=e.scrollWidth;r===n+t||0===t?eI({left:!!t,right:n<r&&r!==n+t}):eI({left:!!t,right:n<r})}},[]),eB=(0,u.useCallback)(function(){eA.current||(eA.current=!0,eF())},[eF]),eR=(0,u.useCallback)(function(e){eO.current.scrollLeft=e?eO.current.scrollLeft+(eT+10):eO.current.scrollLeft-(eT+10),eF()},[eF,eT]);(0,u.useEffect)(function(){k&&k(T.some(function(e){return!!e.upload}))},[k,T]),(0,u.useEffect)(function(){var e,t;S||F(null!=a&&null!==(e=a.metadata)&&void 0!==e&&e.attachmentsData?(0,b.W4)(p().isString(a.metadata.attachmentsData)?JSON.parse(a.metadata.attachmentsData):null==a||null===(t=a.metadata)||void 0===t?void 0:t.attachmentsData):[])},[a,S]),(0,u.useEffect)(function(){if(S){var e=new Date().getTime();Q.current=e,(0,s.Z)(c().mark(function t(){var n,r;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=et.split(","),!(!et||!n.length)){t.next=4;break}return F([]),t.abrupt("return");case 4:if(!_){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,m.Z.readFiles({fileIDs:n});case 8:r=t.sent.data,e===Q.current&&F(n.map(function(e){return r.files.find(function(t){return e===t.id})}));case 11:case"end":return t.stop()}},t)}))()}},[et,S,_]),(0,u.useEffect)(function(){var e,t;null!=a&&null!==(e=a.metadata)&&void 0!==e&&e.videoLinksData&&$(ek.current),z((0,b.vc)((null==a||null===(t=a.metadata)||void 0===t?void 0:t.videoLinks)||""))},[a]),(0,u.useEffect)(function(){(0,s.Z)(c().mark(function e(){var t,n,r,a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!R.length){e.next=18;break}n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return em(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return em(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(R),e.prev=3,a=c().mark(function e(){var n,o,a,s,l,u;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.value,a=(0,g.ak)(o),e.next=4,(0,g.$q)(o);case 4:s=e.sent,(l=null!==(n=null==U?void 0:U.find(function(e){return e.provider===a.provider&&e.videoId===a.videoID}))&&void 0!==n?n:{}).videoId,u=(0,i.Z)(l,ed),t.push({id:a.videoID,upload:null,videoLink:!0,metadata:ev(ev(ev({},a),u),{},{title:s,thumbnail:eN[o]})});case 7:case"end":return e.stop()}},e)}),n.s();case 6:if((r=n.n()).done){e.next=10;break}return e.delegateYield(a(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),n.e(e.t1);case 15:return e.prev=15,n.f(),e.finish(15);case 18:q([].concat(t,(0,o.Z)(T)));case 19:case"end":return e.stop()}},e,null,[[3,12,15,18]])}))()},[T,R,U,eN]),(0,u.useEffect)(function(){eF()},[T,R,eF]),(0,u.useImperativeHandle)(t,function(){var e,t;return{showPreviewState:function(){return ex},restoreState:function(e){var t=e.fileIDs,n=void 0===t?[]:t,r=e.videoLinks,o=void 0===r?[]:r;(0,s.Z)(c().mark(function e(){var t,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!n.length){e.next=7;break}return e.next=4,m.Z.readFiles({fileIDs:n});case 4:r=e.sent.data,t=n.map(function(e){return r.files.find(function(t){return t.id===e&&!!t.metadata.postprocessedAt})}).filter(function(e){return!!e});case 7:F(t),z(o),C&&C({files:t,videoLinks:o});case 10:case"end":return e.stop()}},e)}))()},addVideoLink:(e=(0,s.Z)(c().mark(function e(t){var n,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,!(ee>=(0,h.PN)())){e.next=3;break}return e.abrupt("return",{error:"You can add up to ".concat((0,h.PN)()," attachments")});case 3:return z(r=[].concat((0,o.Z)(R),[n])),C&&C({files:T,videoLinks:r}),e.abrupt("return",{});case 7:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),addFiles:(t=(0,s.Z)(c().mark(function e(t){var n,a,s,l,u,d;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ee+(n=t.files).length>(0,h.PN)())){e.next=3;break}return e.abrupt("return",{error:"You can add up to ".concat((0,h.PN)()," attachments")});case 3:a=[],s=c().mark(function e(){var t,s,l,d,p,f,b,g,x,y,w,j,k,O,P,D,I,Z,S,_,M,N,E,A;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null!==(t=n[u].type)&&void 0!==t&&t.startsWith("image/")?v.Rj.attachmentImageFileMaxSize:v.Rj.attachmentFileMaxSize,!(n[u].size>s)){e.next=4;break}return d=null!==(l=n[u].type)&&void 0!==l&&l.startsWith("image/")?v.Rj.attachmentImageFileMaxSizeMB:v.Rj.attachmentFileMaxSizeMB,e.abrupt("return",{v:{error:"File too large, ".concat(d,"mb max")}});case 4:if(!(p=n[u]).isGiphy){e.next=17;break}return e.next=8,m.Z.createFile(ev({},p.metadata));case 8:if(g=(void 0===(b=(f=e.sent).data)?{}:b).file,!f.error){e.next=15;break}return e.abrupt("return",{v:{error:"Failed to upload image file"}});case 15:return F(function(e){var t=[].concat((0,o.Z)(e),[g]);return C&&C({files:t,videoLinks:R}),[].concat((0,o.Z)(e),[g])}),e.abrupt("return",{v:{}});case 17:if(!(p.type.startsWith("image/")&&!(0,h.ZP)(p.type))){e.next=45;break}return e.next=20,(0,v.s4)({file:p,minWidth:v.Rj.attachmentImageMinWidth,minHeight:v.Rj.attachmentImageMinHeight});case 20:if(x=e.sent,w=(y=(0,r.Z)(x,3))[0],!(j=y[2])){e.next=28;break}return console.warn("PostAttachments: loadImageFile failed n=".concat(null==p?void 0:p.name," s=").concat(null==p?void 0:p.size," t=").concat(null==p?void 0:p.type)),eu.Tb(j),e.abrupt("return",{v:{error:"Failed to load image file"}});case 28:return e.next=30,m.Z.createFile({fileName:p.name,contentType:p.type,contentLength:p.size,ownerID:null==Y?void 0:Y.id});case 30:if(D=(P=void 0===(O=(k=e.sent).data)?{}:O).file,I=(0,i.Z)(P,ep),!(Z=k.error)){e.next=40;break}return console.warn("PostAttachments: createFile (image) failed n=".concat(null==p?void 0:p.name," s=").concat(null==p?void 0:p.size," t=").concat(null==p?void 0:p.type," oid=").concat(null==Y?void 0:Y.id)),eu.Tb(Z),e.abrupt("return",{v:{error:"Failed to upload image file"}});case 40:I.data=p,I.src=w.toDataURL("image/jpeg"),a.push(ev({upload:I},D)),e.next=59;break;case 45:return e.next=47,m.Z.createFile({fileName:p.name,contentType:p.type,contentLength:p.size,ownerID:null==Y?void 0:Y.id});case 47:if(N=(M=void 0===(_=(S=e.sent).data)?{}:_).file,E=(0,i.Z)(M,ef),!(A=S.error)){e.next=57;break}return console.warn("PostAttachments: createFile (file) failed n=".concat(null==p?void 0:p.name," s=").concat(null==p?void 0:p.size," t=").concat(null==p?void 0:p.type," oid=").concat(null==Y?void 0:Y.id)),eu.Tb(A),e.abrupt("return",{v:{error:"Failed to upload image file"}});case 57:E.data=p,a.push(ev({upload:E},N));case 59:case"end":return e.stop()}},e)}),u=0;case 6:if(!(u<n.length)){e.next=14;break}return e.delegateYield(s(),"t0",8);case 8:if(!(l=e.t0)){e.next=11;break}return e.abrupt("return",l.v);case 11:u++,e.next=6;break;case 14:return F(d=[].concat((0,o.Z)(T),a)),C&&C({files:d,videoLinks:R}),e.abrupt("return",{files:a});case 18:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}});var ez=(0,u.useCallback)(function(e){F(function(t){var n=t.findIndex(function(t){return t.id===e.id});return n>-1?[].concat((0,o.Z)(t.slice(0,n)),[ev(ev({},t[n]),{},{upload:null})],(0,o.Z)(t.slice(n+1))):t})},[]),eG=(0,u.useCallback)(function(e){(0,s.Z)(c().mark(function t(){var n;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=T.filter(function(t){return t.id!==e.id}),eb(eh.filter(function(t){return t!==e.id})),F(n),C&&C({files:n,videoLinks:R});case 5:case"end":return t.stop()}},t)}))()},[eh,T,C,R]),eU=(0,u.useCallback)(function(e){var t=(0,o.Z)(R);t.splice(e,1),z(t),C&&C({files:T,videoLinks:t})},[T,C,R]),e$=(0,u.useCallback)(function(e,t,n){var o=Array.from(e),i=o.splice(t,1),a=(0,r.Z)(i,1)[0];return o.splice(n,0,a),o},[]),eW=(0,u.useCallback)(function(e){if(e.destination){var t=e$(T,e.source.index,e.destination.index);F(t),C({files:t,videoLinks:R})}},[T,C,e$,R]);return T.length||R.length||eh[0]||ek.current.length?(0,N.jsxs)("div",{ref:eS,style:ev({position:"relative",marginTop:0===O&&X&&ee>0?16:0},Z),onMouseOver:eB,children:[(0,N.jsxs)(P,{ref:eO,children:[(R.length>0||ek.current.length>0)&&(0,N.jsx)(ec.X,{gap:16,children:(R.length?R:ek.current).map(function(e,t){if(!R.length)return(0,N.jsx)("div",{children:(0,N.jsx)(eo,{isComment:O>0})},"video-".concat(t));var n=(0,g.ak)(e),r=(null==U?void 0:U.find(function(e){return e.provider===n.provider&&e.videoId===n.videoID}))||{};return(eN[n.url]&&(r.thumbnail=eN[n.url]),n&&n.provider!==g.a.Unsupported)?(0,N.jsx)("div",{children:!M||e_?(0,N.jsx)(er,{post:a,editing:l,videoLink:n,videoLinkData:r,index:t,onClick:d,onDelete:eU,isComment:O>0,onShowPreview:function(){ej(H.map(function(e){return e.id}).indexOf(n.videoID)),K(es.Ek,function(){return{disableEscape:!0}}),K(es.WT,function(){return{disableEscapeChat:!0}}),ey(!0)}}):(0,N.jsx)(eo,{isComment:O>0},"video-".concat(t))},"video-".concat(t)):null})}),(0,N.jsx)("div",{style:{marginLeft:R.length>0||ek.current.length>0?16:0,maxHeight:eT+16,minWidth:eT*T.length+16*T.length},children:(0,N.jsx)(f.Z5,{onDragEnd:eW,children:(0,N.jsx)(f.bK,{droppableId:"droppable",direction:"horizontal",children:function(e){return(0,N.jsxs)("div",ev(ev({ref:e.innerRef},e.droppableProps),{},{children:[(0,N.jsx)(ec.X,{gap:16,children:T.map(function(e,t){return(0,N.jsx)(f._l,{draggableId:e.id||e,index:t,isDragDisabled:!l||X,children:function(t){return(0,N.jsx)("div",ev(ev(ev({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:!M||e_?(0,N.jsx)(J,{post:a,file:e,editing:l,onClick:d,onUpload:ez,onDelete:eG,isComment:O>0,onShowPreview:function(){var t,n,r,o=(null==e||null===(t=e.metadata)||void 0===t?void 0:t.contentType)||"",i=(null==e||null===(n=e.metadata)||void 0===n?void 0:n.readUrl)||(null==e||null===(r=e.metadata)||void 0===r?void 0:r.srcReadUrl);X&&"application/pdf"===o?window.open(i,"_blank"):(ej(H.map(function(e){return e.id}).indexOf(e.id)),K(es.Ek,function(){return{disableEscape:!0}}),K(es.WT,function(){return{disableEscapeChat:!0}}),ey(!0))}}):(0,N.jsx)(ei,{isComment:O>0})}))}},e.id||e)})}),e.placeholder]}))}})})}),l&&ee>0&&ee<(0,h.PN)()&&(0,N.jsx)(E,{onFileInputChange:j,isComment:O>0})]}),!!ex&&(0,N.jsx)(ea.Z,{previewAttachments:H,initialIdx:eC,onClose:function(){ey(!1),K(es.WT,function(){return{disableEscapeChat:!1}})}}),!X&&eD.left&&(0,N.jsx)(I,{style:{top:eL},children:(0,N.jsx)(A.z,{variant:"icon-round-bordered",icon:"ArrowLeft",onClick:function(){return eR()},iconSize:12})}),!X&&eD.right&&(0,N.jsx)(D,{style:{top:eL},children:(0,N.jsx)(A.z,{variant:"icon-round-bordered",icon:"ArrowRight",onClick:function(){return eR(!0)},iconSize:12})})]}):null});eb.defaultProps={editing:!1,lazyLoad:!1};var eg=(0,u.memo)(eb)},78444:function(e,t,n){n.d(t,{Z:function(){return ty}});var r=n(59499),o=n(50029),i=n(17674),a=n(64687),s=n.n(a),l=n(32512),c=n(67294),u=n(95419),d=n(37500),p=n(14251),f=n(29610),m=n(12967),h=n(31545),v=n(73793),b=n(5095),g=n(64597),x=n(36581),y=n(47691),w=n(85893),C=(0,c.memo)(function(e){var t=e.onConfirm,n=e.onClose,r=e.open,i=(0,c.useState)(""),a=i[0],l=i[1],d=(0,c.useState)(null),p=d[0],f=d[1],m=(0,v.bI)("isMobile").isMobile;(0,c.useEffect)(function(){f(null)},[a]);var C=(0,c.useCallback)(function(e){l(e.target.value)},[]),j=(0,c.useCallback)(function(){n&&n()},[n]),k=(0,c.useCallback)((0,o.Z)(s().mark(function e(){var n,r,o;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,b.X2)(a),e.next=3,(0,h.Wh)(n);case 3:if(r=e.sent,(null==(o=(0,h.ak)(a))?void 0:o.provider)!==5){e.next=15;break}return e.next=8,u.Z.getVideoMeta({url:n});case 8:if(!e.sent.error){e.next=13;break}return f("Invalid video link"),e.abrupt("return");case 13:e.next=21;break;case 15:if(!(!r&&(null==o?void 0:o.provider)!==2)){e.next=18;break}return f("Invalid video link"),e.abrupt("return");case 18:if(!(!r&&(null==o?void 0:o.provider)===2)){e.next=21;break}return f("Invalid video link. If this was a recent upload to Vimeo, or you recently changed your privacy settings, please wait 5 minutes and try again."),e.abrupt("return");case 21:t({destination:n});case 22:case"end":return e.stop()}},e)})),[a,t]);return(0,w.jsx)(g.T,{open:r,header:"Add video",confirmLabel:"Link",onConfirm:k,onCancel:j,onClose:j,style:{zIndex:1400},children:(0,w.jsxs)(x.s,{gap:24,marginBottom:m?8:16,children:["Add a YouTube, Vimeo, Loom, or Wistia link.",(0,w.jsx)(y.I,{autoFocus:!0,id:"destination",label:"Link",value:a,onChange:C,error:p,inputProps:{"data-testid":"post-video-input"}})]})})}),j=n(50378),k=n(20668),O=j.ZP.div.withConfig({displayName:"styled__ErrorLabel",componentId:"sc-nmb4vx-0"})(["color:",";margin:8px 0 0 14px;",""],p.O9.e2,k.c.t11),P=(0,c.memo)(function(e){var t=e.open,n=e.onConfirm,r=e.onClose,o=(0,c.useState)(""),i=o[0],a=o[1],s=(0,c.useState)(!1),l=s[0],u=s[1],d=(0,c.useCallback)(function(){r&&r()},[r]),p=(0,c.useCallback)(function(){if(!(0,m.K2)(i)){u(!0);return}n({destination:(0,b.X2)(i)})},[i,n]),f=(0,c.useCallback)(function(e){var t=e.target.value;a(t),l&&((0,m.K2)(t)?u(!1):u(!0))},[l]);return(0,w.jsxs)(g.T,{open:t,header:"Add link",onConfirm:p,onCancel:d,onClose:d,confirmLabel:"Link",disabled:l,children:[(0,w.jsx)(y.I,{autoFocus:!0,id:"destination",label:"Enter a URL",value:i,onChange:f,inputProps:{"data-testid":"post-link-input"}}),l&&(0,w.jsx)(O,{children:"Please input a valid link."})]})}),D=n(36195),I=n(57305),Z=n(81343),S=j.ZP.div.withConfig({displayName:"styled__DisplayName",componentId:"sc-qt6z5e-0"})(["color:",";",";"],function(e){return e.$isSelected&&p.O9.fgPrimary},k.c.t5),_=j.ZP.div.withConfig({displayName:"styled__Description",componentId:"sc-qt6z5e-1"})(["color:",";",";",""],p.O9.n5,k.c.t9,k.c.ellipsis),M=(0,j.ZP)(Z.i).withConfig({displayName:"styled__ModalDivider",componentId:"sc-qt6z5e-2"})(["position:absolute;left:0;"]),N=j.ZP.div.withConfig({displayName:"styled__ListWrapper",componentId:"sc-qt6z5e-3"})(["margin:0 -24px 8px -24px;"]),E=j.ZP.div.withConfig({displayName:"styled__ListItem",componentId:"sc-qt6z5e-4"})(["display:flex;align-items:center;height:52px;min-height:",";padding:12px 24px;",";&:hover{background-color:",";}"],function(e){return e.$subtextExists?"72px":"52px"},function(e){return e.$selected&&"background-color: ".concat(p.O9.p2)},function(e){return e.$selected?p.O9.p2:p.O9.n3});function A(e){var t=e.onConfirm,n=e.onClose,r=e.labels,i=e.selectedID,a=(0,c.useState)(i),l=a[0],u=a[1],d=(0,c.useCallback)(function(){n&&n()},[n]),p=(0,c.useCallback)((0,o.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t(r.find(function(e){return e.id===l}));case 1:case"end":return e.stop()}},e)})),[t,r,l]),f=(0,c.useMemo)(function(){return r.some(function(e){return e.metadata.description})},[r]),m=(0,c.useMemo)(function(){return r.map(function(e){var t=e.id===l;return(0,w.jsx)(E,{$selected:t,$subtextExists:f,onClick:function(){return u(e.id)},children:(0,w.jsxs)(x.s,{style:{width:"100%"},children:[(0,w.jsx)(S,{$isSelected:t,children:e.metadata.displayName}),e.metadata.description&&(0,w.jsx)(_,{children:e.metadata.description})]})},e.id)})},[r,l,f]);return(0,w.jsxs)(g.T,{open:!0,header:"Post category",onConfirm:p,onCancel:d,onClose:d,confirmLabel:"select",disabled:!l,scrollable:!0,style:{zIndex:1400},children:[(0,w.jsx)(M,{}),(0,w.jsx)(N,{children:m})]})}A.defaultProps={labels:[],selectedID:""};var L=(0,c.memo)(A),T=n(73674),F=n(11163),B=n.n(F),R=n(500),z=n(53531),G=n(30697),U=n(70131),$=n(77567),W=n(90116),H=n(20338),q=n(59607),V=j.ZP.div.withConfig({displayName:"styled__PollWrapper",componentId:"sc-qor37g-0"})(["display:flex;flex-direction:column;border:1px solid ",";border-radius:5px;padding:16px;> button{margin-top:8px;}"],p.O9.n3),Y=j.ZP.div.withConfig({displayName:"styled__PollHeader",componentId:"sc-qor37g-1"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;",""],k.c.t8),J=j.ZP.div.withConfig({displayName:"styled__PollOption",componentId:"sc-qor37g-2"})(["display:flex;align-items:center;margin-bottom:8px;> div:first-of-type{flex:1;margin-right:8px;}"]),X=j.ZP.div.withConfig({displayName:"styled__DisabledPollOption",componentId:"sc-qor37g-3"})(["border-radius:4px;padding:14px;background-color:",";margin-bottom:8px;color:",";",""],p.O9.n3,p.O9.n5,k.c.t7),K=j.ZP.button.withConfig({displayName:"styled__RemovePollButton",componentId:"sc-qor37g-4"})(["border:none;padding:0;background:none;display:flex;color:",";margin-right:8px;&:hover{text-decoration:underline;cursor:pointer;}",""],p.O9.n5,k.c.t11);p.O9.n5,k.c.t11;var Q=j.ZP.div.withConfig({displayName:"styled__DisabledRemovePollLabel",componentId:"sc-qor37g-6"})(["margin-top:8px;color:",";",""],p.O9.n5,k.c.t11),ee={maxLength:1e3},et=(0,c.memo)(function(e){var t=e.initialPoll,n=e.onRemove,r=e.options,o=e.setOptions,i=!!(null!=t&&t.totalVotes),a=(0,v.bI)("isMobile").isMobile,s=(0,c.useCallback)(function(e,t){o(function(n){var r=(0,W.Z)(n);return r[t]=e,r})},[o]),l=(0,c.useCallback)(function(e){o(function(t){return[].concat((0,W.Z)(t.slice(0,e)),(0,W.Z)(t.slice(e+1)))})},[o]),u=(0,c.useCallback)(function(){return[o(function(e){return[].concat((0,W.Z)(e),[""])})]},[o]),d=(0,c.useCallback)(function(e,t){return i?(0,w.jsx)(X,{children:e}):(0,w.jsxs)(J,{children:[(0,w.jsx)(y.I,{onChange:function(e){s(e.target.value,t)},placeholder:"Option ".concat(t+1),inputProps:ee,value:e,staticLabel:!0}),r.length<3?(0,w.jsx)("div",{style:{width:34}}):(0,w.jsx)(q.z,{variant:"icon-borderless",icon:"Close",onClick:function(){l(t)},iconSize:16.66,tabIndex:-1})]},t)},[i,l,s,r]),p=(0,c.useMemo)(function(){return r.map(d)},[r,d]),f=(0,c.useMemo)(function(){return r.reduce(function(e,t){return e||!!t},!1)},[r]),m=(0,c.useCallback)(function(){f||n()},[f,n]);return(0,w.jsxs)(V,{children:[(0,w.jsxs)(Y,{children:["Poll",!i&&(0,w.jsx)(H.s,{dataTestId:"poll-form-remove-poll-confirmation-dialog",header:"Remove poll?",content:"Are you sure you want to remove this poll",disabled:!f,onConfirm:n,style:{zIndex:1400},children:(0,w.jsx)(K,{type:"button",onClick:m,children:"Remove"})})]}),p,!i&&(0,w.jsx)(q.z,{onClick:u,variant:"secondary",disabled:10===r.length,typography:a?"t8":"t5",label:"Add Option"}),i&&(0,w.jsx)(Q,{children:"You cannot edit or remove a poll that already has votes"})]})}),en=n(65009),er=n(53541),eo=n(34295),ei=n(64727),ea=n(96276),es=n(12476),el=n(70299),ec=j.ZP.div.withConfig({displayName:"styled__PostAdditionButtonWrapper",componentId:"sc-41pcfm-0"})(["height:100%;margin-right:8px;"]),eu=j.ZP.div.withConfig({displayName:"styled__ActionDescriptionWrapper",componentId:"sc-41pcfm-1"})(["background-color:",";border:1px solid ",";border-radius:5px;margin-top:16px;padding:16px;"],p.O9.n2,p.O9.n3),ed=j.ZP.div.withConfig({displayName:"styled__ActionDescriptionHeaderRow",componentId:"sc-41pcfm-2"})(["display:flex;align-items:center;justify-content:space-between;",""],k.c.t10),ep=j.ZP.div.withConfig({displayName:"styled__ActionDescriptionHeader",componentId:"sc-41pcfm-3"})(["display:flex;align-items:center;gap:8px;color:",";"],p.O9.e2),ef=j.ZP.div.withConfig({displayName:"styled__ActionDescriptionRemove",componentId:"sc-41pcfm-4"})(["color:",";&:hover{cursor:pointer;}"],p.O9.n5),em=j.ZP.div.withConfig({displayName:"styled__ActionDescriptionBody",componentId:"sc-41pcfm-5"})(["margin-top:16px;",""],k.c.t7),eh=j.ZP.span.withConfig({displayName:"styled__NotifyAllTotalMembersLabel",componentId:"sc-41pcfm-6"})(["",""],k.c.t5),ev=(0,j.iv)(["width:106px;height:40px;"]),eb=(0,j.iv)(["padding:0 24px;width:fit-content;"]),eg=(0,j.ZP)(q.z).withConfig({displayName:"styled__SubmitButtonWrapper",componentId:"sc-41pcfm-7"})(["",";"],function(e){return e.theme.isMobile?eb:ev}),ex=j.ZP.div.withConfig({displayName:"styled__PostInputErrorText",componentId:"sc-41pcfm-8"})(["color:",";",";"],p.O9.e2,k.c.t11),ey=j.ZP.div.withConfig({displayName:"styled__PostInputCardContent",componentId:"sc-41pcfm-9"})(["background:",";padding:10px 13px 0;border:solid 1px ",";border-left:none;border-right:none;"],p.O9.n1,p.O9.n3),ew=j.ZP.div.withConfig({displayName:"styled__TooltipContentWrapper",componentId:"sc-41pcfm-10"})(["max-width:400px;"]),eC=j.ZP.span.withConfig({displayName:"styled__SendEmailText",componentId:"sc-41pcfm-11"})(["color:",";",";"],p.O9.n5,k.c.t8),ej=(0,j.ZP)(ea.J).withConfig({displayName:"styled__InfoIcon",componentId:"sc-41pcfm-12"})(["color:",";height:30px;width:30px;padding:7px;"],p.O9.n5),ek=(0,j.ZP)(es.h_).withConfig({displayName:"styled__MobileDropdownMenu",componentId:"sc-41pcfm-13"})(["> button > div{height:24px;}"]),eO=j.ZP.div.withConfig({displayName:"styled__PostCategoryWrapper",componentId:"sc-41pcfm-14"})(["max-width:",";flex:1 1;min-width:0;> div > div > div{width:100%;}"],function(e){return e.theme.isMobile?"none":"100%"}),eP=j.ZP.div.withConfig({displayName:"styled__DropzoneLabel",componentId:"sc-41pcfm-15"})(["color:",";",""],p.O9.n5,k.c.t1),eD=j.ZP.div.withConfig({displayName:"styled__PostBody",componentId:"sc-41pcfm-16"})(["",""],k.c.t7),eI=j.ZP.div.withConfig({displayName:"styled__ErrorLabel",componentId:"sc-41pcfm-17"})(["color:",";text-align:right;",""],p.O9.e2,k.c.t11),eZ=j.ZP.span.withConfig({displayName:"styled__HeaderBoldLabel",componentId:"sc-41pcfm-18"})(["color:",";white-space:nowrap;",""],p.O9.n7,k.c.t6),eS=j.ZP.span.withConfig({displayName:"styled__HeaderNormalLabel",componentId:"sc-41pcfm-19"})(["color:",";white-space:nowrap;",""],p.O9.n5,k.c.t7),e_=j.ZP.div.withConfig({displayName:"styled__Dropzone",componentId:"sc-41pcfm-20"})(["position:absolute;height:100%;width:100%;background:",";top:0;left:0;border-radius:15px;z-index:1000;padding:8px;display:",";"],p.O9.n2,function(e){return e.$isVisible?"block":"none"}),eM=j.ZP.div.withConfig({displayName:"styled__DropzoneInner",componentId:"sc-41pcfm-21"})(["height:100%;width:100%;border:3px dashed ",";border-radius:15px;display:flex;justify-content:center;align-items:center;"],p.O9.n5),eN=j.ZP.div.withConfig({displayName:"styled__DropzoneContainer",componentId:"sc-41pcfm-22"})(["position:relative;&:focus{outline:none;}"]),eE=j.ZP.div.withConfig({displayName:"styled__InputActionLine",componentId:"sc-41pcfm-23"})(["width:100%;display:flex;flex-wrap:wrap;align-items:flex-end;justify-content:flex-end;min-height:",";"],function(e){return e.$isDragging?"120px":"inherit"}),eA=(0,j.ZP)(x.s).withConfig({displayName:"styled__CommentOrReply",componentId:"sc-41pcfm-24"})(["position:relative;border-radius:15px;background-color:",";border:1px solid "," !important;padding:0px 13px;min-width:0;"],p.O9.n2,function(e){return e.theme.isMobile?p.O9.n3:p.O9.n5}),eL=j.ZP.div.withConfig({displayName:"styled__EditorWithActions",componentId:"sc-41pcfm-25"})(["flex-grow:1;padding-bottom:8px;padding-top:8px;min-width:",";"],function(e){var t=e.theme,n=e.$following;return t.isMobile?n?"calc(100% - 60px)":"calc(100% - 120px)":"calc(100% - 220px)"}),eT=j.ZP.div.withConfig({displayName:"styled__ActionButtons",componentId:"sc-41pcfm-26"})(["width:",";"],function(e){return e.theme.isMobile?"60px":"220px"}),eF=j.ZP.div.withConfig({displayName:"styled__CardContent",componentId:"sc-41pcfm-27"})(["padding:16px 16px 0;&:last-child{padding-bottom:8px;}"]),eB=j.ZP.div.withConfig({displayName:"styled__PostTitleWrapper",componentId:"sc-41pcfm-28"})(["margin-bottom:",";"],function(e){return e.theme.isMobile?"16px":"8px"}),eR=(0,j.iv)(["height:40px;padding:8px 0;margin:0;",";&::placeholder{",";}"],k.c.t3,k.c.t3),ez=(0,j.iv)(["visibility:visible;"]),eG=(0,j.ZP)(y.I).withConfig({displayName:"styled__PostTitleInput",componentId:"sc-41pcfm-29"})(["padding:0;margin:0;min-height:auto;input{height:35px;padding:8px 0 0;margin:0 0 8px;",";&::placeholder{color:",";opacity:0.8;",";}",';}&::after{content:"";display:block;position:absolute;bottom:0;left:0;right:0;height:2px;background:',";visibility:hidden;",";}"],k.c.t1,p.O9.n5,k.c.t1,function(e){return e.theme.isMobile&&eR},p.O9.e2,function(e){return e.$hasError&&ez}),eU=j.ZP.div.withConfig({displayName:"styled__PostBodyWrapper",componentId:"sc-41pcfm-30"})(["padding-bottom:",";"],function(e){return e.theme.isMobile?"24px":"0"}),e$=j.ZP.div.withConfig({displayName:"styled__CardHeaderLabelWrapper",componentId:"sc-41pcfm-31"})(["",""],k.c.ellipsis),eW=j.ZP.div.withConfig({displayName:"styled__PollFormWrapper",componentId:"sc-41pcfm-32"})(["margin-top:16px;"]),eH=(0,j.ZP)(q.z).withConfig({displayName:"styled__CancelReplyButton",componentId:"sc-41pcfm-33"})(["width:",";height:",";padding:",";"],function(e){return e.theme.isMobile?"unset":void 0},function(e){return e.theme.isMobile?"40px":"48px"},function(e){var t=e.theme;return"0 ".concat(t.isMobile?16:32,"px")}),eq=(0,j.ZP)(q.z).withConfig({displayName:"styled__ReplyButton",componentId:"sc-41pcfm-34"})(["height:",";padding:",";"],function(e){return e.theme.isMobile?"40px":"48px"},function(e){var t=e.theme;return"12px ".concat(t.isMobile?16:32,"px")}),eV=j.ZP.div.withConfig({displayName:"styled__PostAdditionsWrapper",componentId:"sc-41pcfm-35"})(["display:flex;overflow:hidden;"]),eY=(0,j.ZP)(q.z).withConfig({displayName:"styled__CancelCreatePostButton",componentId:"sc-41pcfm-36"})(["height:40px;padding-left:",";"],function(e){return e.theme.isMobile?void 0:"24px"}),eJ=(0,j.ZP)(ea.J).withConfig({displayName:"styled__ActionIcon",componentId:"sc-41pcfm-37"})(["height:21px;width:15px;"]),eX=j.ZP.div.withConfig({displayName:"styled__DropzoneInputWrapper",componentId:"sc-41pcfm-38"})(["width:100%;overflow:visible;background:",";box-shadow:",";border:",";border-bottom:",";border-radius:10px;"],function(e){return 0===e.$level?p.O9.n1:p.O9.n2},function(e){var t=e.$level,n=e.theme;return 0!==t||n.isDarkTheme?"none":el.nN},function(e){var t=e.$level,n=e.theme;return 0===t||n.isDarkTheme?"none":"1px solid ".concat(p.O9.n5)},function(e){var t=e.$level,n=e.theme,r=e.$isPost;return 0===t&&n.isDarkTheme&&r?"1px solid ".concat(p.O9.n3):void 0}),eK=j.ZP.div.withConfig({displayName:"styled__PostAttachmentsWrapper",componentId:"sc-41pcfm-39"})(["width:100%;margin-top:8px;display:",";"],function(e){return e.$hasAttachments?"block":"none"}),eQ=j.ZP.label.withConfig({displayName:"styled__AddAttachmentLabel",componentId:"sc-41pcfm-40"})(["cursor:pointer;"]),e0=(0,j.ZP)(q.z).withConfig({displayName:"styled__MobileSubmitButton",componentId:"sc-41pcfm-41"})(["flex-shrink:0;align-self:end;svg{color:",";}"],function(e){return e.$canSubmit?p.O9.secondary:p.O9.n5}),e1=(0,c.memo)(function(e){var t=e.handleFileInputChange,n=e.post,r=e.menuItems,o=e.handleLinkIconClick,i=e.handleAddVideoIconClick,a=e.linkable,s=e.onEmojiClick,l=e.onGifSelect,c=e.commentId;return(0,v.bI)("isMobile").isMobile?(0,w.jsxs)(en.X,{justifyContent:"flex-end",style:{transform:"translateX(12px)"},children:[(0,w.jsx)("input",{type:"file",style:{display:"none"},accept:(0,ei.Yw)(),multiple:!0,onChange:t,id:"file-upload-input-".concat(c||(null==n?void 0:n.id)||"post")}),(0,w.jsx)(eo.g,{onSelect:l}),(0,w.jsx)(ek,{options:r,variant:"icon-borderless",icon:"PaperClip"})]}):(0,w.jsxs)(en.X,{justifyContent:"flex-end",gap:4,marginRight:4,children:[(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("input",{type:"file",style:{display:"none"},accept:(0,ei.Yw)(),multiple:!0,onChange:t,id:"file-upload-input-".concat(c||(null==n?void 0:n.id)||"post")}),(0,w.jsx)(eQ,{htmlFor:"file-upload-input-".concat(c||(null==n?void 0:n.id)||"post"),children:(0,w.jsx)(q.z,{variant:"icon-borderless",icon:"PaperClip",iconSize:16.66,as:"span"})})]}),(0,w.jsx)(q.z,{variant:"icon-borderless",icon:"Link",onClick:o,iconSize:16.66,disabled:"disabled"===a,style:{color:"disabled"===a?p.O9.p2:void 0,minWidth:40}}),(0,w.jsx)(q.z,{variant:"icon-borderless",icon:"FileVideo",onClick:i,iconSize:16.66,style:{minWidth:40}}),(0,w.jsx)(er.h,{onClick:s}),(0,w.jsx)(eo.g,{onSelect:l})]})}),e2=n(86031),e9=n(66703),e3=n(22441),e5=(0,c.memo)(function(e){var t=e.canNotifyAll,n=e.setNotifyAll,r=e.notifyAll,o=(0,v.bI)("isMobile").isMobile,i=(0,c.useCallback)(function(){n(function(e){return!e})},[n]),a=(0,c.useMemo)(function(){return(0,w.jsx)(ew,{children:t?"Turning this on will also send this post to ALL members of your group via email. You can only do this once every 72 hours.":"Admins can only send a post via email once every 72 hours. Please try again later. This is to protect email deliverability."})},[t]),s=(0,c.useMemo)(function(){return(0,w.jsx)(ew,{children:"Admins can only send a post via email once every 72 hours. Please try again later. This is to protect email deliverability."})},[]);return(0,w.jsx)(en.X,{marginTop:o?0:8,marginBottom:8,paddingRight:o?8:0,justifyContent:"flex-end",children:(0,w.jsxs)(en.X,{alignItems:"center",justifyContent:"center",children:[(0,w.jsx)(e9.u,{content:a,showMobile:!0,children:(0,w.jsx)(ej,{name:"Info"})}),(0,w.jsx)(eC,{children:"Send email to all members"}),t&&(0,w.jsx)(e2.x,{paddingLeft:12,children:(0,w.jsx)(e3.Z,{disabled:!t||void 0,onClick:i,active:r})}),!t&&(0,w.jsx)(e9.u,{content:s,children:(0,w.jsx)(e2.x,{paddingLeft:12,children:(0,w.jsx)(e3.Z,{disabled:!0,active:!1})})})]})})}),e6=(0,c.memo)(function(e){var t,n=e.notifyAll,r=e.handleSubmitClick,o=e.submitButtonDisabled,i=e.confirmButtonLabel,a=e.loading,s=(0,v.bI)("currentGroup").currentGroup;return n?(0,w.jsx)(H.s,{header:"Send email to all members?",content:(0,w.jsxs)(w.Fragment,{children:["This email will be sent to",(0,w.jsx)(eh,{children:" ".concat((null===(t=s.metadata)||void 0===t?void 0:t.totalMembers)||"all"," ")}),"members, are you sure you want to proceed?"]}),onConfirm:r,style:{zIndex:1400},children:(0,w.jsx)(eg,{disabled:o,label:i,loading:a},o?"confirm-disabled":"confirm")}):(0,w.jsx)("div",{onClick:o?null:r,children:(0,w.jsx)(eg,{dataTestId:"post-input-form-submit-btn",disabled:o,label:i,loading:a},o?"confirm-disabled":"confirm")})}),e4=(0,c.memo)(function(e){var t=e.open,n=e.postTypeName,r=e.onClose,o=e.onConfirm;return t?(0,w.jsx)(g.T,{open:t,header:"Cancel ".concat(n),onConfirm:o,onCancel:r,onClose:r,confirmLabel:"Confirm",style:{zIndex:1400},children:"You haven't finished your ".concat(n," yet. Do you want to leave without finishing?")}):null}),e8=(0,c.memo)(function(e){var t=e.level,n=e.handleFileInputChange,r=e.post,o=e.menuItems,i=e.poll,a=e.pollOptions,s=e.showPollForm,l=e.handlePollIconClick,u=e.handleLinkIconClick,d=e.linkable,p=e.handleAddVideoIconClick,f=e.onEmojiClick,m=e.onGifSelect,h=e.onActionClick,b=e.isActionPost,g=(0,v.bI)("isMobile","self","currentGroup"),x=g.isMobile,y=g.self,C=g.currentGroup,j=(0,z.CP)({user:y,member:null==y?void 0:y.member,group:C}),k=(0,c.useCallback)(function(e){if(null!=i&&i.totalVotes){e.preventDefault(),e.stopPropagation();return}a.some(function(e){return e})&&s||(e.preventDefault(),e.stopPropagation(),l())},[l,null==i?void 0:i.totalVotes,a,s]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("input",{type:"file",style:{display:"none"},accept:(0,ei.Yw)(),multiple:!0,onChange:n,id:"file-upload-input-".concat((null==r?void 0:r.id)||"post")}),x?null:(0,w.jsx)(ec,{children:(0,w.jsx)(e9.u,{content:"Add attachment",children:(0,w.jsx)(eQ,{htmlFor:"file-upload-input-".concat((null==r?void 0:r.id)||"post"),children:(0,w.jsx)(q.z,{variant:"icon-borderless",icon:"PaperClip",iconSize:16.66,as:"span"})})})}),(0,w.jsxs)(en.X,{justifyContent:x?"left":void 0,style:{width:"100%"},children:[x&&0===t&&(0,w.jsx)(ek,{options:o,variant:"icon-borderless",icon:"PaperClip"}),x&&0===t&&(0,w.jsx)(H.s,{header:"Remove poll?",content:"Are you sure you want to remove this poll",onConfirm:l,style:{zIndex:1400},children:(0,w.jsx)(q.z,{variant:"icon-borderless-no-hover",icon:"PollOutlined",onClick:k,iconSize:16.66})}),x&&0===t&&(0,w.jsx)(eo.g,{onSelect:m,style:{marginRight:8},anchorOrigin:{vertical:0,horizontal:0},transformOrigin:{vertical:"bottom",horizontal:"left"}}),!x&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ec,{children:(0,w.jsx)(e9.u,{content:"Add link",children:(0,w.jsx)(q.z,{variant:"icon-borderless",icon:"Link",onClick:u,iconSize:16.66,disabled:"disabled"===d})})}),(0,w.jsx)(ec,{children:(0,w.jsx)(e9.u,{content:"Add video",children:(0,w.jsx)(q.z,{variant:"icon-borderless",icon:"FileVideo",onClick:p,iconSize:16.66})})}),(0,w.jsx)(ec,{children:(0,w.jsx)(e9.u,{content:s?"Remove poll":"Add poll",children:(0,w.jsx)(H.s,{header:"Remove poll?",content:"Are you sure you want to remove this poll",onConfirm:l,children:(0,w.jsx)(q.z,{variant:"icon-borderless",icon:"PollOutlined",onClick:k,iconSize:16.66})})},s)}),j&&!r&&(0,w.jsx)(ec,{children:(0,w.jsx)(e9.u,{content:b?"Remove action":"Add action",children:(0,w.jsx)(q.z,{variant:"icon-borderless",icon:"Action",onClick:h})},b)}),(0,w.jsx)(ec,{children:(0,w.jsx)(e9.u,{content:"Add emoji",children:(0,w.jsx)(er.h,{onClick:f})})}),(0,w.jsx)(ec,{children:(0,w.jsx)(eo.g,{onSelect:m,tooltip:"Add gif"})})]})]})]})}),e7=n(20452),te=j.ZP.div.withConfig({displayName:"styled__CategoryLabel",componentId:"sc-1v9n50v-0"})(["max-width:115px;"," ",""],k.c.ellipsis,k.c.t8),tt=j.ZP.div.withConfig({displayName:"styled__CategoryItem",componentId:"sc-1v9n50v-1"})(["width:406px;> div{&:last-child{"," ","}}"],k.c.ellipsis,k.c.t9),tn=(0,e7.$o)(),tr=(0,c.memo)(function(e){var t=e.labels,n=void 0===t?[]:t,r=e.selectedID,o=void 0===r?"":r,i=e.onChange,a=(0,c.useCallback)(function(e){i&&i(n.find(function(t){return t.id===e}))},[i,n]),s=(0,c.useMemo)(function(){return n.map(function(e){var t,n,r=e.id===o;return{active:r,onClick:function(){return a(e.id)},label:(0,w.jsxs)(tt,{children:[(0,w.jsx)("div",{children:null==e||null===(t=e.metadata)||void 0===t?void 0:t.displayName}),(0,w.jsx)("div",{style:{color:r?tn?p.O9.n1:p.O9.n7:p.O9.n5},children:null==e||null===(n=e.metadata)||void 0===n?void 0:n.description})]})}})},[a,n,o]),l=(0,c.useMemo)(function(){var e,t="Select a category";return o&&(t=null===(e=n.find(function(e){return e.id===o}))||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.displayName),(0,w.jsx)(te,{children:t})},[n,o]);return n.length?(0,w.jsx)(es.h_,{options:s,label:l,onChange:a,variant:"borderless"}):null}),to=(0,j.iv)(["> div{width:auto;margin-left:0px;flex-grow:1;min-width:0px;> div{display:flex;align-items:center;> span{max-width:180px;}}}"]),ti=j.ZP.div.withConfig({displayName:"styled__CategoryWrapper",componentId:"sc-wu2qnf-0"})(["display:flex;> div{width:100%;}",""],function(e){return e.theme.isMobile&&to}),ta=j.ZP.span.withConfig({displayName:"styled__MobileDropdownButtonText",componentId:"sc-wu2qnf-1"})(["color:",";margin-right:4px;"," ",""],p.O9.n5,k.c.t8,k.c.ellipsis),ts=(0,c.memo)(function(e){var t=e.labelsError,n=e.filteredGroupLabels,r=e.labelID,o=e.handlePostLabelChange,i=e.setMobileCategoryDialogOpen,a=(0,v.bI)("isMobile").isMobile,s=(0,c.useMemo)(function(){var e;return r?null===(e=n.find(function(e){return e.id===r}))||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.displayName:void 0},[r,n]);return(0,w.jsx)(ti,{children:(0,w.jsx)("div",{children:a?(0,w.jsxs)("div",{onClick:function(){i(!0)},children:[(0,w.jsx)(ta,{children:s||"Select a category"}),(0,w.jsx)(ea.J,{name:"DropDown",style:{width:10,flexShrink:0,color:p.O9.n5}})]}):(0,w.jsx)(tr,{error:!!t,disableUnderline:!t,labels:n,selectedID:r||void 0,onChange:o})})})}),tl=n(54361),tc=(0,j.ZP)(q.z).withConfig({displayName:"styled__PostTemplatesRemoveButton",componentId:"sc-p3ug6i-0"})(["position:absolute;top:","px;right:4px;"],function(e){return e.theme.isMobile?8:4}),tu=(0,j.ZP)(x.s).withConfig({displayName:"styled__PostTemplatesWrapper",componentId:"sc-p3ug6i-1"})(["position:relative;border-radius:5px;border:1px solid ",";background-color:",";padding:16px;margin-top:24px;> h4{margin:0 0 8px;color:",";padding-right:28px;","}> button:not(","){height:unset;text-align:left;color:",";"," &:hover{color:",";","}}"],p.O9.n3,p.O9.n2,p.O9.n5,k.c.t5,tc,p.O9.n5,k.c.t7,p.O9.n5,function(e){return e.theme.isMobile&&"text-decoration: none;"}),td=(0,c.memo)(function(e){var t=e.handleTemplateButtonClick,n=(0,tl.c8)(),r=(0,i.Z)(n,2),o=r[0],a=r[1];return o?null:(0,w.jsxs)(tu,{children:[(0,w.jsx)("h4",{children:"Fun post ideas to kick off your community:"}),(0,w.jsx)(q.z,{label:"\uD83D\uDDE3️ Ask members to introduce themselves and share a pic of their workspace",onClick:function(){return t("intros")},variant:"link",disableRipple:!0}),(0,w.jsx)(q.z,{label:"❤️ Ask members to share their favorite movie, book, travel destination, etc.",onClick:function(){return t("fav-things")},variant:"link",disableRipple:!0}),(0,w.jsx)(q.z,{label:"\uD83D\uDCCA Ask members to vote on their favorite pet",onClick:function(){return t("poll-fav-pets")},variant:"link",disableRipple:!0}),(0,w.jsx)(tc,{variant:"icon-borderless",icon:"Close",onClick:a,iconSize:16.66,tabIndex:-1})]})}),tp=n(16531),tf={intros:{id:"intros",title:"Welcome! Introduce yourself + share a pic of your workspace \uD83C\uDF89",body:"Let's get to know each other! Comment below sharing where you are in the world, a photo of your workspace, and something you like to do for fun. \uD83D\uDE0A"},"fav-things":{id:"fav-things",title:"What's your favorite book \uD83D\uDCDA, movie \uD83C\uDF9E️, and travel destination \uD83C\uDFDD️?",body:"Let's get to know each other! Comment below sharing your favorite movie, book, or travel destination!"},"poll-fav-pets":{id:"poll-co-working",title:"If you had to choose one pet, what would it be?",body:"Vote now!",poll:["\uD83D\uDC08 Cat","\uD83D\uDC15 Dog","\uD83D\uDC0D Snake"]}},tm=n(64487);function th(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?th(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):th(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tb={backgroundColor:p.O9.n2,padding:"0 0 24px 0"},tg=["","",""],tx=(0,c.forwardRef)(function(e,t){var n,r,a,p,b,g,y,j,k,O,S,_,M=e.post,N=e.level,E=e.rootPostID,A=e.parentPost,F=e.group,W=e.postType,H=e.confirmButtonLabel,q=e.onPostCreated,V=e.onPostUpdated,Y=e.onCancel,J=e.contentPrefix,X=e.contentPlaceholder,K=e.requireTitle,Q=e.hideLabel,ee=e.requireLabel,er=e.showMeta,eo=e.onContentChange,ea=e.followingPost,es=e.allUsers,el=e.onOpen,ec=e.poll,eh=e.filteredGroupLabels,ev=e.initialLabel,eb=e.commentId,eg=e.onEditorFocus,ew=e.onEditorBlur,eC=e.showPostTemplates,ej=(0,v.bI)("currentGroup","self","isMobile","disableEscape","showInputCancelMessage"),ek=ej.currentGroup,eR=ej.self,ez=ej.isMobile,eQ=ej.disableEscape,e9=ej.showInputCancelMessage,e3=ej.dispatch,e7=(0,c.useState)(!1),te=e7[0],tt=e7[1],tn=(0,c.useState)(""),tr=tn[0],to=tn[1],ti=(null==M||null===(p=M.metadata)||void 0===p?void 0:p.title)||"",ta=(0,c.useState)(ti),tc=ta[0],tu=ta[1],th=(0,c.useState)(null),tx=th[0],ty=th[1],tw=(0,c.useState)(null),tC=tw[0],tj=tw[1],tk=(0,c.useState)(!1),tO=tk[0],tP=tk[1],tD=(0,c.useRef)(!1),tI=(0,c.useRef)(),tZ=(0,c.useState)(ev),tS=tZ[0],t_=tZ[1],tM=(0,c.useState)(null),tN=tM[0],tE=tM[1],tA=(0,m.JZ)(null==M||null===(b=M.metadata)||void 0===b?void 0:b.attachments),tL=(0,c.useState)(tA),tT=tL[0],tF=tL[1],tB=(0,c.useState)(null),tR=tB[0],tz=tB[1],tG=(0,m.vc)(null==M||null===(g=M.metadata)||void 0===g?void 0:g.videoLinks),tU=(0,c.useState)(tG),t$=tU[0],tW=tU[1],tH=(0,c.useState)(null),tq=tH[0],tV=tH[1],tY=(0,c.useState)(null),tJ=tY[0],tX=tY[1],tK=(null==M||null===(y=M.metadata)||void 0===y?void 0:y.content)||J||"",tQ=(0,c.useState)(function(){return(0,I.P)(tK)})[0],t0=(0,c.useState)(tK),t1=t0[0],t2=t0[1],t9=(0,c.useState)(!1),t3=t9[0],t5=t9[1],t6=(0,c.useState)(ez),t4=t6[0],t8=t6[1],t7=(0,c.useState)(!1),ne=t7[0],nt=t7[1],nn=(0,c.useState)(!1),nr=nn[0],no=nn[1],ni=(0,c.useState)(!1),na=ni[0],ns=ni[1],nl=(0,c.useRef)(!1),nc=(0,c.useRef)(),nu=(0,c.useRef)(),nd=(0,c.useRef)(!1),np=0===N?"post":N>1?"reply":"comment",nf=(0,tl.C1)(),nm=(0,i.Z)(nf,3),nh=nm[0],nv=nm[1],nb=nm[2],ng=(0,c.useState)(null),nx=ng[0],ny=ng[1],nw=(0,R.V)((0,c.useRef)({}).current),nC=(0,i.Z)(nw,1)[0],nj=(0,c.useState)(0),nk=nj[0],nO=nj[1],nP=(0,c.useRef)(0),nD=(0,c.useRef)(),nI=(0,c.useState)([]),nZ=nI[0],nS=nI[1],n_=(0,tl.c8)(),nM=(0,i.Z)(n_,3),nN=nM[0],nE=nM[1],nA=nM[2],nL=(0,c.useState)(!1),nT=nL[0],nF=nL[1],nB=0===N&&!M&&(0,z.CP)({user:eR,group:F,member:null==eR?void 0:eR.member}),nR=!!(null!=ek&&null!==(j=ek.metadata)&&void 0!==j&&j.canNotifyAll),nz=(0,c.useState)(!!ec),nG=nz[0],nU=nz[1],n$=(0,c.useState)(!1),nW=n$[0],nH=n$[1],nq=(0,c.useState)(ec?null==ec||null===(k=ec.entries)||void 0===k?void 0:k.map(function(e){return e.text}):tg),nV=nq[0],nY=nq[1],nJ=(0,c.useMemo)(function(){var e;return ec&&!(0,m.wq)(null==ec||null===(e=ec.entries)||void 0===e?void 0:e.map(function(e){return e.text}),nV)},[ec,nV]),nX=!!tT.length||!!t$.length,nK=(0,c.useMemo)(function(){return tc!==ti||t1!==tK||!(0,m.wq)(tT,tA)||tS!==ev||!(0,m.wq)(t$,tG)||nJ||ec&&!nG||!ec&&nG},[tc,t1,ti,tK,tT,tA,tS,ev,t$,tG,nJ,ec,nG]);(0,c.useEffect)(function(){return nl.current=!0,function(){nl.current=!1}},[]),(0,c.useEffect)(function(){el&&!tD.current&&nX&&(tD.current=!0,el())},[nX,el]);var nQ=(0,c.useCallback)(function(){t4&&t8(!1),nh&&nb(),Y&&Y(),eQ&&e3(G.Ek,function(){return{disableEscape:!1}}),ez&&nx&&(B().push(nx),ny(null))},[t4,Y,e3,eQ,nx,ez,nh,nb]);(0,c.useEffect)(function(){var e=function(e,t){var n=t.shallow;if(ez){if(!nK||nd.current||n)nQ();else throw ny(e),nv(),B().events.emit("routeChangeError"),"Abort route change. Please ignore this error."}else if(!nK||nd.current||n||confirm("You haven't finished your ".concat(np," yet. Do you want to leave without finishing?")))nQ();else throw B().events.emit("routeChangeError"),"Abort route change. Please ignore this error."},t=function(e){nK&&!nd.current&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",t),B().events.on("routeChangeStart",e),function(){window.removeEventListener("beforeunload",t),B().events.off("routeChangeStart",e)}},[nK,np,nQ,ez,nv]),(0,c.useEffect)(function(){var e,t;nl.current&&(null!=M&&null!==(e=M.metadata)&&void 0!==e&&e.attachments&&tF((0,m.JZ)(M.metadata.attachments)),null!=M&&null!==(t=M.metadata)&&void 0!==t&&t.labels&&t_(M.metadata.labels))},[M]);var n0=(0,c.useCallback)(function(e){u.Z.deleteFile({fileId:e})},[]),n1=(0,c.useCallback)(function(){nA(),null==eg||eg()},[nA,eg]);(0,c.useEffect)(function(){e3(G.Ek,function(){return{disableEscape:nK}})},[nK,e3]);var n2=(0,c.useCallback)(function(){nU(!1),nY(tg)},[]),n9=(0,c.useMemo)(function(){return nG?(0,w.jsx)(eW,{children:(0,w.jsx)(et,{options:nV,setOptions:nY,initialPoll:ec,onRemove:n2})}):null},[ec,nG,nV,n2]),n3=(0,c.useCallback)(function(){var e;if(!(null!==(e=nc.current)&&void 0!==e&&e.showPreviewState())){if(!nK){nQ();return}setTimeout(function(){if(window.confirm("You haven't finished your ".concat(np," yet. Do you want to leave without finishing?"))){var e,t;tT.filter(function(e){return!tA.includes(e)}).forEach(function(e){n0(e)}),null===(e=nu.current)||void 0===e||e.clear(),null===(t=nc.current)||void 0===t||t.restoreState({}),nQ()}},0)}},[nQ,tT,nK,tA,np,n0]);(0,c.useEffect)(function(){var e=function(e){"Escape"===e.code&&setTimeout(function(){n3()},100)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[n3]),(0,c.useEffect)(function(){e9&&(n3(),e3(G.Ek,function(){return{showInputCancelMessage:!1}}))},[e3,n3,e9]);var n5=(0,c.useCallback)((n=(0,o.Z)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!nc.current){e.next=15;break}return e.prev=1,e.next=4,nc.current.addFiles({files:t});case 4:(n=e.sent.error)&&tz(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("PostInputForm: addFiles failed"),tm.Tb(e.t0);case 13:e.next=17;break;case 15:console.error("attachments ref not available"),tm.Tb(Error("PostInputForm: attachments ref not available"));case 17:case"end":return e.stop()}},e,null,[[1,9]])})),function(e){return n.apply(this,arguments)}),[]),n6=(0,c.useCallback)(function(e){var t=(0,ei.QT)({e:e,accept:(0,ei.Yw)()});t&&n5(t)},[n5]),n4=(0,c.useCallback)((r=(0,o.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n5(t.target.files);case 2:t.target.value="";case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),[n5]),n8=(0,c.useCallback)(function(e){n4({target:{files:e}})},[n4]),n7=(0,l.u)({onDrop:n8}),re=n7.getRootProps,rt=n7.getInputProps,rn=n7.isDragActive,rr=re(),ro=rt({onClick:function(e){return e.preventDefault()}}),ri=(0,c.useCallback)(function(){if(!nK){nQ();return}nv()},[nQ,nK,nv]);(0,c.useImperativeHandle)(t,function(){return{hasChanges:function(){return nK},cancel:function(){return ez?ri():n3()},getEditor:function(){return nu.current}}});var ra=(0,c.useCallback)(function(e){ty(null),tu(e.target.value)},[]),rs=(0,c.useCallback)(function(e){var t;if(e){if(409===e.status){tX("Comments have been disabled");return}if(422!==e.status){tX("There was an error");return}if((null===(t=e.data)||void 0===t||null===(t=t.fields)||void 0===t?void 0:t.length)===0){tX("Validation failed");return}e.data.fields.forEach(function(e){switch(e.name){case"metadata.title":ty(e.error);break;case"metadata.content":tj(e.error);break;case"metadata.labels":tE(e.error);break;case"metadata.attachments":tz(e.error);break;case"metadata.video_links":tV(e.error);break;default:tX(e.error)}})}},[]),rl=(0,c.useCallback)((0,o.Z)(s().mark(function e(){var t,n,r,o,i,a;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!nG){e.next=6;break}return e.next=3,u.Z.createPoll({groupId:F.id,options:nV.filter(function(e){return!!e})});case 3:r=e.sent.data.pollId;case 6:return e.next=8,u.Z.createPost({postType:W,rootID:E,parentID:(null==A?void 0:A.id)||void 0,groupID:F.id,title:tc,content:t1,attachments:tT?tT.join(","):void 0,videoLinks:t$.length?t$.join("\n"):void 0,labels:0===N&&tS?tS:void 0,notify:nT?"members":void 0,pollId:r,follow:0===N,action:nW});case 8:if(i=(o=e.sent).data,!(a=o.error)){e.next=15;break}return rs(a),ns(!1),e.abrupt("return");case 15:null===(t=nu.current)||void 0===t||t.clear(),null===(n=nc.current)||void 0===n||n.restoreState({}),nd.current=!0,q({post:i});case 19:case"end":return e.stop()}},e)})),[t1,tT,null==F?void 0:F.id,tS,N,nT,q,A,nV,W,E,tc,t$,nG,nW,rs]),rc=(0,c.useCallback)((0,o.Z)(s().mark(function e(){var t,n,r,o,i,a;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=tT.join(","),!(!ec&&nG)){e.next=8;break}return r=nV.filter(function(e){return!!e}),e.next=5,u.Z.createPoll({groupId:F.id,options:r});case 5:n=e.sent.data.pollId;case 8:return e.next=10,u.Z.updatePost({postID:M.id,title:tc,content:t1,attachments:t,videoLinks:t$.length?t$.join("\n"):"",labels:0===N&&tS?tS:void 0,deletePoll:ec&&!nG,pollId:n});case 10:if(i=(o=e.sent).data,a=o.error,!(ec&&!nG)){e.next=18;break}return e.next=16,u.Z.deletePoll({pollId:ec.id});case 16:e.next=22;break;case 18:if(!nJ){e.next=22;break}return r=nV.filter(function(e){return!!e}),e.next=22,u.Z.updatePoll({pollId:ec.id,groupId:F.id,options:r});case 22:if(!a){e.next=26;break}return rs(a),ns(!1),e.abrupt("return");case 26:nd.current=!0,V({post:i,newPollOptions:r,pollId:(null==ec?void 0:ec.id)||n,pollDeleted:ec&&!nG});case 28:case"end":return e.stop()}},e)})),[M,t1,tT,null==F?void 0:F.id,tS,N,V,ec,nJ,nV,nG,tc,t$,rs]),ru=(0,c.useCallback)(function(){if(ty(null),tj(null),tz(null),tV(null),tE(null),tX(null),K&&!tc.trim()){ty("Your post needs a title");return}if(ee&&!tS){tE("You must select a category");return}ns(!0),(0,o.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!M){e.next=5;break}return e.next=3,rc();case 3:e.next=7;break;case 5:return e.next=7,rl();case 7:t4&&t8(!1),ns(!1);case 9:case"end":return e.stop()}},e)}))()},[M,rc,rl,t4,t8,ns,tS,ee,K,tc]),rd=(0,c.useCallback)(function(){if("unlink"===tr){nu.current&&nu.current.unsetLink();return}tt(!0)},[tr]),rp=(0,c.useCallback)(function(e){var t=e.destination;tt(!1),nu.current&&(nu.current.setLink(t),nu.current.focus())},[]),rf=(0,c.useCallback)(function(){tt(!1),nu.current&&nu.current.focus()},[]),rm=(0,c.useCallback)(function(){t5(!0)},[]),rh=(0,c.useCallback)(function(){null!=ec&&ec.totalVotes||(nU(function(e){return!e}),nH(!1))},[null==ec?void 0:ec.totalVotes]),rv=(0,c.useCallback)(function(e){var t=e.destination;t5(!1);var n=(0,h.ak)(t),r=n.provider,i=n.videoID;if(r===h.a.Unsupported||!i){tV("Invalid video url");return}(0,o.Z)(s().mark(function e(){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nc.current.addVideoLink({url:t});case 2:(n=e.sent.error)&&tV(n);case 5:case"end":return e.stop()}},e)}))()},[]),rb=(0,c.useCallback)(function(){t5(!1),nu.current&&nu.current.focus()},[]),rg=(0,c.useCallback)(function(e){var t=e.files,n=e.videoLinks;tz(null),tV(null),tF((void 0===t?[]:t).map(function(e){return e.id})),tW(void 0===n?[]:n)},[]),rx=(0,c.useCallback)(function(e){no(e)},[]),ry=(0,c.useCallback)(function(e){tE(null),t_(e.id),nt(!1)},[]),rw=(0,c.useCallback)((a=(0,o.Z)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nc.current.addFiles({files:[{id:t.id,isGiphy:!0,metadata:{fileName:"".concat(t.query,".gif"),contentType:"image/gif",externalSrc:t.md,externalSrcSmall:t.sm}}]});case 2:(n=e.sent.error)&&tz(n);case 5:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),[]),rC=(0,c.useCallback)(function(){nH(function(e){return!e}),nU(!1)},[]),rj=(0,c.useCallback)(function(e){var t,n=tf[e];n&&(tu(n.title),null===(t=nu.current)||void 0===t||t.set([{type:"paragraph",content:[{type:"text",text:n.body}]}]),n.poll?(nU(!0),nY(n.poll)):n2())},[n2]),rk=tx||tC||tN||tR||tq||tJ||"",rO=!(0,c.useMemo)(function(){return!(0,f.Kv)({content:t1}).trim()},[t1])||!!tT.length||!!t$.length,rP=tx||tC||tN||tq||tJ||"",rD=(0,c.useMemo)(function(){return nG&&nV.reduce(function(e,t){return e&&!t},!0)},[nG,nV]),rI=!rO||!!rP||!nK||nr||rD||na;(0,c.useEffect)(function(){nk===nP.current||(nP.current=nk,rI||ru())},[nk,ru,rI]);var rZ=(0,c.useCallback)(function(e){tj(null);var t=(0,I.C)(e);t2(t),eo&&eo(t)},[eo]),rS=(0,c.useCallback)(function(){nu.current&&(nu.current.canSetLink()?to("link"):nu.current.canUnsetLink()?to("unlink"):to("disabled"))},[]),r_=(0,c.useCallback)(function(){nO(function(e){return e+1})},[]);(0,c.useEffect)(function(){var e={},t=[];es.forEach(function(n){e[null==n?void 0:n.id]||eR.id===(null==n?void 0:n.id)||(e[null==n?void 0:n.id]=!0,t.push(n))}),nS(t.map(function(e){var t="".concat(null==e?void 0:e.firstName," ").concat(null==e?void 0:e.lastName);return{id:null==e?void 0:e.id,fullSearch:(0,d.Z)(t),lastSearch:(0,d.Z)(null==e?void 0:e.lastName),user:e}}))},[es,null==eR?void 0:eR.id]),(0,c.useEffect)(function(){el&&!rI&&el()},[rI,el]);var rM=(0,c.useCallback)(function(e){nN?(tu((0,m.QS)({emoji:e,inputRef:tI})),setTimeout(function(){tI.current.focus()},0)):nu.current.insert(e)},[nN]),rN=(0,z.CP)({user:eR,member:null==eR?void 0:eR.member,group:ek}),rE=(0,c.useMemo)(function(){var e=[{label:"Attach file",htmlFor:"file-upload-input-".concat(eb||(null==M?void 0:M.id)||"post")},{label:"Add link",onClick:rd},{label:"Add video link",onClick:rm}];return rN&&0===N&&!M&&e.push({label:nW?"Remove action":"Add action",onClick:rC}),e},[eb,M,rd,rm,rC,rN,N,nW]),rA=!rI||M||nX;(0,c.useEffect)(function(){if(!ez&&1===N&&rA&&!M){var e;null===(e=nD.current)||void 0===e||e.scrollIntoView()}},[ez,N,M,rA]);var rL=(0,c.useMemo)(function(){return ez?void 0:!rI||!(N>1)||nr||nX||M?rA?(0,w.jsxs)(en.X,{justifyContent:"flex-end",marginBottom:8,children:[(0,w.jsx)(eH,{onClick:n3,variant:"borderless",label:"Cancel"}),(0,w.jsx)("div",{onClick:rI?null:ru,children:(0,w.jsx)(eq,{disabled:rI,label:H,loading:na})})]}):void 0:(0,w.jsxs)(en.X,{justifyContent:"flex-end",marginTop:16,marginBottom:8,children:[(0,w.jsx)(eH,{onClick:n3,variant:"borderless",label:"Cancel"}),(0,w.jsx)(eq,{disabled:!0,label:H,loading:na})]})},[rI,nr,nX,M,ez,H,na,N,rA,n3,ru]),rT=(0,c.useMemo)(function(){if(te)return(0,w.jsx)(P,{open:!0,onConfirm:rp,onClose:rf})},[te,rp,rf]),rF=(0,c.useMemo)(function(){if(t3)return(0,w.jsx)(C,{open:!0,onConfirm:rv,onClose:rb})},[t3,rv,rb]),rB=(0,c.useMemo)(function(){if(ez)return(0,w.jsx)(e4,{open:nh,postTypeName:np,onConfirm:nQ,onClose:nb})},[ez,nQ,np,nh,nb]),rR=(0,c.useMemo)(function(){if(!Q)return(0,w.jsx)(ts,{labelsError:tN,filteredGroupLabels:eh,labelID:tS,handlePostLabelChange:ry,setMobileCategoryDialogOpen:nt})},[tN,eh,tS,ry,nt,Q]),rz=(0,c.useMemo)(function(){if(ne)return(0,w.jsx)(L,{open:ne,onConfirm:ry,onClose:function(){return nt(!1)},labels:eh,selectedID:tS||void 0})},[ne,ry,nt,eh,tS]);if(N>0)return(0,w.jsxs)(U.df,{onChange:function(e){tP(function(t){return t||e})},children:[(0,w.jsxs)(eN,tv(tv({},rr),{},{children:[(0,w.jsxs)(x.s,{width:"100%",children:[(0,w.jsxs)(en.X,{width:"100%",gap:4,children:[(0,w.jsxs)(eA,{marginBottom:!ez&&rA?16:0,width:"100%",children:[(0,w.jsx)("input",tv({},ro)),(0,w.jsx)(e_,{$isVisible:nC||rn,children:(0,w.jsx)(eM,{children:(0,w.jsx)(eP,{children:"Drop files here to upload"})})}),(0,w.jsxs)(eE,{$isDragging:nC||rn,children:[(0,w.jsx)(eL,{$following:ea,children:(0,w.jsx)(eD,{children:(0,w.jsx)($.Z,{ref:nu,onPaste:n6,initialContent:tQ,autoFocus:!ez&&!!tO,placeholder:X,onSelectionChange:rS,onChange:rZ,onKeyboardSave:r_,minHeight:0,userMentionsEnabled:!0,courseReferencesEnabled:((null==F||null===(_=F.metadata)||void 0===_?void 0:_.numCourses)||0)>0,threadUsers:nZ,groupID:null==F?void 0:F.id,onFocus:eg,onBlur:ew,context:"post-input-form-comment"})})}),(0,w.jsx)(eK,{$hasAttachments:nX,children:(0,w.jsx)(D.Z,{ref:nc,editing:!0,post:M,onFileInputChange:n4,onStateChange:rx,onChange:rg,level:N})}),(0,w.jsx)(eT,{children:(0,w.jsx)(e1,{commentId:eb,handleFileInputChange:n4,post:M,menuItems:rE,handleLinkIconClick:rd,handleAddVideoIconClick:rm,linkable:tr,onEmojiClick:rM,onGifSelect:rw})})]})]}),ez&&nK&&(0,w.jsx)(e0,{variant:"icon-borderless-no-hover",icon:"Send",iconSize:21,$canSubmit:!rI,onClick:rI?void 0:ru})]}),!!rk&&(0,w.jsx)(e2.x,{justifyContent:"flex-end",marginTop:16,children:(0,w.jsx)(ex,{children:rk})}),rL]}),rT,rF]})),rB,(0,w.jsx)("div",{ref:nD})]});var rG=(0,w.jsxs)(x.s,{width:"100%",children:[er&&(0,w.jsxs)(en.X,{gap:8,marginBottom:8,children:[(0,w.jsx)(T.Z,{disableLink:!0,size:25,user:eR,group:F}),(0,w.jsxs)(e$,{children:[(0,w.jsx)(eZ,{children:"".concat(eR.firstName," ").concat(eR.lastName)}),(0,w.jsxs)(eS,{children:["\xa0","posting in","\xa0"]}),(0,w.jsx)(eZ,{children:null==F||null===(O=F.metadata)||void 0===O?void 0:O.displayName})]})]}),K&&(0,w.jsx)(eB,{children:(0,w.jsx)(eG,{value:tc,variant:"borderless",ref:tI,$hasError:!!tx,onChange:ra,onFocus:nE,placeholder:"Title",staticLabel:!0})}),(0,w.jsxs)(eU,{children:[(0,w.jsx)(eD,{children:(0,w.jsx)($.Z,{ref:nu,initialContent:tQ,onPaste:n6,autoFocus:!0,placeholder:X,onSelectionChange:rS,onFocus:n1,onBlur:ew,onChange:rZ,userMentionsEnabled:!0,courseReferencesEnabled:((null==F||null===(S=F.metadata)||void 0===S?void 0:S.numCourses)||0)>0,threadUsers:nZ,groupID:null==F?void 0:F.id,onKeyboardSave:r_})}),nW&&(0,w.jsxs)(eu,{children:[(0,w.jsxs)(ed,{children:[(0,w.jsxs)(ep,{children:[(0,w.jsx)(eJ,{name:"Action"}),"Complete action"]}),(0,w.jsx)(ef,{onClick:rC,children:"Remove"})]}),(0,w.jsx)(em,{children:"Describe the action you want members to complete. Example: “Introduce yourself and share a picture of your workspace”. When somebody comments, the action will be marked as complete. Tip: Pin action posts to course pages to make them practical and interactive."})]}),n9,rN&&eC&&(0,w.jsx)(td,{handleTemplateButtonClick:rj}),ez&&(0,w.jsx)(D.Z,{ref:nc,editing:!0,post:M,onFileInputChange:n4,onStateChange:rx,onChange:rg,level:N})]}),!ez&&(0,w.jsx)(D.Z,{ref:nc,editing:!0,post:M,onFileInputChange:n4,onStateChange:rx,onChange:rg,level:N}),!!rk&&(0,w.jsx)(en.X,{justifyContent:"flex-end",paddingTop:12,marginBottom:8,children:(0,w.jsx)(eI,{children:rk})}),ez&&0===N&&(0,w.jsx)(Z.i,{}),(0,w.jsxs)(en.X,{paddingBottom:8,paddingTop:ez?8:24,alignItems:"center",children:[(0,w.jsx)(eV,{children:(0,w.jsx)(e8,{post:M,handleFileInputChange:n4,level:N,menuItems:rE,poll:ec,pollOptions:nV,showPollForm:nG,handlePollIconClick:rh,handleLinkIconClick:rd,linkable:tr,handleAddVideoIconClick:rm,onEmojiClick:rM,onGifSelect:rw,onActionClick:rC,isActionPost:nW})}),(0,w.jsx)(eO,{children:rR}),!ez&&(0,w.jsxs)(en.X,{justifyContent:"flex-end",children:[(0,w.jsx)(eY,{onClick:n3,variant:"borderless",label:"Cancel"}),(0,w.jsx)(e6,{notifyAll:nT,handleSubmitClick:ru,submitButtonDisabled:rI,confirmButtonLabel:H,loading:na})]}),rT,rF,rz]}),rB,!ez&&nB&&(0,w.jsx)(e5,{canNotifyAll:nR,setNotifyAll:nF,notifyAll:nT})]});return ez&&0===N?(0,w.jsxs)(tp.u_,{open:t4,shouldFullscreenOnMobile:!0,onClose:ri,wrapperStyle:tb,children:[(0,w.jsx)(en.X,{justifyContent:"flex-end",margin:"11px 10px",children:(0,w.jsx)(e6,{notifyAll:nT,handleSubmitClick:ru,submitButtonDisabled:rI,confirmButtonLabel:H,loading:na})}),nB&&(0,w.jsx)(e5,{canNotifyAll:nR,setNotifyAll:nF,notifyAll:nT}),(0,w.jsx)(ey,{children:rG})]}):(0,w.jsx)(eN,tv(tv({},rr),{},{children:(0,w.jsxs)(eX,{$level:N,$isPost:!!M,children:[(0,w.jsx)("input",tv({},ro)),(0,w.jsx)(e_,{$isVisible:nC||rn,children:(0,w.jsx)(eM,{children:(0,w.jsx)(eP,{children:"Drop files here to upload"})})}),(0,w.jsx)(eF,{children:rG})]})}))});tx.defaultProps={postType:"generic",requireTitle:!1,hideLabel:!1,requireLabel:!1,showMeta:!0,confirmButtonLabel:"Post",allUsers:[],filteredGroupLabels:[],initialLabel:"",showPostTemplates:!1};var ty=(0,c.memo)(tx)},89557:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(23450),o=n.n(r),i=n(67294),a=n(14251),s=n(65009),l=n(86031),c=n(88325),u=n(73793),d=n(40192),p=n(73674),f=n(76958),m=n(35306),h=n(50378),v=n(20668),b=(0,h.iv)(["span{color:",";}"],a.O9.sd1),g=h.ZP.span.withConfig({displayName:"styled__GroupInfoText",componentId:"sc-1ayhwt6-0"})(["color:",";max-width:",";white-space:nowrap;"," ",";"],a.O9.n7,function(e){return e.theme.isMobile?"30vw":"300px"},v.c.t11,b),x=h.ZP.div.withConfig({displayName:"styled__GroupNameText",componentId:"sc-1ayhwt6-1"})(["",";"],v.c.t6),y=h.ZP.div.withConfig({displayName:"styled__PostedDate",componentId:"sc-1ayhwt6-2"})(["color:",";white-space:nowrap;",";"],a.O9.n5,v.c.t11),w=(0,h.ZP)(l.x).withConfig({displayName:"styled__UserNameWrapper",componentId:"sc-1ayhwt6-3"})(["overflow:hidden;text-overflow:ellipsis;padding-left:",";"],function(e){return e.$hideAvatar?0:"8px"}),C=(0,h.ZP)(l.x).withConfig({displayName:"styled__PostTimeWrapper",componentId:"sc-1ayhwt6-4"})(["align-items:center;height:100%;overflow:hidden;"]),j=h.ZP.div.withConfig({displayName:"styled__PostTime",componentId:"sc-1ayhwt6-5"})(["color:",";margin-left:4px;",";",";",";"],a.O9.n5,v.c.t11,v.c.ellipsis,b),k=n(85893);function O(e){var t,n=e.post,r=e.group,i=e.hideAvatar,h=e.avatarSize,v=e.showVotes,b=e.menu,O=e.hideEdited,P=e.userNameColor,D=e.style,I=e.showGroup,Z=e.isPostDetailRoot,S=e.sortType,_=n.metadata||{},M=_.deleted?null:n.user,N=(0,u.bI)("isMobile").isMobile,E=parseInt(null==n||null===(t=n.metadata)||void 0===t?void 0:t.upvotes)||0,A=v?o()("like",E,!0):"",L=!!_.contentEdit||!!_.titleEdit||!!_.attachmentsEdit;return N&&Z?(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(l.x,{alignItems:"center",flexGrow:1,style:D,children:[(0,k.jsx)(p.Z,{user:M,group:r,size:h}),(0,k.jsxs)(l.x,{alignItems:"baseline",gap:4,padding:"0px 8px",style:{minWidth:0},children:[(0,k.jsx)(f.Z,{userPreview:!I,user:M,userNameHl:_.userNameHl,group:r,color:P,hoverUnderline:!0,typographyVariant:"t6"}),(0,k.jsx)(d.Z,{post:n,showMobile:!0,children:(0,k.jsxs)(j,{children:[(0,c.ur)({value:n.createdAt,justNow:!1}),!O&&L?" (edited)":""]})})]}),b&&(0,k.jsx)(l.x,{justifyContent:"flex-end",flexGrow:1,children:b})]})}):N&&!I?(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(l.x,{alignItems:"center",justifyContent:"space-between",flexGrow:1,style:D,children:[!i&&(0,k.jsx)(p.Z,{user:M,group:r,size:h,userPreview:!I}),(0,k.jsxs)(w,{$hideAvatar:i,children:[(0,k.jsx)(f.Z,{userPreview:!I,user:M,userNameHl:_.userNameHl,group:r,color:P,hoverUnderline:!0,typographyVariant:"t6"}),(0,k.jsx)(d.Z,{post:n,showMobile:!0,children:(0,k.jsx)(C,{children:(0,k.jsxs)(j,{children:[A&&(0,k.jsx)("span",{style:{color:a.O9.n5,marginLeft:3},children:A})," • ".concat((0,c.ur)({justNow:!1,value:"newest-cm"===S&&n.metadata.lastComment?n.metadata.lastComment:n.createdAt})),!O&&L?" (edited)":""]})})})]}),b]})}):(0,k.jsxs)(s.X,{gap:8,alignItems:"center",flexGrow:1,style:D,children:[!i&&(0,k.jsx)(p.Z,{user:M,group:r,size:h,userPreview:!I}),(0,k.jsxs)(s.X,{alignItems:"baseline",children:[(0,k.jsx)(l.x,{flexGrow:1,marginRight:4,children:(0,k.jsx)(f.Z,{userPreview:!I,user:M,userNameHl:_.userNameHl,group:r,color:P,hoverUnderline:!0,typographyVariant:"t6",maxWidth:N?"30vw":"300px",showLevelTitle:!0})}),I&&(0,k.jsxs)(s.X,{gap:4,alignItems:"center",paddingRight:4,children:[(0,k.jsx)(g,{children:"in"}),(0,k.jsx)(x,{children:(0,k.jsx)(m.Z,{group:r})})]}),(0,k.jsxs)(y,{children:[I&&(0,k.jsx)("span",{children:"\xa0"}),"".concat(A," • ").concat((0,c.ur)({value:"newest-cm"===S&&n.metadata.lastComment?n.metadata.lastComment:n.createdAt})),!O&&L?" (edited)":""]})]}),b&&(0,k.jsx)(l.x,{justifyContent:"flex-end",flexGrow:1,children:b})]})}O.defaultProps={hideAvatar:!1,avatarSize:20,showVotes:!1,hideEdited:!1,userNameColor:a.O9.n7};var P=(0,i.memo)(O)},40192:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(67294),o=n(11163),i=n(80008),a=n.n(i),s=n(36581),l=n(66703),c=n(5095),u=n(20668),d=n(14251),p=n(50378).ZP.div.withConfig({displayName:"styled__TooltipText",componentId:"sc-19vzj1a-0"})(["color:",";",";"],function(e){return e.theme.isDarkTheme?d.O9.n7:d.O9.n1},u.c.t11),f=n(85893),m=(0,r.memo)(function(e){var t=e.post,n=e.children,i=e.showMobile,u=(0,o.useRouter)(),d=u.pathname,m=u.query,h=(0,c.mp)({pathname:d,query:m}),v=(0,r.useCallback)(function(){return(0,f.jsxs)(s.s,{gap:4,children:[(0,f.jsx)(p,{children:"".concat(h?"Post created: ":"").concat(a()(t.createdAt).format("MMM Do YYYY h:mma"))}),t.metadata.lastComment&&h&&(0,f.jsx)(p,{children:"Last comment: ".concat(a()(t.metadata.lastComment/1e6).format("MMM Do YYYY h:mma"))})]})},[t,h]);return(0,f.jsx)(l.u,{content:v,showMobile:void 0!==i&&i,children:n})})},57305:function(e,t,n){n.d(t,{C:function(){return function e(t,n){return t?t.map(function(t){var n,r;switch(t.type){case"paragraph":return(null===(n=t.content)||void 0===n?void 0:n.map(function(e){var t;switch(e.type){case"text":if(null!==(t=e.marks)&&void 0!==t&&t.length){if(e.marks.length>1&&console.error("text node with 2+ marks",e),"link"===e.marks[0].type)return"[".concat((0,i.bk)(e.text||e.marks[0].attrs.href),"](").concat(e.marks[0].attrs.href,")");return console.error("text node with unknown mark type",e),""}return(0,i.bk)(e.text)||"";case"user-mention":return"[@".concat((0,i.bk)(e.attrs.label),"](obj://user/").concat(e.attrs.id,")");case"course-reference":return"[#".concat((0,i.bk)(e.attrs.label),"](obj://course/").concat(e.attrs.id,"?cn=").concat(e.attrs.courseName,")")}}).join(""))||"";case"unorderedList":return"[ul]"+((null===(r=t.content)||void 0===r?void 0:r.map(function(t){return"[li]"+e(t.content)}).join(""))||"");case"orderedList":var o,a,s=(null===(o=t.attrs)||void 0===o?void 0:o.start)||0;return(s>0?"[ol:".concat(s,"]"):"[ol]")+((null===(a=t.content)||void 0===a?void 0:a.map(function(t){return"[li]"+e(t.content)}).join(""))||"");default:return console.error("unknown content node type: ".concat(t.type)),"(unknown node type: ".concat(t.type,")")}}).join(o().isUndefined(n)?"\n":n):""}},P:function(){return function e(t){if(!t)return[{type:"paragraph"}];var n=[];return t.split("\n").forEach(function(t){var r=(0,i.Ne)({content:t});if(r){n.push({type:r.listType,attrs:{start:r.start},content:r.items.map(function(t){return{type:"listItem",content:e(t)}})});return}var o={type:"paragraph"};if(!t){n.push(o);return}var a=(0,i.fV)({content:t});if(!a.length){o.content=[{type:"text",text:(0,i.en)(t)}],n.push(o);return}var s=[],l=0;a.forEach(function(e){var n=e.label.text,r=e.destination.text;if(l<e.label.start-1&&s.push({type:"text",text:(0,i.en)(t.slice(l,e.label.start-1))}),l=e.destination.end+1,e.destination.text.startsWith("obj://user/"))s.push({type:"user-mention",attrs:{id:r.slice(11),label:n.slice(1)}});else if(e.destination.text.startsWith("obj://course/")){var o=/obj:\/\/course\/(.{32})\?cn=(.+)/.exec(r);if(o){var a=o[1],c=o[2];s.push({type:"course-reference",attrs:{id:a,label:n.slice(1),courseName:c}})}}else s.push({type:"text",text:n,marks:[{type:"link",attrs:{href:r,target:"_blank"}}]})}),l<t.length&&s.push({type:"text",text:(0,i.en)(t.slice(l))}),o.content=s,n.push(o)}),n}}});var r=n(96486),o=n.n(r),i=n(29610)},77567:function(e,t,n){n.d(t,{Z:function(){return er}});var r=n(90116),o=n(50029),i=n(64687),a=n.n(i),s=n(20336),l=n(52701),c=n(93237),u=n(58364),d=n(71284),p=n(67294),f=n(95419),m=n(37500),h=n(12967),v=n(59499),b=n(70273),g=n(16722),x=n(2376),y=n(73793),w=n(14251),C=n(65009),j=n(36581),k=n(14760),O=n(85893),P=(0,p.memo)(function(e){var t=e.item,n=e.isCurrent,r=e.onMouseOver,o=e.onClick,i=t.course,a=(0,y.bI)("isMobile","currentGroup"),s=a.isMobile,l=a.currentGroup,c=i.metadata,u=c.displayTitle,d=c.videoThumbnail,p=c.courseTitle,f=l.metadata.numCourses;return(0,O.jsx)("div",{style:{cursor:"pointer",display:"flex",alignItems:"center",background:n?w.O9.p2:"transparent",padding:"0px 16px",height:56,width:s?"100vw":void 0},onMouseEnter:r,onClick:o,children:(0,O.jsxs)(C.X,{alignItems:"center",gap:12,children:[(0,O.jsx)("div",{style:{height:40,width:40,borderRadius:4,backgroundImage:'url("'.concat(d,'")'),backgroundSize:"cover"}}),(0,O.jsxs)(j.s,{children:[(0,O.jsx)(k.Z,{variant:"t5",maxLines:1,ellipsis:!0,color:n?w.O9.fgPrimary:void 0,style:{width:s?void 0:273,maxWidth:s?void 0:273},children:u}),f>1?(0,O.jsx)(k.Z,{variant:"t11",maxLines:1,ellipsis:!0,color:n?w.O9.fgPrimary:void 0,style:{width:s?void 0:273,maxWidth:s?void 0:273},children:p}):null]})]})})}),D=n(45088);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Z=(0,p.forwardRef)(function(e,t){var n=e.items,r=e.command,o=e.itemComponent,i=(0,p.useState)(0),a=i[0],s=i[1];(0,p.useEffect)(function(){s(0)},[n]);var l=(0,p.useCallback)(function(e){var t=n[e];t&&r(t)},[n,r]);return(0,p.useImperativeHandle)(t,function(){return{onKeyDown:function(e){var t=e.event;return!!n.length&&("ArrowUp"===t.key?(s((a+n.length-1)%n.length),!0):"ArrowDown"===t.key?(s((a+1)%n.length),!0):"Enter"===t.key&&(l(a),!0))}}},[n,a,l]),n.length?(0,O.jsx)("div",{className:"skool-editor-suggestion-list",children:n.map(function(e,t){return(0,O.jsx)(o,{item:e,isCurrent:t===a,onMouseOver:function(){return s(t)},onClick:function(){return l(t)}},t)})}):null});function S(e){var t,n;return{onStart:function(r){var o,i,a=null!==(o=null===(i=r.items)||void 0===i?void 0:i.metadata)&&void 0!==o?o:{},s=a.isMobile,l=a.context,c=s&&"post-input-form-comment"===l;t=new d.M_(Z,{props:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){(0,v.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({itemComponent:e},r),editor:r.editor});var u=[{name:"flip",options:{fallbackPlacements:[],allowedAutoPlacements:c?["top-start"]:["top-start","bottom-start"]}}];c&&u.push({name:"offset",options:{offset:[0,24]}}),n=(0,D.ZP)("body",{getReferenceClientRect:function(){if(!r.clientRect)return{x:0,y:0,width:0,height:0};var e=r.clientRect();return s&&(e.x=0),e},appendTo:function(){return document.body},content:t.element,showOnCreate:!0,interactive:!0,trigger:"manual",zIndex:1300,placement:c?"top-start":"auto-start",maxWidth:s?"calc(100vw - 10px)":"none",popperOptions:{modifiers:u}})},onUpdate:function(e){var n;null===(n=t)||void 0===n||n.updateProps(e)},onKeyDown:function(e){var n;return null===(n=t)||void 0===n||null===(n=n.ref)||void 0===n?void 0:n.onKeyDown(e)},onExit:function(){var e,r;null===(e=n)||void 0===e||null===(e=e[0])||void 0===e||e.destroy(),null===(r=t)||void 0===r||r.destroy()}}}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var M=b.NB.create({name:"course-reference",addOptions:function(){return{HTMLAttributes:{class:"course-reference"},renderLabel:function(e){var t,n=e.options,r=e.node;return"".concat(n.suggestion.char).concat(null!==(t=r.attrs.label)&&void 0!==t?t:r.attrs.id)},suggestion:{char:"#",pluginKey:new x.H$("course-reference"),command:function(e){var t=e.editor,n=e.range,r=e.props;t.chain().focus().insertContentAt(n,[{type:"course-reference",attrs:r},{type:"text",text:" "}]).run()},allow:function(e){var t=e.editor,n=e.range;return t.can().insertContentAt(n,{type:"course-reference"})},allowSpaces:!0,render:function(){return S(P)}}}},group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:function(){return{id:{default:null,parseHTML:function(e){return e.getAttribute("data-id")},renderHTML:function(e){return e.id?{"data-id":e.id}:{}}},label:{default:null,parseHTML:function(e){return e.getAttribute("data-label")},renderHTML:function(e){return e.label?{"data-label":e.label}:{}}},courseName:{default:null,parseHTML:function(e){return e.getAttribute("data-course-name")},renderHTML:function(e){return e.courseName?{"data-course-name":e.courseName}:{}}}}},parseHTML:function(){return[{tag:"span[data-course-reference]"}]},renderHTML:function(e){var t=e.node,n=e.HTMLAttributes;return["span",(0,b.P1)({"data-course-reference":""},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:t})]},renderText:function(e){var t=e.node;return this.options.renderLabel({options:this.options,node:t})},addKeyboardShortcuts:function(){var e=this;return{Backspace:function(){return e.editor.commands.command(function(t){var n=t.tr,r=t.state,o=!1,i=r.selection,a=i.empty,s=i.anchor;return!!a&&(r.doc.nodesBetween(s-1,s,function(t,r){if(t.type.name===e.name)return o=!0,n.insertText("",r,r+t.nodeSize),!1}),o)})}}},addProseMirrorPlugins:function(){return[(0,g.ZP)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){(0,v.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({editor:this.editor},this.options.suggestion))]}}),N=n(99404).Z.extend({renderHTML:function(e){var t=e.HTMLAttributes;return["a",(0,b.P1)(this.options.HTMLAttributes,t,{target:t.target||"_blank",title:t.href}),0]},inclusive:!1}),E=b.NB.create({name:"listItem",addOptions:function(){return{HTMLAttributes:{}}},content:"paragraph",defining:!0,parseHTML:function(){return[{tag:"li"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["li",(0,b.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){return e.editor.commands.splitListItem("listItem")}}}}),A=n(4730),L=["start"],T=/^(\d+)\.\s$/,F=b.NB.create({name:"orderedList",addOptions:function(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content:function(){return"".concat(this.options.itemTypeName,"+")},addAttributes:function(){return{start:{default:1,parseHTML:function(e){return e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}}},parseHTML:function(){return[{tag:"ol"}]},renderHTML:function(e){var t=e.HTMLAttributes,n=t.start,r=(0,A.Z)(t,L);return 1===n?["ol",(0,b.P1)(this.options.HTMLAttributes,r),0]:["ol",(0,b.P1)(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{toggleOrderedList:function(){return function(t){return t.commands.toggleList(e.name,e.options.itemTypeName)}}}},addInputRules:function(){return[(0,b.S0)({find:T,type:this.type,getAttributes:[function(e){return{start:+e[1]}},function(e,t){return t.childCount+t.attrs.start===+e[1]}]})]}}),B=b.NB.create({name:"paragraph",priority:1e3,addOptions:function(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML:function(){return[{tag:"p"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["p",(0,b.P1)(this.options.HTMLAttributes,t),0]},addCommands:function(){return{setParagraph:function(){return function(e){return e.commands.setNode("paragraph")}}}},addKeyboardShortcuts:function(){var e=this;return{"Shift-Enter":function(){return e.editor.commands.enter()}}}}),R=/^\s*([-*])\s$/,z=b.NB.create({name:"unorderedList",addOptions:function(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content:function(){return"".concat(this.options.itemTypeName,"+")},parseHTML:function(){return[{tag:"ul"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["ul",(0,b.P1)(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{toggleBulletList:function(){return function(t){return t.commands.toggleList(e.name,e.itemTypeName)}}}},addInputRules:function(){return[(0,b.S0)({find:R,type:this.type})]}}),G=n(73674),U=(0,p.memo)(function(e){var t=e.item,n=e.isCurrent,r=e.onMouseOver,o=e.onClick,i=t.user,a=(0,y.bI)("isMobile").isMobile;return(0,O.jsx)("div",{style:{cursor:"pointer",display:"flex",alignItems:"center",background:n?w.O9.p2:"transparent",padding:"0px 16px",height:56,width:a?"100vw":void 0},onMouseEnter:r,onClick:o,children:(0,O.jsxs)(C.X,{alignItems:"center",gap:8,style:{minWidth:0},children:[(0,O.jsx)(G.Z,{user:i,size:40,disableLink:!0}),(0,O.jsx)(k.Z,{variant:"t5",maxLines:1,ellipsis:!0,color:n?w.O9.fgPrimary:void 0,style:{width:a?void 0:277,maxWidth:a?void 0:277},children:"".concat(i.firstName," ").concat(i.lastName)})]})})});function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var W=b.NB.create({name:"user-mention",addOptions:function(){return{HTMLAttributes:{class:"user-mention"},renderLabel:function(e){var t,n=e.options,r=e.node;return"".concat(n.suggestion.char).concat(null!==(t=r.attrs.label)&&void 0!==t?t:r.attrs.id)},suggestion:{char:"@",pluginKey:new x.H$("user-mention"),command:function(e){var t=e.editor,n=e.range,r=e.props;t.chain().focus().insertContentAt(n,[{type:"user-mention",attrs:r},{type:"text",text:" "}]).run()},allow:function(e){var t=e.editor,n=e.range;return t.can().insertContentAt(n,{type:"user-mention"})},allowSpaces:!0,render:function(){return S(U)}}}},group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:function(){return{id:{default:null,parseHTML:function(e){return e.getAttribute("data-id")},renderHTML:function(e){return e.id?{"data-id":e.id}:{}}},label:{default:null,parseHTML:function(e){return e.getAttribute("data-label")},renderHTML:function(e){return e.label?{"data-label":e.label}:{}}}}},parseHTML:function(){return[{tag:"span[data-user-mention]"}]},renderHTML:function(e){var t=e.node,n=e.HTMLAttributes;return["span",(0,b.P1)({"data-user-mention":""},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:t})]},renderText:function(e){var t=e.node;return this.options.renderLabel({options:this.options,node:t})},addKeyboardShortcuts:function(){var e=this;return{Backspace:function(){return e.editor.commands.command(function(t){var n=t.tr,r=t.state,o=!1,i=r.selection,a=i.empty,s=i.anchor;return!!a&&(r.doc.nodesBetween(s-1,s,function(t,r){if(t.type.name===e.name)return o=!0,n.insertText("",r,r+t.nodeSize),!1}),o)})}}},addProseMirrorPlugins:function(){return[(0,g.ZP)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach(function(t){(0,v.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({editor:this.editor},this.options.suggestion))]}}),H=b.hj.create({name:"shortcuts",priority:1e3,inclusive:!1,addOptions:function(){return{handlers:{},onUpdate:function(){}}},addKeyboardShortcuts:function(){return this.options.handlers||{}}}),q=n(12806);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Y=b.NB.create({name:"user-mention",lastTextSize:0,addOptions:function(){return{HTMLAttributes:{class:"user-mention"},renderLabel:function(e){var t,n=e.options,r=e.node;return"".concat(n.suggestion.char).concat(null!==(t=r.attrs.label)&&void 0!==t?t:r.attrs.id)},suggestion:{char:"@",pluginKey:new x.H$("user-mention"),command:function(e){var t=e.editor,n=e.range,r=e.props;t.chain().focus().insertContentAt(n,[{type:"user-mention",attrs:r}]).insertContent("  ").run(),setTimeout(function(){t.commands.setTextSelection(n.from+2)},0)},allow:function(e){var t=e.editor,n=e.range;return t.can().insertContentAt(n,{type:"user-mention"})},allowSpaces:!0,render:function(){return S(U)}}}},group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:function(){return{id:{default:null,parseHTML:function(e){return e.getAttribute("data-id")},renderHTML:function(e){return e.id?{"data-id":e.id}:{}}},label:{default:null,parseHTML:function(e){return e.getAttribute("data-label").trim()},renderHTML:function(e){return e.label?{"data-label":e.label}:{}}}}},parseHTML:function(){return[{tag:"span[data-user-mention]"}]},renderHTML:function(e){var t=e.node,n=e.HTMLAttributes;return["span",(0,b.P1)({"data-user-mention":""},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:t})]},renderText:function(e){var t=e.node;return this.options.renderLabel({options:this.options,node:t})},addProseMirrorPlugins:function(){return[(0,g.ZP)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach(function(t){(0,v.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({editor:this.editor},this.options.suggestion))]},onUpdate:function(){var e=this;this.editor.commands.command(function(t){var n=t.tr,r=t.state,o=!1,i=r.selection,a=i.empty,s=i.anchor;return a?(e.lastTextSize>r.doc.content.size&&r.doc.nodesBetween(s-1,s,function(t,r){if(t.type.name===e.name)return o=!0,n.insertText("",r,r+t.nodeSize),!1}),e.lastTextSize=r.doc.content.size,o):(e.lastTextSize=r.doc.content.size,!1)})}});function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var X=b.NB.create({name:"course-reference",lastTextSize:0,addOptions:function(){return{HTMLAttributes:{class:"course-reference"},renderLabel:function(e){var t,n=e.options,r=e.node;return"".concat(n.suggestion.char).concat(null!==(t=r.attrs.label)&&void 0!==t?t:r.attrs.id)},suggestion:{char:"#",pluginKey:new x.H$("course-reference"),command:function(e){var t=e.editor,n=e.range,r=e.props;t.chain().focus().insertContentAt(n,[{type:"course-reference",attrs:r}]).insertContent("  ").run(),setTimeout(function(){t.commands.setTextSelection(n.from+2)},0)},allow:function(e){var t=e.editor,n=e.range;return t.can().insertContentAt(n,{type:"course-reference"})},allowSpaces:!0,render:function(){return S(P)}}}},group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:function(){return{id:{default:null,parseHTML:function(e){return e.getAttribute("data-id")},renderHTML:function(e){return e.id?{"data-id":e.id}:{}}},label:{default:null,parseHTML:function(e){return e.getAttribute("data-label")},renderHTML:function(e){return e.label?{"data-label":e.label}:{}}},courseName:{default:null,parseHTML:function(e){return e.getAttribute("data-course-name")},renderHTML:function(e){return e.courseName?{"data-course-name":e.courseName}:{}}}}},parseHTML:function(){return[{tag:"span[data-course-reference]"}]},renderHTML:function(e){var t=e.node,n=e.HTMLAttributes;return["span",(0,b.P1)({"data-course-reference":""},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:t})]},renderText:function(e){var t=e.node;return this.options.renderLabel({options:this.options,node:t})},addProseMirrorPlugins:function(){return[(0,g.ZP)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach(function(t){(0,v.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({editor:this.editor},this.options.suggestion))]},onUpdate:function(){var e=this;this.editor.commands.command(function(t){var n=t.tr,r=t.state,o=!1,i=r.selection,a=i.empty,s=i.anchor;return a?(e.lastTextSize>r.doc.content.size&&r.doc.nodesBetween(s-1,s,function(t,r){if(t.type.name===e.name)return o=!0,n.insertText("",r,r+t.nodeSize),!1}),e.lastTextSize=r.doc.content.size,o):(e.lastTextSize=r.doc.content.size,!1)})}}),K=f.Z.debounce(f.Z.searchUsers,300),Q=f.Z.debounce(f.Z.searchCourseModules,300);function ee(){return(ee=(0,o.Z)(a().mark(function e(t,n,o,i){var s,l,c,u,d,p,f,h,v,b;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=i?5:7,t){e.next=3;break}return e.abrupt("return",n.current.filter(function(e){var t,n;return(null==e||null===(t=e.user)||void 0===t?void 0:t.firstName)&&(null==e||null===(n=e.user)||void 0===n?void 0:n.lastName)}).slice(0,l).map(function(e){return{id:e.id,label:e.user.firstName+" "+e.user.lastName,user:e.user}}));case 3:if(c=(0,r.Z)(n.current),u=[],d=(0,m.Z)(t),p=0,n.current.forEach(function(e,t){e.fullSearch.startsWith(d)&&(u.push(e.user),c.splice(t-p,1),p++)}),u.length<l&&c.length&&c.forEach(function(e){e.lastSearch.startsWith(d)&&u.push(e.user)}),!(u.length>=l)){e.next=11;break}return e.abrupt("return",u.filter(function(e){var t,n;return(null==e||null===(t=e.user)||void 0===t?void 0:t.firstName)&&(null==e||null===(n=e.user)||void 0===n?void 0:n.lastName)}).slice(0,l).map(function(e){return{id:e.id,label:e.user.firstName+" "+e.user.lastName,user:e.user}}));case 11:return e.next=13,K({query:t,limit:l,groupID:o});case 13:if(f=e.sent.data){e.next=17;break}return e.abrupt("return",[]);case 17:if(!(null!==(s=f.users)&&void 0!==s&&s.length)){e.next=26;break}h=(0,r.Z)(f.users),v=0,b=a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=h[v],u.some(function(e){return e.id===t.id})||u.push(t),v++;case 3:case"end":return e.stop()}},e)});case 21:if(!(u.length<l&&h.length>v)){e.next=25;break}return e.delegateYield(b(),"t0",23);case 23:e.next=21;break;case 25:return e.abrupt("return",u.map(function(e){return{id:e.id,label:e.firstName+" "+e.lastName,user:e}}));case 26:return e.abrupt("return",[]);case 27:case"end":return e.stop()}},e)}))).apply(this,arguments)}function et(){return(et=(0,o.Z)(a().mark(function e(t,n,r){var o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r?5:7,e.next=3,Q({query:t,limit:o,groupID:n});case 3:if(null!=(i=e.sent.data)&&i.courses){e.next=7;break}return e.abrupt("return",[]);case 7:return e.abrupt("return",i.courses.map(function(e){return{id:e.id,label:e.metadata.displayTitle,course:e,courseName:e.metadata.courseName}}));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}var en=(0,p.forwardRef)(function(e,t){var n,r,i,f=e.initialContent,m=e.autoFocus,v=e.placeholder,b=e.onChange,g=e.onSelectionChange,x=e.onKeyboardSave,w=e.minHeight,C=e.userMentionsEnabled,j=e.courseReferencesEnabled,k=e.threadUsers,P=e.groupID,D=e.onFocus,I=e.onBlur,Z=e.onPaste,S=e.context,_=(0,y.bI)("isMobile").isMobile,A=(0,p.useRef)(k||[]),L=(0,p.useState)(null),T=L[0],R=L[1],G=(0,p.useRef)(null),U=(0,p.useRef)(0),$=(0,p.useRef)(!1),V=(0,p.useMemo)(function(){return!!(0,h.S_)()&&navigator.userAgent.toLowerCase().indexOf("android")>-1},[]),J=(0,p.useMemo)(function(){return C?V?Y:W:null},[C,V]),K=(0,p.useMemo)(function(){return j?V?X:M:null},[j,V]),Q=(0,p.useCallback)(function(e){return e.metadata={isMobile:_,context:S},e},[S,_]),en=(0,p.useCallback)((n=(0,o.Z)(a().mark(function e(t){var n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.next=3,function(e,t,n,r){return ee.apply(this,arguments)}(n,A,P,_);case 3:return r=e.sent,e.abrupt("return",Q(r));case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[P,_,Q]),er=(0,p.useCallback)((r=(0,o.Z)(a().mark(function e(t){var n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.next=3,function(e,t,n){return et.apply(this,arguments)}(n,P,_);case 3:return r=e.sent,e.abrupt("return",Q(r));case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),[P,_,Q]);(0,p.useEffect)(function(){A.current=k||[]},[k]);var eo={};x&&(eo["Mod-Enter"]=function(){x()});var ei=[s.Z,B,l.Z,c.Z.configure({placeholder:v}),H.configure({handlers:eo}),N.configure({openOnClick:!1,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:"link"}}),u.Z,E,z,F];J&&ei.push(J.configure({suggestion:{items:en}})),K&&ei.push(K.configure({suggestion:{items:er}})),f&&(i={type:"doc",content:f});var ea=(0,d.jE)({content:i,editorProps:{handleClickOn:function(e,t,n){var r;null!=n&&null!==(r=n.attrs)&&void 0!==r&&r.id&&R(t+1)},clipboardTextParser:function(e,t){var n=e.replace().split(/(?:\r\n?|\n)/),r=[];n.forEach(function(e){var n={type:"paragraph"};e.length>0&&(n.content=[{type:"text",text:e}]);var o=q.NB.fromJSON(t.doc.type.schema,n);r.push(o)});var o=q.HY.fromArray(r);return q.p2.maxOpen(o)},attributes:{class:"skool-editor"}},extensions:ei,autofocus:!!m,onCreate:function(e){var t=e.editor;setTimeout(function(){var e;b(t.getJSON().content),g(null===(e=t.state)||void 0===e?void 0:e.selection)},0)},onUpdate:function(e){b(e.editor.getJSON().content)},onSelectionUpdate:function(e){var t;g(null===(t=e.editor.state)||void 0===t?void 0:t.selection)},onFocus:function(){D&&D()},onBlur:function(){I&&I()}}),es=(0,p.useCallback)(function(){U.current>window.scrollY&&(null==ea||ea.commands.blur()),U.current=window.scrollY},[ea]),el=(0,p.useCallback)(function(e){var t;if(null!=e&&null!==(t=e.touches)&&void 0!==t&&t.length&&G.current){var n=G.current.getBoundingClientRect().top+window.scrollY-window.innerHeight,r=e.touches[0];r.pageY+r.screenY<n&&(null==ea||ea.commands.blur())}},[ea]);return(0,p.useEffect)(function(){if(V)return window.addEventListener("scroll",es),window.addEventListener("touchstart",el),function(){window.removeEventListener("scroll",es),window.removeEventListener("touchstart",el)}},[es,el,V]),(0,p.useEffect)(function(){T&&(ea.commands.focus(T),R(null))},[T,ea]),(0,p.useEffect)(function(){return $.current=!0,m&&ea&&setTimeout(function(){try{ea.commands.focus("end")}catch(e){}},0),function(){$.current=!1}},[m,ea]),(0,p.useImperativeHandle)(t,function(){return{setLink:function(e){if($.current&&ea){var t=ea.state.selection,n=t.head,r=t.anchor;if(n===r){var o=(n>r?n:r)+e.length;return ea.chain().focus().insertContent({type:"text",marks:[{type:"link",attrs:{href:e,target:"_blank"}}],text:e}).setTextSelection({from:o,to:o}).run()}var i=n>r?n:r;return ea.chain().focus().setLink({href:e,target:"_blank"}).setTextSelection({from:i,to:i}).run()}},unsetLink:function(){if($.current&&ea)return ea.chain().focus().unsetLink().run()},canSetLink:function(){var e,t,n;return!!$.current&&!!ea&&!ea.isActive("link")&&!(null!==(e=ea.getAttributes("user-mention"))&&void 0!==e&&e.id)&&!(null!==(t=ea.getAttributes("course-reference"))&&void 0!==t&&t.id)&&!(null!==(n=ea.getAttributes("link"))&&void 0!==n&&n.href)},canUnsetLink:function(){return!!$.current&&!!ea&&ea.isActive("link")},set:function(e){return!!$.current&&!!ea&&ea.chain().focus().setContent(e,!0).run()},insert:function(e){return!!$.current&&!!ea&&ea.chain().focus().insertContent(e).run()},clear:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(!$.current||!ea)return!1;var t=ea.chain();return e&&(t=t.focus()),t.clearContent(!0).run()},focus:function(e){return!!$.current&&!!ea&&ea.commands.focus(e||void 0)},blur:function(){return!!$.current&&!!ea&&ea.commands.blur()},textContent:function(){var e;return!!$.current&&!!ea&&(null==ea||null===(e=ea.contentComponent)||void 0===e||null===(e=e.editorContentRef)||void 0===e||null===(e=e.current)||void 0===e?void 0:e.textContent)}}}),(0,O.jsx)("div",{ref:G,style:{minHeight:w},onPaste:Z,children:(0,O.jsx)(d.kg,{editor:ea})})});en.defaultProps={minHeight:80};var er=(0,p.memo)(en)},15554:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(14251),o=n(67294),i=n(50378),a=n(86031),s=(0,i.F4)(["0%{transform:translateY(0px);}28%{transform:translateY(-5px);}44%{transform:translateY(0px);}"]),l=(0,i.ZP)(a.x).withConfig({displayName:"styled__Container",componentId:"sc-1wp2vrl-0"})(["align-items:center;height:17px;"]),c=i.ZP.div.withConfig({displayName:"styled__Dot",componentId:"sc-1wp2vrl-1"})(["animation:"," 1.5s infinite ease-in-out;background-color:",";border-radius:2px;height:4px;margin-right:2px;width:4px;&:nth-child(1){animation-delay:200ms;}&:nth-child(2){animation-delay:300ms;}&:nth-child(3){animation-delay:400ms;}"],s,function(e){var t=e.$color;return null!=t?t:r.O9.n5}),u=n(85893),d=(0,o.memo)(function(e){var t=e.color,n=void 0===t?r.O9.n5:t;return(0,u.jsxs)(l,{children:[(0,u.jsx)(c,{$color:n}),(0,u.jsx)(c,{$color:n}),(0,u.jsx)(c,{$color:n})]})})},29677:function(e,t,n){var r=n(20452),o=n(14251),i=n(67294),a=n(85893),s=(0,r.$o)();function l(e){var t=e.fillOpacity,n=e.className,r=e.padding,i=e.width,l=e.height,c=s?o.O9.n1:o.O9.n7;return(0,a.jsx)("div",{className:n,style:{padding:r,display:"flex",alignItems:"center",justifyContent:"center",width:i,height:l},children:(0,a.jsxs)("svg",{width:i,height:l,version:"1.1",viewBox:"0 0 64 46",fill:c,children:[(0,a.jsx)("path",{d:"M62.6071 7.28471C61.8729 4.52706 60.2635 2.19294 57.5059 1.45882C52.5082 0.122353 32 0 32 0C32 0 11.4918 0.122353 6.49412 1.45882C3.73647 2.19294 2.13647 4.52706 1.39294 7.28471C0.0564706 12.2824 0 22.5882 0 22.5882C0 22.5882 0.0564706 32.8941 1.39294 37.8918C2.12706 40.6494 3.73647 42.9835 6.49412 43.7176C11.4918 45.0541 32 45.1765 32 45.1765C32 45.1765 52.5082 45.0541 57.5059 43.7176C60.2635 42.9835 61.8729 40.6494 62.6071 37.8918C63.9435 32.8941 64 22.5882 64 22.5882C64 22.5882 63.9435 12.2824 62.6071 7.28471Z",fillOpacity:t,fill:c}),(0,a.jsx)("path",{d:"M42.3533 22.5883L25.4121 13.1765V32",fill:s?o.O9.n7:o.O9.n1})]})})}l.defaultProps={padding:0,width:64,height:46,fillOpacity:.5},t.Z=(0,i.memo)(l)},74109:function(e,t,n){var r=n(59499),o=n(50029),i=n(64687),a=n.n(i),s=n(67294),l=n(67631),c=n.n(l),u=n(73793),d=n(31545),p=n(12967),f=n(75331),m=n(11526),h=n(85893);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g=(0,p.G6)();t.Z=(0,s.memo)(function(e){var t=e.url,n=e.thumbnailUrl,i=e.duration,l=e.style,p=e.autoplay,v=e.startTime,x=e.refreshStartTime,y=e.streamURL,w=e.playDisabled,C=e.onPlay,j=(0,s.useState)(i),k=j[0],O=j[1],P=(0,s.useState)(!1),D=P[0],I=P[1],Z=(0,s.useRef)(),S=(0,s.useRef)(!1),_=(0,s.useRef)(),M=(0,u.bI)("isMobile").isMobile,N=(0,s.useState)(null),E=N[0],A=N[1],L=(0,s.useMemo)(function(){return(0,d.ak)(t)},[t]),T=L.provider===d.a.Bunny&&g,F=(0,s.useState)(!T&&!!p),B=F[0],R=F[1],z=(0,s.useState)(B||g&&M),G=z[0],U=z[1];(0,s.useEffect)(function(){var e=(0,f.tv)({key:f.H0.lastVideoTime}).value,n=void 0===e?{}:e;_.current=n[t],M&&T&&setTimeout(function(){Z.current&&Z.current.seekTo(n[t],"seconds")},200)},[t,T,M]),(0,s.useEffect)(function(){(0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,d.Hh)(t)&&!n)){e.next=5;break}return e.next=3,(0,d.Rl)(t);case 3:A(e.sent);case 5:case"end":return e.stop()}},e)}))()},[n,t]),(0,s.useEffect)(function(){window.Hls=c()},[]),(0,s.useEffect)(function(){v&&(U(!0),Z.current?(Z.current.seekTo(v,"seconds"),R(!0)):setTimeout(function(){Z.current.seekTo(v,"seconds"),R(!0)},100))},[v,x]);var $=(0,s.useCallback)(function(){w||(null==C||C(),U(!0),R(!0))},[C,w]),W=(0,s.useCallback)(function(e){O(1e3*e)},[]),H=(0,s.useCallback)(function(){I(!0)},[]),q=(0,s.useCallback)(function(){if(!v&&!S.current&&!T){var e=(0,f.tv)({key:f.H0.lastVideoTime}).value,n=void 0===e?{}:e;n[t]&&(S.current=!0,Z.current.seekTo(n[t],"seconds"))}},[T,v,t]),V=(0,s.useCallback)(function(e){if(e){var n=(0,f.tv)({key:f.H0.lastVideoTime}).value;(0,f.co)({key:f.H0.lastVideoTime,value:b(b({},n),{},(0,r.Z)({},t,e))})}},[t]),Y=(0,s.useCallback)(function(e){var t=e.playedSeconds;V(t>k-5?null:t)},[V,k]),J=(0,s.useMemo)(function(){return L.provider!==d.a.Loom?null:(0,d.bi)({provider:L.provider,videoID:L.videoID,startsAt:v,autoPlay:!!v,additionalQueries:{hide_owner:!0,hide_share:!0,hide_title:!0,hideEmbedTopBar:!0}})},[v,L]),X=(0,s.useMemo)(function(){return L.provider===d.a.Bunny?y||(0,d.YD)(E||n):void 0},[E,y,n,null==L?void 0:L.provider]),K=(0,s.useMemo)(function(){return(0,d.BI)(k)},[k]),Q=(0,s.useMemo)(function(){return{wistia:{options:{fitStrategy:"contain"}},vimeo:{playerOptions:{playsinline:!0}},file:{hlsOptions:{startPosition:v||_.current}}}},[v]);return L.provider===d.a.Loom?(0,h.jsx)(m.n9,{style:l,children:(0,h.jsx)(m.br,{src:J,frameBorder:0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):(0,h.jsxs)(m.n9,{style:l,children:[!D&&n&&(0,h.jsxs)(m.y5,{$playing:B,$thumbnailUrl:n,onClick:$,children:[(0,h.jsx)(m.s8,{fillOpacity:1,height:64,width:90,onClick:$}),(0,h.jsx)(m.QY,{$visible:!!k,children:K})]}),G&&(0,h.jsx)(m.Il,{ref:Z,playing:B,onPlay:$,controls:!0,width:"100%",height:"100%",onDuration:W,onError:H,onProgress:Y,onReady:q,variant:"responsive",url:X||L.url,playsinline:!0,config:Q})]})})},11526:function(e,t,n){n.d(t,{Il:function(){return p},QY:function(){return b},br:function(){return d},n9:function(){return c},s8:function(){return h},y5:function(){return f}});var r=n(50378),o=n(22004),i=n(20668),a=n(14251),s=n(29677),l=n(31545),c=r.ZP.div.withConfig({displayName:"styled__VideoPlayerWrapper",componentId:"sc-bpv3k2-0"})(["position:relative;padding-top:56.25%;height:0;width:100%;"]),u=(0,r.iv)(["position:absolute;top:0;left:0;width:100%;height:100%;& iframe{width:100%;height:100%;}& .wistia_embed{max-width:100%;}"]),d=r.ZP.iframe.withConfig({displayName:"styled__IframePlayer",componentId:"sc-bpv3k2-1"})(["",""],u),p=(0,r.ZP)(o.Z).withConfig({displayName:"styled__ReactPlayer",componentId:"sc-bpv3k2-2"})(["",""],u),f=r.ZP.div.withConfig({displayName:"styled__CoverImage",componentId:"sc-bpv3k2-3"})(["width:100%;height:100%;position:absolute;top:0;left:0;background-position:center center;background-size:cover;background-repeat:no-repeat;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:2;transition:opacity 400ms ease-in-out;background-image:",";opacity:",";pointer-events:",";"],function(e){var t=e.$thumbnailUrl;return t?'url("'.concat((0,l.UO)(t),'")'):void 0},function(e){return e.$playing?0:1},function(e){return e.$playing?"none":"initial"}),m=(0,r.iv)(["> svg{width:63px;}"]),h=(0,r.ZP)(s.Z).withConfig({displayName:"styled__PlaybackButton",componentId:"sc-bpv3k2-4"})(["position:relative;z-index:3;cursor:pointer;",""],function(e){return e.theme.isMobile&&m}),v=(0,r.iv)(["right:4px;bottom:4px;"]),b=r.ZP.div.withConfig({displayName:"styled__DurationIndicator",componentId:"sc-bpv3k2-5"})(["position:absolute;right:16px;bottom:16px;border-radius:4px;color:",";background-color:",";padding:5px 8px;opacity:",";transition:opacity 50ms ease-in-out;"," ",""],function(e){return e.theme.isDarkTheme?a.O9.n7:a.O9.n1},function(e){return e.theme.isDarkTheme?a.O9.n1:a.O9.n7},function(e){return e.$visible?1:0},i.c.t11,function(e){return e.theme.isMobile&&v})},81849:function(e,t,n){n.d(t,{I:function(){return D}});var r=n(50029),o=n(64687),i=n.n(o),a=n(23450),s=n.n(a),l=n(67294),c=n(95419),u=n(14251),d=n(85064),p=n(66703),f=n(76958),m=n(73793),h=n(20452),v=n(50378),b=n(86031),g=n(36581),x=n(20668),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,v.iv)(["display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:",";"],e)},w=(0,v.ZP)(b.x).withConfig({displayName:"styled__LoadingContent",componentId:"sc-y3m9bz-0"})(["justify-content:center;padding:16px 0;min-width:127px;max-width:151px;"]),C=(0,v.ZP)(g.s).withConfig({displayName:"styled__TooltipContent",componentId:"sc-y3m9bz-1"})(["gap:4px;padding:4px;text-align:left;width:127px;"]),j=v.ZP.div.withConfig({displayName:"styled__TooltipTitle",componentId:"sc-y3m9bz-2"})(["color:",";",";",";"],u.O9.n5,function(e){var t=e.$maxLines;return t&&y(t)},x.c.t10),k=v.ZP.div.withConfig({displayName:"styled__LikesCount",componentId:"sc-y3m9bz-3"})(["color:",";",";",";"],function(e){return e.theme.isDarkTheme?u.O9.n7:u.O9.n1},function(e){var t=e.$maxLines;return t&&y(t)},x.c.t11),O=n(85893),P=(0,h.$o)(),D=(0,l.memo)(function(e){var t=e.postID,n=e.upvotes,o=e.children,a=e.newUpvotes,h=(0,m.bI)("currentGroup").currentGroup,v=(0,l.useState)([]),b=v[0],g=v[1],x=(0,l.useState)(!1),y=x[0],D=x[1],I=(0,l.useRef)(!1),Z=(0,l.useRef)(!1),S=(0,l.useRef)(!1),_=(0,l.useRef)(),M=(0,l.useRef)(!1),N=n+a;(0,l.useEffect)(function(){return I.current=!0,function(){I.current=!1,clearTimeout(_.current)}},[]),(0,l.useEffect)(function(){Z.current=!1,S.current=!1},[t,n,a]);var E=(0,l.useCallback)((0,r.Z)(i().mark(function e(){var n,r;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.listPostUpvoteUsers({postID:t,limit:7});case 2:n=e.sent.data,Z.current=!0,I.current&&g(null!==(r=null==n?void 0:n.users)&&void 0!==r?r:[]);case 6:case"end":return e.stop()}},e)})),[t]),A=(0,l.useCallback)(function(){M.current=!0,clearTimeout(_.current),I.current&&!Z.current&&I.current&&!S.current&&(D(!0),_.current=setTimeout((0,r.Z)(i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.current=!0,!(N>0)){e.next=6;break}return e.next=4,E();case 4:e.next=8;break;case 6:Z.current=!0,g([]);case 8:D(!1);case 9:case"end":return e.stop()}},e)})),250))},[N,E]),L=(0,l.useCallback)(function(){M.current=!1,clearTimeout(_.current)},[]),T=(0,l.useCallback)(function(e){e.stopPropagation()},[]),F=(0,l.useCallback)(function(){if(!Z.current&&N>0||y)return(0,O.jsx)(w,{children:(0,O.jsx)(d.D,{})});var e=[];if(e.push((0,O.jsx)(j,{$maxLines:1,children:"".concat(s()("Like",N,!0))},"likes")),b.forEach(function(t){return e.push((0,O.jsx)(f.Z,{user:t,group:h,color:P?u.O9.n7:u.O9.n1,hoverUnderline:!0,typographyVariant:"t11",maxLines:1},t.id))}),N-b.length>0){var t=N-b.length;e.push((0,O.jsx)(k,{$maxLines:1,children:"and ".concat(s()("other",t,!0),"...")},"like-others"))}return(0,O.jsx)(C,{onClick:T,children:e})},[N,y,b,T,h]);return(0,O.jsx)("div",{onMouseEnter:A,onMouseLeave:L,children:(0,O.jsx)(p.u,{content:F,interactive:!0,children:o})})})},60678:function(e,t,n){var r=n(67294),o=n(5095),i=n(70120),a=n(85893);function s(e){var t=e.group,n=e.sortType,s=e.category,l=e.children,c=e.underline,u=e.newTab,d=e.style,p=(0,o.AZ)({groupName:null==t?void 0:t.name,sortType:n,category:s}),f=p.href,m=p.as,h=(0,r.useCallback)(function(e){e.stopPropagation()},[]);return(0,a.jsx)(i.r,{href:f,as:m,underline:c,onClick:h,newTab:u,style:d,children:l})}s.defaultProps={underline:"none"},t.Z=(0,r.memo)(s)},84236:function(e,t,n){var r=n(67294),o=n(53531),i=n(73793),a=n(5095),s=n(70120),l=n(85893);t.Z=(0,r.memo)(function(e){var t=e.group,n=e.tab,c=e.page,u=e.online,d=e.children,p=e.levels,f=e.sortType,m=e.member,h=e.admin,v=e.onClick,b=(0,i.bI)("currentGroup","self"),g=b.currentGroup,x=b.self,y=(0,o.q2)({group:g,user:x,member:null==x?void 0:x.member}),w=(0,a.DW)({group:t,tab:h&&!y?"admin":u&&!y?"online":n,page:c,online:y&&u||void 0,levels:p,sortType:f,member:m,admin:y&&h||void 0}),C=w.href,j=w.as,k=(0,r.useCallback)(function(e){e.stopPropagation(),null==v||v()},[v]);return(0,l.jsx)(s.r,{href:C,as:j,underline:"none",onClick:k,children:d})})},63136:function(e,t,n){var r=n(59499),o=n(67294),i=n(11163),a=n(5095),s=n(73793),l=n(70120),c=n(30697),u=n(85893);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){var t=(0,s.bI)("isMobile","currentGroup"),n=t.isMobile,p=t.currentGroup,f=t.dispatch,m=e.groupName,h=e.postName,v=e.selectedPostID,b=e.children,g=e.underline,x=(0,a.P_)({groupName:m,postName:h,selectedPostID:v}),y=x.href,w=x.as,C=(0,i.useRouter)(),j=(0,a.D_)(C.query),k=(0,o.useCallback)(function(e){if(e.stopPropagation(),!n&&p){e.preventDefault();var t={pathname:C.pathname,query:{group:m,postName:h,selectedPostID:v,course:j}},o="/".concat(m,"/").concat(h);f(c.Rq,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},C)),C.push(t,o,{scroll:!1,shallow:!0})}},[j,p,f,m,n,h,C,v]);return(0,u.jsx)(l.r,{href:y,as:w,underline:g,onClick:k,children:b})}p.defaultProps={underline:"none"},t.Z=(0,o.memo)(p)},57619:function(e,t,n){n.d(t,{Z:function(){return eq}});var r,o=n(90116),i=n(59499),a=n(4730),s=n(50029),l=n(17674),c=n(64687),u=n.n(c),d=n(96276),p=n(67294),f=n(11163),m=n.n(f),h=n(95419),v=n(77902),b=n(5095),g=n(73793),x=n(13053),y=n(65009),w=n(36581),C=n(17590),j=n(73674),k=n(50591),O=n(80008),P=n.n(O),D=n(70131),I=n(14251),Z=n(59607),S=n(14760),_=n(53541),M=n(34295),N=n(75331),E=n(12967),A=n(30697),L=n(64727),T=n(36195),F=n(32512),B=n(500),R=n(86031),z=n(50378),G=n(47691),U=(0,z.ZP)(Z.z).withConfig({displayName:"styled__MobileSendButton",componentId:"sc-1w0nbeu-0"})(["svg{color:",";}"],function(e){return e.$canSend?I.O9.secondary:I.O9.n5}),$=(0,z.iv)(["padding:",";min-height:unset;border-radius:unset;gap:4px;"],function(e){var t=e.theme,n=e.$bottom;return(void 0===n?0:n)>0?"8px 10px 0 10px":t.isApp?"8px 10px":"8px 10px calc(env(safe-area-inset-bottom) + 8px) 10px"}),W=(0,z.ZP)(y.X).withConfig({displayName:"styled__InputWrapper",componentId:"sc-1w0nbeu-1"})(["align-items:center;padding:4px 8px;min-height:70px;background:",";width:100%;border-radius:8px;cursor:text;",";"],I.O9.n1,function(e){return e.theme.isMobile&&$}),H=(0,z.iv)(["border-radius:15px;background-color:",";border:1px solid "," !important;padding:0 13px;min-width:0;"],I.O9.n2,I.O9.n3),q=z.ZP.div.withConfig({displayName:"styled__ChatInputWrapper",componentId:"sc-1w0nbeu-2"})(["display:flex;width:100%;",";"],function(e){return e.theme.isMobile&&H}),V=(0,z.iv)(["margin:unset;width:unset;"]),Y=z.ZP.div.withConfig({displayName:"styled__FormControl",componentId:"sc-1w0nbeu-3"})(["margin:8px 0 6px;flex-grow:1;",";"],function(e){return e.theme.isMobile&&V}),J=(0,z.ZP)(G.I).withConfig({displayName:"styled__ChatTextArea",componentId:"sc-1w0nbeu-4"})(["background:none;color:",";display:inline-flex;outline:none;",";",';min-height:auto;width:100%;textarea:not([aria-hidden="true"]){padding:0;margin:0;width:100%;}'],I.O9.n7,function(e){return!e.theme.isMobile&&"padding: 10px 8px;"},function(e){return e.theme.isMobile&&"padding-bottom: 8px;"}),X=z.ZP.div.withConfig({displayName:"styled__SendIconWrapper",componentId:"sc-1w0nbeu-5"})(["align-self:end;",";"],function(e){return!e.theme.isMobile&&"margin-top: 4px;"}),K=z.ZP.div.withConfig({displayName:"styled__Dropzone",componentId:"sc-1w0nbeu-6"})(["position:absolute;height:100%;width:100%;background:",";top:0;left:0;border-radius:15px;z-index:1000;padding:8px;"],I.O9.n1),Q=z.ZP.div.withConfig({displayName:"styled__DropzoneInner",componentId:"sc-1w0nbeu-7"})(["height:100%;width:100%;border:3px dashed ",";border-radius:15px;display:flex;justify-content:center;align-items:center;"],I.O9.n5),ee=z.ZP.div.withConfig({displayName:"styled__DropzoneContainer",componentId:"sc-1w0nbeu-8"})(["width:100%;&:focus{outline:none;}"]),et=z.ZP.label.withConfig({displayName:"styled__AddAttachmentLabel",componentId:"sc-1w0nbeu-9"})(["cursor:pointer;"]),en=(0,z.iv)(["padding:8px 0 0 0;background:none;"]),er=z.ZP.div.withConfig({displayName:"styled__PostAttachmentsWrapper",componentId:"sc-1w0nbeu-10"})(["width:100%;padding:0 16px 16px;display:",";background:",";",";"],function(e){return e.$hasAttachments?"block":"none"},I.O9.n1,function(e){return e.theme.isMobile&&en}),eo=(0,z.iv)(["align-self:flex-end;transform:translateX(12px);"]),ei=z.ZP.div.withConfig({displayName:"styled__Actions",componentId:"sc-1w0nbeu-11"})(["display:flex;flex-direction:row;justify-content:flex-end;",";"],function(e){return e.theme.isMobile&&eo}),ea=n(59313),es=n(85893);function el(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ec(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?el(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):el(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eu=(0,p.memo)(function(e){var t,n,r,o,a,c=e.convoBottom,d=e.channelId,f=e.isModal,m=e.onFocus,v=e.onBlur,b=e.onGifPickerOpen,x=(0,g.bI)("isMobile","conversation","mobileBottomOffset"),y=x.isMobile,w=x.conversation,C=x.mobileBottomOffset,j=x.dispatch,k=(0,p.useState)(""),O=k[0],P=k[1],D=(0,p.useState)([]),z=D[0],G=D[1],$=null==w||null===(o=w.channel)||void 0===o?void 0:o.user,H=(0,p.useState)(!1),V=H[0],en=H[1],eo=(0,p.useRef)(),el=(0,p.useRef)(),eu=(0,p.useState)(!1),ed=eu[0],ep=eu[1],ef=!!z.length,em=(0,B.V)((0,p.useRef)({}).current),eh=(0,l.Z)(em,1)[0],ev=(0,p.useMemo)(function(){return(0,E.wN)(function(){(0,s.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=3;break}return e.next=3,h.Z.setTypingChat({channelId:d});case 3:case"end":return e.stop()}},e)}))()},2e3)},[d]);(0,p.useEffect)(function(){O&&ev()},[O,ev]),(0,p.useEffect)(function(){var e=(0,N.tv)({key:N.H0.chatMessages}).value;P((void 0===e?{}:e)[d]||""),en(!0)},[d]),(0,p.useEffect)(function(){var e=(0,N.tv)({key:N.H0.chatFiles}).value;G((void 0===e?{}:e)[d]||[])},[d]);var eb=(0,p.useCallback)(function(e){var t=(0,N.tv)({key:N.H0.chatMessages}).value;(0,N.co)({key:N.H0.chatMessages,value:ec(ec({},void 0===t?{}:t),{},(0,i.Z)({},d,e.target.value))}),P(e.target.value)},[d]),eg=(0,p.useCallback)((t=(0,s.Z)(u().mark(function e(t){var n,r,o,a,s,l;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((!t||"Enter"===t.key&&!t.shiftKey)&&(O||null!=z&&z.length))){e.next=24;break}if(!(y&&(null==t?void 0:t.key)==="Enter")){e.next=3;break}return e.abrupt("return");case 3:if(y&&el.current.focus(),null==t||t.preventDefault(),!ed){e.next=7;break}return e.abrupt("return");case 7:return P(""),G([]),r=void 0===(n=(0,N.tv)({key:N.H0.chatMessages}).messageValue)?{}:n,a=void 0===(o=(0,N.tv)({key:N.H0.chatFiles}).filesValue)?{}:o,(0,N.co)({key:N.H0.chatMessages,value:ec(ec({},r),{},(0,i.Z)({},d,""))}),(0,N.co)({key:N.H0.chatFiles,value:ec(ec({},a),{},(0,i.Z)({},d,""))}),s=y?"wmc":"wdc",f&&(s=y?"wmm":"wdm"),e.next=17,h.Z.sendMessage({channelId:d,msg:O,clientType:s,fileIDs:z});case 17:if((null==(l=e.sent.error)?void 0:l.status)!==429){e.next=21;break}return e.abrupt("return",j(A.bI,{message:"You’ve hit your message limit",severity:"error"}));case 21:setTimeout(function(){var e;null===(e=c.current)||void 0===e||e.scrollIntoView()},0),e.next=25;break;case 24:!t||"Enter"!==t.key||t.shiftKey||O||t.preventDefault();case 25:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[O,d,j,c,f,y,z,ed]),ex=(0,p.useCallback)(function(){setTimeout(function(){document.activeElement===el.current&&(null==m||m())},100)},[m]),ey=(0,p.useCallback)(function(){setTimeout(function(){document.activeElement!==el.current&&(null==v||v())},0)},[v]),ew=(0,p.useCallback)(function(e){null!=e&&e.persist&&e.persist(),el.current&&el.current.focus(),eo.current?(0,s.Z)(u().mark(function t(){var n;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,eo.current.addFiles({files:e.target.files});case 2:if(!(n=t.sent.error)){t.next=6;break}return t.abrupt("return",j(A.bI,{message:n,severity:"error"}));case 6:e.target.value="";case 7:case"end":return t.stop()}},t)}))():(console.error("attachments ref not available"),e.target.value="")},[j]),eC=(0,p.useCallback)((n=(0,s.Z)(u().mark(function e(t){var n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eo.current.addFiles({files:[{id:t.id,isGiphy:!0,metadata:{fileName:"".concat(t.query,".gif"),contentType:"image/gif",externalSrc:t.md,externalSrcSmall:t.sm}}]});case 2:if(!(n=e.sent.error)){e.next=6;break}return e.abrupt("return",j(A.bI,{message:n,severity:"error"}));case 6:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[j]),ej=(0,p.useCallback)(function(e){ep(e)},[]),ek=(0,p.useCallback)(function(e){var t=e.files,n=(void 0===t?[]:t).map(function(e){return e.id}),r=(0,N.tv)({key:N.H0.chatFiles}).value;(0,N.co)({key:N.H0.chatFiles,value:ec(ec({},void 0===r?{}:r),{},(0,i.Z)({},d,n))}),G(n)},[d]),eO=(0,p.useCallback)(function(e){ew({target:{files:e}})},[ew]),eP=(0,F.u)({onDrop:eO}),eD=eP.getRootProps,eI=eP.getInputProps,eZ=eP.isDragActive,eS=eD(),e_=eI({onClick:function(e){return e.preventDefault()}}),eM=(0,p.useCallback)(function(e){setTimeout(function(){el.current.focus(),eb({target:{value:(0,E.QS)({emoji:e,inputRef:el})}})},0)},[eb]),eN=(0,p.useCallback)(function(){if(!y){var e;null==el||null===(e=el.current)||void 0===e||e.focus()}},[y]),eE=(0,p.useCallback)((r=(0,s.Z)(u().mark(function e(t){var n,r;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=(0,L.QT)({e:t,accept:(0,L.Yw)()}))){e.next=13;break}if(t.preventDefault(),!eo.current){e.next=12;break}return e.next=6,eo.current.addFiles({files:n});case 6:if(!(r=e.sent.error)){e.next=10;break}return e.abrupt("return",j(A.bI,{message:r,severity:"error"}));case 10:e.next=13;break;case 12:console.error("attachments ref not available");case 13:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),[j]),eA=(0,p.useMemo)(function(){return(0,es.jsx)(er,{$hasAttachments:ef,children:(0,es.jsx)(T.Z,{ref:eo,editing:!0,post:{metadata:{attachments:z?null==z?void 0:z.join(","):""}},onFileInputChange:ew,onStateChange:ej,onChange:ek,level:1,isChatInput:!0,isChatInputUploading:ed})})},[z,ek,ej,ew,ef,ed]),eL=null==C||null===(a=C[ea.V.CHAT_INPUT])||void 0===a?void 0:a.bottom;return(0,es.jsxs)(es.Fragment,{children:[(0,es.jsxs)(ee,ec(ec({},eS),{},{children:[(0,es.jsx)("input",ec({},e_)),(eh||eZ)&&(0,es.jsx)(K,{children:(0,es.jsx)(Q,{children:(0,es.jsx)(S.Z,{variant:"t1",color:I.O9.n5,children:"Drop files here to upload"})})}),(0,es.jsxs)(W,{onClick:eN,$bottom:eL,children:[(0,es.jsx)(q,{children:(0,es.jsxs)(R.x,{flexDirection:y&&ef?"column":"row",width:"100%",flexWrap:"wrap",justifyContent:"space-between",children:[(0,es.jsx)(Y,{children:(0,es.jsx)(J,{autoFocus:!y,maxRows:10,multiline:!0,value:O,onChange:eb,onKeyPress:eg,placeholder:"Message ".concat($.firstName),variant:"borderless",ref:el,staticLabel:!0,onPaste:eE,onFocus:ex,onBlur:ey},"".concat(d,"-").concat(V?"loaded":"loading"))}),y&&eA,(0,es.jsxs)(ei,{children:[(0,es.jsxs)(R.x,{alignSelf:"flex-start",marginTop:y?0:8,children:[(0,es.jsx)("input",{type:"file",style:{display:"none"},accept:(0,L.Yw)(),multiple:!0,onChange:ew,id:"chat-file-attachment"}),y&&(0,es.jsx)(M.g,{onSelect:eC,onOpen:b}),(0,es.jsx)(et,{htmlFor:"chat-file-attachment",children:(0,es.jsx)(Z.z,{variant:y?"icon-borderless-no-hover":"icon-borderless",icon:"PaperClip",iconSize:y?20:16.66,as:"span"})})]}),!y&&(0,es.jsx)(_.h,{style:{marginTop:8},onClick:eM}),!y&&(0,es.jsx)(M.g,{onSelect:eC,onOpen:b,style:{marginTop:8,height:40}})]})]})}),y&&(ef||!!O)&&(0,es.jsx)(X,{children:(0,es.jsx)(U,{onClick:function(){return eg()},variant:"icon-borderless-no-hover",icon:"Send",iconSize:21,$canSend:!ed&&(!!O||!!(null!=z&&z.length))})})]})]})),!y&&eA]})}),ed=n(33894),ep=n(27849),ef=n(96486),em=n(85064),eh=n(15554),ev=n(91575),eb=n(54361),eg=n(42108),ex=n(88325),ey=n(91194),ew=n(76958),eC=n(70299),ej=(0,z.ZP)(Z.z).withConfig({displayName:"styled__ChatUnblockButton",componentId:"sc-cfaah3-0"})(["height:","px;width:100%;"],function(e){return e.theme.isMobile?56:53}),ek=(0,z.ZP)(y.X).withConfig({displayName:"styled__ChatUnblockButtonWrapper",componentId:"sc-cfaah3-1"})(["height:",";width:100%;padding:8px;border-top:1px solid ",";"],function(e){return e.theme.isMobile?"56px":void 0},I.O9.n3),eO=(0,z.ZP)(w.s).withConfig({displayName:"styled__MessagesWrapper",componentId:"sc-cfaah3-2"})(["flex:1;padding-left:",";padding-right:",";width:100%;padding-bottom:20px;"],function(e){return e.theme.isMobile?"13px":"16px"},function(e){return e.theme.isMobile?"13px":"16px"}),eP=(0,z.iv)(["flex:unset;border-bottom:unset;height:100%;"]),eD=z.ZP.div.withConfig({displayName:"styled__OuterChatContainer",componentId:"sc-cfaah3-3"})(["flex:1 1 auto;overflow:auto;min-height:0;height:0;width:100%;position:relative;border-bottom:1px solid ",";",";"],I.O9.n3,function(e){return e.theme.isMobile&&eP}),eI=(0,z.iv)(["position:fixed;bottom:","px;z-index:1299;",""],function(e){var t=e.$bottom;return void 0===t?0:t},eC.Wn),eZ=z.ZP.div.withConfig({displayName:"styled__BottomContainer",componentId:"sc-cfaah3-4"})(["width:100%;",";"],function(e){return e.theme.isMobile&&eI}),eS=z.ZP.div.withConfig({displayName:"styled__ChatContainer",componentId:"sc-cfaah3-5"})(["overflow:auto;height:100%;padding-top:8px;padding-bottom:",";background:",";width:100%;&:focus{outline:none;}"],function(e){return e.theme.isMobile?"64px":"16px"},I.O9.n1),e_=(0,z.iv)(["padding:4px 16px;position:absolute;bottom:0;left:0;width:calc(100% - 16px);"]),eM=(0,z.iv)(["padding:8px 10px 0;"]),eN=(0,z.ZP)(y.X).withConfig({displayName:"styled__TypingIndicatorWrapper",componentId:"sc-cfaah3-6"})(["align-items:center;background:",";gap:8px;",";"],I.O9.n1,function(e){return e.theme.isMobile?eM:e_}),eE=z.ZP.div.withConfig({displayName:"styled__NoConvoWrapper",componentId:"sc-cfaah3-7"})(["padding-top:8px;"]),eA=(0,z.ZP)(w.s).withConfig({displayName:"styled__ChatBubble",componentId:"sc-cfaah3-8"})(["background-color:",";border:1px solid ",";border-radius:15px;padding:8px 13px;width:100%;min-width:0;"],function(e){return e.$bgColor},I.O9.n3),eL=z.ZP.div.withConfig({displayName:"styled__ChatAttachmentsWrapper",componentId:"sc-cfaah3-9"})(["height:100px;margin:8px 0 5px;"]),eT=z.ZP.div.withConfig({displayName:"styled__OnlineIcon",componentId:"sc-cfaah3-10"})(["position:absolute;bottom:0px;right:-8px;width:16px;height:16px;background-color:",";border-radius:50%;margin:0px 4px;border:2px solid ",";"],I.O9.s2,I.O9.n1),eF=(0,z.ZP)(w.s).withConfig({displayName:"styled__UserColumn",componentId:"sc-cfaah3-11"})(["flex:1;min-width:1px;max-width:calc(100vw - 196px);"]),eB=z.ZP.div.withConfig({displayName:"styled__ChatMessageHeader",componentId:"sc-cfaah3-12"})(["display:flex;justify-content:space-between;width:100%;> *:first-child{min-width:0px;padding-right:8px;}"]),eR=["messages","hasMoreBefore","hasMoreAfter"],ez=["messages","hasMoreBefore","hasMoreAfter"],eG=["messages","hasMoreBefore","hasMoreAfter"],eU=["messages","hasMoreBefore","hasMoreAfter"];function e$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e$(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eH(e){var t,n,r=e.channelId,c=e.contentOnly,m=e.onClose,v=e.lastRead,O=(0,f.useRouter)(),Z=r||(0,b.bR)(O.query),_=v||(0,b.pS)(O.query),M=(0,eb.CM)([]),N=(0,l.Z)(M,2),E=N[0],L=N[1],F=(0,p.useRef)(0),B=(0,p.useRef)(null),z=(0,p.useRef)(null),G=(0,p.useRef)(!1),U=(0,p.useRef)(null),$=(0,p.useRef)(null),W=(0,p.useState)(!1),H=W[0],q=W[1],V=(0,p.useRef)(0),Y=(0,p.useRef)(0),J=(0,p.useState)(!1),X=J[0],K=J[1],Q=(0,p.useRef)(!0),ee=(0,p.useRef)(!1),et=(0,p.useRef)({before:!1,after:!1}),en=(0,p.useRef)(0),er=(0,p.useRef)(null),eo=(0,p.useRef)(!1),ei=(0,p.useState)(null),el=ei[0],ec=ei[1],ep=(0,p.useState)(null),eC=ep[0],eP=ep[1],eI=(0,eb.c8)(),e_=(0,l.Z)(eI,3),eM=e_[0],e$=e_[1],eH=e_[2],eq=(0,p.useRef)(!1),eV=(0,g.bI)("conversation","onlineStatuses","lastNotification","noConversations","self","isMobile","isApp","isChat","mobileBottomOffset"),eY=eV.conversation,eJ=eV.onlineStatuses,eX=eV.lastNotification,eK=eV.noConversations,eQ=eV.self,e0=eV.isMobile,e1=eV.isApp,e2=eV.isChat,e9=eV.mobileBottomOffset,e3=eV.dispatch,e5=null==e9||null===(n=e9[ea.V.CHAT_INPUT])||void 0===n?void 0:n.bottom;(0,p.useEffect)(function(){if(eC&&e0&&(e3(A.qp,{type:ea.V.CHAT_INPUT,height:null!==(e=null===(t=eC.current)||void 0===t?void 0:t.offsetHeight)&&void 0!==e?e:0,hideType:eM?ea.V.NAV_BAR:void 0}),"ResizeObserver"in window)){var e,t,n=new ResizeObserver(function(e){var t,n=null==e||null===(t=e[0])||void 0===t?void 0:t.borderBoxSize;null!=n&&n.length&&e3(A.qp,{type:ea.V.CHAT_INPUT,height:n[0].blockSize,hideType:eM?ea.V.NAV_BAR:void 0})});return n.observe(eC,{box:"border-box"}),function(){n.disconnect(),e3(A.qp,{type:ea.V.CHAT_INPUT,height:null})}}},[e3,e0,eM,eC]),(0,p.useEffect)(function(){e0&&(!eM&&eq.current&&B.current.scrollIntoView(),eq.current=eM)},[eM,e0]);var e6=(0,p.useCallback)(function(){eq.current=!1},[]);(0,p.useEffect)(function(){var e,t=(e=(0,s.Z)(u().mark(function e(t){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.markChatMessageRead({channelId:Z,last:t});case 2:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)});er.current=(0,ef.debounce)(t,500)},[Z]),(0,p.useEffect)(function(){et.current={before:!1,after:!1},z.current=null,q(!1)},[Z]);var e4=(0,p.useCallback)((0,s.Z)(u().mark(function e(){var t,n,r,o,s,l,c;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.getChannelMessages({channelId:Z,msg:_,after:35,before:35});case 2:if(n=(t=e.sent).data,!t.error){e.next=9;break}return e3(A.bI,{message:"Something went wrong, please try again later.",severity:"error"}),null==m||m(),e.abrupt("return");case 9:return r=n.messages,o=n.hasMoreBefore,s=n.hasMoreAfter,l=(0,a.Z)(n,eR),et.current={before:et.current.before||!o,after:et.current.after||!s},en.current=((null==l?void 0:l.channel.metadata.lastReadAt)||0)/1e6,c=l.channel.user,e3(A.WT,function(e){return{conversation:l,onlineStatuses:eW(eW({},e.onlineStatuses),{},(0,i.Z)({},c.id,c.metadata.online)),newConversation:l.channel.metadata.firstMsgUser?null:l.channel}}),L(r||[]),F.current=r?r.length:0,e.abrupt("return",n);case 17:case"end":return e.stop()}},e)})),[Z,_,e3,m,L]),e8=(0,p.useCallback)((0,s.Z)(u().mark(function e(){var t,n,r,o,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.getChannelMessages({channelId:Z,noMsg:!0,before:1});case 2:(t=e.sent.data).messages,n=t.hasMoreBefore,r=t.hasMoreAfter,o=(0,a.Z)(t,ez),et.current={before:et.current.before||!n,after:et.current.after||!r},s=o.channel.user,e3(A.WT,function(e){return{conversation:o,onlineStatuses:eW(eW({},e.onlineStatuses),{},(0,i.Z)({},s.id,s.metadata.online))}});case 8:case"end":return e.stop()}},e)})),[Z,e3]),e7=(0,p.useCallback)((0,s.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.unblockChat({userId:null==eY?void 0:eY.channel.user.id});case 2:return e.next=4,e8();case 4:case"end":return e.stop()}},e)})),[eY,e8]),te=(0,p.useMemo)(function(){if(!e0||!eY)return null;var e,t=eY.channel.user;return(0,es.jsxs)(y.X,{alignItems:"center",children:[(0,es.jsxs)("div",{style:{position:"relative",marginRight:8},children:[(0,es.jsx)(j.Z,{user:t,size:40}),eJ[t.id]&&(0,es.jsx)(eT,{})]}),(0,es.jsxs)(eF,{children:[(0,es.jsx)(ew.Z,{user:t,typographyVariant:"t6",ellipsis:!0}),(0,es.jsx)(S.Z,{variant:"t11",color:I.O9.n5,ellipsis:!0,children:eJ[t.id]?"online now":null!==(e=t.metadata)&&void 0!==e&&e.lastOffline?"active ".concat((0,ex.ur)({value:t.metadata.lastOffline,justNow:!1,ago:!0})," ago"):"not active yet"})]})]})},[e0,eY,eJ]),tt=(0,p.useMemo)(function(){if(!e0||!eY)return null;var e,t,n,r=eY.channel,o=r.user,l=r.metadata.blocked,c=(e=(0,s.Z)(u().mark(function e(){var t,n,r,o,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.getChannelMessages({channelId:Z,noMsg:!0,before:1});case 2:(t=e.sent.data).messages,n=t.hasMoreBefore,r=t.hasMoreAfter,o=(0,a.Z)(t,eG),et.current={before:et.current.before||!n,after:et.current.after||!r},s=o.channel.user,e3(A.WT,function(e){return{conversation:o,onlineStatuses:eW(eW({},e.onlineStatuses),{},(0,i.Z)({},s.id,s.metadata.online))}});case 8:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),d=(t=(0,s.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.blockChat({userId:null==eY?void 0:eY.channel.user.id});case 2:return e.next=4,c();case 4:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),p=(n=(0,s.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.unblockChat({userId:null==eY?void 0:eY.channel.user.id});case 2:return e.next=4,c();case 4:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return[{label:"View profile",onClick:function(){(0,ey.VF)(O,(0,b.sB)({userName:o.name}),e0&&!e1)}},{label:"".concat(l?"Unblock":"Block"," ").concat(o.firstName," ").concat(o.lastName),onClick:l?p:d}]},[e0,eY,Z,e3,O,e1]),tn=(0,p.useMemo)(function(){return te?{title:te,dropdownOptions:tt}:null},[te,tt]);(0,eg.l)(eg.C.CHAT,tn),(0,p.useEffect)(function(){if(U.current){var e=U.current.scrollHeight-U.current.clientHeight;Q.current&&(U.current.scrollTop=V.current+(e-Y.current))}},[E]);var tr=(0,p.useCallback)((t=(0,s.Z)(u().mark(function e(t,n){var r,s,l,c,d,p;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.getChannelMessages((0,i.Z)({channelId:Z,msg:t,noMsg:!0},n,35));case 2:s=(r=e.sent.data).messages,l=r.hasMoreBefore,c=r.hasMoreAfter,d=(0,a.Z)(r,eU),Q.current="before"===n,et.current={before:et.current.before||!l,after:et.current.after||!c},p=d.channel.user,e3(A.WT,function(e){return{conversation:d,onlineStatuses:eW(eW({},e.onlineStatuses),{},(0,i.Z)({},p.id,p.metadata.online)),newConversation:d.channel.metadata.firstMsgUser?null:d.channel}}),U.current&&(V.current=U.current.scrollTop,Y.current=U.current.scrollHeight-U.current.clientHeight),F.current=F.current+((null==s?void 0:s.length)||0),"before"===n?L(function(e){return[].concat((0,o.Z)(s),(0,o.Z)(e))}):L(function(e){return[].concat((0,o.Z)(e),(0,o.Z)(s))});case 12:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),[Z,e3,L]);(0,p.useEffect)(function(){Z&&(0,s.Z)(u().mark(function e(){var t,n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,e4();case 2:t=e.sent,!ee.current&&t&&((n=t.channel.metadata.blocked?"blocked":void 0)&&e3(A.WT,function(){return{chatListType:n}}),ee.current=!0);case 4:case"end":return e.stop()}},e)}))()},[e4,Z,e3]),(0,p.useEffect)(function(){!eo.current&&ee.current&&(eo.current=!0,$.current?$.current.scrollIntoView():B.current&&(B.current.scrollIntoView(),setTimeout(function(){var e;null===(e=U.current)||void 0===e||e.scrollTo(0,U.current.scrollHeight)},0)))},[E]);var to=(0,p.useCallback)(function(){B.current&&X&&B.current.scrollIntoView()},[X]),ti=(0,p.useCallback)(function(e){Q.current=!1,e.userId!==eQ.id&&(q(!1),z.current=null,X&&!eQ.metadata.noChatSound&&(0,ed.O)()),L(function(t){return F.current=t.length+1,[].concat((0,o.Z)(t),[{createdAt:e.createdAt/1e6,metadata:{content:e.content,src:e.userId,attachments:null!=e&&e.attachments?null==e?void 0:e.attachments.join(","):null,attachmentsData:null==e?void 0:e.attachmentsData,videoLinks:null!=e&&e.videoLinks?null==e?void 0:e.videoLinks.join("\n"):null,videoLinksData:null==e?void 0:e.videoLinksData}}])},to)},[X,to,eQ.id,eQ.metadata.noChatSound,L]);(0,p.useEffect)(function(){G.current=!0;var e=setInterval(function(){G.current&&z.current&&(new Date().getTime()<=z.current?q(!0):H&&q(!1))},1e3);return function(){G.current=!1,clearInterval(e)}},[H]);var ta=(0,p.useCallback)(function(e){e.userId!==(null==eQ?void 0:eQ.id)&&(z.current=new Date().getTime()+e.duration)},[eQ]);(0,p.useEffect)(function(){if(Z)return(0,k.Ld)([(0,k.jy)(Z)],ti)},[Z,ti]),(0,p.useEffect)(function(){if(Z)return(0,k.Ld)([(0,k.U5)(Z)],ta)},[Z,ta]);var ts=(0,p.useCallback)(function(){ec(null),e3(A.WT,function(){return{disableEscapeChat:!1}})},[e3]),tl=(0,p.useCallback)(function(e){var t,n,r,o=e.post,i=e.file,a=e.videoLink,s=(null==i||null===(t=i.metadata)||void 0===t?void 0:t.contentType)||"",l=(null==i||null===(n=i.metadata)||void 0===n?void 0:n.readUrl)||(null==i||null===(r=i.metadata)||void 0===r?void 0:r.srcReadUrl);e0&&"application/pdf"===s?window.open(l,"_blank"):(ec({post:o,file:i,videoLink:a}),e3(A.WT,function(){return{disableEscapeChat:!0}}))},[e3,e0]),tc=(0,p.useCallback)(function(e,t,n){var r,o,i,a,l,c,d,p=e.metadata.src,f=eY.channel,m=f.user,h=f.metadata,v=null==t?void 0:t.createdAt,b=null,g=null===(i=e.metadata)||void 0===i?void 0:i.content,w=null===(a=e.metadata)||void 0===a?void 0:a.attachments,C=null===(l=e.metadata)||void 0===l?void 0:l.attachmentsData,k=null===(c=e.metadata)||void 0===c?void 0:c.videoLinks,O=null===(d=e.metadata)||void 0===d?void 0:d.videoLinksData;v?P()(e.createdAt).diff(v,"hours",!0)>1&&(b=e.createdAt):b=e.createdAt;var Z=P()(e.createdAt).format((r=e.createdAt,P()().isSame(r,"day")?"h:mma":P()().isSame(r,"week")?"dddd h:mma":"MMM Do YYYY h:mma")),M=p===eQ.id,N=M?eQ:m;return(0,es.jsx)(D.df,{onChange:(o=(0,s.Z)(u().mark(function t(r){var o,i,a,s,l,c,d;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=13;break}if(o=F.current-1===n&&et.current.after,eX&&eX.id===eY.channel.id&&e3(A.WT,function(){return{lastNotification:null}}),i=h.unread,a=h.numUnread,o&&P()(e.createdAt).isAfter(en.current)?(en.current=e.createdAt,er.current()):P()(e.createdAt).isAfter(en.current)?(en.current=e.createdAt,er.current(e.id)):i&&0===a&&er.current(),!(3===n&&!et.current.before)){t.next=9;break}return l=null===(s=E[0])||void 0===s?void 0:s.id,t.next=9,tr(l,"before");case 9:if(!(n===F.current-4&&!et.current.after)){t.next=13;break}return d=null===(c=E[E.length-1])||void 0===c?void 0:c.id,t.next=13,tr(d,"after");case 13:case"end":return t.stop()}},t)})),function(e){return o.apply(this,arguments)}),children:(0,es.jsxs)("div",{ref:e.id===_?$:void 0,children:[b&&(0,es.jsx)(y.X,{style:{width:"100%"},justifyContent:"center",marginTop:8,marginBottom:13,children:(0,es.jsx)(S.Z,{variant:"t9",color:I.O9.n5,children:P()(b).format("MMM Do YYYY")})}),(0,es.jsxs)(y.X,{gap:8,alignItems:"flex-start",children:[(0,es.jsx)(j.Z,{size:40,user:N,newTab:!e0}),(0,es.jsxs)(eA,{$bgColor:M?I.O9.n2:I.O9.n1,children:[(0,es.jsxs)(eB,{children:[(0,es.jsx)(ew.Z,{user:N,typographyVariant:"t6"}),(0,es.jsx)(S.Z,{variant:"t11",color:I.O9.n5,children:P()(e.createdAt).format("h:mma")})]}),(0,es.jsxs)("div",{title:Z,children:[g&&(0,es.jsx)(x.ZP,{value:g,textVariant:"t7"}),(w||C||k)&&(0,es.jsx)(eL,{children:(0,es.jsx)(T.Z,{post:{metadata:{attachments:w,attachmentsData:C,videoLinks:k,videoLinksData:O}},onItemClick:tl,level:1})})]})]})]},n)]})},"".concat(e.id||"new","-").concat(n))},[eY,eQ,tr,_,e3,eX,tl,E,e0]),tu=(0,p.useMemo)(function(){if(!(null!=eY&&null!==(e=eY.channel)&&void 0!==e&&e.user))return null;var e,t=eY.channel.user;return(0,es.jsxs)(eN,{children:[(0,es.jsx)(eh.Z,{}),(0,es.jsx)(S.Z,{maxLines:1,color:I.O9.n5,variant:e0?"t9":"t7",children:"".concat(t.firstName," ").concat(t.lastName," is typing...")})]})},[e0,eY]),td=(0,p.useMemo)(function(){return eY?(0,es.jsx)(eO,{children:(0,es.jsx)(w.s,{gap:8,children:E.map(function(e,t){return E.length-1===t?(0,es.jsx)(D.df,{onChange:K,children:tc(e,E[t-1],t)},"".concat(e.id||"new","-").concat(t)):tc(e,E[t-1],t)})})}):null},[E,tc,eY]),tp=(0,p.useMemo)(function(){if(!eY)return null;var e=eY.channel,t=e.metadata,n=e.user;return t.blocked?(0,es.jsxs)(w.s,{style:{background:I.O9.n1},children:[(0,es.jsx)(y.X,{padding:"10px ".concat(e0?10:24,"px"),children:(0,es.jsx)(S.Z,{variant:"t9",color:I.O9.e2,textAlign:e0?"center":"left",children:"You blocked ".concat(n.firstName," ").concat(n.lastName,". You won't be notified of messages, and they won't know they're blocked. You can check your list of blocked users in user settings.")})}),(0,es.jsx)(ek,{children:(0,es.jsx)(ej,{disableRipple:!0,variant:"borderless",label:"UNBLOCK",typography:"t5",onClick:e7})})]}):(0,es.jsx)(eu,{channelId:Z,convoBottom:B,isModal:c,onFocus:e$,onBlur:eH,onGifPickerOpen:e6})},[eY,e7,c,Z,e0,e$,eH,e6]),tf=(0,p.useMemo)(function(){if(!eY||!et.current.before)return null;var e=eY.channel,t=e.user,n=e.metadata,r=e.requestGroup;if(null!=n&&n.coachUserId){var o=(null==n?void 0:n.coachUserId)===(null==eQ?void 0:eQ.id)?"You're ".concat(t.firstName,"'s Skool account manager."):"".concat(t.firstName," was assigned to you as your Skool account manager.");return(0,es.jsx)(S.Z,{variant:"t9",color:I.O9.n5,textAlign:"center",children:o})}return(0,es.jsxs)(S.Z,{variant:"t9",color:I.O9.n5,textAlign:"center",children:["You and ".concat(t.firstName," ").concat(t.lastName," know each other from"),(0,es.jsx)("br",{}),"".concat(null==r?void 0:r.metadata.displayName),n.sharedGroups>1&&" and ".concat(n.sharedGroups," other groups")]})},[eY,eQ]),tm=(0,p.useMemo)(function(){if(!eY||!et.current.before)return null;var e=eY.channel,t=e.user,n=e.metadata;if(null!=n&&n.forCoach)return null;var r=E[0]?E[0].metadata.src===eQ.id?"You broke the ice!":"".concat(t.firstName," ").concat(t.lastName," broke the ice!"):"You're about to break the ice!";return(0,es.jsx)(S.Z,{variant:"t9",color:I.O9.n5,children:r})},[eY,E,eQ]),th=(0,p.useMemo)(function(){if(!eY||!et.current.before)return null;var e=eY.channel,t=e.user,n=e.requestGroup;return n?(0,es.jsxs)(w.s,{alignItems:"center",gap:24,paddingTop:e0?16:56,paddingBottom:e0?16:56,children:[(0,es.jsxs)(w.s,{alignItems:"center",gap:8,children:[(0,es.jsx)(C.Z,{newTab:!e0,group:n,iconSize:40}),(0,es.jsxs)(y.X,{alignItems:"center",gap:8,children:[(0,es.jsx)(j.Z,{user:eQ,size:40}),(0,es.jsx)(R.x,{justifyContent:"center",marginBottom:28,style:{width:24},children:(0,es.jsx)(d.J,{name:"Refresh",color:I.O9.n5,size:20})}),(0,es.jsx)(j.Z,{user:t,size:40})]})]}),tf,tm]}):null},[e0,eY,tm,tf,eQ]),tv=(0,p.useMemo)(function(){return eY?(0,es.jsxs)(w.s,{alignItems:"center",height:"calc(100% - 52px)",width:"100%",children:[(0,es.jsxs)(eD,{children:[(0,es.jsxs)(eS,{ref:U,children:[th,td,(0,es.jsx)("div",{ref:B})]}),H&&!e0&&tu]}),(0,es.jsxs)(eZ,{ref:eP,$bottom:e5,children:[H&&e0&&tu,tp,!!el&&(0,es.jsx)(ev.Z,{open:!0,post:el.post,file:el.file,videoLink:el.videoLink,onClose:ts})]})]}):c?(0,es.jsx)(w.s,{alignItems:"center",justifyContent:"center",style:{height:"100%",position:"relative",width:"100%"},children:(0,es.jsx)(em.D,{})}):Z?null:(0,es.jsx)(y.X,{padding:e0?16:0,children:(0,es.jsx)(eE,{children:(0,es.jsx)(S.Z,{color:I.O9.n5,variant:"t9",children:eK?"No chat yet":"Select a conversation"})})})},[eY,th,td,H,tu,tp,el,ts,c,Z,e0,eK,e5]);return!e0&&e2?null:tv}eH.initPage=(r=(0,s.Z)(u().mark(function e(t){var n,r,o,i,a,s,l,c,d,p;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ctx,r=t.props,o=(0,b.bR)(n.query),r.self){e.next=8;break}return i=(0,b.rv)({channelId:o}).as,s=(a=(0,b.Iy)({redirectPath:i})).href,l=a.as,(0,v.Z)({Router:m(),ctx:n,url:s,as:l}),e.abrupt("return",r);case 8:if(r.isMobile){e.next=12;break}return d=(c=(0,b.kr)({channelId:o})).href,p=c.as,(0,v.Z)({Router:m(),ctx:n,url:d,as:p}),e.abrupt("return",r);case 12:return e.abrupt("return",eW({settings:{pageTitle:"Chat",mainMenuName:ep.K0.Chat}},r));case 14:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});var eq=eH},54408:function(e,t,n){n.d(t,{Fs:function(){return s},I2:function(){return i},Z0:function(){return u},_A:function(){return c},f2:function(){return r},fX:function(){return d},pf:function(){return l},q$:function(){return o},xO:function(){return a},y2:function(){return p}});var r=50,o=500,i="You have unsaved changes. Do you want to leave without saving?",a=1,s=2,l=3,c=[{value:0,label:"All members",description:"All members can access."},{value:2,label:"Level Unlock",description:"Members unlock this course at a specific level."},{value:3,label:"Buy Now",description:"Members pay a 1-time price to unlock this course."},{value:1,label:"Private",description:"Members you specify manually can access."}],u=[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"}],d=0,p=1e3},80181:function(e,t,n){n.d(t,{Fy:function(){return x},Jo:function(){return O},MK:function(){return I},Nl:function(){return D},Vl:function(){return j},XK:function(){return P},aA:function(){return h},eI:function(){return u},h3:function(){return b},nS:function(){return m},ni:function(){return p},vb:function(){return y},y5:function(){return d},yB:function(){return w},zm:function(){return C}});var r=n(50378),o=n(20668),i=n(70299),a=n(14251),s=n(12476),l=n(8024);n(59607);var c=(0,r.iv)(["overflow:hidden;height:187px;"]),u=r.ZP.div.withConfig({displayName:"styled__CourseCover",componentId:"sc-ugqan8-0"})(["position:relative;height:200px;width:100%;opacity:1;"," background-color:",";"],function(e){return!e.theme.isMobile&&c},function(e){return e.$bgColor}),d=r.ZP.img.withConfig({displayName:"styled__CoverImage",componentId:"sc-ugqan8-1"})(["display:block;height:",";width:100%;object-fit:cover;"],function(e){return e.theme.isMobile?"200px":"187px"}),p=r.ZP.div.withConfig({displayName:"styled__CourseCoverContent",componentId:"sc-ugqan8-2"})(["position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;background-color:rgba(0,0,0,0.5);color:",";",""],function(e){return e.theme.isDarkTheme?a.O9.n7:a.O9.n1},function(e){var t=e.theme;return o.c[t.isMobile?"t5":"t2"]}),f=(0,r.iv)(["grid-template-columns:none;row-gap:0px;margin-top:16px;"]),m=r.ZP.div.withConfig({displayName:"styled__CourseWrapper",componentId:"sc-ugqan8-3"})(["width:100%;display:grid;column-gap:16px;row-gap:32px;grid-template-columns:repeat(3,1fr);",";"],function(e){return e.theme.isMobile&&f}),h=r.ZP.div.withConfig({displayName:"styled__CourseLinkWrapper",componentId:"sc-ugqan8-4"})(["position:relative;"]),v=(0,r.iv)(["border-left:0px !important;border-right:0px !important;width:100vw;border-radius:0px;margin-bottom:16px;"]),b=r.ZP.div.withConfig({displayName:"styled__CourseContent",componentId:"sc-ugqan8-5"})(["width:350px;border-radius:10px;border:1px solid ",";overflow:hidden;background:",";display:flex;flex-direction:column;cursor:pointer;min-height:378px;",";",";&:hover{","}"],a.O9.n3,a.O9.n1,function(e){return e.theme.isMobile&&v},function(e){return!e.$published&&"opacity: 0.75;"},i.Wn),g=(0,r.iv)(["visibility:visible;"]),x=(0,r.ZP)(s.h_).withConfig({displayName:"styled__CourseDropdownMenu",componentId:"sc-ugqan8-6"})(["position:absolute;top:8px;right:8px;visibility:hidden;",":hover &{visibility:visible;}",";",";"],h,function(e){return e.theme.isMobile&&g},function(e){return e.$forceDropdownVisible&&"visibility: visible;"}),y=(0,r.ZP)(l.A).withConfig({displayName:"styled__DraftChip",componentId:"sc-ugqan8-7"})(["position:absolute;top:8px;left:8px;color:",";background-color:",";border:",";&:hover{color:",";background-color:",";border:",";}"],function(e){return e.theme.isDarkTheme?a.O9.n7:a.O9.n1},a.O9.n5,a.O9.n5,a.O9.n1,a.O9.n5,a.O9.n5),w=(0,r.ZP)(b).withConfig({displayName:"styled__NewCourse",componentId:"sc-ugqan8-8"})(["border:2px dashed ",";background:",";flex-direction:row;justify-content:center;align-items:center;color:",";"," > :first-child{margin-right:13px;}> div{width:14px;color:",";}&:hover{color:",";background:",";box-shadow:none;> div{color:",";}}"],a.O9.n3,a.O9.n2,a.O9.n5,o.c.t6,a.O9.n5,a.O9.n7,a.O9.n3,a.O9.n7),C=r.ZP.div.withConfig({displayName:"styled__CourseInfo",componentId:"sc-ugqan8-9"})(["flex:1;display:flex;flex-direction:column;padding:16px 13px;"]),j=r.ZP.div.withConfig({displayName:"styled__CourseTitle",componentId:"sc-ugqan8-10"})(["margin-bottom:8px;"," ",""],o.c.ellipsis,function(e){return e.theme.isMobile?o.c.t4:o.c.t2}),k=(0,r.iv)(["height:42px;",""],o.c.t9),O=r.ZP.div.withConfig({displayName:"styled__CourseDescription",componentId:"sc-ugqan8-11"})(["margin-bottom:24px;word-break:break-word;height:72px;overflow:hidden;"," ",""],o.c.t7,function(e){return e.theme.isMobile&&k}),P=r.ZP.div.withConfig({displayName:"styled__ClassroomWrapper",componentId:"sc-ugqan8-12"})(["display:flex;flex-direction:column;"]),D=r.ZP.div.withConfig({displayName:"styled__PaginationWrapper",componentId:"sc-ugqan8-13"})(["padding:32px 0px;"]),I=r.ZP.div.withConfig({displayName:"styled__ClassroomNoCourses",componentId:"sc-ugqan8-14"})(["display:flex;justify-content:center;flex:1;color:",";margin-top:","px;",""],a.O9.n7,function(e){return e.theme.isMobile?32:0},o.c.t7)},51544:function(e,t,n){n.d(t,{n:function(){return el}});var r=n(90116),o=n(59499),i=n(50029),a=n(64687),s=n.n(a),l=n(67294),c=n(75331),u=n(33894),d=n(73793),p=n(95419),f=n(50591),m=n(70131),h=n(30697),v=n(15673),b=n(14251),g=n(96486),x=n.n(g),y=n(12476),w=n(36581),C=n(65009),j=n(85064),k=n(17674),O=n(5095),P=n(73674),D=n(88325),I=n(29610),Z=n(70120),S=n(86031),_=n(66703),M=n(76958),N=n(50378),E=n(20668),A=(0,N.ZP)(C.X).withConfig({displayName:"styled__ButtonWrapper",componentId:"sc-5xhq84-0"})(["height:40px;width:40px;align-items:center;justify-content:center;cursor:pointer;visibility:",";border-radius:50%;&:hover{background-color:",";}"],function(e){var t=e.$unread,n=e.theme;return t||n.isMobile?"visible":"hidden"},function(e){return!e.theme.isMobile&&b.O9.n3}),L=N.ZP.div.withConfig({displayName:"styled__ReadButton",componentId:"sc-5xhq84-1"})(["height:12px;width:12px;background-color:",";border:",";border-radius:50%;"],function(e){return e.$unread?b.O9.sd1:"transparent"},function(e){var t=e.$unread;return"3px solid ".concat(t?b.O9.sd1:b.O9.n5)}),T=(0,N.ZP)(C.X).withConfig({displayName:"styled__NotificationRow",componentId:"sc-5xhq84-2"})(["align-items:center;border-bottom:1px solid ",";gap:",";height:72px;padding:",";transition:background 150ms ease-in-out;&:hover{background-color:",";","{visibility:inherit;}}"],b.O9.n3,function(e){return e.theme.isMobile?0:"12px"},function(e){var t=e.theme;return"12px ".concat(t.isMobile?13:16,"px")},function(e){var t=e.$readHover;return e.theme.isMobile?void 0:t?b.O9.n1:b.O9.n3},A),F=N.ZP.div.withConfig({displayName:"styled__AvatarWrapper",componentId:"sc-5xhq84-3"})(["opacity:",";position:relative;"],function(e){return e.$unread?1:.5}),B=N.ZP.div.withConfig({displayName:"styled__OnlineIcon",componentId:"sc-5xhq84-4"})(["position:absolute;bottom:0;right:-8px;height:16px;width:16px;background-color:",";border-radius:50%;margin:0 4px;border:2px solid ",";"],b.O9.s2,b.O9.n1),R=(0,N.ZP)(S.x).withConfig({displayName:"styled__LastMessageWrapper",componentId:"sc-5xhq84-5"})(["flex-shrink:0;margin-left:4px;min-width:40px;"]),z=N.ZP.div.withConfig({displayName:"styled__Overlay",componentId:"sc-5xhq84-6"})(["margin-left:",";min-width:0;opacity:",";"],function(e){return e.theme.isMobile?"12px":void 0},function(e){return e.$unread?1:.5}),G=N.ZP.div.withConfig({displayName:"styled__UnreadCount",componentId:"sc-5xhq84-7"})(["",";"],E.c.t5),U=N.ZP.div.withConfig({displayName:"styled__LastMessageTime",componentId:"sc-5xhq84-8"})(["color:",";",";"],b.O9.n5,E.c.t7),$=N.ZP.div.withConfig({displayName:"styled__MessageContent",componentId:"sc-5xhq84-9"})(["",";",";"],E.c.t9,E.c.ellipsis),W=n(54361),H=n(85893),q=(0,l.memo)(function(e){var t,n,r,o,a,c,u=e.item,f=e.batchIdx,v=e.itemIdx,b=e.fetchChannels,g=e.onClose,x=u.id,y=u.user,j=u.metadata,N=u.lastMessage,E=j.lastRead,q=j.numUnread,V=j.unread,Y=(0,l.useState)(V||q),J=Y[0],X=Y[1],K=(0,d.bI)("onlineStatuses","lastNotification","isMobile","self"),Q=K.onlineStatuses,ee=K.lastNotification,et=K.isMobile,en=K.self,er=K.dispatch,eo=(0,W.c8)(),ei=(0,k.Z)(eo,3),ea=ei[0],es=ei[1],el=ei[2];(0,l.useEffect)(function(){X(V||q)},[V,q]);var ec=(0,l.useCallback)((t=(0,i.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),t.preventDefault(),ee&&ee.id===x&&er(h.WT,function(){return{lastNotification:null}}),e.next=5,p.Z.markChatMessageRead({channelId:x});case 5:X(!1);case 6:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[er,x,ee]),eu=(0,l.useCallback)((n=(0,i.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),t.preventDefault(),e.next=4,p.Z.markChatMessageUnread({channelId:x});case 4:X(!0);case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[x]),ed=(0,O.rv)({channelId:x,chatLastRead:E||void 0}),ep=(0,l.useCallback)(function(e){et||(e.preventDefault(),er(h.WT,function(){return{channelId:x,chatModalProps:{id:x,lastRead:E}}}),g())},[er,x,et,E,g]),ef=(0,H.jsx)(A,{onMouseEnter:et?void 0:es,onMouseLeave:et?void 0:el,onClick:J?ec:eu,$unread:J,children:(0,H.jsx)(L,{$unread:J})});return(0,H.jsx)(m.df,{onChange:(r=(0,i.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&20===v)){e.next=3;break}return e.next=3,b(f+1);case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),children:(0,H.jsx)(Z.r,{href:ed.href,as:ed.as,onClick:ep,children:(0,H.jsxs)(T,{$readHover:ea,children:[(0,H.jsxs)(F,{$unread:J,children:[(0,H.jsx)(P.Z,{user:y,size:40,disableLink:!0}),Q[y.id]&&(0,H.jsx)(B,{})]}),(0,H.jsx)(z,{$unread:J,children:(0,H.jsxs)(w.s,{children:[(0,H.jsxs)(C.X,{children:[(0,H.jsx)(M.Z,{disableLink:!0,disableStatusBadgeModal:!0,user:y,typographyVariant:"t5"}),(q>0||V)&&(0,H.jsx)(S.x,{marginLeft:4,children:(0,H.jsx)(G,{children:"(".concat(q||1,")")})}),(0,H.jsx)(R,{children:(0,H.jsx)(U,{children:(null==N?void 0:N.createdAt)&&"• ".concat((0,D.ur)({value:null==N?void 0:N.createdAt,justNow:!1}))})})]}),(0,H.jsx)($,{children:(0,I.Kv)({content:"".concat(null!=N&&null!==(o=N.metadata)&&void 0!==o&&o.content?null==N||null===(a=N.metadata)||void 0===a?void 0:a.content:(null==en?void 0:en.id)===(null==N||null===(c=N.metadata)||void 0===c?void 0:c.src)?"Sent an attachment":"Received an attachment")})})]})}),(0,H.jsx)(S.x,{flexGrow:1,justifyContent:"flex-end",children:et?ef:(0,H.jsx)(_.u,{content:"Mark ".concat(J?"read":"unread"),children:ef})})]})})},u.id)}),V=n(96276),Y=n(47691),J=(0,N.ZP)(C.X).withConfig({displayName:"styled__HeaderWrapper",componentId:"sc-ukqy8p-0"})(["align-items:center;border-bottom:1px solid ",";gap:8px;height:52px;"],b.O9.n3),X=N.ZP.div.withConfig({displayName:"styled__ChatHeader",componentId:"sc-ukqy8p-1"})(["",";"],E.c.t6),K=N.ZP.div.withConfig({displayName:"styled__SearchResultsText",componentId:"sc-ukqy8p-2"})(["color:",";",";"],b.O9.n5,E.c.t7),Q=(0,N.ZP)(V.J).withConfig({displayName:"styled__SearchIcon",componentId:"sc-ukqy8p-3"})(["color:",";height:18px;width:18px;"],b.O9.n5),ee=(0,N.ZP)(V.J).withConfig({displayName:"styled__CloseIcon",componentId:"sc-ukqy8p-4"})(["color:",";height:14px;width:14px;"],b.O9.n5),et=N.ZP.button.withConfig({displayName:"styled__CloseButton",componentId:"sc-ukqy8p-5"})(["width:24px;padding:0;margin-right:4px;background:none;border:none;cursor:pointer;"]),en=N.ZP.span.withConfig({displayName:"styled__MarkAllRead",componentId:"sc-ukqy8p-6"})(["color:",";cursor:pointer;&:hover{text-decoration:underline;}",";"],b.O9.sd1,E.c.t11),er=N.ZP.div.withConfig({displayName:"styled__ChatSearchWrapper",componentId:"sc-ukqy8p-7"})(["padding:8px 13px;border-bottom:1px solid ",";"],b.O9.n3),eo=(0,N.ZP)(Y.I).withConfig({displayName:"styled__SearchInput",componentId:"sc-ukqy8p-8"})(["background-color:",";border-radius:10px;padding-left:16px;padding-right:8px;height:40px;min-height:unset;width:100%;input{color:",";height:32px;padding:6px 0 7px;",";&::placeholder{color:",";padding-top:2px;",";}}"],b.O9.n3,b.O9.n7,E.c.t7,b.O9.n5,E.c.t7),ei=n(42108);function ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function es(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ea(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var el=(0,l.memo)(function(e){var t=e.onItemClick,n=(0,d.bI)("unreadChat","self","isMobile"),a=n.unreadChat,g=n.self,k=n.isMobile,O=n.dispatch,P=(0,l.useState)(!0),D=P[0],I=P[1],Z=(0,l.useRef)([]),_=(0,l.useRef)(!1),M=(0,l.useState)([]),N=M[0],E=M[1],A=(0,l.useRef)([]),L=(0,l.useState)(""),T=L[0],F=L[1],B=(0,l.useState)(null),R=B[0],z=B[1],G=(0,l.useState)(!1),U=G[0],$=G[1],W=(0,l.useRef)(""),V=(0,l.useState)(function(){var e,t;return null!==(e=null===(t=(0,c.tv)({key:c.H0.lastChatFilter}))||void 0===t?void 0:t.value)&&void 0!==e?e:"all"}),Y=V[0],ea=V[1];(0,l.useEffect)(function(){T?$(!0):(z(null),$(!1))},[T]),(0,l.useEffect)(function(){var e=T||"";if(e){if(e!==W.current){if(W.current=e,e.trim()){var t=setTimeout((0,i.Z)(s().mark(function t(){var n,r;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Z.searchChatUsers({query:e});case 2:z(null!==(n=null==(r=t.sent.data)?void 0:r.channels)&&void 0!==n?n:[]),$(!1);case 6:case"end":return t.stop()}},t)})),500);return function(){clearTimeout(t)}}z(null),$(!1)}}else W.current="",z(null),$(!1)},[T]);var el=(0,l.useCallback)(function(e){var t=e.online,n=e.topic.mainId;O(h.WT,function(e){return{onlineStatuses:es(es({},e.onlineStatuses),{},(0,o.Z)({},n,t))}})},[O]);(0,l.useEffect)(function(){if(null!=N&&N.flat){var e={};N.flat().forEach(function(t){var n=t.user,r=n.id,o=n.metadata;e[r]=o.online}),O(h.WT,function(t){return{onlineStatuses:es(es({},t.onlineStatuses),e)}});var t=N.flat().map(function(e){return(0,f.Cq)(e.user.id)});if(t.length)return(0,f.Ld)(t,el)}},[N,el,O]);var ec=(0,l.useCallback)((0,i.Z)(s().mark(function e(){var t,n,o,i,a,l,c=arguments;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:0,n=c.length>1?c[1]:void 0,!(o=W.current.trim())){e.next=12;break}return e.next=6,p.Z.searchChatUsers({query:o});case 6:if(z(e.sent.data.channels||[]),$(!1),n){e.next=12;break}return e.abrupt("return");case 12:if(!_.current){e.next=14;break}return e.abrupt("return");case 14:if(!(!n&&Z.current.length>=t+1)){e.next=16;break}return e.abrupt("return");case 16:if(!(Z.current.length<t+1||Z.current[t])){e.next=33;break}return I(!0),e.next=20,p.Z.getChannels({limit:30,offset:30*t,last:!0,unreadOnly:"unread"===Y});case 20:if(a=(i=e.sent).data,!i.error){e.next=25;break}return e.abrupt("return");case 25:if(l=a.channels,0===t&&O(h.WT,function(){return{noNotifications:!l}}),!(!l&&0!==t)){e.next=30;break}return _.current=!0,e.abrupt("return");case 30:l||(l=[],_.current=!0),E(function(e){return Z.current.length?void 0!==Z.current[t]?(Z.current[t]=!1,[].concat((0,r.Z)(e.slice(0,t)),[l],(0,r.Z)(e.slice(t+1)))):(Z.current=[].concat((0,r.Z)(Z.current),[!1]),[].concat((0,r.Z)(e),[l])):(Z.current=[!1],[l])}),I(!1);case 33:case"end":return e.stop()}},e)})),[O,Y]),eu=(0,l.useCallback)(function(e){(0,c.co)({key:c.H0.lastChatFilter,value:e}),ea(e),ec()},[ec]),ed=(0,l.useMemo)(function(){return k?[]:[{key:"all",label:"All",onClick:function(){return eu("all")},active:"all"===Y},{key:"unread",label:"Unread",onClick:function(){return eu("unread")},active:"unread"===Y}]},[eu,Y,k]),ep=(0,l.useCallback)(function(e){e.senderName&&!g.metadata.noChatSound&&(0,u.O)(),e.senderName&&O(h.WT,function(){return{lastNotification:{name:e.senderName,id:e.channelId}}}),Z.current=Array(Z.current.length).fill(!0),_.current=!1,A.current.length?A.current.forEach(function(e,t){e&&ec(t,!0)}):ec(0,!0)},[g,ec,O]);(0,l.useEffect)(function(){if(g)return(0,f.Ld)([(0,f.LS)(g.id)],ep)},[g,ep]),(0,l.useEffect)(function(){Z.current=[],A.current=[],_.current=!1,ec()},[ec]);var ef=(0,l.useCallback)((0,i.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.markAllChatMessageRead();case 2:Z.current=Array(Z.current.length).fill(!0),_.current=!1,A.current.forEach(function(e,t){e&&ec(t,!0)});case 5:case"end":return e.stop()}},e)})),[ec]),em=(0,l.useCallback)(function(e){F(e.target.value)},[]),eh=(0,l.useCallback)(function(){F("")},[]),ev=(0,l.useMemo)(function(){return k?null:(0,H.jsx)(w.s,{children:(0,H.jsxs)(J,{children:[(0,H.jsx)(X,{children:"Chats"}),(0,H.jsxs)(C.X,{flexGrow:1,gap:16,alignItems:"center",justifyContent:"flex-end",children:[!!a&&(0,H.jsx)(en,{onClick:ef,children:"Mark all as read"}),(0,H.jsx)(y.h_,{label:"all"===Y?"All":"Unread",options:ed,variant:"borderless",style:{height:40}})]})]})})},[ef,a,Y,ed,k]),eb=(0,l.useMemo)(function(){return k?[{label:"Mark all as read",onClick:ef,disabled:!a},{label:"All",onClick:function(){return eu("all")},disabled:"all"===Y,icon:"Filter"},{label:"Unread",onClick:function(){return eu("unread")},disabled:"unread"===Y,icon:"Filter"}]:null},[Y,eu,ef,k,a]),eg=(0,l.useMemo)(function(){return k?{title:"Chats",dropdownOptions:eb}:null},[k,eb]);(0,ei.l)(ei.C.CHATS,eg);var ex=(0,l.useMemo)(function(){var e=(x().isNull(R)?N:[R]).map(function(e,n){return(0,H.jsx)(m.df,{onChange:function(e){N.length<A.current.length?A.current=[].concat((0,r.Z)(A.current),[e]):A.current=[].concat((0,r.Z)(A.current.slice(0,n)),[e],(0,r.Z)(A.current.slice(n+1))),e&&ec(n,!0)},children:e.length?e.map(function(e,r){return(0,H.jsx)(q,{item:e,batchIdx:n,itemIdx:r,fetchChannels:ec,onClose:t},e.id)}):(0,H.jsx)(C.X,{flexGrow:1,justifyContent:"center",paddingTop:24,paddingBottom:24,children:(0,H.jsx)(K,{children:W.current?"No results":"No chats yet"})})},n)});return[(0,H.jsx)(er,{children:(0,H.jsx)(eo,{autoFocus:!k,value:T,onChange:em,placeholder:"Search users",prefix:(0,H.jsx)(S.x,{marginRight:16,children:(0,H.jsx)(Q,{name:"Search"})}),suffix:T?(0,H.jsx)(S.x,{marginLeft:8,children:U?(0,H.jsx)(S.x,{marginRight:8,children:(0,H.jsx)(j.D,{size:20,color:b.O9.n5})}):(0,H.jsx)(et,{type:"button",onClick:eh,children:(0,H.jsx)(ee,{name:"Close"})})}):void 0,variant:"borderless",staticLabel:!0})},"chat-search")].concat((0,r.Z)(e))},[R,N,T,U,eh,em,ec,t,k]);return(0,H.jsx)(v.J,{loading:D&&1===ex.length,headerItem:ev,items:ex})})},85240:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(67294),o=n(85064),i=n(96276),a=n(73793),s=n(5095),l=n(91194),c=n(11163),u=n(50378),d=n(20668),p=n(14251),f=u.ZP.input.withConfig({displayName:"styled__SearchInput",componentId:"sc-19ku97b-0"})(["box-sizing:border-box;width:100%;height:100%;border:none;background-color:",";&:focus{outline:none;}&::placeholder{color:",";","}",""],p.O9.n3,p.O9.n5,d.c.t7,d.c.t7),m=u.ZP.div.withConfig({displayName:"styled__SearchWrapper",componentId:"sc-19ku97b-1"})(["display:flex;align-items:center;gap:16px;height:40px;background-color:",";border-radius:10px;padding:11px 10px 11px 16px;cursor:text;svg{color:",";}> form{flex:1;}"],p.O9.n3,p.O9.n5),h=u.ZP.button.withConfig({displayName:"styled__SearchIconButton",componentId:"sc-19ku97b-2"})(["border:none;background:none;cursor:pointer;&:hover{svg{color:",";}}"],p.O9.n7),v=n(85893),b=(0,r.forwardRef)(function(e,t){var n=e.value,u=e.onChange,d=e.onSubmit,p=e.onClear,b=e.placeholder,g=e.isPending,x=(0,c.useRouter)(),y=(0,a.bI)("isMobile","self"),w=y.isMobile,C=y.self,j=(0,r.useCallback)(function(){var e;null==t||null===(e=t.current)||void 0===e||e.focus()},[t]),k=(0,r.useCallback)(function(e){e.preventDefault(),n.trim()&&d()},[n,d]),O=(0,r.useCallback)(function(){(0,l.gx)(x,(0,s.tL)({tab:"communities"}),!C)},[x,C]),P=(0,r.useCallback)(function(){return g?(0,v.jsx)(o.D,{}):n?(0,v.jsx)(h,{type:"button",onClick:p,children:(0,v.jsx)(i.J,{name:"Close",style:{width:14,height:14}})}):(0,v.jsx)(h,{onClick:O,children:(0,v.jsx)(i.J,{name:"GearOutlined",style:{width:18,height:18}})})},[g,p,O,n]);return(0,v.jsxs)(m,{onClick:j,children:[(0,v.jsx)(i.J,{name:"Search",style:{width:18,height:18}}),(0,v.jsx)("form",{onSubmit:k,children:(0,v.jsx)(f,{ref:t,value:n,onChange:u,autoFocus:!w,placeholder:null!=b?b:"Search"})}),P()]})}),g=(0,r.memo)(b)},80847:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(59499),o=n(50029),i=n(64687),a=n.n(i),s=n(96276),l=n(11163),c=n(67294),u=n(14251),d=n(91194),p=n(5095),f=n(73793),m=n(95419),h=n(38449),v=n(50378),b=n(59607),g=n(47691),x=n(20668),y=v.ZP.div.withConfig({displayName:"styled__SearchIconWrapper",componentId:"sc-1oa6nzm-0"})(["display:inline-flex;align-items:center;justify-content:",";margin-right:16px;flex-grow:1;flex-shrink:0;flex-basis:",";"],function(e){return e.theme.isMobile?"flex-start":"center"},function(e){return e.theme.isMobile?"21px":"24px"}),w=(0,v.ZP)(b.z).withConfig({displayName:"styled__CloseButton",componentId:"sc-1oa6nzm-1"})(["height:25px;width:25px;"]),C=v.ZP.div.withConfig({displayName:"styled__SearchInputWrapper",componentId:"sc-1oa6nzm-2"})(["flex-grow:1;"]),j=(0,v.ZP)(g.I).withConfig({displayName:"styled__SearchInput",componentId:"sc-1oa6nzm-3"})(["background-color:",";border-radius:10px;padding-left:",";padding-right:",";height:48px;min-height:unset;width:100%;&:focus-within{border:0;outline:none;}input{color:",";height:32px;padding:6px 0 7px;",";&::placeholder{color:",";padding-top:2px;",";}}"],u.O9.n3,function(e){return e.theme.isMobile?"15px":"16px"},function(e){return e.theme.isMobile?"14px":"16px"},u.O9.n7,x.c.t7,u.O9.n5,x.c.t7),k=n(30697),O=n(85893);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function I(e){var t,n=e.group,r=e.autoFocus,i=e.onSubmit,v=e.searchMembers,b=e.searchInvites,g=(0,l.useRouter)(),x=g.query,P=g.pathname,I=(0,c.useState)((0,p.wk)(x)||""),Z=I[0],S=I[1],_=(0,f.bI)("isMobile","self","showSkoolCat"),M=_.isMobile,N=_.dispatch,E=_.showSkoolCat,A=_.self,L=(0,c.useRef)(!1),T=(0,p.iH)(g);(0,c.useEffect)(function(){return L.current=!0,function(){L.current=!1}},[]);var F=(0,c.useCallback)((t=(0,o.Z)(a().mark(function e(t){var r,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(!M&&A)){e.next=17;break}if(!("let there be cat"===Z.toLowerCase()&&!E)){e.next=10;break}return N(k.S3,!0),N(k.Pr,"gangster"),N(k._$,function(e){var t=D({},e);return t.metadata.catEnabled=!0,t}),(0,h.P3)(h.qI.catEnabled,A.id),e.next=9,m.Z.updateUserMeta({userID:A.id,key:"cat_enabled",valueType:"bool",value:!0});case 9:case 16:return e.abrupt("return");case 10:if(!("shoo cat"===Z.toLowerCase()&&E)){e.next=17;break}return N(k.jf,!1),N(k._$,function(e){var t=D({},e);return t.metadata.catEnabled=!1,t}),(0,h.P3)(h.qI.catDisabled,A.id),e.next=16,m.Z.updateUserMeta({userID:A.id,key:"cat_enabled",valueType:"bool",value:"false"});case 17:if(r=Z.trim()){e.next=21;break}return S(""),e.abrupt("return");case 21:if(!T){e.next=24;break}return(0,d.VF)(g,(0,p.Gt)({query:Z.trim()})),e.abrupt("return");case 24:o=v?"members":(0,p.q$)(x),(0,p.kA)({pathname:P})&&(o="courses"),(0,p.ni)({pathname:P})&&(o="invited"),e.t0=o,e.next="posts"===e.t0?30:"members"===e.t0?30:"invited"===e.t0?30:"courses"===e.t0?30:31;break;case 30:return e.abrupt("break",32);case 31:o=void 0;case 32:if("invited"!==o){e.next=37;break}return e.next=35,(0,d.VF)(g,(0,p.ZG)({group:n,searchQuery:r}));case 35:e.next=39;break;case 37:return e.next=39,(0,d.VF)(g,(0,p.gT)({group:n,searchQuery:r,tab:o}));case 39:i&&i();case 40:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[n,i,P,x,g,v,Z,T,N,M,A,E]),B=(0,c.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S(""),!(0,p.ni)({pathname:P})){e.next=4;break}return e.next=4,(0,d.VF)(g,(0,p.ZG)({group:n}));case 4:case"end":return e.stop()}},e)})),[n,g,P]),R=(0,c.useCallback)(function(e){S(e.target.value)},[]),z=(0,c.useMemo)(function(){var e=M?v?"Search members":"Search group":v?"Search members":"Search";return b?e="Search invited emails":T&&(e="Search for anything"),e},[T,M,b,v]);return(0,O.jsx)(C,{children:(0,O.jsx)("form",{onSubmit:F,action:"#",children:(0,O.jsx)(j,{autoFocus:r,prefix:(0,O.jsx)(y,{children:(0,O.jsx)(s.J,{name:"Search",color:u.O9.n5,size:18})}),suffix:Z?(0,O.jsx)(w,{variant:"icon-borderless-no-hover",icon:"Close",onClick:B,iconSize:14}):void 0,value:Z,onChange:R,placeholder:z,staticLabel:!0,variant:"borderless"})})})}I.defaultProps={autoFocus:!1,searchMembers:!1};var Z=(0,c.memo)(I)},73758:function(e,t,n){n.d(t,{C:function(){return x},Z:function(){return g}});var r=n(67294),o=n(80008),i=n.n(o),a=n(59607),s=n(14251),l=n(88325),c=n(75331),u=n(50378),d=n(20668),p=(0,u.iv)(["height:92px;padding:0px 4px 0px 13px;> div{&:first-child{width:0px;height:0px;}}> button{flex-shrink:0;}"]),f=u.ZP.div.withConfig({displayName:"styled__MaintenanceBannerWrapper",componentId:"sc-33foma-0"})(["display:flex;justify-content:space-between;align-items:center;height:56px;background-color:",";color:",";padding:0px 24px;> div{&:first-child{width:40px;height:40px;}}> button{color:",";}",""],s.O9.p2,s.O9.fgPrimary,s.O9.n7,function(e){return e.theme.isMobile&&p}),m=u.ZP.div.withConfig({displayName:"styled__MaintenanceCopy",componentId:"sc-33foma-1"})(["text-align:center;",""],d.c.t10),h=n(23450),v=n.n(h),b=n(85893),g=function(e){var t=(0,r.useState)(!1),n=t[0],o=t[1],i=(null==e?void 0:e.startTimeSec)||0,a=(null==e?void 0:e.durationSec)||0;return(0,r.useEffect)(function(){var e=(0,c.tv)({key:c.H0.maintenanceClosed}).value;i&&e!==i&&o(!0)},[i]),{maintenanceStartTime:i,maintenanceDuration:a,showMaintenanceBanner:n,closeMaintenanceBanner:function(){(0,c.co)({key:c.H0.maintenanceClosed,value:i}),o(!1)}}},x=(0,r.memo)(function(e){var t=e.startTime,n=e.duration,o=e.onClose,c=(0,r.useMemo)(function(){return i()(1e3*t).tz(l.ey).format("h:mma z [on] MMMM Do YYYY")},[t]),u=(0,r.useMemo)(function(){var e=Math.round(n/60);return e<=50?"for ".concat(v()("minute",e,!0)):"for ".concat(v()("hour",Math.round(e/60),!0))},[n]);return(0,b.jsxs)(f,{children:[(0,b.jsx)("div",{}),(0,b.jsxs)(m,{children:[(0,b.jsx)("div",{children:"⏰  SCHEDULED MAINTENANCE:"}),(0,b.jsx)("div",{children:"Skool will be offline ".concat(u," starting ").concat(c,".")})]}),(0,b.jsx)(a.z,{iconSize:14,icon:"Close",onClick:o,variant:"icon-borderless-no-hover",style:{color:s.O9.fgPrimary}})]})})},42108:function(e,t,n){n.d(t,{C:function(){return c},l:function(){return u}});var r=n(59499),o=n(67294),i=n(73793),a=n(30697);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c={POST:"POST",CHAT:"CHAT",CHATS:"CHATS",NOTIFS:"NOTIFS",PROFILE:"PROFILE",COURSE:"COURSE",SETTINGS_MODAL:"SETTINGS_MODAL",USER_SETTINGS:"USER_SETTINGS"};function u(e,t){var n=(0,i.bI)("isMobile"),s=n.isMobile,u=n.dispatch;(0,o.useEffect)(function(){if(s&&c[e])return u(a.kC,function(n){return l(l({},n),{},(0,r.Z)({},e,t))}),function(){u(a.kC,function(t){return l(l({},t),{},(0,r.Z)({},e,null))})}},[e,u,t,s])}},34811:function(e,t,n){n.d(t,{s:function(){return H},Z:function(){return q}});var r=n(50029),o=n(17674),i=n(59499),a=n(4730),s=n(64687),l=n.n(s),c=n(30697),u=n(67294),d=n(50378),p=n(73793),f=n(20668),m=n(59607),h=n(80847),v=n(16531),b=n(65009),g=n(85893),x=(0,d.ZP)(m.z).withConfig({displayName:"MobileSearchInputForm__MobileSearchCancelButton",componentId:"sc-18wu2kl-0"})(["width:auto;height:auto;",";"],f.c.t10),y=(0,u.memo)(function(e){var t=e.open,n=e.searchMembers,r=e.searchInvites,o=e.onSubmit,i=e.onCancel,a=(0,p.bI)("currentGroup").currentGroup,s=(0,u.useCallback)(function(){i&&i()},[i]);return(0,g.jsx)(v.u_,{open:t,shouldFullscreenOnMobile:!0,wrapperStyle:{padding:0},children:(0,g.jsxs)(b.X,{padding:12,children:[(0,g.jsx)(h.Z,{group:a,searchMembers:n,searchInvites:r,onSubmit:o,autoFocus:!0}),(0,g.jsx)(x,{variant:"borderless",label:"Cancel",onClick:s})]})})}),w=n(12476),C=n(95419),j=n(33850),k=n(91194),O=n(5095),P=n(193),D=n(14760),I=n(14251),Z=n(96276),S=n(70120),_=n(11163),M=n(81343),N=n(42470),E=n(85240),A=d.ZP.div.withConfig({displayName:"styled__SwitcherItem",componentId:"sc-isvdbp-0"})(["display:flex;align-items:center;gap:8px;padding:12px;span{"," ","}",""],f.c.ellipsis,f.c.t4,function(e){return e.$selected&&"background-color: ".concat(I.O9.p2)}),L=d.ZP.div.withConfig({displayName:"styled__SwitcherItemIconWrapper",componentId:"sc-isvdbp-1"})(["display:flex;justify-content:center;align-items:center;width:40px;height:40px;background-color:",";border-radius:10px;svg{color:",";}"],I.O9.n3,I.O9.n5),T=d.ZP.div.withConfig({displayName:"styled__SearchWrapper",componentId:"sc-isvdbp-2"})(["padding:16px 13px 4px;"]),F=(0,u.memo)(function(e){var t=e.open,n=e.onClose,o=e.onItemClick,i=(0,p.bI)("currentGroup","self"),a=i.currentGroup,s=i.self,c=(0,_.useRouter)(),d=(0,u.useState)((null==s?void 0:s.allGroups)||[]),f=d[0],m=d[1],h=(0,u.useState)((null==s?void 0:s.hasMore)||!1),v=h[0],x=h[1],y=(0,u.useState)(!1),w=y[0],F=y[1],B=(0,u.useState)(""),R=B[0],z=B[1],G=(0,u.useRef)();(0,u.useEffect)(function(){R.trim()?F(!0):(F(!1),m((null==s?void 0:s.allGroups)||[]),x((null==s?void 0:s.hasMore)||!1))},[R,s]),(0,u.useEffect)(function(){var e=R.trim();if(!e){G.current="";return}var t=setTimeout((0,r.Z)(l().mark(function t(){var n;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(G.current!==e){t.next=3;break}return F(!1),t.abrupt("return");case 3:return G.current=e,t.next=6,C.Z.readSelfGroups({limit:10,q:e||void 0});case 6:null!=(n=t.sent.data)&&n.hasMore?x(!0):x(!1),F(!1),m((null==n?void 0:n.groups)||[]);case 11:case"end":return t.stop()}},t)})),500);return function(){return clearTimeout(t)}},[R]);var U=(0,u.useCallback)((0,r.Z)(l().mark(function e(){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.Z.readSelfGroups({offset:f.length,limit:10,q:R.trim()||void 0});case 2:null!=(t=e.sent.data)&&t.hasMore?x(!0):x(!1),null!=t&&t.groups&&m(f.concat(t.groups));case 6:case"end":return e.stop()}},e)})),[f,R]),$=(0,u.useCallback)(function(e){o&&o((0,O.AZ)({groupName:e.name}))},[o]),W=(0,u.useCallback)(function(){(0,k.VF)(c,(0,O.Gt)({}))},[c]),H=(0,u.useCallback)(function(e){z(e.target.value)},[]),q=(0,u.useCallback)(function(){(0,k.VF)(c,(0,O.Gt)({query:R.trim()}))},[R,c]),V=(0,u.useCallback)(function(){z("")},[]),Y=(0,u.useMemo)(function(){return f.map(function(e){switch(null===(t=e.metadata)||void 0===t?void 0:t.privacy){case 0:case 1:break;default:return}var t,n=e.id===(null==a?void 0:a.id);return{key:e.id,selected:n,onClick:function(){return $(e)},content:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(P.Z,{group:e,iconSize:40,disableLink:!0,iconOnly:!0}),(0,g.jsx)("span",{style:{color:n?I.O9.fgPrimary:void 0},children:e.metadata.displayName})]})}}).filter(function(e){return!!e})},[f,a,$]),J=(0,u.useMemo)(function(){return(0,g.jsxs)("div",{style:{marginBottom:64},children:[(0,g.jsx)(b.X,{padding:"19px 13px",children:(0,g.jsx)(D.Z,{variant:"t6",children:"Switch communities"})}),(0,g.jsx)(M.i,{}),(0,g.jsx)(T,{children:(0,g.jsx)(E.Z,{value:R,onChange:H,onSubmit:q,onClear:V,isPending:w})}),R.trim()?(0,g.jsxs)(A,{onClick:q,children:[(0,g.jsx)(L,{children:(0,g.jsx)(Z.J,{name:"Search",style:{width:18}})}),(0,g.jsx)("span",{children:"Search all communities"})]}):(0,g.jsx)(g.Fragment,{children:!(0,j.lF)(null==s?void 0:s.id)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(S.r,{href:"/signup".concat(a?"?g=".concat(a.id):""),children:(0,g.jsxs)(A,{children:[(0,g.jsx)(L,{children:(0,g.jsx)(Z.J,{name:"Plus",style:{width:16}})}),(0,g.jsx)("span",{children:"Create a community"})]})}),(0,g.jsxs)(A,{onClick:W,children:[(0,g.jsx)(L,{children:(0,g.jsx)(Z.J,{name:"Compass",style:{width:24}})}),(0,g.jsx)("span",{children:"Discover communities"})]})]})}),Y.map(function(e){var t=e.key,n=e.onClick,r=e.selected,o=e.content;return(0,g.jsx)(A,{$selected:r,onClick:r?function(){}:n,children:o},t)}),v&&(0,g.jsxs)(A,{onClick:U,children:[(0,g.jsx)(L,{children:(0,g.jsx)(Z.J,{name:"ArrowDown",style:{width:12}})}),(0,g.jsx)("span",{children:"See more"})]})]})},[a,Y,U,W,H,q,V,v,R,w,s]);return(0,g.jsx)(N.d,{anchor:"left",open:t,onClose:n,width:280,disableAnimation:!0,children:J})}),B=n(3881),R=n(16557),z=n(54361),G=n(42108),U=["children","scrollOnClick"];function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function H(e){var t=e.children,n=e.scrollOnClick,r=(0,a.Z)(e,U),o=(0,u.useCallback)(function(){n&&window.scrollTo({top:0,left:0,behavior:"smooth"})},[n]);return(0,g.jsx)(D.Z,W(W({variant:"t8",ellipsis:!0,onClick:o},r),{},{children:t}))}var q=(0,u.memo)(function(e){var t=e.settings,n=e.canAccessGroup,i=(0,z.c8)(),a=(0,o.Z)(i,3),s=a[0],d=a[1],f=a[2],h=(0,z.c8)(),v=(0,o.Z)(h,3),x=v[0],C=v[1],j=v[2],D=(0,u.useState)(!1),I=D[0],Z=D[1],S=(0,u.useState)(null),M=S[0],N=S[1],E=(0,_.useRouter)(),A=(0,u.useRef)(!1),L=(0,p.bI)("self","currentGroup","mobileHeaderExtra","isChat","settingsModal"),T=L.self,U=L.currentGroup,$=L.mobileHeaderExtra,q=L.isChat,V=L.settingsModal,Y=L.dispatch,J=(0,O.iH)(E),X=(0,O.wl)(E),K=(0,O.mS)(E),Q=(0,O.wk)(E.query)||"";(0,u.useEffect)(function(){N(window.history.length);var e=function(){A.current=!0};return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}},[E]);var ee=(0,u.useCallback)(function(e){var t=e.href,n=e.as;f(),(0,k.VF)(E,{href:t,as:n})},[E,f]),et=(0,u.useCallback)(function(){window.location.reload()},[]),en=(0,u.useCallback)(function(){U&&(!(0,O.g7)(E)||n)?(0,k.gx)(E,(0,O.AZ)({groupName:U.name})):(0,k.gx)(E,{href:"/",as:"/"})},[n,U,E]),er=(0,u.useCallback)(function(){Y(c.fi,function(e){return W(W({},e),{},{settingsModal:null})})},[Y]),eo=(0,u.useCallback)(function(){E.back(),setTimeout(function(){A.current||en()},500)},[E,en]),ei=(0,u.useCallback)(function(){J&&Z(window.scrollY>175)},[J]);(0,u.useEffect)(function(){return ei(),window.addEventListener("scroll",ei),function(){window.removeEventListener("scroll",ei)}},[ei]);var ea=(0,u.useMemo)(function(){return V||(0,O.Tx)(E)?(0,g.jsx)(m.z,{variant:"icon-borderless-no-hover",icon:"Close",iconSize:15,onClick:V?er:eo,style:{flexShrink:0},dataTestId:"back-button"}):!(0,O.TL)(E)&&((0,O.mp)(E)||(0,O.iH)(E)||X||K||(0,O.pi)(E)&&(null==T?void 0:T.name)===(0,O.wg)(E.query)||(0,O.g7)(E)&&M&&!(M>1))?(0,g.jsx)(m.z,{variant:"icon-borderless-no-hover",icon:"Menu",iconSize:18,onClick:d,style:{flexShrink:0}}):(0,g.jsx)(m.z,{variant:"icon-borderless-no-hover",icon:"Left",iconSize:15,onClick:eo,style:{flexShrink:0},dataTestId:"back-button"})},[V,E,X,K,null==T?void 0:T.name,M,d,er,eo]),es=(0,u.useMemo)(function(){if(q)return G.C.CHAT;if(V)return G.C.SETTINGS_MODAL;if(X)return G.C.CHATS;if(K)return G.C.NOTIFS;if((0,O.DG)(E))return G.C.POST;if((0,O.pi)(E))return G.C.PROFILE;if((0,O.aR)(E))return G.C.COURSE;else if((0,O.Tx)(E))return G.C.USER_SETTINGS;return null},[q,V,X,K,E]),el=(0,u.useMemo)(function(){if(es){var e,t=null!==(e=null==$?void 0:$[es])&&void 0!==e?e:{},n=t.title,r=t.withDefaultTitle,o=t.disableGroupLogo;return r?U?(0,g.jsx)(P.Z,{group:U,variant:"t8",iconSize:24}):(0,g.jsx)(R.Z,W({width:77},(0,O.Gt)({}))):(0,g.jsxs)(g.Fragment,{children:[U&&!o&&(0,g.jsx)(P.Z,{group:U,variant:"t8",iconSize:24,iconOnly:!0}),"string"==typeof n?(0,g.jsx)(H,{children:n}):n]})}return U?(0,g.jsx)(P.Z,{group:U,variant:"t8",iconSize:24}):(0,g.jsx)(R.Z,W({width:77},(0,O.Gt)({})))},[es,U,$]),ec=(0,u.useMemo)(function(){if(V)return null;if(!T)return(0,g.jsx)(b.X,{flexShrink:0,alignItems:"center",children:(0,g.jsx)(B.Z,{signIn:!0,onSuccess:et})});var e,t,o,i=(!!U&&n||J&&(I||!!Q))&&!(0,O.DG)(E),a=null!==(t=null==$?void 0:$[es])&&void 0!==t?t:{},s=a.dropdownOptions,u=a.searchOverride;return null!==(o=s)&&void 0!==o&&o.length||(s=U?[{label:"Copy link",onClick:(e=(0,r.Z)(l().mark(function e(){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(location.origin).concat(location.pathname),e.next=3,navigator.clipboard.writeText(t);case 3:Y(c.bI,{message:"Link copied to clipboard"});case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})}]:null),(0,g.jsxs)(b.X,{alignItems:"center",flexShrink:0,children:[i&&!u?(0,g.jsx)(m.z,{variant:"icon-borderless-no-hover",icon:"Search",iconSize:17.5,onClick:C}):u,s&&(0,g.jsx)(w.h_,{variant:"icon-borderless",icon:"HorizontalDots",options:s})]})},[T,U,n,J,I,Q,C,$,es,et,Y,E,V]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(b.X,{justifyContent:"space-between",padding:"0 4px",style:{width:"100%",height:"100%"},children:[(0,g.jsx)(b.X,{style:{width:"100%",minWidth:0},children:(0,g.jsxs)(b.X,{gap:8,alignItems:"center",marginRight:8,style:{minWidth:0},children:[ea,el]})}),ec]}),s&&(0,g.jsx)(F,{open:!0,onItemClick:ee,onClose:f}),(0,g.jsx)(y,{open:x,searchMembers:!!t.searchMembers,searchInvites:!!t.searchInvites,onSubmit:j,onCancel:j})]})})},32413:function(e,t,n){n.d(t,{w:function(){return ev}});var r=n(59499),o=n(90116),i=n(50029),a=n(64687),s=n.n(a),l=n(67294),c=n(73793),u=n(14760),d=n(65009),p=n(14251),f=n(85064),m=n(85893);function h(e){var t=e.loading;return(0,m.jsx)(d.X,{alignItems:"center",justifyContent:"center",style:{padding:"24px 0"},children:t?(0,m.jsx)(f.D,{}):(0,m.jsx)(u.Z,{variant:"t7",color:p.O9.n5,children:"No notifications yet"})})}h.defaultProps={loading:!1};var v=(0,l.memo)(h),b=n(50378),g=n(59607),x=(0,b.ZP)(g.z).withConfig({displayName:"NotificationLoadMoreItem__NotificationLoadMoreButton",componentId:"sc-k1banu-0"})(["height:44px;padding:0 12px;"]);function y(e){var t=e.loading,n=e.onClick;return(0,m.jsx)(d.X,{alignItems:"center",justifyContent:"center",style:{height:60},children:t?(0,m.jsx)(f.D,{}):(0,m.jsx)(x,{typography:"t5",variant:"borderless-hover",onClick:n,disableRipple:!0,label:"LOAD MORE"})})}y.defaultProps={loading:!1};var w=(0,l.memo)(y),C=n(17674),j=n(29610),k=n(88325),O=n(12967),P=n(5095),D=n(36581),I=n(70120),Z=n(86031),S=n(66703),_=n(30697),M=n(76958),N=n(95419),E=n(20668),A=n(96276),L=b.ZP.div.withConfig({displayName:"styled__ActionItem",componentId:"sc-bymlbk-0"})(["margin-left:6px;visibility:",";"],function(e){var t=e.$unread,n=e.theme;return t||n.isMobile?"visible":"hidden"}),T=b.ZP.div.withConfig({displayName:"styled__ReadButton",componentId:"sc-bymlbk-1"})(["height:12px;width:12px;border:",";border-radius:50%;background-color:",";"],function(e){var t=e.$unread;return"3px solid ".concat(t?p.O9.sd1:p.O9.n5)},function(e){return e.$unread?p.O9.sd1:"transparent"}),F=(0,b.ZP)(Z.x).withConfig({displayName:"styled__ReadButtonWrapper",componentId:"sc-bymlbk-2"})(["align-items:center;justify-content:center;height:40px;width:40px;cursor:pointer;border-radius:50%;&:hover{background-color:",";}"],function(e){return!e.theme.isMobile&&p.O9.n3}),B=b.ZP.div.withConfig({displayName:"styled__UserAvatarWrapper",componentId:"sc-bymlbk-3"})(["position:relative;"]),R=b.ZP.div.withConfig({displayName:"styled__IconCircle",componentId:"sc-bymlbk-4"})(["height:40px;width:40px;border-radius:50%;background:",";"],p.O9.p3),z=b.ZP.img.withConfig({displayName:"styled__GroupLogoAvatar",componentId:"sc-bymlbk-5"})(["height:16px;width:16px;border-radius:5px;position:absolute;bottom:4px;right:0;"]),G=(0,b.ZP)(Z.x).withConfig({displayName:"styled__GroupLogoPlaceholder",componentId:"sc-bymlbk-6"})(["align-items:center;justify-content:center;background-color:",";border-radius:3px;height:13px;width:13px;position:absolute;bottom:4px;right:0;"],function(e){return e.$groupColor}),U=b.ZP.img.withConfig({displayName:"styled__NotificationAvatar",componentId:"sc-bymlbk-7"})(["border-radius:50%;object-fit:cover;text-align:center;text-indent:10000px;height:40px;width:40px;"]),$=(0,b.ZP)(Z.x).withConfig({displayName:"styled__NotificationAvatarPlaceholder",componentId:"sc-bymlbk-8"})(["align-items:center;justify-content:center;height:40px;width:40px;flex-shrink:0;border:1px solid ",";border-radius:50%;background-color:",";user-select:none;"],p.O9.n3,function(e){return e.$groupColor}),W=(0,b.ZP)(d.X).withConfig({displayName:"styled__MobileContent",componentId:"sc-bymlbk-9"})(["align-items:center;flex-grow:1;gap:8px;min-width:0;& > div:last-child{overflow:hidden !important;}"]),H=b.ZP.div.withConfig({displayName:"styled__GroupInitials",componentId:"sc-bymlbk-10"})(["color:",";",";"],function(e){return e.color},function(e){return e.theme.isMobile?E.c.t10:E.c.t11});E.c.ellipsis;var q=b.ZP.div.withConfig({displayName:"styled__DisplaySubText",componentId:"sc-bymlbk-12"})(["",";",";"],E.c.t9,E.c.ellipsis),V=b.ZP.div.withConfig({displayName:"styled__CreatedAt",componentId:"sc-bymlbk-13"})(["color:",";white-space:nowrap;",";"],p.O9.n5,function(e){return e.theme.isMobile?E.c.t9:E.c.t7}),Y=(0,b.iv)(["&:first-letter{text-transform:uppercase;}"]),J=b.ZP.div.withConfig({displayName:"styled__NotificationContent",componentId:"sc-bymlbk-14"})(["color:",";",";",";",";"],function(e){return e.theme.isMobile?p.O9.n5:p.O9.n7},function(e){return e.$sentenceCase&&Y},E.c.t9,E.c.ellipsis),X=(0,b.ZP)(Z.x).withConfig({displayName:"styled__DisplayHeading",componentId:"sc-bymlbk-15"})(["flex:",";",";",";"],function(e){return e.$fullWidth?1:void 0},E.c.t7,E.c.ellipsis),K=(0,b.ZP)(A.J).withConfig({displayName:"styled__StyledIcon",componentId:"sc-bymlbk-16"})(["color:",";"],p.O9.n7),Q=(0,b.ZP)(Z.x).withConfig({displayName:"styled__NotificationItem",componentId:"sc-bymlbk-17"})(["align-items:center;border-bottom:1px solid ",";height:",";transition:background 150ms ease-in-out;&:hover{background-color:",";","{visibility:inherit;}}"],p.O9.n3,function(e){return e.theme.isMobile?"93px":"72px"},function(e){var t=e.$readHover;return e.theme.isMobile?void 0:t?p.O9.n1:p.O9.n3},L),ee=b.ZP.div.withConfig({displayName:"styled__NotificationItemLink",componentId:"sc-bymlbk-18"})(["display:flex;align-items:center;width:100%;user-select:none;opacity:",";overflow:hidden;> a{overflow:hidden;transform:translateZ(0);}"],function(e){return e.$unread?1:.5}),et=(0,b.ZP)(D.s).withConfig({displayName:"styled__NotificationWrapper",componentId:"sc-bymlbk-19"})(["flex-grow:1;max-width:350px;"]),en=n(54361),er=(0,l.memo)(function(e){var t,n,r=e.message,o=e.onMarkAsRead,a=e.onMarkAsUnread,u=r.action,p=r.imageUrl,f=r.displayName,h=r.text,v=r.groupColor,b=r.groupInitials,g=r.linkAs,x=r.linkHref,y=r.content,w=r.groupLogo,E=r.groupName,A=r.levelTitle,Y=r.groupId,er=r.srcUserMrrStatus,eo=r.srcUserActStatus,ei=(0,c.bI)("currentGroup","isMobile"),ea=ei.currentGroup,es=ei.isMobile,el=ei.dispatch,ec=(0,l.useState)(!!parseInt(r.metadata.unread)),eu=ec[0],ed=ec[1],ep=(0,en.c8)(),ef=(0,C.Z)(ep,3),em=ef[0],eh=ef[1],ev=ef[2],eb=(0,P.Xt)({group:{name:E||Y||(null==ea?void 0:ea.name)}}),eg=eb.href,ex=eb.as;(0,l.useEffect)(function(){ed(!!parseInt(r.metadata.unread))},[r]);var ey=(0,l.useMemo)(function(){if(f){var e=f.split(" "),t=(0,C.Z)(e,2),n=t[0],r=t[1];return(0,m.jsx)(M.Z,{disableLink:!0,user:{firstName:n,lastName:r,metadata:{mrrStatus:er,actStatus:eo}},typographyVariant:es?"t6":"t5",disableStatusBadgeModal:!0})}},[f,er,eo,es]),ew="follow"===u&&ea?"".concat(g,"?g=").concat(ea.id):"level-up"===u&&ea?ex:g,eC="follow"===u&&ea?"".concat(x,"?g=").concat(ea.id):"level-up"===u&&ea?eg:x,ej=(0,l.useCallback)((0,i.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.Z.markMessageAsRead({messageID:r.id});case 2:ed(!1),null==o||o(r);case 4:case"end":return e.stop()}},e)})),[r,o]),ek=(0,l.useCallback)((0,i.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.Z.markMessageAsUnread({messageID:r.id});case 2:ed(!0),null==a||a(r);case 4:case"end":return e.stop()}},e)})),[r,a]),eO=(0,l.useCallback)((t=(0,i.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.stopPropagation(),ej();case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[ej]),eP=(0,l.useCallback)((n=(0,i.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.stopPropagation(),ek();case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[ek]),eD=(0,l.useCallback)(function(){ej(),es&&el(_.fi,function(){return{settingsModal:null}})},[es,ej,el]),eI=(0,l.useMemo)(function(){var e=function(){var e="join-decline"===u||"join-approve"===u;return"level-up"===u?(0,m.jsxs)(B,{children:[(0,m.jsx)(R,{children:(0,m.jsx)(K,{name:"Up"})}),w&&!e?(0,m.jsx)(z,{src:w,style:{bottom:0}}):b&&!e?(0,m.jsx)(G,{$groupColor:v,style:{bottom:0}}):null]}):"course-unlocked"===u?(0,m.jsxs)(B,{children:[(0,m.jsx)(R,{children:(0,m.jsx)(K,{name:"Unlock"})}),w&&!e?(0,m.jsx)(z,{src:w,style:{bottom:0}}):b&&!e?(0,m.jsx)(G,{$groupColor:v,style:{bottom:0}}):null]}):!p&&v?(0,m.jsx)($,{$groupColor:v,children:(0,m.jsx)(H,{color:(0,O.zP)(v),children:b})}):(0,m.jsxs)(B,{children:[(0,m.jsx)(U,{src:p}),w&&!e?(0,m.jsx)(z,{src:w}):b&&!e?(0,m.jsx)(G,{$groupColor:v}):null]})};if(es)return(0,m.jsx)(ee,{$unread:eu,children:(0,m.jsxs)(I.r,{href:eC,as:ew,onClick:eD,style:{padding:"12px 16px",width:"100%",display:"flex",alignItems:"center",flexGrow:1},children:[(0,m.jsxs)(W,{children:[e(),(0,m.jsxs)(D.s,{children:[ey,(0,m.jsxs)(d.X,{children:[(0,m.jsx)(q,{children:(0,j.kC)(h)}),(0,m.jsxs)(V,{children:[" ","\xa0","• ".concat((0,k.ur)({value:r.createdAt,justNow:!1}))]})]}),(0,m.jsx)(J,{children:y})]})]}),(0,m.jsx)(L,{$unread:eu,children:(0,m.jsx)(F,{onClick:eu?eO:eP,children:(0,m.jsx)(T,{$unread:eu})})})]})});var t="".concat(f," ").concat(h).length;return(0,m.jsx)(I.r,{href:eC,as:ew,onClick:eD,style:{width:"100%"},children:(0,m.jsxs)(d.X,{alignItems:"center",flexGrow:1,padding:"12px 16px",children:[(0,m.jsx)(ee,{$unread:eu,children:(0,m.jsxs)(d.X,{alignItems:"center",flexGrow:1,gap:12,children:[e(),(0,m.jsxs)(et,{children:[(0,m.jsxs)(d.X,{alignItems:"center",marginBottom:4,children:[(0,m.jsxs)(X,{$fullWidth:t>48,children:[ey,"\xa0",h,"level-up"===u&&!!A&&" - ".concat(A)]}),(0,m.jsx)(Z.x,{padding:"0px 4px",children:(0,m.jsx)(V,{children:" • ".concat((0,k.ur)({value:r.createdAt,justNow:!1}))})})]}),(0,m.jsx)(J,{$sentenceCase:!(null!=y&&y.startsWith("[attachment")),children:y})]})]})}),(0,m.jsx)(L,{onMouseEnter:eh,onMouseLeave:ev,$unread:eu,children:(0,m.jsx)(S.u,{content:"Mark ".concat(eu?"read":"unread"),children:(0,m.jsx)(F,{onClick:eu?eO:eP,children:(0,m.jsx)(T,{$unread:eu})})})})]})})},[r.createdAt,es,eD,eu,eP,eO,u,h,f,v,b,p,eC,ew,w,y,A,eh,ev,ey]);return(0,m.jsx)(Q,{$readHover:em,children:eI})}),eo=n(15673),ei=n(12476),ea=n(4730),es=["data"],el=["metadata"];function ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ec(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ed=function(e){var t=e.metadata,n=t.data,r=(0,ea.Z)(t,es),o=(0,ea.Z)(e,el);return eu(eu({},(0,O.W4)(JSON.parse(n))),{},{metadata:r},o)},ep=b.ZP.div.withConfig({displayName:"styled__NotificationsHeader",componentId:"sc-1gca0gh-0"})(["",""],E.c.t6),ef=b.ZP.span.withConfig({displayName:"styled__MarkAllRead",componentId:"sc-1gca0gh-1"})(["margin-right:16px;color:",";cursor:pointer;&:hover{text-decoration:underline;}",";"],p.O9.sd1,E.c.t11),em=n(42108);function eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var ev=(0,l.memo)(function(){var e,t=(0,c.bI)("currentGroup","isMobile"),n=t.currentGroup,a=t.isMobile,u=(0,l.useState)(!0),p=u[0],f=u[1],h=(0,l.useState)([]),b=h[0],g=h[1],x=(0,l.useState)({}),y=x[0],C=x[1],j=(0,l.useState)(!1),k=j[0],O=j[1],P=(0,l.useState)(!1),D=P[0],I=P[1],Z=(0,en.yl)(!a),S=!!b.find(function(e){return!!e.metadata.unread}),_=null!==(e=null==n?void 0:n.id)&&void 0!==e?e:null==Z?void 0:Z.id,M=(0,l.useCallback)((0,i.Z)(s().mark(function e(){var t,n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,N.Z.listNotificationMessages({limit:30,type:D?"group":"all",groupID:D?_:void 0});case 3:null!=(n=e.sent.data)&&null!==(t=n.messages)&&void 0!==t&&t.length?g(n.messages.map(ed)):g([]),C({totalUnread:(null==n?void 0:n.totalUnread)||0,groupUnread:(null==n?void 0:n.groupUnread)||0,cursor:(null==n?void 0:n.cursor)||void 0,hasMore:!!(null!=n&&n.hasMore)}),f(!1);case 8:case"end":return e.stop()}},e)})),[_,D]),E=(0,l.useCallback)((0,i.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.Z.markMessagesAsRead({all:!D,groupID:D?_:void 0});case 2:return e.next=4,M();case 4:case"end":return e.stop()}},e)})),[_,D,M]),A=(0,l.useCallback)((0,i.Z)(s().mark(function e(){var t,n,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,N.Z.listNotificationMessages({limit:30,type:D?"group":"all",groupID:D?_:void 0,cursor:y.cursor});case 3:null!=(n=e.sent.data)&&null!==(t=n.messages)&&void 0!==t&&t.length&&(r=n.messages.map(ed),g([].concat((0,o.Z)(b),(0,o.Z)(r)))),C({totalUnread:(null==n?void 0:n.totalUnread)||0,groupUnread:(null==n?void 0:n.groupUnread)||0,cursor:(null==n?void 0:n.cursor)||void 0,hasMore:!!(null!=n&&n.hasMore)}),O(!1);case 8:case"end":return e.stop()}},e)})),[_,D,y,b]),L=(0,l.useCallback)(function(e,t){var n=b.indexOf(e);if(-1!==n){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);i.metadata.unread=t?1:0,g([].concat((0,o.Z)(b.slice(0,n)),[i],(0,o.Z)(b.slice(n+1))))}},[b]),T=(0,l.useCallback)(function(e){return L(e,!1)},[L]),F=(0,l.useCallback)(function(e){return L(e,!0)},[L]);(0,l.useEffect)(function(){M()},[D]);var B=(0,l.useMemo)(function(){var e=[{label:"All groups",onClick:function(){return I(!1)},active:!D}];return _&&e.push({label:"Just this group",onClick:function(){return I(!0)},active:D}),e},[D,_]),R=(0,l.useMemo)(function(){return a?null:(0,m.jsxs)(d.X,{gap:8,alignItems:"center",justifyContent:"space-between",style:{height:"100%"},children:[(0,m.jsx)(ep,{children:"Notifications"}),(0,m.jsxs)(d.X,{alignItems:"center",children:[S&&(0,m.jsx)(ef,{onClick:E,children:"Mark all as read"}),(0,m.jsx)(ei.h_,{options:B,label:D?"Just this group":"All groups",variant:"borderless"})]})]})},[S,E,B,D,a]),z=(0,l.useMemo)(function(){return a?[{label:"Mark all as read",onClick:E,disabled:!S}].concat((0,o.Z)(B)):null},[E,S,a,B]),G=(0,l.useMemo)(function(){return a?{title:"Notifications",dropdownOptions:z}:null},[a,z]);(0,em.l)(em.C.NOTIFS,G);var U=(0,l.useMemo)(function(){var e=!p&&b.length?b.map(function(e){return(0,m.jsx)(er,{message:e,onMarkAsRead:T,onMarkAsUnread:F},e.id)}):[(0,m.jsx)(v,{loading:p},"empty")];return y.hasMore&&!p&&e.push((0,m.jsx)(w,{onClick:A,loading:k},"load-more")),e},[A,p,k,null==y?void 0:y.hasMore,b,T,F]);return(0,m.jsx)(eo.J,{headerItem:R,items:U})})},3881:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(67294),o=n(73793),i=n(94118),a=n(59607),s=(0,n(50378).ZP)(a.z).withConfig({displayName:"styled__SignUpButtonDesktop",componentId:"sc-1y5fz1y-0"})(["width:","px;padding:11px 24px;"],function(e){return e.$signIn?116:127}),l=n(85893);i.Z.defaultProps={signIn:!1};var c=(0,r.memo)(function(e){var t=e.signIn,n=e.onSuccess,c=e.onCancel;e["data-testid"];var u=(0,r.useState)(!1),d=u[0],p=u[1],f=(0,o.bI)("isMobile","currentGroup"),m=f.isMobile,h=f.currentGroup,v=(0,r.useCallback)(function(){p(!0)},[]),b=(0,r.useCallback)(function(){p(!1),c&&c()},[c]),g=(0,r.useCallback)(function(){p(!1),n&&n()},[n]),x=(0,r.useMemo)(function(){return d?(0,l.jsx)(i.Z,{group:h,signIn:t,reason:"",joinGroup:!1,open:!0,onCancel:b,onSuccess:g}):null},[t,d,b,g,h]);return(0,l.jsxs)(l.Fragment,{children:[m?(0,l.jsx)(a.z,{onClick:v,label:"Log In",variant:"borderless",typography:"t5",style:{padding:"0px 24px"}}):(0,l.jsx)(s,{$signIn:t,variant:"secondary",label:t?"Log In":"Sign Up",onClick:v}),x]})})},78271:function(e,t,n){n.d(t,{Z:function(){return fW}});var r=n(59499),o=n(50029),i=n(64687),a=n.n(i),s=n(67534);n(63144);var l=n(67294),c=n(11163),u=n.n(c);n(42238);var d=n(95419),p=n(33850),f=n(75331),m=n(53531),h=n(29610),v=n(14251),b=n(4730),g=n(50378),x=(0,g.iv)(["bottom:24px;left:24px;"]),y=(0,g.iv)(["bottom:",";left:16px;right:16px;display:flex;justify-content:center;align-items:center;"],function(e){var t=e.theme,n=e.$bottom,r=void 0===n?0:n;return 0===r?t.isApp?"24px":"calc(env(safe-area-inset-bottom) + ".concat(r+8,"px)"):"".concat(r+8,"px")}),w=g.ZP.div.withConfig({displayName:"styled__SnackbarWrapper",componentId:"sc-1b3hq8y-0"})(["position:fixed;z-index:1400;",""],function(e){return e.theme.isMobile?y:x}),C=n(73793),j=n(59313),k=n(85893),O=["onClose","autoHideDuration","children"];function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I=(0,l.memo)(function(e){var t,n=e.onClose,r=e.autoHideDuration,o=e.children,i=(0,b.Z)(e,O),a=(0,C.bI)("mobileBottomOffset").mobileBottomOffset;return(0,l.useEffect)(function(){var e;return r&&(e=setTimeout(n,r)),function(){e&&clearInterval(e)}},[r,n]),(0,k.jsx)(w,D(D({},i),{},{$bottom:null==a||null===(t=a[j.V.SAFE])||void 0===t?void 0:t.offset,children:o}))}),Z=n(20668),S=n(59607),_={error:(0,g.iv)(["color:",";background-color:",";> button{color:",";}"],v.O9.fgError,v.O9.e2,v.O9.fgError)},M=(0,g.iv)(["min-height:48px;width:100%;"]),N=(0,g.iv)(["min-height:64px;min-width:320px;"]),E=(0,g.iv)(["color:",";background-color:",";border:1px solid ",";"],v.O9.n7,v.O9.n1,v.O9.n3),A=(0,g.iv)(["color:",";background-color:",";"],v.O9.n1,v.O9.n7),L=g.ZP.div.withConfig({displayName:"styled__AlertWrapper",componentId:"sc-1l4wkgh-0"})(["padding:0 12px 0 16px;display:flex;align-items:center;border-radius:10px;cursor:",";"," ",";"," "," > span{flex:1;padding:12px 16px 12px 0;}"],function(e){return e.onClick?"pointer":"inherit"},Z.c.t7,function(e){return e.theme.isDarkTheme?E:A},function(e){return e.theme.isMobile?M:N},function(e){return _[e.$severity]}),T=(0,g.ZP)(S.z).withConfig({displayName:"styled__CloseButton",componentId:"sc-1l4wkgh-1"})(["color:",";"],v.O9.fgError),F=["open","onClose","severity","message","autoHideDuration","onClick"];function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var z=(0,l.memo)(function(e){var t=e.open,n=e.onClose,r=e.severity,o=e.message,i=e.autoHideDuration,a=e.onClick,s=(0,b.Z)(e,F),c=(0,l.useCallback)(function(e){null==e||e.stopPropagation(),n&&n()},[n]);return t?(0,k.jsx)(I,{onClose:c,autoHideDuration:void 0===i?6e3:i,children:(0,k.jsxs)(L,R(R({$severity:r,onClick:a},s),{},{children:[(0,k.jsx)("span",{children:o}),(0,k.jsx)(T,{"data-test-id":"alert-close-button",variant:"icon-borderless-no-hover",icon:"Close",iconSize:16.66,onClick:c})]}))}):null}),G=n(5095),U=n(12967),$=n(97059),W=n(70120),H=n(5569),q=n(79698),V=n(91194),Y=n(70299),J=n(67256),X=(0,l.memo)(function(){var e=(0,l.useState)(null),t=e[0],n=e[1];(0,l.useEffect)(function(){var e=(0,J.$O)();e.value?(n(e.value),e.value.persist||(0,J.fz)()):n(null)},[]);var r=null!=t&&t.expire?new Date(null==t?void 0:t.expire)-new Date:void 0;return(0,k.jsx)(z,{open:!!(null!=t&&t.message),message:null==t?void 0:t.message,severity:null==t?void 0:t.severity,autoHideDuration:r,onClose:function(){return n(null)}})}),K=n(73758),Q=n(17674),ee=n(12476),et=n(66703),en=n(54361),er=n(51544),eo=g.ZP.div.withConfig({displayName:"styled__NotificationBubbleWrapper",componentId:"sc-10vh3jl-0"})(["display:flex;align-items:center;justify-content:center;width:","px;height:24px;border-radius:33px;background-color:",";color:",";",""],function(e){return e.$isOverMax?35:24},v.O9.e2,v.O9.fgError,Z.c.t11),ei=["value"];function ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function es(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ea(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var el=(0,l.memo)(function(e){var t=e.value,n=(0,b.Z)(e,ei),r=(0,l.useMemo)(function(){return t>99},[t]);return t?(0,k.jsx)(eo,es(es({$isOverMax:r},n),{},{children:r?"99+":t})):null}),ec=(0,g.ZP)(S.z).withConfig({displayName:"styled__ChatNotificationsIconButton",componentId:"sc-14ipnak-0"})(["width:48px;height:48px;"]),eu=(0,g.ZP)(el).withConfig({displayName:"styled__UnreadNotificationBubble",componentId:"sc-14ipnak-1"})(["position:absolute;top:-2px;left:30px;pointer-events:none;z-index:1;"]),ed=g.ZP.div.withConfig({displayName:"styled__NotificationButtonWrapper",componentId:"sc-14ipnak-2"})(["position:relative;"]),ep=(0,l.memo)(function(){var e=(0,en.c8)(),t=(0,Q.Z)(e,3),n=t[0],r=t[1],o=t[2],i=(0,C.bI)("unreadChat").unreadChat,a=(0,l.useRef)(),s=(0,l.useRef)(),c=(0,l.useCallback)(function(){var e;null===(e=s.current)||void 0===e||e.closeDropdown(),o()},[o]);return(0,k.jsxs)(ed,{ref:a,children:[(0,k.jsx)(eu,{value:i}),(0,k.jsx)(ee.h_,{customContent:n?(0,k.jsx)(er.n,{onItemClick:c}):null,contentPadding:0,onClick:r,onClose:o,xOffset:112,yOffset:16,contentWidth:500,contentHeight:570,blockPageScroll:!0,ref:s,noAnimation:!0,children:(0,k.jsx)(et.u,{placement:"bottom",content:"Chats",yOffset:8,children:(0,k.jsx)(ec,{variant:"icon-borderless",icon:"Chat",iconSize:22.5,active:n})})})]})}),ef=n(32413),em=(0,g.ZP)(S.z).withConfig({displayName:"styled__NotificationsIconButton",componentId:"sc-kvqul9-0"})(["width:48px;height:48px;"]),eh=g.ZP.div.withConfig({displayName:"styled__NotificationButtonWrapper",componentId:"sc-kvqul9-1"})(["position:relative;"]),ev=(0,g.ZP)(el).withConfig({displayName:"styled__UnreadNotificationBubble",componentId:"sc-kvqul9-2"})(["position:absolute;top:-2px;left:30px;pointer-events:none;z-index:1;"]),eb=(0,l.memo)(function(){var e=(0,en.c8)(),t=(0,Q.Z)(e,3),n=t[0],r=t[1],o=t[2],i=(0,l.useState)(!1),a=i[0],s=i[1],c=(0,C.bI)("unread").unread;return(0,l.useEffect)(function(){s(!1)},[c]),(0,k.jsx)("div",{children:(0,k.jsxs)(eh,{children:[!!c&&(0,k.jsx)(ev,{value:a?0:c||0}),(0,k.jsx)(ee.h_,{customContent:n?(0,k.jsx)(ef.w,{}):null,contentPadding:0,onClick:r,onClose:o,xOffset:56,yOffset:16,contentWidth:501,contentHeight:570,blockPageScroll:!0,noAnimation:!0,children:(0,k.jsx)(et.u,{placement:"bottom",content:"Notifications",yOffset:8,children:(0,k.jsx)(em,{variant:"icon-borderless",icon:"Bell",active:n,iconSize:25})})})]})})}),eg=n(36581),ex=n(73674),ey=n(76958),ew=n(55847),eC=n(47108),ej=(0,g.ZP)(eC.Z).withConfig({displayName:"styled__LeaderboardsPreviewWrapper",componentId:"sc-fdzhoh-0"})(["margin-top:16px;"]),ek=g.ZP.div.withConfig({displayName:"styled__LeaderboardsPreviewTitle",componentId:"sc-fdzhoh-1"})(["",";"],Z.c.t6),eO=g.ZP.div.withConfig({displayName:"styled__LeaderboardsPreviewPoints",componentId:"sc-fdzhoh-2"})(["",";flex-shrink:0;padding-left:8px;white-space:nowrap;color:",";"],Z.c.t10,function(e){return e.theme.isDarkTheme?v.O9.sd1:v.O9.g1}),eP=g.ZP.div.withConfig({displayName:"styled__LeaderboardPreviewSeeAllWrapper",componentId:"sc-fdzhoh-3"})(["border-top:1px solid ",";padding-top:16px;display:flex;align-items:center;justify-content:center;width:100%;"],v.O9.n3),eD=(0,g.ZP)(S.z).withConfig({displayName:"styled__LeaderboardPreviewSeeAll",componentId:"sc-fdzhoh-4"})(["",";height:auto;"],Z.c.t11),eI=g.ZP.div.withConfig({displayName:"styled__LeaderboardsPreviewUser",componentId:"sc-fdzhoh-5"})(["display:flex;align-items:center;flex:1;min-width:0px;gap:9px;"]),eZ=g.ZP.div.withConfig({displayName:"styled__LeaderboardsPreviewItem",componentId:"sc-fdzhoh-6"})(["display:flex;position:relative;align-items:center;justify-content:flex-start;height:38px;"]),eS=(0,l.memo)(function(e){var t,n,r=e.data,o=(0,C.bI)("currentGroup").currentGroup,i=(0,c.useRouter)(),a=null==r||null===(t=r.users)||void 0===t?void 0:t.map(function(e,t){var n=e.rank,r=e.points,i=e.user;return(0,k.jsxs)(eZ,{children:[n<=3&&(0,k.jsx)(ew.qm,{children:(0,k.jsx)("svg",{width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{d:"M0 0L11 0V10.0442L5.73392 6.32786L0 10.0442L0 0Z",fill:1===n?"#F8CA60":2===n?v.O9.n5:"#A77B53"})})}),(0,k.jsx)(ew.F9,{$rank:n,$marginRight:"8px",children:(0,k.jsx)(ew.Q8,{variant:"t5",color:n<=3?v.O9.n1:v.O9.n5,textAlign:"center",lineHeight:25,children:"".concat(n)})}),(0,k.jsxs)(eI,{children:[(0,k.jsx)(ex.Z,{size:32,user:i,userPreview:!0,group:o}),(0,k.jsx)(ey.Z,{user:i,userPreview:!0,group:o,hoverUnderline:!0,typographyVariant:"t7"})]}),(0,k.jsx)(eO,{children:"+".concat(r)})]},t)}),s=(0,k.jsxs)(eg.s,{gap:16,children:[(0,k.jsx)(ek,{children:"Leaderboard (30-day)"}),(0,k.jsx)(eg.s,{gap:16,children:a}),(0,k.jsx)(eP,{children:(0,k.jsx)(eD,{onClick:function(){var e=(0,G.Xt)({group:o}),t=e.href,n=e.as;i.push(t,n)},variant:"link",label:"See all leaderboards",disableRipple:!0})})]});return(null===(n=r.users)||void 0===n?void 0:n.length)>0?(0,k.jsx)(ej,{children:s}):null});function e_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e_(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eN=eM(eM({},Z.w.t7),{},{padding:"10.5px 15px",color:v.O9.n5}),eE={content:"User menu",placement:"bottom",yOffset:8},eA=(0,l.memo)(function(){var e=(0,C.bI)("currentGroup","self"),t=e.currentGroup,n=e.self,r=(0,c.useRouter)(),o=(0,l.useCallback)(function(){(0,f.pN)({key:f.H0.inviteCode}),(0,J.Lx)({message:"Logged out"}),d.Z.logout()},[]),i=(0,l.useMemo)(function(){return[{label:"Profile",style:{marginTop:4},onClick:function(){(0,V.VF)(r,(0,G.sB)({userName:n.name,group:t}))}},{label:"Settings",style:{marginBottom:4},onClick:function(){(0,V.VF)(r,(0,G.tL)({}))}},{type:"divider",dividerStyle:{padding:"0px 16px"}},{label:"Help center",link:"https://help.skool.com/",style:eM(eM({},eN),{},{marginTop:4}),newTab:!0},{label:"Create a community",style:eN,link:"/signup".concat(t?"?g=".concat(t.id):"")},{label:"Discover communities",link:"/discovery",style:eN},{label:"Log out",onClick:o,confirmAction:{header:"Log out",content:"Are you sure you want to log out?",confirmLabel:"Log out"},style:eM(eM({},eN),{},{marginBottom:8})}]},[t,o,r,n]);return(0,k.jsx)("div",{children:(0,k.jsx)(ee.h_,{noAnimation:!0,options:i,dropdownTitle:n.email,contentPadding:0,contentWidth:224,yOffset:16,tooltip:eE,children:(0,k.jsx)(S.z,{disableRipple:!0,style:{width:48,height:48},variant:"round-borderless",label:(0,k.jsx)(ex.Z,{user:n,size:32,disableLink:!0})})})})}),eL=n(80847),eT=n(193),eF=n(96276),eB=n(60678),eR=n(16557),ez=n(85240),eG=n(86031),eU=(0,g.ZP)(eG.x).withConfig({displayName:"styled__SwitcherContent",componentId:"sc-zk3028-0"})(["gap:8px;height:100%;a{display:flex;}"]),e$=g.ZP.div.withConfig({displayName:"styled__SwitcherItem",componentId:"sc-zk3028-1"})(["display:flex;align-items:center;gap:8px;width:100%;span{"," ","}"],Z.c.ellipsis,Z.c.t4),eW=g.ZP.div.withConfig({displayName:"styled__SwitcherItemIconWrapper",componentId:"sc-zk3028-2"})(["display:flex;justify-content:center;align-items:center;width:40px;height:40px;background-color:",";border-radius:10px;svg{color:",";}"],v.O9.n3,v.O9.n5),eH=g.ZP.div.withConfig({displayName:"styled__SwitcherHome",componentId:"sc-zk3028-3"})(["padding:4px 0px;border-radius:10px;cursor:pointer;transition:background 150ms ease-in-out;"]),eq=g.ZP.div.withConfig({displayName:"styled__DropdownMenuWrapper",componentId:"sc-zk3028-4"})(["> div > div:first-child{width:100%;height:100%;button{width:48px;height:48px;svg{width:12px;height:20px;}}}.skool-ui-dropdown-option{width:295px;padding:12px 15px;}"]);function eV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var eY=(0,l.memo)(function(){var e=(0,l.useRef)(),t=(0,l.useRef)(),n=(0,l.useRef)(),i=(0,C.bI)("self","currentGroup"),s=i.self,u=i.currentGroup,p=(0,c.useRouter)(),f=(0,l.useState)((null==s?void 0:s.allGroups)||[]),m=f[0],h=f[1],v=(0,l.useState)(!!(null!=s&&s.hasMore)),b=v[0],g=v[1],x=(0,l.useState)(!1),y=x[0],w=x[1],j=(0,l.useState)(""),O=j[0],P=j[1],D=(0,l.useRef)(),I=(0,en.c8)(),Z=(0,Q.Z)(I,3),S=Z[0],_=Z[1],M=Z[2],N="/discovery"===p.pathname;(0,l.useEffect)(function(){var e=function(e){var r,o,i,a;"k"===e.key&&(e.metaKey||e.ctrlKey)&&(S?null===(r=t.current)||void 0===r||r.closeDropdown():(null===(o=t.current)||void 0===o||o.openDropdown(),null===(i=n.current)||void 0===i||i.focus())),"Escape"===e.key&&(null===(a=t.current)||void 0===a||a.closeDropdown())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[S,M]),(0,l.useEffect)(function(){O.trim()?w(!0):(w(!1),h((null==s?void 0:s.allGroups)||[]),g((null==s?void 0:s.hasMore)||!1))},[O,s]),(0,l.useEffect)(function(){var e=O.trim();if(!e){D.current="";return}var t=setTimeout((0,o.Z)(a().mark(function t(){var n;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(D.current!==e){t.next=3;break}return w(!1),t.abrupt("return");case 3:return D.current=e,t.next=6,d.Z.readSelfGroups({limit:10,q:e||void 0});case 6:null!=(n=t.sent.data)&&n.hasMore?g(!0):g(!1),w(!1),h(null==n?void 0:n.groups);case 11:case"end":return t.stop()}},t)})),500);return function(){return clearTimeout(t)}},[O]);var E=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.readSelfGroups({offset:m.length,limit:10,q:O.trim()||void 0});case 2:g(!!(null!=(t=e.sent.data)&&t.hasMore)),null!=t&&t.groups&&h(m.concat(t.groups));case 6:case"end":return e.stop()}},e)})),[m,O]),A=(0,l.useCallback)(function(){h((null==s?void 0:s.allGroups)||[]),g(!!(null!=s&&s.hasMore))},[s]),L=(0,l.useCallback)(function(){var e=(0,G.Gt)({}),t=e.href,n=e.as;p.push(t,n,{shallow:!1})},[p]),T=(0,l.useCallback)(function(e){P(e.target.value)},[]),F=(0,l.useCallback)(function(){t.current.getNavigatedOption()||(0,V.VF)(p,(0,G.Gt)({query:O.trim()}))},[O,p]),B=(0,l.useCallback)(function(){P("")},[]),R=(0,l.useCallback)(function(){A(),M(),P("")},[A,M]),z=(0,l.useMemo)(function(){if(u)return(0,k.jsx)(eB.Z,{group:u,underline:"none",children:(0,k.jsx)(eH,{children:(0,k.jsx)(eT.Z,{group:u,iconSize:40,variant:"t4",disableLink:!0})})});var e=N?(0,G.Gt)({}):{href:"/",as:"/ "};return(0,k.jsx)(eR.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eV(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eV(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({width:98},e))},[u,N]),U=(0,l.useCallback)(function(){var e;null==n||null===(e=n.current)||void 0===e||e.blur()},[]),$=(0,l.useMemo)(function(){var e=[{label:(0,k.jsx)(ez.Z,{ref:n,value:O,onChange:T,onSubmit:F,onClear:B,isPending:y}),disableHighlight:!0,style:{padding:"16px 16px 4px 16px"}}];return O.trim()?e.push({label:(0,k.jsxs)(e$,{children:[(0,k.jsx)(eW,{children:(0,k.jsx)(eF.J,{name:"Search",style:{width:18}})}),(0,k.jsx)("span",{children:"Search all communities"})]}),onClick:F,canArrowNavigate:!0}):(e.push({label:(0,k.jsxs)(e$,{children:[(0,k.jsx)(eW,{children:(0,k.jsx)(eF.J,{name:"Plus",style:{width:16}})}),(0,k.jsx)("span",{children:"Create a community"})]}),link:"/signup".concat(u?"?g=".concat(u.id):""),canArrowNavigate:!0}),e.push({label:(0,k.jsxs)(e$,{children:[(0,k.jsx)(eW,{children:(0,k.jsx)(eF.J,{name:"Compass",style:{width:24}})}),(0,k.jsx)("span",{children:"Discover communities"})]}),onClick:L,canArrowNavigate:!0})),null!=m&&m.length&&m.forEach(function(t){var n;switch(null===(n=t.metadata)||void 0===n?void 0:n.privacy){case 0:case 1:break;default:return}e.push({label:(0,k.jsxs)(e$,{children:[(0,k.jsx)(eT.Z,{group:t,iconSize:40,variant:"t4",disableLink:!0,iconOnly:!0}),(0,k.jsx)("span",{children:t.metadata.displayName})]}),onClick:function(){t.id!==(null==u?void 0:u.id)&&(0,V.VF)(p,(0,G.AZ)({groupName:t.name}))},active:t.id===(null==u?void 0:u.id),canArrowNavigate:!0})}),b&&(e.push({type:"divider"}),e.push({label:(0,k.jsxs)(e$,{children:[(0,k.jsx)(eW,{children:(0,k.jsx)(eF.J,{name:"ArrowDown",style:{width:12}})}),(0,k.jsx)("span",{children:"See more"})]}),onClick:E,canArrowNavigate:!0,keepOpenOnClick:!0})),(0,k.jsxs)(eU,{justifyContent:"space-between",children:[z,(0,k.jsx)(eq,{children:(0,k.jsx)(ee.h_,{ref:t,options:e,variant:"icon-borderless",icon:"ArrowsUpDown",placement:"bottom",noAnimation:!0,onShow:_,onHide:R,onClose:U,contentPadding:"0px 0px 16px 0px",contentWidth:307,yOffset:8,tooltip:{content:"Switch communities",yOffset:4}})})]})},[O,T,L,F,B,m,b,z,R,p,E,_,U,y,u]);return(0,k.jsx)("div",{ref:e,style:{height:"100%"},children:$})}),eJ=n(27849),eX=n(56726),eK=n(80008),eQ=n.n(eK),e0=n(30697),e1=n(88325),e2=n(95151),e9=n(30126),e3=n(97221),e5=n(65009),e6=n(19975),e4=n(14760),e8=(0,l.memo)(function(e){var t,n,r,o=e.user,i=(null===(t=o.profileData)||void 0===t?void 0:t.totalContributions)||0,a=(null===(n=o.profileData)||void 0===n?void 0:n.totalFollowers)||0,s=(null===(r=o.profileData)||void 0===r?void 0:r.totalFollowing)||0,l=(0,C.bI)("isMobile").isMobile;return(0,k.jsx)(eg.s,{gap:l?0:16,style:l?{borderBottom:"1px solid ".concat(v.O9.n3),borderTop:"1px solid ".concat(v.O9.n3),paddingBottom:8,paddingTop:8,marginBottom:8}:void 0,children:(0,k.jsxs)(e5.X,{alignItems:"center",justifyContent:"space-evenly",style:{borderWidth:l?0:"1px 0px",borderColor:v.O9.n3,borderStyle:"solid",padding:l?"0 13px":"8px 0px"},children:[(0,k.jsx)(e6.Z,{user:o,tab:eJ.t5.UserProfilePosts,children:(0,k.jsxs)(eg.s,{alignItems:"center",children:[(0,k.jsx)(e4.Z,{variant:"t4",children:(0,U.TN)(i)}),(0,k.jsx)(e4.Z,{variant:"t11",color:v.O9.n5,children:"Contributions"})]})}),(0,k.jsx)("div",{style:{width:"1px",backgroundColor:v.O9.n3,height:48,margin:l?"0 13px":"0 4px"}}),(0,k.jsx)(e6.Z,{user:o,tab:eJ.t5.UserProfileFollowers,children:(0,k.jsxs)(eg.s,{alignItems:"center",children:[(0,k.jsx)(e4.Z,{variant:"t4",children:(0,U.TN)(a)}),(0,k.jsx)(e4.Z,{variant:"t11",color:v.O9.n5,children:"Followers"})]})}),(0,k.jsx)("div",{style:{width:"1px",backgroundColor:v.O9.n3,height:48,margin:l?"0 13px":"0 4px"}}),(0,k.jsx)(e6.Z,{user:o,tab:eJ.t5.UserProfileFollowing,children:(0,k.jsxs)(eg.s,{alignItems:"center",children:[(0,k.jsx)(e4.Z,{variant:"t4",children:(0,U.TN)(s)}),(0,k.jsx)(e4.Z,{variant:"t11",color:v.O9.n5,children:"Following"})]})})]})})}),e7=n(61022),te=g.ZP.div.withConfig({displayName:"styled__UserSocialLinksWrapper",componentId:"sc-vbxyw2-0"})(["display:flex;width:100%;justify-content:center;align-items:center;"]),tt=n(20142),tn=(0,l.memo)(function(){var e=(0,C.bI)("currentUser").currentUser,t=(0,l.useCallback)(function(t){var n=t.key,r=t.icon,o=null==e?void 0:e.metadata[n];if(o)return(0,k.jsx)(W.r,{href:o,newTab:!0,children:(0,k.jsx)(S.z,{variant:"icon-borderless",icon:r})},n)},[e]);return(0,k.jsx)(te,{children:tt.n.map(t)})}),tr=n(26201),to=g.ZP.div.withConfig({displayName:"styled__ProgressWrapper",componentId:"sc-1gipnml-0"})(["display:flex;flex-direction:column;align-items:center;"]),ti=g.ZP.div.withConfig({displayName:"styled__CtaColumn",componentId:"sc-1gipnml-1"})(["display:flex;flex-direction:column;gap:8px;"]),ta=g.ZP.div.withConfig({displayName:"styled__CtaRow",componentId:"sc-1gipnml-2"})(["display:flex;gap:8px;> *{flex:1;}"]),ts=(0,g.iv)(["padding:0px 0px 8px 0px;"]),tl=g.ZP.div.withConfig({displayName:"styled__MidInfo",componentId:"sc-1gipnml-3"})(["display:flex;flex-direction:column;gap:8px;",""],function(e){return e.theme.isMobile&&ts}),tc=(0,g.iv)(["top:64px;"]),tu=g.ZP.div.withConfig({displayName:"styled__QuickSettingsButton",componentId:"sc-1gipnml-5"})(["position:absolute;top:4px;right:10px;> button > div{height:20px !important;width:20px !important;}",""],function(e){return e.theme.isMobile&&tc}),td=(0,g.iv)(["text-align:center;margin-bottom:4px;"]),tp=g.ZP.div.withConfig({displayName:"styled__UserHandle",componentId:"sc-1gipnml-6"})(["color:",";"," ",""],v.O9.n5,Z.c.t8,function(e){return e.theme.isMobile&&td}),tf=g.ZP.div.withConfig({displayName:"styled__IconInfoItem",componentId:"sc-1gipnml-7"})(["display:flex;align-items:center;gap:16px;color:",";",";> div{color:",";height:16px;width:16px;}"],v.O9.n7,Z.c.t7,v.O9.n5),tm=g.ZP.div.withConfig({displayName:"styled__GreenDot",componentId:"sc-1gipnml-8"})(["height:16px;width:16px;border-radius:50%;background:",";"],v.O9.s2),th=g.ZP.div.withConfig({displayName:"styled__Bio",componentId:"sc-1gipnml-9"})(["overflow-wrap:break-word;"," ",""],function(e){return e.theme.isMobile&&"text-align: center;"},Z.c.t7),tv=(0,g.ZP)(S.z).withConfig({displayName:"styled__SettingsButton",componentId:"sc-1gipnml-10"})(["height:",";width:",";margin-right:-8px;"],function(e){return e.theme.isMobile?"40px":"48px"},function(e){return e.theme.isMobile?"40px":"48px"}),tb=(0,g.ZP)(S.z).withConfig({displayName:"styled__FullWidthButton",componentId:"sc-1gipnml-11"})(["width:100%;"]),tg=(0,g.ZP)(tb).withConfig({displayName:"styled__UnfollowButton",componentId:"sc-1gipnml-12"})(["background-color:",";&:hover{background-color:",";}"],function(e){return e.theme.isDarkTheme?v.O9.n5:v.O9.n3},function(e){return e.theme.isDarkTheme?v.O9.n5:v.O9.n3}),tx=(0,g.ZP)(tb).withConfig({displayName:"styled__FollowingButton",componentId:"sc-1gipnml-13"})(["background-color:",";color:",";&:hover{background-color:",";}"],v.O9.n3,function(e){return e.theme.isDarkTheme?v.O9.n7:void 0},v.O9.n3),ty=g.ZP.div.withConfig({displayName:"styled__UserAvatarWrapper",componentId:"sc-1gipnml-14"})(["display:flex;justify-content:center;position:relative;"]),tw=g.ZP.div.withConfig({displayName:"styled__UserActionsWrapper",componentId:"sc-1gipnml-15"})(["margin:16px 0;"]),tC=g.ZP.div.withConfig({displayName:"styled__UserCardWrapper",componentId:"sc-1gipnml-16"})(["padding:",";"],function(e){var t=e.$padding;return null!=t?t:void 0}),tj=n(20338),tk=n(81343);function tO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tO(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tD={width:"100%"},tI=(0,l.memo)(function(e){var t,n,r,i,s,u=e.padding,p=(0,C.bI)("self","currentGroup","currentUser","isMobile"),f=p.dispatch,h=p.self,v=p.currentGroup,b=p.isMobile,g=p.currentUser,x=!!g.profileData,y=(0,c.useRouter)(),w=(0,l.useState)(!1),j=w[0],O=w[1],P=(0,en.C1)(),D=(0,Q.Z)(P,3),I=D[0],Z=D[1],S=D[2],_=(0,$._)(g)||{},M=_.level,N=_.pointsToNextLevel,E=void 0===N?0:N,A=!v&&!!(null!=h&&null!==(t=h.metadata)&&void 0!==t&&t.chatAdmin)&&(null==h?void 0:h.id)!==g.id,L=(0,l.useMemo)(function(){return(0,m.q2)({group:v,user:h,member:null==h?void 0:h.member})},[v,h]),T=(0,l.useMemo)(function(){var e;return!b&&(null==g?void 0:g.id)!==(null==h?void 0:h.id)&&L&&(0,m.cD)({member:null==g||null===(e=g.profileData)||void 0===e?void 0:e.member,group:v})},[L,g,h,v,b]),F=(0,l.useCallback)(function(){f(e0.wj,tP(tP({},g.profileData),g))},[f,g]),B=(0,l.useMemo)(function(){return T?(0,k.jsx)(tu,{children:(0,k.jsx)(tv,{onClick:F,variant:"icon-borderless",icon:"GearOutlined"})}):null},[T,F]),R=(0,l.useMemo)(function(){var e=g.metadata,t=e.lastOffline;return e.online?(0,k.jsxs)(tf,{children:[(0,k.jsx)(tm,{}),(0,k.jsx)("span",{children:"Online now"})]}):t?(0,k.jsxs)(tf,{children:[(0,k.jsx)(eF.J,{name:"Clock"}),(0,k.jsx)("span",{children:"Active ".concat((0,e1.ur)({value:t,justNow:!1,ago:!0})," ago")})]}):null},[g]),z=(0,l.useMemo)(function(){var e,t=v?null==g||null===(e=g.profileData)||void 0===e||null===(e=e.member)||void 0===e?void 0:e.approvedAt:null==g?void 0:g.createdAt;return"Joined ".concat(eQ()(t).format("MMM D, YYYY"))},[v,g]),U=(0,l.useMemo)(function(){var e,t,n,r,o,i,a,s;return b?(0,k.jsxs)(k.Fragment,{children:[R,(0,k.jsxs)(tf,{children:[(0,k.jsx)(eF.J,{name:"NewCalendar"}),(0,k.jsx)("span",{children:z})]}),(0,k.jsxs)(eG.x,{gap:24,children:[(null==g||null===(e=g.metadata)||void 0===e?void 0:e.myersBriggs)&&(0,k.jsxs)(tf,{children:[(0,k.jsx)(eF.J,{name:"Smile"}),(0,k.jsx)("span",{children:null==g||null===(t=g.metadata)||void 0===t?void 0:t.myersBriggs})]}),(null==g||null===(n=g.metadata)||void 0===n?void 0:n.location)&&(0,k.jsxs)(tf,{children:[(0,k.jsx)(eF.J,{name:"Location"}),(0,k.jsx)("span",{children:null==g||null===(r=g.metadata)||void 0===r?void 0:r.location})]})]})]}):(0,k.jsxs)(k.Fragment,{children:[R,(0,k.jsxs)(tf,{children:[(0,k.jsx)(eF.J,{name:"NewCalendar"}),(0,k.jsx)("span",{children:z})]}),(null==g||null===(o=g.metadata)||void 0===o?void 0:o.myersBriggs)&&(0,k.jsxs)(tf,{children:[(0,k.jsx)(eF.J,{name:"Smile"}),(0,k.jsx)("span",{children:null==g||null===(i=g.metadata)||void 0===i?void 0:i.myersBriggs})]}),(null==g||null===(a=g.metadata)||void 0===a?void 0:a.location)&&(0,k.jsxs)(tf,{children:[(0,k.jsx)(eF.J,{name:"Location"}),(0,k.jsx)("span",{children:null==g||null===(s=g.metadata)||void 0===s?void 0:s.location})]})]})},[R,null==g||null===(n=g.metadata)||void 0===n?void 0:n.location,null==g||null===(r=g.metadata)||void 0===r?void 0:r.myersBriggs,b,z]),W=(0,l.useMemo)(function(){if((null==h?void 0:h.id)===g.id){var e,t,n,r=(0,G.tL)({}),i=r.href,s=r.as;return y.pathname===i?null:(0,k.jsx)(tb,{onClick:function(){(0,V.VF)(y,{href:i,as:s})},label:"Edit Profile",variant:"secondary"})}if(null!==(e=g.profileData)&&void 0!==e&&e.followed){if(null!==(n=g.profileData)&&void 0!==n&&n.following){var l,c,u=(c=(0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.unfollowUser({userName:g.name});case 2:(0,V.H5)(y);case 3:case"end":return e.stop()}},e)})),function(){return c.apply(this,arguments)});return(0,k.jsx)(tj.s,{header:"Unfollow ".concat(g.firstName," ").concat(g.lastName),content:"Are you sure you want to unfollow ".concat(g.firstName," ").concat(g.lastName,"?"),confirmLabel:"Unfollow",onConfirm:u,triggerStyles:tD,children:(0,k.jsx)(tg,{label:"Following",icon:"Refresh"})})}var p=(l=(0,o.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.followUser({userName:g.name,groupID:null==v?void 0:v.id});case 2:if((null==(t=e.sent.error)?void 0:t.status)!==429){e.next=6;break}return e.abrupt("return",f(e0.bI,{message:"You’ve hit your follow limit",severity:"error"}));case 6:(0,V.H5)(y);case 7:case"end":return e.stop()}},e)})),function(){return l.apply(this,arguments)});return(0,k.jsx)(tb,{onClick:p,label:"Follow Back"})}if(null!==(t=g.profileData)&&void 0!==t&&t.following){var m,b=(m=(0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.unfollowUser({userName:g.name});case 2:(0,V.H5)(y);case 3:case"end":return e.stop()}},e)})),function(){return m.apply(this,arguments)});return(0,k.jsx)(tj.s,{header:"Unfollow ".concat(g.firstName," ").concat(g.lastName),content:"Are you sure you want to unfollow ".concat(g.firstName," ").concat(g.lastName,"?"),confirmLabel:"Unfollow",onConfirm:b,triggerStyles:tD,children:(0,k.jsx)(tx,{label:"Following"})})}var x,w=(x=(0,o.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.followUser({userName:g.name,groupID:null==v?void 0:v.id});case 2:if((null==(t=e.sent.error)?void 0:t.status)!==429){e.next=6;break}return e.abrupt("return",f(e0.bI,{message:"You’ve hit your follow limit",severity:"error"}));case 6:(0,V.H5)(y);case 7:case"end":return e.stop()}},e)})),function(){return x.apply(this,arguments)});return(0,k.jsx)(e3.Z,{reason:"to follow ".concat(g.firstName," ").concat(g.lastName),noMembershipCheck:!0,onSuccess:w,onPending:function(){return(0,V.H5)(y)},children:function(e){var t=e.onClick;return(0,k.jsx)(tb,{onClick:t,label:"Follow"})}})},[h,g,f,y,v]),H=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r,o,i,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.sendChatRequest({userId:g.id,groupId:null==v?void 0:v.id});case 2:if(n=(t=e.sent).data,(null==(r=t.error)?void 0:r.status)!==429){e.next=7;break}return e.abrupt("return",f(e0.vb,!0));case 7:if(!n){e.next=19;break}if(i=(o=n.channel).id,s=o.metadata.lastRead,!b){e.next=16;break}return e.next=14,(0,V.VF)(y,(0,G.rv)({channelId:i,chatLastRead:s}));case 14:e.next=17;break;case 16:f(e0.WT,function(){return{chatModalProps:{id:i,lastRead:s}}});case 17:e.next=20;break;case 19:f(e0.bI,{message:"Chat request error",severity:"error"});case 20:case"end":return e.stop()}},e)})),[g,v,f,b,y]),q=(0,l.useMemo)(function(){var e=!g.profileData.chatRequest;return!A&&e?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(tb,{variant:"disabled",label:"Chat",icon:"ChatOff",onClick:Z}),I&&(0,k.jsx)(e9.Z,{user:g,onClose:S})]}):(0,k.jsx)(tb,{label:"Chat",onClick:H,icon:"Chat"})},[g,H,A,I,Z,S]),Y=(0,l.useMemo)(function(){return v&&(0,e3.M)(h)||(null==g?void 0:g.id)===(null==h?void 0:h.id)?A||v&&h&&(null==g?void 0:g.id)!==(null==h?void 0:h.id)?b?(0,k.jsxs)(ta,{children:[W,q]}):(0,k.jsxs)(ti,{children:[W,q]}):(0,k.jsx)(ti,{children:W}):null},[W,q,v,null==g?void 0:g.id,b,h,A]);return b?(0,k.jsxs)("div",{children:[(0,k.jsxs)(eg.s,{paddingTop:8,gap:8,children:[B,(0,k.jsxs)("div",{children:[(0,k.jsx)(eG.x,{height:v?16:24}),(0,k.jsx)(ty,{children:(0,k.jsx)(ex.Z,{user:g,group:v,showProgress:!!v,showLevel:!0,size:100})}),v&&g&&(0,k.jsx)(eG.x,{marginTop:4,justifyContent:"center",children:(0,k.jsx)(e7.Z,{group:v,user:g,noParens:!0})}),M&&(0,k.jsx)(eG.x,{marginTop:2,justifyContent:"center",children:(0,k.jsx)(e2.E,{points:E})})]}),(0,k.jsxs)(eg.s,{children:[(0,k.jsxs)(eg.s,{children:[(0,k.jsx)(e5.X,{gap:8,justifyContent:"center",children:(0,k.jsx)(ey.Z,{user:g,group:v,typographyVariant:"t2",maxLines:1,usernameCentered:!0,maxWidth:"100%"})}),(0,k.jsx)(tp,{children:"@".concat(null==g?void 0:g.name)})]}),(0,k.jsx)(th,{children:null===(s=g.metadata)||void 0===s?void 0:s.bio}),(0,k.jsx)(tw,{children:Y})]}),(0,k.jsx)(tl,{children:U}),x&&(0,k.jsx)(e8,{user:g,group:v}),(0,k.jsx)(tn,{})]}),(0,k.jsx)(tr.Z,{type:"user",open:j,onClose:function(){return O(!1)}})]}):(0,k.jsxs)(tC,{$padding:u,children:[(0,k.jsxs)(eg.s,{gap:16,children:[B,(0,k.jsxs)(eg.s,{gap:8,children:[(0,k.jsxs)(to,{children:[(0,k.jsx)("div",{style:{height:v?"24px":"32px"}}),(0,k.jsx)(ex.Z,{showLevel:!0,user:g,group:v,showProgress:!!v,size:200}),v&&g&&(0,k.jsx)("div",{style:{marginTop:8,textAlign:"center"},children:(0,k.jsx)(e7.Z,{group:v,user:g,noParens:!0})}),M&&(0,k.jsx)(e2.E,{style:{marginTop:2},points:E,dataTestId:"user-card-levels-points-to-go"}),!v&&(0,k.jsx)("div",{style:{height:"24px"}})]}),(0,k.jsxs)(eg.s,{children:[(0,k.jsx)(e5.X,{flexGrow:1,children:(0,k.jsx)(ey.Z,{user:g,group:v,component:"div",maxLines:1,typographyVariant:"t1",maxWidth:"100%"})}),(0,k.jsx)(tp,{children:"@".concat(null==g?void 0:g.name)})]}),(0,k.jsx)(th,{children:null===(i=g.metadata)||void 0===i?void 0:i.bio})]}),(0,k.jsx)(tk.i,{}),(0,k.jsx)(tl,{children:U}),x&&(0,k.jsx)(e8,{user:g,group:v}),Y,(0,k.jsx)(tn,{})]}),(0,k.jsx)(tr.Z,{type:"user",open:j,onClose:function(){return O(!1)}})]})}),tZ=(0,l.memo)(function(){return(0,k.jsxs)(e5.X,{gap:6,alignItems:"baseline",justifyContent:"center",children:[(0,k.jsx)(e4.Z,{variant:"t11",color:v.O9.n5,children:"powered by"}),(0,k.jsx)(eR.Z,{width:40,disableLink:!0})]})}),tS=g.ZP.div.withConfig({displayName:"styled__UploadText",componentId:"sc-1qg8wku-0"})(["",";color:",";&:hover{text-decoration:underline;}"],Z.c.t7,function(e){return e.$color}),t_=(0,g.ZP)(eC.Z).withConfig({displayName:"styled__AsideGroupCard",componentId:"sc-1qg8wku-1"})(["padding:0;overflow:hidden;"]),tM=g.ZP.div.withConfig({displayName:"styled__AsideGroupCardContent",componentId:"sc-1qg8wku-2"})(["padding:16px;"]),tN=g.ZP.img.withConfig({displayName:"styled__AsideGroupCardImage",componentId:"sc-1qg8wku-3"})(["display:block;height:144px;width:100%;object-fit:cover;position:relative;"]),tE=(0,g.ZP)(eC.Z).withConfig({displayName:"styled__AsideUserProfileCard",componentId:"sc-1qg8wku-4"})(["padding:0;"]),tA=g.ZP.div.withConfig({displayName:"styled__UploadCoverPhotoWrapper",componentId:"sc-1qg8wku-5"})(["cursor:pointer;"]),tL=g.ZP.div.withConfig({displayName:"styled__MediaContentWrapper",componentId:"sc-1qg8wku-6"})(["height:144px;background-color:",";display:flex;align-items:center;justify-content:center;user-select:none;"],function(e){return e.$bgColor}),tT=g.ZP.div.withConfig({displayName:"styled__AsideGroupCardWrapper",componentId:"sc-1qg8wku-7"})(["position:relative;"]);function tF(e){var t=e.hideCard,n=e.mainMenuName,r=e.canAccessGroup,o=e.extraContent,i=(0,C.bI)("self","currentGroup"),a=i.self,s=i.currentGroup,c=i.dispatch,u=(0,l.useMemo)(function(){if(n===eJ.K0.GroupDefault){var e,t,i,l,u=(null==s||null===(e=s.metadata)||void 0===e?void 0:e.coverSmallUrl)||(null==s||null===(t=s.metadata)||void 0===t?void 0:t.logoBigUrl),d=null==s||null===(i=s.metadata)||void 0===i?void 0:i.displayName,p=null==s||null===(l=s.metadata)||void 0===l?void 0:l.color,f=u?(0,k.jsx)(tN,{src:u,alt:d}):null,h=!u&&(0,m.CP)({user:a,member:null==a?void 0:a.member,group:s})?(0,k.jsx)(tA,{onClick:function(){return c(e0.fi,function(){return{settingsModal:"adminGeneral"}})},children:(0,k.jsxs)(tS,{$color:(0,U.zP)(p),children:["Upload cover photo","\xa0"]})}):null;return(0,k.jsxs)(tT,{children:[(0,k.jsxs)(t_,{children:[(0,k.jsxs)(tL,{$bgColor:u?void 0:p,children:[f,h]}),(0,k.jsx)(tM,{children:(0,k.jsx)(eX.Z,{group:s,canAccessGroup:r})})]}),o]})}return n===eJ.K0.UserProfile?(0,k.jsx)(tE,{children:(0,k.jsx)(tI,{padding:"8px 16px"})}):null},[o,c,n,s,a,r]);return t?null:(0,k.jsxs)(eg.s,{gap:16,children:[u,(0,k.jsx)(W.r,{href:"/signup".concat(s?"?g=".concat(s.id):""),newTab:!0,children:(0,k.jsx)(tZ,{})})]})}tF.defaultProps={hideCard:!1};var tB=(0,l.memo)(tF),tR=n(3881),tz=n(25874),tG=g.ZP.div.withConfig({displayName:"styled__PinnedGroupSwitcherContainer",componentId:"sc-10stisx-1"})(["position:fixed;left:0px;top:",";display:flex;flex-direction:column;> button{margin-left:16px;margin-top:16px;display:none;}&:hover{> button{display:flex;}}@media (max-width:1200px){display:none;}"],function(e){return e.$maintenanceBannerVisible?"200px":"145px"}),tU=(0,g.iv)(["&::after{position:absolute;top:0px;left:0px;height:100%;background:",';width:6px;content:"";border-top-right-radius:10px;border-bottom-right-radius:10px;}'],v.O9.n7),t$=g.ZP.div.withConfig({displayName:"styled__GroupItem",componentId:"sc-10stisx-2"})(["width:100%;display:flex;align-items:center;justify-content:center;padding-left:16px;position:relative;height:40px;> a > div{border:1px solid ",";}",""],v.O9.n3,function(e){return e.$active&&tU}),tW=g.ZP.div.withConfig({displayName:"styled__GroupsWrapper",componentId:"sc-10stisx-3"})(["display:flex;flex-direction:column;gap:16px;"]);function tH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tq=function(e){var t=e.pinnedGroups,n=e.maintenanceBannerVisible,r=(0,C.bI)("currentGroup").currentGroup,o=(0,l.useCallback)(function(e){return(0,k.jsx)(t$,{$active:(null==r?void 0:r.name)===e.name,children:(0,k.jsx)(tz.F,{group:e})},e.id)},[r]);return(0,k.jsx)(tG,{$maintenanceBannerVisible:n,children:(0,k.jsx)(tW,{children:t.map(o)})})},tV=(0,l.memo)(function(e){var t=(0,C.bI)("isMobile","self"),n=t.isMobile,o=t.self,i=(0,l.useMemo)(function(){return null!=o&&o.pinnedGroups?o.pinnedGroups.sort(function(e){return"games"===e.name?-1:1}):[]},[o]);return n?null:(0,k.jsx)(tq,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tH(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({pinnedGroups:i},e))}),tY=g.ZP.div.withConfig({displayName:"styled__DesktopLayoutWrapper",componentId:"sc-vae51c-0"})(["display:flex;flex-direction:column;"]),tJ=g.ZP.div.withConfig({displayName:"styled__BottomFullWidth",componentId:"sc-vae51c-1"})(["height:calc(100% - ","px);margin-top:","px;position:relative;display:flex;"],function(e){return e.$topHeight},function(e){return e.$topHeight}),tX=(0,g.ZP)(tJ).withConfig({displayName:"styled__Bottom",componentId:"sc-vae51c-2"})(["width:100%;flex-wrap:nowrap;justify-content:flex-start;min-width:","px;max-width:","px;"],768,1075),tK=g.ZP.div.withConfig({displayName:"styled__BottomLeft",componentId:"sc-vae51c-3"})(["flex-shrink:1;flex-grow:2;min-width:","px;max-width:","px;"],471,760),tQ=g.ZP.div.withConfig({displayName:"styled__BottomGap",componentId:"sc-vae51c-4"})(["flex-shrink:1;flex-grow:1;min-width:","px;max-width:","px;user-select:none;"],24,42),t0=g.ZP.div.withConfig({displayName:"styled__BottomRight",componentId:"sc-vae51c-5"})(["flex-shrink:0;flex-grow:0;width:","px;"],273),t1=(0,g.iv)(["padding:8px 0px 0px 0px;"]),t2=g.ZP.div.withConfig({displayName:"styled__NavContainer",componentId:"sc-vae51c-6"})(["display:flex;flex-direction:column;width:100%;height:100%;max-width:","px;min-width:","px;position:relative;justify-content:space-between;padding:8px 0px;",""],1075,768,function(e){return e.$showHeader&&t1}),t9=g.ZP.div.withConfig({displayName:"styled__DesktopLayoutRoot",componentId:"sc-vae51c-7"})(["height:100%;width:100%;display:flex;flex-direction:column;align-items:center;padding:0px;"]),t3=g.ZP.div.withConfig({displayName:"styled__ContentWrapper",componentId:"sc-vae51c-8"})(["height:100%;width:100%;min-width:","px;max-width:","px;"],768,function(e){return e.$isCourse?"1085":1075}),t5=g.ZP.div.withConfig({displayName:"styled__BottomLeftContentWrapper",componentId:"sc-vae51c-9"})(["display:flex;flex-direction:column;margin-bottom:32px;gap:","px;"],function(e){return e.$noSpacing?0:24}),t6=g.ZP.div.withConfig({displayName:"styled__LayoutNav",componentId:"sc-vae51c-10"})(["top:0px;width:100%;z-index:1100;display:flex;position:absolute;align-items:center;justify-content:center;background:",";background-color:",";border-bottom:1px solid ",";height:","px;@media (max-width:975px){padding-left:8px;}"],v.O9.n1,function(e){return e.theme.isDarkTheme?v.O9.n2:v.O9.n1},v.O9.n3,function(e){return e.$headerHeight}),t4=g.ZP.div.withConfig({displayName:"styled__LayoutNavCenter",componentId:"sc-vae51c-11"})(["flex:1;padding:0px 8px;"]),t8=(0,g.iv)(["border-bottom:4px solid ",";color:",";"],v.O9.n7,v.O9.n7),t7=g.ZP.div.withConfig({displayName:"styled__RouteTab",componentId:"sc-vae51c-12"})(["height:40px;cursor:pointer;margin-right:32px;border-bottom:4px solid transparent;color:",";"," &:hover{color:",";}",""],v.O9.n5,Z.c.t6,v.O9.n7,function(e){return e.$active&&t8}),ne=g.ZP.div.withConfig({displayName:"styled__NavButtonWrapper",componentId:"sc-vae51c-13"})(["display:flex;justify-content:flex-end;"]),nt=g.ZP.div.withConfig({displayName:"styled__MainNavContent",componentId:"sc-vae51c-14"})(["display:flex;width:100%;"]),nn=g.ZP.div.withConfig({displayName:"styled__HeaderLinks",componentId:"sc-vae51c-15"})(["display:flex;"]);function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function no(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ni=(0,l.memo)(function(e){var t,n,r=(0,C.bI)("previousRouterState","hasNoGroups"),o=r.previousRouterState,i=r.hasNoGroups,a=e.leaderboardsData,s=e.content,u=e.canAccessGroup,d=e.currentGroup,p=e.currentUser,f=e.maintenance,m=e.settings,h=e.isApp,v=e.self,b=(0,l.useRef)(),g=(0,l.useRef)(),x=(0,c.useRouter)(),y=(0,G.mp)({pathname:x.pathname,query:x.query}),w=(0,G.PS)({pathname:x.pathname}),j=(0,G.J2)({pathname:x.pathname}),O=(0,G.YN)({pathname:x.pathname}),P=(0,G.kA)({pathname:x.pathname}),D=(0,G.aR)({query:x.query}),I=(0,G.Xx)({pathname:x.pathname}),Z=(0,G.nM)(x.query),S=(0,G.g7)({pathname:x.pathname}),_=(0,G.pi)({query:x.query}),M=(0,G.VP)({pathname:x.pathname}),N=(0,G.DG)({query:x.query}),E=(0,G.yS)({pathname:x.pathname}),A=(0,G.NX)({pathname:x.pathname}),L=(0,G.eJ)({pathname:x.pathname}),T=(0,G.EW)({pathname:x.pathname}),F=(0,G.Hp)({pathname:x.pathname}),B=(0,G.J5)({pathname:x.pathname}),R=(0,G.pi)({query:o.query}),z=(0,G.iH)({pathname:x.pathname}),U=(0,G.wk)(x.query)||"",$=R&&x.query.postName,J=N||y,Q="/games/affiliates"===x.asPath,ee=(0,G.WC)({pathname:x.pathname}),et=(0,G.ni)({pathname:x.pathname}),en=(0,l.useMemo)(function(){return(0,G.Sw)(x)},[]),er=!O&&(P||J||w||E||I||S&&u||M||j||Q||ee||et)&&!$&&!_,eo=(0,l.useState)(!1),ei=eo[0],ea=eo[1],es=er||O,el=es||z,ec=I||N||en,eu=es?112:64,ed=eu+32,ef=(0,G.Tx)({pathname:x.pathname}),em=(0,G.ZZ)({pathname:x.pathname}),eh=(null==d?void 0:d.name)==="games",ev=S&&eh,eg="/games/onboarding"===x.asPath,ex=ef||em||P||j||z||ev||eg||A||L||F||B||T||I&&"list"!==Z,ey=[q.oN,q.bD,q.xC].includes(null==p||null===(t=p.profileData)||void 0===t||null===(t=t.member)||void 0===t?void 0:t.role),ew=!!(null!=d&&null!==(n=d.metadata)&&void 0!==n&&n.archived),eC=(0,K.Z)(f),ej=eC.maintenanceStartTime,ek=eC.maintenanceDuration,eO=eC.showMaintenanceBanner,eP=eC.closeMaintenanceBanner,eD=(0,l.useMemo)(function(){var e,t;return JSON.parse(null!==(e=null==d||null===(t=d.metadata)||void 0===t?void 0:t.tabs)&&void 0!==e?e:"{}")},[d]),eI=(!i&&v||!v&&h)&&(null==x?void 0:x.route)==="/",eZ=(0,l.useCallback)(function(){window.location.reload()},[]),e_=(0,l.useCallback)(function(){if(el){var e=z&&!U?250:80;ea(window.scrollY>e)}},[el,z,U]);(0,l.useEffect)(function(){return e_(),window.addEventListener("scroll",e_),function(){window.removeEventListener("scroll",e_)}},[e_]);var eM=(0,l.useMemo)(function(){var e,t;return null!==(e=null==m||null===(t=m.secondaryMenusItems)||void 0===t?void 0:t.map(function(e){var t=e.value,n=e.text,r=e.stat,o=e.dataTestId;return{id:t,label:"number"==typeof r?"".concat(n," ").concat(r):n,dataTestId:o}}))&&void 0!==e?e:[]},[null==m?void 0:m.secondaryMenusItems]),eN=(0,l.useMemo)(function(){var e;return null!=m&&null!==(e=m.secondaryMenusItems)&&void 0!==e&&e.length?(0,k.jsx)(H.m,{tabs:eM,activeTab:m.secondaryMenusCurrentValue,onChangeTab:function(e,t){var n=m.secondaryMenusItems.find(function(e){return e.value===t});n&&(0,V.VF)(x,n.link)}}):null},[m,x,eM]);(0,l.useEffect)(function(){_&&p&&d&&!ey&&(0,V.VF)(x,(0,G.sB)({userName:null==p?void 0:p.name}))},[_,d,p,ey,x]);var eE=(0,l.useCallback)(function(e){return(0,k.jsxs)(nt,{children:[e!==ei&&(0,k.jsx)(eY,{mainMenuName:null==m?void 0:m.mainMenuName}),(0,k.jsx)(t4,{children:d&&u||z&&(ei||U)?(0,k.jsx)(eL.Z,{group:d,searchMembers:!!m.searchMembers,searchInvites:!!m.searchInvites}):(0,k.jsx)("div",{})}),(0,k.jsx)("div",{children:v?(0,k.jsxs)(ne,{style:{gap:8},children:[(0,k.jsx)(ep,{}),(0,k.jsx)(eb,{}),(0,k.jsx)(eA,{})]}):(0,k.jsx)(ne,{children:(0,k.jsx)(tR.Z,{signIn:!0,onSuccess:eZ})})})]})},[v,m,d,u,ei,z,eZ,U]),eT=(0,l.useMemo)(function(){return eE(!0)},[eE]),eF=(0,l.useMemo)(function(){return eE(!1)},[eE]),eB=(0,l.useCallback)(function(e){e.testId;var t=e.href,n=e.label,r=e.active;return(0,k.jsx)(W.r,{href:t,children:(0,k.jsx)(t7,{$active:r,children:n})},n)},[]),eR=(0,l.useMemo)(function(){var e,t,n=null==d?void 0:d.name;if("games"===n)return[{testId:"desktop-layout-community-tab",href:"/games",active:J,label:"Community"},{testId:"desktop-layout-classroom-tab",href:"/".concat(n,"/classroom"),active:P,label:"Classroom"},{testId:"desktop-layout-calendar-tab",href:"/games/calendar",active:I,label:"Calendar"},{testId:"desktop-layout-members-tab",href:"/games/-/members",active:w,label:"Members"},{testId:"desktop-layout-leaderboard-tab",href:"/".concat(n,"/-/leaderboards?mrr=true"),active:j,label:"Leaderboards"},{testId:"desktop-layout-about-tab",href:"/games/affiliates",active:Q,label:"Affiliates"}];var r=null!=eD&&null!==(e=eD.classroom)&&void 0!==e&&e.visible?[{testId:"desktop-layout-classroom-tab",href:"/".concat(n,"/classroom"),active:P,label:"Classroom"}]:[],o=null!=eD&&null!==(t=eD.calendar)&&void 0!==t&&t.visible?[{testId:"desktop-layout-calendar-tab",href:"/".concat(n,"/calendar"),active:I,label:"Calendar"}]:[],i=u?[{testId:"desktop-layout-leaderboard-tab",href:"/".concat(n,"/-/leaderboards"),active:j,label:"Leaderboards"}]:[];return[{testId:"desktop-layout-community-tab",href:"/".concat(n),active:J,label:"Community"}].concat(r,o,[{testId:"desktop-layout-members-tab",href:"/".concat(n,"/-/members"),active:w,label:"Members"}],i,[{testId:"desktop-layout-about-tab",href:"/".concat(n,"/about"),active:S,label:"About"}])},[S,Q,d,P,J,I,w,j,u,eD]),ez=(0,l.useMemo)(function(){var e=no({height:64,transition:ec?"none":"transform 300ms ease",transform:"translateY(".concat(ei?0:-200,"px)"),position:"fixed",zIndex:ei?1101:void 0},Y.uM),t={position:el?void 0:"fixed",top:eO?56:void 0};return eO&&!el&&(t.position="sticky",t.top=0),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(t6,{style:t,$headerHeight:eu,children:(0,k.jsxs)(t2,{ref:g,$showHeader:er,children:[eT,er&&(0,k.jsx)(nn,{children:eR.map(eB)}),O&&eN]})}),el&&(0,k.jsx)(t6,{$headerHeight:eu,style:e,children:(0,k.jsx)(t2,{ref:b,children:eF})})]})},[el,er,O,eu,ec,eT,eF,ei,eN,eO,eB,eR]),eG=(0,l.useMemo)(function(){if(a)return(0,k.jsx)(eS,{data:a})},[a]),eU=(0,l.useMemo)(function(){return ex?(0,k.jsxs)(tJ,{$topHeight:ed,children:[eN,(0,k.jsx)(s,no({},e))]}):(0,k.jsxs)(tX,{$topHeight:ed,children:[(0,k.jsx)(tK,{style:{paddingBottom:ew?48:void 0},children:(0,k.jsxs)(t5,{$noSpacing:m.secondaryMenuNoSpacing,children:[!O&&eN,(0,k.jsx)(s,no({},e))]})}),(0,k.jsx)(tQ,{}),(0,k.jsx)(t0,{children:(0,k.jsx)(tB,{extraContent:eG,hideCard:!!(null!=m&&m.hideCard),canAccessGroup:u,mainMenuName:null==m?void 0:m.mainMenuName,mainMenuItem:null==m?void 0:m.mainMenuItem,hideMainMenu:!!(null!=m&&m.hideMainMenu)})})]})},[e,m,ed,eG,ew,O,ex,u,eN]),e$=(0,l.useMemo)(function(){if(eO)return(0,k.jsx)(K.C,{startTime:ej,duration:ek,onClose:eP})},[eO,ej,eP,ek]);return _&&p&&d&&!ey?null:(0,k.jsxs)(tY,{children:[e$,(0,k.jsxs)(t9,{onDrop:function(e){return e.preventDefault()},onDragOver:function(e){return e.preventDefault()},children:[!eI&&ez,(0,k.jsxs)(t3,{$isCourse:D,children:[eU,(0,k.jsx)(X,{})]})]}),(0,k.jsx)(tV,{maintenanceBannerVisible:eO})]})}),na=n(66409),ns=g.ZP.div.withConfig({displayName:"styled__MobileLayoutHeaderWrapper",componentId:"sc-1ureqtt-1"})(["border-bottom:1px solid ",";background-color:",";position:sticky;z-index:1101;height:52px;width:100%;top:0px;"],v.O9.n3,v.O9.n1),nl=g.ZP.div.withConfig({displayName:"styled__UserCardWrapper",componentId:"sc-1ureqtt-2"})(["padding:0px 13px 16px 13px;border-bottom:1px solid ",";"],v.O9.n3),nc=g.ZP.div.withConfig({displayName:"styled__TopSection",componentId:"sc-1ureqtt-3"})(["background-color:",";flex-direction:column;display:flex;width:100%;gap:16px;"],v.O9.n1),nu=(0,l.memo)(function(e){var t=e.items,n=e.currentValue,r=(0,c.useRouter)(),o=(0,l.useCallback)(function(e,n){var o,i=null==t?void 0:t.find(function(e){return e.value===n});i.link&&(0,V.VF)(r,i.link),null===(o=i.onClick)||void 0===o||o.call(i)},[t,r]),i=(0,l.useMemo)(function(){var e;return null!==(e=null==t?void 0:t.map(function(e){var t=e.value,n=e.text,r=e.stat,o=e.dataTestId;return{id:t,label:"number"==typeof r?"".concat(n," ").concat(r):n,dataTestId:o}}))&&void 0!==e?e:[]},[t]);return(0,k.jsx)(H.m,{tabs:i,activeTab:n,onChangeTab:o,style:{borderBottom:"1px solid ".concat(v.O9.n3)}})});function nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function np(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nd(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nd(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nf=(0,l.memo)(function(e){var t,n=(0,C.bI)("self"),r=n.dispatch,o=n.self,i=e.group,a=e.selected,s=e.canAccessGroup,u=(0,c.useRouter)().query,d=(0,l.useMemo)(function(){var e,t;return JSON.parse(null!==(e=null==i||null===(t=i.metadata)||void 0===t?void 0:t.tabs)&&void 0!==e?e:"{}")},[i]),p=(0,c.useRouter)(),f=(0,m.CP)({user:o,member:null==o?void 0:o.member,group:i}),h=(null==i||null===(t=i.metadata)||void 0===t?void 0:t.archived)===1,v="userMembership";f&&(v=h?"adminBilling":"adminInvite");var b=(0,l.useCallback)(function(){r("setSettingsModalState",function(e){return np(np({},e),{},{settingsModal:v})})},[r,v]),g=(0,l.useMemo)(function(){if((null==i?void 0:i.name)==="games")return[{value:eJ.t5.GroupDefaultNewsfeed,text:"Community",onClick:function(){(0,V.VF)(p,(0,G.AZ)({groupName:null==i?void 0:i.name,sortType:(0,G.hK)(u)}))}},{value:eJ.t5.GroupDefaultClassroom,text:"Classroom",onClick:function(){(0,V.VF)(p,(0,G.v0)({group:i}))}},{value:eJ.t5.GroupDefaultCalendar,text:"Calendar",onClick:function(){(0,V.VF)(p,(0,G.dg)({group:i}))}},{value:eJ.t5.GroupDefaultMembers,text:"Members",onClick:function(){(0,V.VF)(p,(0,G.DW)({group:i}))}},{value:eJ.t5.GroupDefaultLeaderboards,text:"Leaderboards",onClick:function(){p.push("/games/-/leaderboards?mrr=true")}},{value:eJ.t5.GamesAffiliates,text:"Affiliates",onClick:function(){return p.push("/games/affiliates")}}];var e,t,n=[{value:eJ.t5.GroupDefaultNewsfeed,text:"Community",onClick:function(){(0,V.VF)(p,(0,G.AZ)({groupName:null==i?void 0:i.name,sortType:(0,G.hK)(u)}))}}];return null!=d&&null!==(e=d.classroom)&&void 0!==e&&e.visible&&n.push({value:eJ.t5.GroupDefaultClassroom,text:"Classroom",onClick:function(){(0,V.VF)(p,(0,G.v0)({group:i}))}}),null!=d&&null!==(t=d.calendar)&&void 0!==t&&t.visible&&n.push({value:eJ.t5.GroupDefaultCalendar,text:"Calendar",onClick:function(){(0,V.VF)(p,(0,G.dg)({group:i}))}}),n.push({value:eJ.t5.GroupDefaultMembers,text:"Members",onClick:function(){(0,V.VF)(p,(0,G.DW)({group:i}))}}),s&&n.push({value:eJ.t5.GroupDefaultLeaderboards,text:"Leaderboards",onClick:function(){(0,V.VF)(p,(0,G.Xt)({group:i}))}}),n.push({value:eJ.t5.GroupDefaultAbout,text:"About",onClick:function(){(0,V.VF)(p,(0,G.jQ)({group:i}))}}),(0,m.tf)({member:null==o?void 0:o.member,group:i})&&n.push({value:eJ.t5.GroupDefaultSettings,text:"Settings",onClick:b}),n},[i,b,d,s,u,p,o]);return(0,k.jsx)(nu,{items:g,currentValue:a})});function nm(e){var t=e.user,n=e.group,r=e.selected,o=(0,c.useRouter)(),i=[{value:eJ.t5.UserProfilePosts,text:"Contributions",onClick:function(){(0,V.VF)(o,(0,G.sB)({userName:t.name,group:n,tab:eJ.t5.UserProfilePosts}))}},{value:eJ.t5.UserProfileFollowers,text:"Followers",onClick:function(){(0,V.VF)(o,(0,G.sB)({userName:t.name,group:n,tab:eJ.t5.UserProfileFollowers}))}},{value:eJ.t5.UserProfileFollowing,text:"Following",onClick:function(){(0,V.VF)(o,(0,G.sB)({userName:t.name,group:n,tab:eJ.t5.UserProfileFollowing}))}}];return(0,k.jsx)(nu,{items:i,currentValue:r})}nm.defaultProps={selected:eJ.t5.UserProfileDefaultItem};var nh=(0,l.memo)(nm),nv=(0,l.memo)(function(e){var t=e.menuName,n=e.menuItem,r=e.canAccessGroup,o=(0,C.bI)("currentGroup","currentUser"),i=o.currentGroup,a=o.currentUser;switch(t){case eJ.K0.GroupDefault:return(0,k.jsx)(nf,{group:i,selected:n,canAccessGroup:r});case eJ.K0.UserProfile:return(0,k.jsx)(nh,{user:a,group:i,selected:n});default:return null}}),nb=n(34811),ng=g.ZP.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-y3srqb-0"})(["position:fixed;bottom:0;width:100%;height:",";background-color:",";border-top:",";display:flex;justify-content:space-between;padding:0 24px;z-index:1299;visibility:",";"],function(e){var t=e.$height;return"calc(env(safe-area-inset-bottom) + ".concat(t,"px)")},v.O9.n1,function(e){var t=e.$noBorder;return"1px solid ".concat(t?"transparent":v.O9.n3)},function(e){return e.$visible?"visible":"hidden"}),nx=g.ZP.div.withConfig({displayName:"styled__NavButtonWrapper",componentId:"sc-y3srqb-1"})(["position:relative;padding-top:5px;"]),ny=(0,g.ZP)(S.z).withConfig({displayName:"styled__NavButton",componentId:"sc-y3srqb-2"})(["width:50px;height:50px;&:active{color:",";background-color:",";}svg{color:",";}"],v.O9.n7,v.O9.n3,function(e){return e.$active?v.O9.n7:v.O9.n5}),nw=g.ZP.div.withConfig({displayName:"styled__NavProbileButton",componentId:"sc-y3srqb-3"})(["display:flex;align-items:center;justify-content:center;width:50px;height:50px;border-radius:50%;span{outline:",";outline-offset:-1px;}&:active{color:",";background-color:",";}"],function(e){return e.$active&&"1px solid ".concat(v.O9.n7)},v.O9.n7,v.O9.n3),nC=(0,g.ZP)(el).withConfig({displayName:"styled__UnreadNotificationBubble",componentId:"sc-y3srqb-4"})(["position:absolute;top:5px;left:34px;"]),nj=(0,g.ZP)(nC).withConfig({displayName:"styled__UnreadChatNotificationBubble",componentId:"sc-y3srqb-5"})(["left:37px;"]),nk=(0,l.memo)(function(){var e,t=(0,C.bI)("self","unreadChat","unread","isApp","currentGroup","mobileBottomOffset"),n=t.self,r=t.unreadChat,i=t.unread,s=t.isApp,u=t.currentGroup,p=t.mobileBottomOffset,m=t.dispatch,h=(0,c.useRouter)(),v=(0,l.useRef)(),b=(0,G.iH)(h),g=(0,G.mp)(h),x=(0,G.wl)(h),y=(0,G.mS)(h),w=(0,G.DG)(h),O=(0,G.n3)(h),P=(0,l.useMemo)(function(){return(0,G.pi)(h)&&(0,G.wg)(h.query)===(null==n?void 0:n.name)},[h,null==n?void 0:n.name]),D=(0,l.useCallback)(function(){(0,V.VF)(h,(0,G.kr)({}))},[h]),I=(0,l.useCallback)(function(){(0,V.VF)(h,(0,G.Iu)())},[h]),Z=(0,l.useCallback)(function(){(0,V.VF)(h,(0,G.yq)())},[h]),S=(0,l.useCallback)(function(e){(0,V.VF)(h,(0,G.sB)({userName:null==n?void 0:n.name,group:e?{name:e}:void 0}))},[h,null==n?void 0:n.name]),_=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=u&&u.name)){e.next=2;break}return e.abrupt("return",S(u.name));case 2:return e.next=4,d.Z.readSelfGroups({limit:11});case 4:if(o=(r=e.sent).data,!r.error){e.next=9;break}return e.abrupt("return",S());case 9:if(!((i=(0,f.tv)({key:f.H0.lastGroupAccessed}).value)&&null!=o&&null!==(t=o.groups)&&void 0!==t&&t.some(function(e){return e.name===i}))){e.next=12;break}return e.abrupt("return",S(i));case 12:S(null==o||null===(n=o.groups)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.name);case 13:case"end":return e.stop()}},e)})),[u,S]);(0,l.useEffect)(function(){if(v.current&&(m(e0.qp,{type:j.V.NAV_BAR,height:null!==(e=null===(t=v.current)||void 0===t?void 0:t.offsetHeight)&&void 0!==e?e:0}),"ResizeObserver"in window)){var e,t,n=new ResizeObserver(function(e){var t,n=null==e||null===(t=e[0])||void 0===t?void 0:t.borderBoxSize;null!=n&&n.length&&m(e0.qp,{type:j.V.NAV_BAR,height:n[0].blockSize})});return n.observe(v.current,{box:"border-box"}),function(){n.disconnect(),m(e0.qp,{type:j.V.NAV_BAR,height:null})}}},[m]);var M=null==p||null===(e=p[j.V.NAV_BAR])||void 0===e?void 0:e.visible;return(0,k.jsxs)(ng,{ref:v,$height:s?80:61,$noBorder:w||O,$visible:M,children:[(0,k.jsx)(nx,{children:(0,k.jsx)(ny,{icon:"Home",iconSize:20,variant:"icon-borderless",onClick:D,$active:b||g})}),(0,k.jsxs)(nx,{children:[(0,k.jsx)(ny,{icon:"Chat",iconSize:21,variant:"icon-borderless",onClick:I,$active:x}),(0,k.jsx)(nj,{value:r||0,onClick:I})]}),(0,k.jsxs)(nx,{children:[(0,k.jsx)(ny,{icon:"Bell",iconSize:22,variant:"icon-borderless",onClick:Z,$active:y}),(0,k.jsx)(nC,{value:i||0,onClick:Z})]}),(0,k.jsx)(nx,{children:(0,k.jsx)(nw,{onClick:_,$active:P,children:(0,k.jsx)(ex.Z,{disableLink:!0,size:30,user:n})})})]})});function nO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nO(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nD=(0,l.memo)(function(e){var t=e.content,n=e.settings,r=e.canAccessGroup,o=e.maintenance,i=e.isApp,a=e.self,s=(0,C.bI)("isChat","currentUser","hasNoGroups","mobileBottomOffset","settingsModal"),u=s.isChat,d=s.currentUser,p=s.hasNoGroups,f=s.mobileBottomOffset,h=s.settingsModal,b=(0,c.useRouter)(),g=(0,G.Tx)(b),x=(0,G.pi)(b),y=(0,G.g7)(b),w=(0,G.ZZ)(b),O=(0,G.kA)(b),P=(0,G.zh)(b),D=(0,G.aR)(b),I=(0,G.Xx)(b),Z=(0,G.J5)(b),S=(0,G.wl)(b),_=(0,G.mS)(b),M=(0,G.DG)(b),N=(0,l.useRef)((0,G.Sw)(b)),E=(0,K.Z)(o),A=E.maintenanceStartTime,L=E.maintenanceDuration,T=E.showMaintenanceBanner,F=E.closeMaintenanceBanner,B=(0,l.useMemo)(function(){if(T)return(0,k.jsx)(K.C,{startTime:A,duration:L,onClose:F})},[T,F,A,L]),R=(0,l.useMemo)(function(){return a&&!y&&!g&&!h&&!N.current&&(null==b?void 0:b.asPath)!=="/games/onboarding"},[a,y,g,h,b]),z=(0,l.useMemo)(function(){var e,t,n,r,o=u||w||y||O||I||S||_?0:64;return R&&!u&&(o+=null!==(n=null==f||null===(r=f[j.V.NAV_BAR])||void 0===r?void 0:r.offset)&&void 0!==n?n:0),{paddingBottom:o,height:u?"calc(100% - ".concat(null!==(e=null==f||null===(t=f[j.V.SAFE])||void 0===t?void 0:t.offset)&&void 0!==e?e:0,"px)"):void 0,backgroundColor:M||u?v.O9.n1:void 0}},[u,w,y,O,I,S,_,R,f,M]),U=(0,l.useMemo)(function(){return D||M||S||_?{backgroundColor:v.O9.n1}:{}},[D,M,S,_]),$=(0,l.useMemo)(function(){if(n.showMobileHeaderCard&&d)return(0,k.jsx)(nl,{children:(0,k.jsx)(tI,{})})},[d,n]),W=(0,l.useMemo)(function(){var e;return y&&!r||P?null:null!=n&&null!==(e=n.secondaryMenusItems)&&void 0!==e&&e.length?(0,k.jsx)(nu,{items:n.secondaryMenusItems,currentValue:null==n?void 0:n.secondaryMenusCurrentValue}):null!=n&&n.hideMobileMainMenu||g||w?void 0:(0,k.jsx)(nv,{menuName:null==n?void 0:n.mainMenuName,menuItem:null==n?void 0:n.mainMenuItem,canAccessGroup:r})},[n,r,w,g,y,P]),H=(0,l.useMemo)(function(){return u||y||O||I||g||w||Z||S||_||M?0:x?10:16},[u,x,y,O,I,w,Z,g,S,_,M]),q=(0,l.useMemo)(function(){return(!p&&a||!a&&i)&&(null==b?void 0:b.route)==="/"?null:(0,k.jsx)(ns,{children:(0,k.jsx)(nb.Z,nP({canAccessGroup:r},e))})},[i,e,r,b,a,p]);return(0,k.jsxs)(na.ZP,{style:U,children:[(0,k.jsxs)("div",{style:z,children:[B,q,(0,k.jsxs)(nc,{style:{marginBottom:H,gap:x?0:void 0},children:[$,W]}),(0,k.jsx)(t,nP({},e))]}),R&&(0,k.jsx)(nk,{}),(0,k.jsx)(X,{}),(0,k.jsx)(e3.Z,{reason:m.lT.CreateGroup,showSignUp:!0,createGroup:!0})]})}),nI=n(11462),nZ=n(73935),nS=g.ZP.div.withConfig({displayName:"styled__BaseModalWrapper",componentId:"sc-z30hfz-0"})(["height:100%;width:100%;position:fixed;overflow:hidden;display:flex;flex-direction:column;align-items:center;top:0px;left:0px;z-index:1300;inset:0px;"]),n_=g.ZP.div.withConfig({displayName:"styled__ModalBackground",componentId:"sc-z30hfz-1"})(["background-color:rgba(0,0,0,0.75);position:fixed;height:100%;width:100%;z-index:-1;left:0;top:0;"]),nM=g.ZP.div.withConfig({displayName:"styled__ModalContent",componentId:"sc-z30hfz-2"})(["width:791px;margin-top:62px;margin-bottom:0px;overflow:auto;border-radius:10px;background-color:",";"," ",""],v.O9.n1,Y.Wn,function(e){return e.$sharpCorners&&"border-radius: 0px;"}),nN=(0,g.ZP)(S.z).withConfig({displayName:"styled__CloseButton",componentId:"sc-z30hfz-3"})(["z-index:1301;position:fixed;top:8px;left:8px;background:",";color:",";"],v.O9.n5,v.O9.n1),nE=n(88889),nA=["rootId","onEscapeDisabled","disableEscape","children","onClose","open"];function nL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nL(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nF=(0,l.memo)(function(e){var t=e.rootId,n=e.onEscapeDisabled,r=e.disableEscape,o=e.children,i=e.onClose,a=e.open,s=(0,b.Z)(e,nA),c=(0,C.bI)("sharpCorners").sharpCorners,u=(0,l.useRef)();(0,nE.P)(a),(0,l.useEffect)(function(){if(a){var e=function(e){"modalBackground"===e.target.id&&(u.current.scrollTop=u.current.scrollTop+e.deltaY)};return window.addEventListener("wheel",e),function(){window.removeEventListener("wheel",e)}}},[a]);var d=(0,l.useCallback)(function(){if(!r){i();return}n&&n()},[n,r,i]);(0,l.useEffect)(function(){if(a){var e=function(e){"Escape"===e.key&&d()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}},[r,d,i,a]);var p=(0,l.useMemo)(function(){if(!r)return(0,k.jsx)(nN,{icon:"Close",onClick:d,variant:"icon-borderless"})},[r,d]);return a?(0,nZ.createPortal)((0,k.jsxs)(nS,nT(nT({className:"skool-ui-scrolling-modal"},s),{},{onClose:d,children:[(0,k.jsx)(n_,{onClick:d,id:"modalBackground"}),(0,k.jsx)(nM,{id:"modal-scroll-container",ref:u,$sharpCorners:c,children:(0,k.jsx)("div",{style:{overflow:"visible"},children:o})}),p]})),document.getElementById(void 0===t?"__next":t)):null});function nB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nB(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nz=function(e,t){var n=new URL(window.document.URL);n.searchParams.set(e,t),window.history.replaceState(null,"",n.toString())},nG=(0,l.memo)(function(e){var t,n=e.isBot,r=(0,C.bI)("postDetailModal","currentGroup","disableEscape","postData","reloadOnModalClose","previousRouterState","postListData"),i=r.dispatch,s=r.postDetailModal,u=r.currentGroup,p=r.disableEscape,f=r.postData,m=r.reloadOnModalClose,h=r.previousRouterState,v=r.postListData,b=(0,l.useState)(!1),g=b[0],x=b[1],y=(0,c.useRouter)(),w=null===(t=y.query)||void 0===t?void 0:t.postName,j=null==u?void 0:u.name,O=(0,l.useState)(null),P=O[0],D=O[1],I=(0,l.useState)(null),Z=I[0],S=I[1],_=(0,l.useState)(!1),M=_[0],N=_[1];(0,l.useEffect)(function(){if(s){var e=v.find(function(e){return e.post.name===w});if(null!=e&&null!==(t=e.post)&&void 0!==t&&null!==(t=t.metadata)&&void 0!==t&&t.pollData){var t,n,r=(0,U.W4)(JSON.parse(e.post.metadata.pollData));D(nR(nR({},r),{},{id:e.post.metadata.poll,totalVotes:null==r||null===(n=r.entries)||void 0===n?void 0:n.reduce(function(e,t){return e+t.count},0)}))}}else D(null)},[s,v,w]);var E=(0,l.useCallback)(function(){(0,o.Z)(a().mark(function e(){var t,n,r,o,l,c,u,p,f,m,h,v,b;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.getPostDetail(nR({},s));case 2:if(l=e.sent.data){e.next=6;break}return e.abrupt("return",(0,V.VF)(y,(0,G.P_)({groupName:s.groupName,postName:s.postName})));case 6:c=l.postTree,u=l.followers,p=l.follow,null!=c&&null!==(t=c.post)&&void 0!==t&&null!==(t=t.metadata)&&void 0!==t&&t.pollData&&S(nR(nR({},h=(0,U.W4)(JSON.parse(null==c||null===(f=c.post)||void 0===f||null===(f=f.metadata)||void 0===f?void 0:f.pollData))),{},{id:l.postTree.post.metadata.poll,totalVotes:null===(m=h.entries)||void 0===m?void 0:m.reduce(function(e,t){return e+t.count},0)})),N(!!(null!=l&&null!==(n=l.postTree)&&void 0!==n&&null!==(n=n.post)&&void 0!==n&&null!==(n=n.metadata)&&void 0!==n&&n.pinned)),i(e0.aK,nR(nR({},c),{},{followers:u,followingPost:"on"===p,selectedPostID:s.selectedPostID||(null===(r=y.query)||void 0===r?void 0:r.selectedPostID),initialFetchDone:!0})),(v=nR({},l.postTree.post)).metadata.hasNewComments=0,i(e0.gQ,v),!s.selectedPostID&&null!==(o=y.query)&&void 0!==o&&o.selectedPostID&&nz("p",null===(b=y.query)||void 0===b?void 0:b.selectedPostID),x(!1);case 16:case"end":return e.stop()}},e)}))()},[s,y,i]);(0,l.useEffect)(function(){w&&i(e0.UG,{postName:w,groupName:j}),w||(i(e0.UG,null),i(e0.aK,null))},[w,j,i]),(0,l.useEffect)(function(){s&&!f&&(x(!0),E())},[s,f,E]),(0,l.useEffect)(function(){!w&&m&&(0,V.H5)(y,!0)},[w,m,y]),(0,l.useEffect)(function(){null!=s&&s.replace&&E()},[s,E]),(0,l.useEffect)(function(){window.onpopstate=function(){i(e0.WT,function(){return{chatModalProps:{}}})}},[i]);var A=(0,l.useCallback)(function(){i(e0.UG,null),i(e0.aK,null),h.asPath?y.push(h.asPath,void 0,{shallow:!0,scroll:!1}):y.back()},[i,null==h?void 0:h.asPath,y]),L=(0,l.useMemo)(function(){if(!s)return null;var e,t=f;return(g&&(t=v.find(function(e){return e.post.name===w})),t)?(t.children&&(t=nR(nR({},t),{},{children:void 0})),(0,k.jsx)(nI.Z,{isModal:!0,postTree:t||{},selectedPostID:null===(e=t)||void 0===e?void 0:e.selectedPostID,isPinned:M,loading:g,poll:P,updatePoll:Z,setUpdatePoll:S,isBot:n})):null},[g,f,v,s,w,Z,P,M,n]),T=(0,l.useCallback)(function(){i(e0.Ek,function(){return{showInputCancelMessage:!0}})},[i]);return(0,k.jsx)(nF,{open:!((!f||!s)&&!g),onClose:A,disableEscape:p,onEscapeDisabled:T,children:L})}),nU=n(50591),n$=n(57619),nW=(0,g.iv)(["height:772px;width:950px;"]),nH=g.ZP.div.withConfig({displayName:"styled__ChatContainer",componentId:"sc-f4viec-0"})(["height:542px;width:632px;display:flex;justify-content:center;align-items:center;flex-direction:column;background:",";border-radius:10px;overflow:hidden;border:1px solid ",";"," ",""],v.O9.n1,v.O9.n3,Y.Wn,function(e){return e.$expanded&&nW}),nq=g.ZP.div.withConfig({displayName:"styled__OnlineIcon",componentId:"sc-f4viec-1"})(["position:absolute;bottom:0px;right:-8px;width:16px;height:16px;background-color:",";border-radius:50%;margin:0px 4px;border:2px solid ",";"],v.O9.s2,v.O9.n1),nV=g.ZP.div.withConfig({displayName:"styled__ChatModalHeader",componentId:"sc-f4viec-2"})(["display:flex;align-items:center;gap:8px;width:100%;> div:last-child{min-width:0px;}"]),nY=n(43201);function nJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nJ(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nK=(0,l.memo)(function(){var e,t=(0,l.useState)(!1),n=t[0],i=t[1],s=(0,l.useState)(!1),c=s[0],u=s[1],p=(0,l.useState)(!1),m=p[0],h=p[1],b=(0,C.bI)("conversation","onlineStatuses","chatModalProps","disableEscapeChat"),g=b.conversation,x=b.onlineStatuses,y=b.chatModalProps,w=b.disableEscapeChat,j=b.dispatch,O=y.id,P=y.lastRead,D=(0,l.useState)(eQ()().unix()),I=D[0],Z=D[1],_=(0,l.useState)(null==g||null===(e=g.channel)||void 0===e||null===(e=e.user)||void 0===e?void 0:e.metadata.lastOffline),M=_[0],N=_[1];(0,l.useEffect)(function(){var e=setInterval(function(){Z(function(e){var t=eQ()();return eQ().unix(e).minutes()===t.minutes()?e:t.unix()})},1e3);return function(){clearInterval(e)}},[]),(0,l.useEffect)(function(){var e=(0,f.tv)({key:f.H0.chatExpanded}).value;u(!!(void 0===e?{}:e).expanded)},[]),(0,l.useEffect)(function(){var e;N(null==g||null===(e=g.channel)||void 0===e||null===(e=e.user)||void 0===e?void 0:e.metadata.lastOffline)},[g]),(0,l.useEffect)(function(){var e,t=(null==g||null===(e=g.channel)||void 0===e?void 0:e.user)||{};void 0===x[t.id]||x[t.id]||N(1e6*Date.now())},[g,x]);var E=(0,l.useCallback)(function(e){var t=e.online,n=e.topic.mainId;j(e0.WT,function(e){return{onlineStatuses:nX(nX({},e.onlineStatuses),{},(0,r.Z)({},n,t))}})},[j]);(0,l.useEffect)(function(){var e,t=null==g||null===(e=g.channel)||void 0===e?void 0:e.user.id;if(t)return(0,nU.Ld)([(0,nU.Cq)(t)],E)},[g,E]),(0,l.useEffect)(function(){O||j(e0.WT,function(){return{conversation:null}})},[O,j]);var A=(0,l.useCallback)(function(){j(e0.WT,function(){return{chatModalProps:{}}})},[j]),L=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.blockChat({userId:null==g?void 0:g.channel.user.id});case 2:h(function(e){return!e});case 3:case"end":return e.stop()}},e)})),[g]),T=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.unblockChat({userId:null==g?void 0:g.channel.user.id});case 2:h(function(e){return!e});case 3:case"end":return e.stop()}},e)})),[g]),F=(0,l.useCallback)(function(){u(function(e){return(0,f.co)({key:f.H0.chatExpanded,value:{expanded:!e}}),!e})},[]),B=(0,l.useMemo)(function(){if(!g)return null;var e,t=g.channel,r=t.user,o=t.metadata,i=o.blocked,a=o.otherUserTz,s=[{label:"View profile",link:(0,G.sB)({userName:r.name}).as,newTab:!0},{label:"".concat(i?"Unblock":"Block"," ").concat(r.firstName," ").concat(r.lastName),onClick:i?T:L}];return(0,k.jsxs)(e5.X,{style:{width:"100%",backgroundColor:v.O9.n1,borderBottom:"1px solid ".concat(v.O9.n3),boxShadow:n?"0 3px 2px -2px rgba(0,0,0,.1)":"none"},alignItems:"center",justifyContent:"space-between",padding:"12px 16px",gap:8,children:[(0,k.jsxs)(nV,{children:[(0,k.jsxs)("div",{style:{position:"relative"},children:[(0,k.jsx)(ex.Z,{user:r,size:40,newTab:!0}),x[r.id]&&(0,k.jsx)(nq,{})]}),(0,k.jsxs)(eg.s,{children:[(0,k.jsx)(ey.Z,{user:r,typographyVariant:"t6"}),(0,k.jsxs)(e4.Z,{variant:"t11",color:v.O9.n5,children:[x[r.id]?"online now":M?"active ".concat((0,e1.ur)({value:M,justNow:!1,ago:!0})," ago"):"not active yet",I&&a&&(0,k.jsx)("span",{children:" (".concat(eQ().unix(I).tz(a).format("h:mma")," in ").concat(null==a||null===(e=a.split("/")[1])||void 0===e?void 0:e.replace("_"," ").replace(/_/g," ").replace(/Kiev/,"Kyiv"),")")})]})]})]}),(0,k.jsxs)(e5.X,{children:[(0,k.jsx)(S.z,{variant:"icon-borderless",icon:c?"Minimize":"Expand",iconSize:14,onClick:F}),(0,k.jsx)(ee.h_,{options:s,variant:"icon-borderless",icon:"HorizontalDots"}),(0,k.jsx)(S.z,{variant:"icon-borderless",icon:"Close",iconSize:14,onClick:A})]})]})},[F,x,g,A,n,L,T,I,M,c]),R=(0,l.useMemo)(function(){return O?(0,k.jsxs)(nH,{$expanded:c,children:[B,(0,k.jsx)(n$.Z,{channelId:O,lastRead:P,contentOnly:!0,onClose:A,setShowCrease:i},"chat-".concat(m?"refresh":"initial"))]}):null},[O,P,B,A,m,c]);return(0,k.jsx)(nY.I,{open:!!O,onClose:A,disableEscape:w,children:R})}),nQ=n(64597),n0=(0,l.memo)(function(){var e=(0,C.bI)("showChatLimitModal"),t=e.showChatLimitModal,n=e.dispatch,r=(0,l.useCallback)(function(){return n(e0.vb,!1)},[n]);return(0,k.jsx)(nQ.T,{header:"You hit your chat limit",open:t,confirmLabel:"Got it",onClose:r,onConfirm:r,children:"You get 10 new chat conversations per week. Use them to make genuine connections with people. Spamming/pitching via chat may result in your chat being disabled."})}),n1=n(23450),n2=n.n(n1),n9=g.ZP.div.withConfig({displayName:"styled__UserBio",componentId:"sc-190yi79-0"})(["",";",";"],Z.c.t9,Z.c.ellipsis),n3=g.ZP.div.withConfig({displayName:"styled__MessageText",componentId:"sc-190yi79-1"})(["color:",";margin:",";",";"],v.O9.n5,function(e){return e.theme.isMobile?"18px 16px":"32px 16px"},Z.c.t7),n5=(0,g.ZP)(eg.s).withConfig({displayName:"styled__PostLikesContainer",componentId:"sc-190yi79-2"})(["align-items:center;max-height:500px;overflow:hidden;border-radius:10px;"]),n6=g.ZP.div.withConfig({displayName:"styled__PostLikesContent",componentId:"sc-190yi79-3"})(["flex:1 1 auto;height:calc(100vh - 82px);min-height:0;width:100%;position:relative;overflow-y:auto;"]),n4=(0,g.ZP)(e5.X).withConfig({displayName:"styled__HeaderRow",componentId:"sc-190yi79-4"})(["border-bottom:1px solid ",";box-shadow:0 3px 2px -2px rgba(0,0,0,0.1);align-items:center;justify-content:space-between;padding:0 16px;width:100%;"],v.O9.n3),n8=g.ZP.div.withConfig({displayName:"styled__PostLikesHeader",componentId:"sc-190yi79-6"})(["",";padding:16px 0;"],Z.c.t6),n7=(0,g.ZP)(S.z).withConfig({displayName:"styled__PostLikesChatButton",componentId:"sc-190yi79-7"})(["height:40px;padding:0 12px;",""],Z.c.t8),re=(0,g.ZP)(S.z).withConfig({displayName:"styled__PostLikesLoadMore",componentId:"sc-190yi79-8"})(["width:",";margin:auto;"],function(e){return e.theme.isMobile?"100%":"auto"}),rt=n(16531),rn=function(e){var t,n,r=e.user,o=e.onClick,i=e.group,a=(0,C.bI)("isMobile","self"),s=a.isMobile,c=a.self,u=(0,en.C1)(),d=(0,Q.Z)(u,3),p=d[0],f=d[1],m=d[2],v=(0,l.useCallback)(function(){return o(r.id)},[o,r.id]),b=1===r.metadata.chatRequest?s?(0,k.jsx)(S.z,{variant:"icon",icon:"Chat",iconSize:17,onClick:function(){return v(r.id)}}):(0,k.jsx)(n7,{variant:"secondary",label:"Chat",icon:"Chat",iconSize:18,onClick:function(){return v(r.id)}}):s?(0,k.jsx)(S.z,{variant:"icon-disabled",icon:"ChatOff",iconSize:17,onClick:f}):(0,k.jsx)(n7,{variant:"disabled",label:"Chat",icon:"ChatOff",iconSize:18,onClick:f});return(0,k.jsxs)(e5.X,{padding:"12px 16px",alignItems:"center",style:{width:"100%",height:72},children:[(0,k.jsx)(eG.x,{marginRight:8,paddingTop:6,children:(0,k.jsx)(ex.Z,{user:r,size:40,group:i,userPreview:!0})}),(0,k.jsx)(e5.X,{style:{width:"100%",minWidth:0},children:(0,k.jsxs)(eg.s,{style:{width:"100%"},children:[(0,k.jsx)(ey.Z,{user:r,group:i,userPreview:!0,typographyVariant:"t5",maxWidth:s?"100%":275}),s?"":(0,k.jsx)(e6.Z,{user:r,group:i,children:(0,k.jsx)(n9,{children:(null==(t=(0,h.Kv)({content:null===(n=r.metadata)||void 0===n?void 0:n.bio}))?void 0:t.length)>50?"".concat(t.slice(0,50).trim(),"..."):t})})]})}),(null==c?void 0:c.id)===r.id?"":(0,k.jsx)(eg.s,{paddingLeft:8,marginLeft:"auto",children:b}),p&&(0,k.jsx)(e9.Z,{user:r,onClose:m})]})},rr=(0,l.memo)(function(){var e,t=(0,C.bI)("postLikeModalProps","isMobile"),n=t.postLikeModalProps,r=t.isMobile,i=t.dispatch,s=n.post,p=n.group,f=(0,c.useRouter)(),m=function(){return{users:[],totalUpvoteUsers:0,cursor:""}},h=(0,l.useState)(m()),v=h[0],b=h[1],g=(0,l.useState)(""),x=g[0],y=g[1],w=(0,l.useState)("upvotes"),j=w[0],O=w[1],P=(0,l.useState)([]),D=P[0],I=P[1];(0,l.useEffect)(function(){(0,o.Z)(a().mark(function e(){var t,n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,d.Z.listPostVoteUsers({postID:s.id,tab:j,cursor:x,limit:10});case 4:if(n=(t=e.sent).error,r=t.data,!n){e.next=10;break}return i(e0.bI,{message:"Likes request error",severity:"error"}),e.abrupt("return");case 10:x?I(function(e){return e.concat(r.users)}):I(r.users),b(r);case 12:case"end":return e.stop()}},e)}))()},[s,x,j,i]);var Z=(0,l.useCallback)(function(){i(e0.Qg,function(){return{postLikeModalProps:{}}}),y(""),b(m()),O("upvotes"),I([])},[i]);(0,l.useEffect)(function(){var e=function(){Z()};return u().events.on("routeChangeStart",e),function(){u().events.off("routeChangeStart",e)}},[Z]);var _=(0,l.useCallback)((e=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,o.Z)(a().mark(function e(){var n,o,s,l,c,u;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.sendChatRequest({userId:t,groupId:p.id});case 2:if(o=(n=e.sent).data,(null==(s=n.error)?void 0:s.status)!==429){e.next=7;break}return e.abrupt("return",i(e0.vb,!0));case 7:if(!o){e.next=19;break}if(c=(l=o.channel).id,u=l.metadata.lastRead,!r){e.next=16;break}return e.next=14,(0,V.VF)(f,(0,G.rv)({channelId:c,chatLastRead:u}));case 14:e.next=17;break;case 16:i(e0.WT,function(){return{chatModalProps:{id:c,lastRead:u}}});case 17:e.next=20;break;case 19:i(e0.bI,{message:"Chat request error",severity:"error"});case 20:case"end":return e.stop()}},e)}))();case 1:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),[p,i,r,f]),M=(0,l.useMemo)(function(){return(0,k.jsxs)(n4,{children:[(0,k.jsx)(n8,{children:"".concat(n2()("Like",v.totalUpvoteUsers,!0))}),(0,k.jsx)(S.z,{variant:"icon-borderless",icon:"Close",onClick:Z,iconSize:16.66})]})},[Z,v]),N=(0,l.useMemo)(function(){if(!s)return null;var e,t=null!==(e=v.users)&&void 0!==e&&e.length?"":"No likes yet.",n=function(e){r&&Z(),_(e)};return(0,k.jsxs)(n5,{children:[M,(0,k.jsxs)(n6,{children:[null!=D&&D.length?D.map(function(e,t){return(0,k.jsx)(rn,{user:e,onClick:n,group:p},t)}):null,t?(0,k.jsx)(n3,{children:t}):null,v.hasMore&&null!=D&&D.length?(0,k.jsx)(eg.s,{padding:"16px 0",margin:"0 16px",children:(0,k.jsx)(re,{variant:"secondary",label:"Load More",onClick:function(){return y(v.cursor)}})}):null]})]})},[s,M,_,Z,r,v,D,p]);return(0,k.jsx)(rt.u_,{open:!!s,onClose:Z,wrapperStyle:{padding:0},size:"small",children:N})}),ro=(0,g.iv)(["flex-direction:column;"]),ri=g.ZP.div.withConfig({displayName:"styled__LevelChart",componentId:"sc-1x75m5m-0"})(["width:100%;display:flex;",""],function(e){return e.theme.isMobile&&ro}),ra=(0,g.iv)(["width:100%;"]),rs=g.ZP.div.withConfig({displayName:"styled__LevelColumn",componentId:"sc-1x75m5m-1"})(["width:50%;display:flex;flex-direction:column;"," ",""],Z.c.t7,function(e){return e.theme.isMobile&&ra}),rl=g.ZP.div.withConfig({displayName:"styled__SectionHeader",componentId:"sc-1x75m5m-2"})(["margin-bottom:4px;",""],Z.c.t5),rc=[{level:1,points:"0"},{level:2,points:"5"},{level:3,points:"20"},{level:4,points:"65"},{level:5,points:"155"}],ru=[{level:6,points:"515"},{level:7,points:"2,015"},{level:8,points:"8,015"},{level:9,points:"33,015"}],rd=(0,l.memo)(function(){var e=(0,C.bI)("showSkoolPointsInfoModal","isMobile"),t=e.showSkoolPointsInfoModal,n=e.isMobile,r=e.dispatch,o=(0,l.useCallback)(function(){r(e0.or,{showSkoolPointsInfoModal:!1})},[r]),i=(0,l.useCallback)(function(e){var t=e.level,n=e.points;return(0,k.jsx)("span",{children:"Level ".concat(t," - ").concat(n," points")},t)},[]),a=(0,k.jsxs)(rt.fe,{children:[(0,k.jsx)(rl,{children:"Points"}),(0,k.jsx)(eG.x,{marginBottom:16,children:"You earn points when other members like your posts or comments. 1 like = 1 point. This encourages users to produce quality content and interact with other members in their community."}),(0,k.jsx)(rl,{children:"Levels"}),(0,k.jsx)(eG.x,{marginBottom:16,children:"As you gain points, you level up. Your level is shown at the bottom right of your avatar. The number of points required to get to the next level is shown under your avatar on your profile page."}),(0,k.jsxs)(ri,{children:[(0,k.jsx)(rs,{children:rc.map(i)}),(0,k.jsx)(rs,{children:ru.map(i)})]})]});return(0,k.jsxs)(rt.u_,{size:"small",open:t,onClose:o,scrollable:!0,shouldFullscreenOnMobile:!0,children:[(0,k.jsx)(rt.xB,{style:{paddingTop:n?32:void 0},children:"Skool points"}),a]})}),rp=(0,l.memo)(function(){var e=(0,c.useRouter)(),t=(0,l.useCallback)(function(){(0,V.H5)(e,!0)},[e]);return(0,k.jsx)(nQ.T,{open:!0,header:"There was an issue",confirmLabel:"Refresh",onConfirm:t,children:"Skool uses first-party cookies that are essential to site usage. Please enable cookies on your device before refreshing the page."})}),rf=n(64487),rm=n(94787),rh=(0,g.ZP)(eg.s).withConfig({displayName:"styled__Wrapper",componentId:"sc-17fy7p3-0"})(["width:100%;height:100vh;justify-content:center;align-items:center;"]),rv=(0,g.ZP)(eg.s).withConfig({displayName:"styled__Card",componentId:"sc-17fy7p3-1"})(["gap:32px;border-radius:10px;border:1px solid ",";background-color:",";padding:32px;max-width:454px;align-items:center;",""],v.O9.n3,v.O9.n1,Z.c.t7),rb=g.ZP.div.withConfig({displayName:"styled__Title",componentId:"sc-17fy7p3-2"})(["text-align:center;",""],Z.c.t1),rg=g.ZP.div.withConfig({displayName:"styled__Subtitle",componentId:"sc-17fy7p3-3"})(["text-align:center;"]);function rx(){return(0,k.jsx)(rh,{children:(0,k.jsxs)(rv,{children:[(0,k.jsx)(eR.Z,{width:72}),(0,k.jsxs)(eg.s,{gap:8,children:[(0,k.jsx)(rb,{children:"Oops"}),(0,k.jsx)(rg,{children:"Sorry, something went wrong or Skool is just having a hiccup. Please try again"})]}),(0,k.jsx)(S.z,{label:"Back to Home",onClick:function(){return(0,V.VF)(u(),{href:"/",as:"/"})},style:{width:"100%"}})]})})}var ry=(0,l.memo)(function(e){var t=e.children,n=(0,C.bI)("self").self;return(0,l.useEffect)(function(){null!=n&&n.id&&rf.av({id:n.id})},[null==n?void 0:n.id]),(0,k.jsx)(rm.SV,{fallback:rx,showDialog:!1,children:t})}),rw=n(9008),rC=n.n(rw),rj=n(90116),rk=(0,g.iv)(["padding:16px 13px;height:auto;"]),rO=g.ZP.div.withConfig({displayName:"styled__TabContentWrapper",componentId:"sc-1p35nnr-0"})(["padding:24px 32px;height:100%;flex:1;position:relative;overflow:auto;",""],function(e){return e.theme.isMobile&&rk}),rP=g.ZP.div.withConfig({displayName:"styled__TabModalDesktop",componentId:"sc-1p35nnr-1"})(["height:","px;width:","px;max-height:calc(100vh - 24px);border-radius:10px;overflow:hidden;border:1px solid ",";background:",";display:flex;flex-direction:column;",""],function(e){return e.$height},function(e){return e.$width},v.O9.n3,v.O9.n1,Y.Wn),rD=g.ZP.div.withConfig({displayName:"styled__DesktopNav",componentId:"sc-1p35nnr-2"})(["width:","px;height:100%;padding:24px 16px 0px 16px;border-right:1px solid ",";"],function(e){return e.$navWidth},v.O9.n3),rI=(0,g.iv)(["background:",";color:",";pointer-events:none;&:hover{background:",";}"],v.O9.p2,v.O9.fgPrimary,v.O9.p2),rZ=(0,g.iv)(["pointer-events:none;opacity:0.33;"]),rS=g.ZP.div.withConfig({displayName:"styled__DesktopNavItem",componentId:"sc-1p35nnr-3"})(["display:flex;align-items:center;height:48px;border-radius:10px;padding:0px 16px;cursor:pointer;"," transition:background 300ms ease;&:hover{background:",";}"," ",""],Z.c.t5,v.O9.n3,function(e){return e.$active&&rI},function(e){return e.$disabled&&rZ}),r_=g.ZP.div.withConfig({displayName:"styled__DesktopBottom",componentId:"sc-1p35nnr-4"})(["display:flex;flex:1;height:calc(100% - 77px);"]),rM=(0,g.ZP)(na.ZP).withConfig({displayName:"styled__TabModalMobile",componentId:"sc-1p35nnr-5"})(["background:",";height:100%;width:100vw;display:flex;flex-direction:column;"],v.O9.n1),rN=g.ZP.div.withConfig({displayName:"styled__MobileNav",componentId:"sc-1p35nnr-6"})(["display:flex;width:100%;gap:24px;height:56px;padding:0px 13px;border-bottom:1px solid ",";overflow:auto;",""],v.O9.n3,Y.KZ),rE=(0,g.iv)(["color:",';&:after{content:"";position:absolute;bottom:0px;left:0px;height:4px;background:',";width:100%;}"],v.O9.n7,v.O9.n7),rA=g.ZP.div.withConfig({displayName:"styled__MobileNavItem",componentId:"sc-1p35nnr-7"})(["height:100%;padding:16px 0px;position:relative;color:",";white-space:nowrap;"," ",""],v.O9.n5,Z.c.t6,function(e){return e.$active&&rE}),rL=g.ZP.div.withConfig({displayName:"styled__TabModalDesktopHeader",componentId:"sc-1p35nnr-8"})(["border-bottom:1px solid ",";height:76px;"],v.O9.n3),rT=(0,l.memo)(function(e){var t=e.tabs,n=e.open,r=e.header,o=e.onClose,i=e.content,a=e.activeTab,s=e.onTabChange,c=e.width,u=void 0===c?800:c,d=e.height,p=void 0===d?554:d,f=e.navWidth,m=void 0===f?204:f,h=(0,C.bI)("isMobile").isMobile,v=(0,l.useRef)({}),b=(0,l.useRef)();(0,l.useEffect)(function(){b.current.scrollIntoView()},[i]);var g=(0,l.useCallback)(function(e){v.current[e].scrollIntoView(),s(e)},[s]),x=(0,l.useCallback)(function(e){var t=e.key,n=e.label,r=e.disabled;e.dataTestId;var o=h?rA:rS;return(0,k.jsx)(o,{ref:function(e){v.current[t]=e},$disabled:r,$active:a===t,onClick:function(){return g(t)},children:n},t)},[a,g,h]),y=(0,l.useMemo)(function(){return(0,k.jsxs)(rM,{children:[r,(0,k.jsx)(rN,{children:t.map(x)}),(0,k.jsx)(rO,{ref:b,children:i})]})},[r,i,x,t]),w=(0,l.useMemo)(function(){return(0,k.jsxs)(rP,{$height:p,$width:u,children:[(0,k.jsx)(rL,{children:r}),(0,k.jsxs)(r_,{children:[(0,k.jsx)(rD,{$navWidth:m,children:t.map(x)}),(0,k.jsx)(rO,{ref:b,children:i})]})]})},[t,r,u,p,i,m,x]),j=(0,l.useMemo)(function(){return h?y:w},[h,y,w]);return(0,k.jsx)(nY.I,{open:n,onClose:o,withoutWrapper:h,children:j})}),rF=n(85064),rB=n(96486),rR=n.n(rB),rz=(0,g.iv)(["> div:first-child{display:none;}"]),rG=g.ZP.div.withConfig({displayName:"styled__SettingsModalWrapper",componentId:"sc-2rio63-0"})(["display:flex;flex-direction:column;",""],function(e){return e.$contentLoading&&rz}),rU=g.ZP.div.withConfig({displayName:"styled__SettingsModalMobileWrapper",componentId:"sc-2rio63-1"})(["",""],function(e){return e.$contentLoading&&rz}),r$=g.ZP.div.withConfig({displayName:"styled__GroupNotificationsWrapper",componentId:"sc-1yj7xnk-0"})(["padding-bottom:32px;display:flex;flex-direction:column;gap:24px;"]),rW=g.ZP.div.withConfig({displayName:"styled__GroupNotificationsItem",componentId:"sc-1yj7xnk-1"})(["> div:first-child{margin-bottom:6px;color:",";"," > span{color:",";","}}"],v.O9.n5,Z.c.t7,v.O9.n7,Z.c.t5),rH=g.ZP.div.withConfig({displayName:"styled__DropdownMenuWrapper",componentId:"sc-1yj7xnk-2"})(["margin-top:12px;width:100%;> div > div:first-child{width:100%;button{width:100%;}}"]),rq=[{key:"digest",header:"Digest email",label:"summary of popular posts",defaultLabel:"Weekly (default)",selections:[{value:"1d",label:"Daily"},{value:"7d",label:"Weekly (default)"},{value:"14d",label:"Every 14-Days"},{value:"30d",label:"Monthly"},{value:"off",label:"Never"}]},{header:"Notifications email",key:"emails",label:"summary of unread notifications",defaultLabel:"Hourly (default)",selections:[{value:"5m",label:"5-mins"},{value:"1h",label:"Hourly (default)"},{value:"3h",label:"3-hours"},{value:"6h",label:"6-hours"},{value:"12h",label:"12-hours"},{value:"1d",label:"Daily"},{value:"2d",label:"Every 2nd day"},{value:"7d",label:"Weekly"},{value:"off",label:"Never"}]},{key:"likes",header:"Likes",label:"when somebody likes my posts or comments",defaultLabel:"Notify me (default)",selections:[{value:"on",label:"Notify me (default)"},{value:"off",label:"Don't notify me"}]},{key:"admin-posts",header:"Admin announcements",label:"get email broadcasts sent by admins",defaultLabel:"Yes (default)",selections:[{value:"on",label:"Yes (default)"},{value:"off",label:"No"}]},{key:"calendar-event",header:"Event reminders",label:"notify me of calendar events the day before they happen",defaultLabel:"Yes (default)",selections:[{value:"on",label:"Yes (default)"},{value:"off",label:"No"}]}],rV=["key"];function rY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rY(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var rX=(0,l.memo)(function(e){var t,n,i=e.dispatch,s=e.onSetState,c=e.onGetState,u=e.currentGroup,p=e.setContentLoading,f="nfg-".concat(null==u?void 0:u.id),m=(0,C.bI)("self").self,h=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,d.Z.getPrefs({category:f});case 3:(n=null==(t=e.sent.data)?void 0:t.find(function(e){return"chat"===e.key}))?s({chatOn:"on"===n.value}):s({chatOn:!0}),null!=t&&t.length?(r={},t.forEach(function(e){var t=e.key,n=e.value;r[t]=n}),s({prefs:r})):s({prefs:{}}),p(!1);case 9:case"end":return e.stop()}},e)})),[f,s,p]);(0,l.useEffect)(function(){h()},[h]);var v=(0,l.useCallback)((t=(0,o.Z)(a().mark(function e(t,n){var o,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s({prefs:o=rJ(rJ({},c("prefs")||{}),{},(0,r.Z)({},t,n))}),l=Object.keys(o).map(function(e){return{key:e,value:o[e]}}),e.next=6,d.Z.postPrefs({category:f,body:l});case 6:i(e0.bI,{message:"Settings updated"});case 7:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),[f,i,c,s]),g=(0,l.useCallback)(function(e){var t,n=e.key,r=e.header,o=e.label,i=e.defaultLabel,a=e.selections,s=c("prefs")||{},l=a.find(function(e){return e.value===s[n]}),u=null!==(t=null==l?void 0:l.label)&&void 0!==t?t:i;return(0,k.jsxs)(rW,{children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("span",{children:[r,"\xa0\xa0"]}),o]}),(0,k.jsx)(rH,{children:(0,k.jsx)(ee.h_,{variant:"input",fitButton:!0,label:u,options:a,shouldFlip:!0})})]},n)},[c]),x=(0,l.useMemo)(function(){var e,t=c("prefs")||{},n=rq.map(function(e){var n=e.key,r=(0,b.Z)(e,rV);return rJ(rJ({key:n},r),{},{selections:r.selections.map(function(e){return rJ(rJ({},e),{},{active:t[n]?t[n]===e.value:r.defaultLabel===e.label,onClick:function(){return v(n,e.value)}})})})});return null!=m&&null!==(e=m.member)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.billingMgr&&n.push({key:"new-member-billing-email",header:"New customer emails",label:"notify me when my group gets a new customer",defaultLabel:"Yes (default)",selections:[{value:"on",label:"Yes (default)",active:!t["new-member-billing-email"]||"on"===t["new-member-billing-email"],onClick:function(){return v("new-member-billing-email","on")}},{value:"off",label:"No",active:!!t["new-member-billing-email"]&&"off"===t["new-member-billing-email"],onClick:function(){return v("new-member-billing-email","off")}}]}),n.map(g)},[v,c,g,null==m||null===(n=m.member)||void 0===n||null===(n=n.metadata)||void 0===n?void 0:n.billingMgr]);return(0,k.jsx)(r$,{children:x})}),rK=g.ZP.div.withConfig({displayName:"styled__GroupChatWrapper",componentId:"sc-idvbgl-0"})(["> div{&:not(:last-child){margin-bottom:32px;}}"]),rQ=g.ZP.div.withConfig({displayName:"styled__GroupChatRow",componentId:"sc-idvbgl-1"})(["display:flex;align-items:center;justify-content:space-between;padding-right:8px;> div{&:first-child{display:flex;align-items:center;> a{margin-right:12px;}}}"]),r0=(0,g.iv)(["> div{&:first-child{height:22px;width:22px;margin-right:12px;}&:last-child{height:12px;width:12px;margin-left:0px;}}"]),r1=g.ZP.div.withConfig({displayName:"styled__ChatButtonWrapper",componentId:"sc-idvbgl-2"})(["display:flex;align-items:center;> div{&:first-child{height:22px;width:22px;margin-right:8px;}&:last-child{height:12px;width:12px;margin-left:20px;}}",""],function(e){return e.theme.isMobile&&r0}),r2=n(17590),r9=["chatOn","isMobile","active"];function r3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var r5=function(e){var t=e.chatOn,n=e.isMobile,o=(e.active,(0,b.Z)(e,r9)),i=(0,k.jsxs)(r1,{children:[(0,k.jsx)(eF.J,{name:t?"Chat":"ChatOff"}),n?"":t?"On":"Off",(0,k.jsx)(eF.J,{name:"ArrowDown"})]});return(0,k.jsx)(S.z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r3(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({style:{padding:"0px 16px",height:48},label:i,variant:"secondary"},o))},r6=(0,l.memo)(function(e){var t,n,r=e.dispatch,i=e.isMobile,s=e.onSetState,c=e.onGetState,u=e.currentGroup,p=e.setContentLoading,f="nfg-".concat(null==u?void 0:u.id),m=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,d.Z.getPrefs({category:f});case 3:(n=null==(t=e.sent.data)?void 0:t.find(function(e){return"chat"===e.key}))?s({chatOn:"on"===n.value}):s({chatOn:!0}),null!=t&&t.length?(r={},t.forEach(function(e){var t=e.key,n=e.value;r[t]=n}),s({prefs:r})):s({prefs:{}}),p(!1);case 9:case"end":return e.stop()}},e)})),[f,s,p]);(0,l.useEffect)(function(){m()},[m]);var h=(0,l.useCallback)((t=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.postPrefs({category:f,body:[{key:"chat",value:t}]});case 2:s({chatOn:"on"===t}),r(e0.bI,{message:"Settings updated"});case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[f,r,s]),v=(0,l.useMemo)(function(){var e=c("chatOn"),t=[{"data-testid":"group-chat-chat-on",label:"Chat on",onClick:function(){return h("on")},active:e},{"data-testid":"group-chat-chat-off",label:"Chat off",onClick:function(){return h("off")},active:!e}];return(0,k.jsx)(ee.h_,{yOffset:12,options:t,children:(0,k.jsx)(r5,{chatOn:e,isMobile:i})})},[h,i,c]);return(0,k.jsxs)(rK,{children:[(0,k.jsx)(e4.Z,{variant:i?"t4":"t2",style:{marginBottom:8},children:"Chat"}),(0,k.jsx)(e4.Z,{variant:"t7",style:{marginBottom:16},children:"Choose whether members of this group can message you or not."}),(0,k.jsxs)(rQ,{children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(r2.Z,{group:u,iconSize:48}),(0,k.jsx)(e4.Z,{variant:"t5",children:null==u||null===(n=u.metadata)||void 0===n?void 0:n.displayName})]}),v]})]})}),r4=(0,g.iv)(["> h2{","}"],Z.c.t4),r8=g.ZP.div.withConfig({displayName:"styled__GroupMembershipWrapper",componentId:"sc-16f37kx-0"})(["> h2{margin:0px 0px 8px 0px;","}",""],Z.c.t2,function(e){return e.theme.isMobile&&r4}),r7=g.ZP.div.withConfig({displayName:"styled__SubscriptionActions",componentId:"sc-16f37kx-1"})(["display:flex;flex-direction:column;margin-top:16px;> p{margin:0px 0px 24px 0px;","}> div{gap:16px;display:flex;flex-direction:column;}"],Z.c.t7),oe=(0,g.ZP)(S.z).withConfig({displayName:"styled__SubscriptionAction",componentId:"sc-16f37kx-2"})(["height:fit-content;width:fit-content;color:",";gap:16px;&:hover{color:",";}",";"],v.O9.n5,v.O9.n5,Z.c.t7),ot=g.ZP.div.withConfig({displayName:"styled__DisplayMessage",componentId:"sc-16f37kx-3"})(["",""],Z.c.t7),on={"system-admin":"system admin","group-admin":"admin","group-moderator":"moderator",member:"member"},or=[{tab:"userMembershipUpdatePayment",icon:"Card",label:"Update payment method",testId:"update-payment-link"},{tab:"userMembershipCancelSubscription",icon:"Cancel",label:"Cancel subscription",testId:"cancel-subscrition-link"},{tab:"userMembershipSupport",icon:"Support",label:"Contact support",testId:"contact-support-link"}],oo=[{tab:"userMembershipReactivate",icon:"Reactivate",label:"Reactivate subscription",testId:"reactivate-subscrition-link"},{tab:"userMembershipSupport",icon:"Support",label:"Contact support",testId:"contact-support-link"},{tab:"userMembershipLeaveGroup",icon:"Leave",label:"Leave group",testId:"leave-group-link"}],oi=n(99802);function oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var os=(0,l.memo)(function(e){var t,n=e.onStackPush,i=e.setContentLoading,s=e.onSetState,c=(0,C.bI)("self","currentGroup"),u=c.self,p=c.currentGroup,f=c.dispatch,m="pending"===u.member.role,h=(0,l.useState)(null),v=h[0],b=h[1],g=!!(null!==(t=u.member)&&void 0!==t&&t.billingCanceled),x=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,d.Z.getGroupSubscription({groupId:p.id});case 3:b(e.sent.data),i(!1);case 7:case"end":return e.stop()}},e)})),[p,i]);(0,l.useEffect)(function(){var e;null!=u&&null!==(e=u.member)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.msbs&&x()},[u,i,x]);var y=(0,l.useCallback)(function(){m?n("userMembershipCancelJoin"):n("userMembershipLeave")},[m,n]),w=(0,l.useCallback)(function(e){var t,i=e.tab,l=e.label,c=e.icon;e.testId;var u=(t=(0,o.Z)(a().mark(function e(){var t,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("userMembershipReactivate"!==i){e.next=9;break}return e.next=3,d.Z.reactivateGroupSubscription({groupId:p.id});case 3:if(!(t=e.sent.error)){e.next=8;break}return f(e0.bI,{message:(null===(o=t.data)||void 0===o||null===(o=o.fields)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.error)||"There was an issue with your request, please try again",severity:"error"}),e.abrupt("return");case 8:f(e0._$,function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return t.member.billingCanceled=null,t});case 9:s({subscription:v},i),n(i);case 11:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});return(0,k.jsx)(oe,{label:l,icon:c,iconSize:14,variant:"link",iconLeft:!0,onClick:u})},[n,s,v,p,f]),j=(0,l.useMemo)(function(){if(!v)return(0,k.jsx)(S.z,{variant:"secondary",label:m?"Cancel Request":"Leave This Group",onClick:y,style:{marginTop:32}});if(g)return(0,k.jsxs)(r7,{children:[(0,k.jsx)("p",{style:{marginBottom:16},children:"Your subscription has been cancelled. You will not be charged again."}),(0,k.jsx)("p",{children:"You will be removed from the group at the end of your current billing cycle. If you change your mind, you can reactivate your subscription."}),(0,k.jsx)("div",{children:oo.map(w)})]});var e=v.cardBrand,t=v.cardLast4,n=v.nextPayment;return(0,k.jsxs)(r7,{children:[(0,k.jsx)("p",{children:"You're currently paying ".concat((0,oi.O5)(v),"/month with your ").concat(e.toUpperCase()," ending in ").concat(t,". Your next billing date is ").concat(eQ().unix(n).format("MMMM Do, YYYY"),".")}),(0,k.jsx)("div",{children:or.map(w)})]})},[m,v,y,w,g]),O=(0,l.useMemo)(function(){var e,t;return m?(0,k.jsxs)(ot,{children:["You requested membership to ",(0,k.jsx)("span",{children:on[u.member.role]})," ".concat(p.metadata.displayName," on "),(0,k.jsx)("span",{children:"".concat(eQ()(null==u||null===(e=u.member)||void 0===e?void 0:e.createdAt).format("L"),".")})]}):(0,k.jsxs)(ot,{children:["You've been ".concat("admin"===on[u.member.role]?"an":"a"," ").concat(on[u.member.role]," ")," of ".concat(p.metadata.displayName," since "),(0,k.jsx)("b",{children:"".concat(eQ()(null==u||null===(t=u.member)||void 0===t?void 0:t.createdAt).format("L"),".")})]})},[p,u,m]);return(0,k.jsxs)(r8,{children:[(0,k.jsx)("h2",{children:"Membership"}),O,j]})}),ol=g.ZP.div.withConfig({displayName:"styled__ConfirmationViewWrapper",componentId:"sc-iuj7de-0"})(["display:flex;flex-direction:column;> p{&:nth-child(2){margin:","px 0px 32px 0px !important;}}"],function(e){return e.theme.isMobile?16:8}),oc=(0,g.iv)(["flex-direction:column;gap:8px;"]),ou=g.ZP.div.withConfig({displayName:"styled__ConfirmationViewButtons",componentId:"sc-iuj7de-1"})(["display:flex;gap:16px;",""],function(e){return e.theme.isMobile&&oc}),od=(0,g.iv)(["flex-direction:column;"]),op=g.ZP.div.withConfig({displayName:"styled__ConfirmationViewHeader",componentId:"sc-iuj7de-2"})(["display:flex;justify-content:space-between;",""],function(e){return e.theme.isMobile&&od}),of=g.ZP.div.withConfig({displayName:"styled__ConfirmationViewHeaderLeft",componentId:"sc-iuj7de-3"})(["display:flex;flex-direction:column;"]),om=g.ZP.div.withConfig({displayName:"styled__ConfirmationTitle",componentId:"sc-iuj7de-4"})(["",""],function(e){var t=e.$typographyVariant;return Z.c[t]}),oh=g.ZP.p.withConfig({displayName:"styled__ConfirmationDescription",componentId:"sc-iuj7de-5"})(["",""],Z.c.t7),ov=(0,l.memo)(function(e){var t=e.title,n=e.header,r=e.onBack,i=e.isAsync,s=e.onCancel,c=e.onConfirm,u=e.description,d=e.headerVariant,p=e.headerMarginBottom,f=e.confirmLabel,m=(0,C.bI)("isMobile"),h=m.isMobile,v=m.dispatch,b=(0,l.useState)(!1),g=b[0],x=b[1],y=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r,o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=14;break}return x(!0),e.next=4,c();case 4:n=(t=e.sent).errors,r=t.onError,o=t.message,s=t.onSuccess,o&&v(e0.bI,{message:o}),n&&r?r(n):s(),x(!1),e.next=15;break;case 14:c();case 15:case"end":return e.stop()}},e)})),[c,i,v]);return(0,k.jsxs)(ol,{children:[(0,k.jsxs)(op,{children:[(0,k.jsxs)(of,{children:[(0,k.jsx)(om,{$typographyVariant:d||(h?"t1":"t2"),style:{marginBottom:p},children:t}),r&&(0,k.jsx)(S.z,{variant:"link",label:"< Back",onClick:r,style:{marginBottom:h?16:0,left:6,width:"fit-content",height:"fit-content"}})]}),n]}),(0,k.jsx)(oh,{children:u}),(0,k.jsxs)(ou,{children:[!n&&(0,k.jsx)(S.z,{loading:g,label:void 0===f?"Confirm":f,onClick:y}),s&&(0,k.jsx)(S.z,{label:"Cancel",onClick:s,variant:"secondary"})]})]})}),ob=(0,l.memo)(function(e){var t,n,r=e.onStackPop,i=e.currentGroup,s=e.onClose,u=(0,c.useRouter)(),p=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.leaveGroup({groupName:i.name});case 2:return e.sent.error&&(0,J.Lx)({message:"There was an issue with your request, please try again.",severity:"error"}),e.abrupt("return",{onSuccess:function(){s(),(0,V.H5)(u)}});case 6:case"end":return e.stop()}},e)})),[i,u,s]);return(0,k.jsx)(ov,{isAsync:!0,onCancel:r,onConfirm:p,confirmLabel:"Leave this group",title:"Leave ".concat(null==i||null===(t=i.metadata)||void 0===t?void 0:t.displayName),description:"Are you sure you want to leave ".concat(null==i||null===(n=i.metadata)||void 0===n?void 0:n.displayName,"? If you rejoin, you'll have to request membership and be approved by an admin again.")})}),og=g.ZP.div.withConfig({displayName:"styled__GroupMembershipSupportWrapper",componentId:"sc-bzse8k-0"})(["display:flex;flex-direction:column;> h2{margin:0px 0px 8px 0px;","}> p{margin:0px 0px 32px 0px;","}a{color:",";&:hover{text-decoration:underline;}}"],function(e){var t=e.theme;return Z.c[t.isMobile?"t4":"t2"]},Z.c.t7,v.O9.sd1),ox=n(84236),oy=(0,l.memo)(function(e){var t=e.onClose,n=e.onStackPop,r=(0,C.bI)("currentGroup").currentGroup,o=r.metadata.gbSupportEmail;return(0,k.jsxs)(og,{children:[(0,k.jsx)("h2",{children:"Support"}),(0,k.jsxs)("p",{children:["If you need help, you can DM the ",(0,k.jsx)(ox.Z,{group:r,admin:!0,onClick:t,children:"community admins"})," or email ",(0,k.jsx)(W.r,{href:"mailto:".concat(o),children:o}),".",(0,k.jsx)("br",{}),(0,k.jsx)("br",{}),"Still need help? Email the Skool team ",(0,k.jsx)(W.r,{href:"mailto:help@skool.com",children:"help@skool.com"}),"."]}),(0,k.jsx)(S.z,{label:"Got it",variant:"secondary",onClick:n})]})}),ow=(0,l.memo)(function(e){var t,n,r=e.onStackPop,i=e.currentGroup,s=e.onClose,u=(0,c.useRouter)(),p=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.cancelJoinGroup({groupName:i.name});case 2:return e.sent.error&&(0,J.Lx)({message:"There was an issue with your request, please try again.",severity:"error"}),e.abrupt("return",{onSuccess:function(){s(),(0,V.H5)(u)}});case 6:case"end":return e.stop()}},e)})),[i,u,s]);return(0,k.jsx)(ov,{isAsync:!0,onCancel:r,onConfirm:p,confirmLabel:"Cancel join request",title:"Cancel join request from ".concat(null==i||null===(t=i.metadata)||void 0===t?void 0:t.displayName),description:"Are you sure you want to cancel the join request from ".concat(null==i||null===(n=i.metadata)||void 0===n?void 0:n.displayName,"?")})}),oC=g.ZP.div.withConfig({displayName:"styled__GroupMembershipReactivateWrapper",componentId:"sc-1h0bydq-0"})(["> h2{margin:0px 0px 8px 0px;","}> p{margin:0px 0px 16px 0px;","}> button{margin-top:32px;}"],function(e){var t=e.theme;return Z.c[t.isMobile?"t4":"t2"]},Z.c.t7),oj=(0,l.memo)(function(e){var t=e.onStackPop,n=(0,e.onGetState)("subscription"),r=n.cardBrand,o=n.cardLast4,i=n.nextPayment;return(0,k.jsxs)(oC,{children:[(0,k.jsx)("h2",{children:"Reactivated"}),(0,k.jsx)("p",{children:"Your subscription has been reactivated."}),(0,k.jsx)("p",{children:"You're currently paying ".concat((0,oi.O5)(n),"/month with your ").concat(r.toUpperCase()," ending in ").concat(o,". Your next billing date is ").concat(eQ().unix(i).format("MMMM Do, YYYY"),".")}),(0,k.jsx)(S.z,{label:"Got it",variant:"secondary",onClick:t})]})}),ok=g.ZP.div.withConfig({displayName:"styled__GroupMembershipLeaveGroupWrapper",componentId:"sc-19o2yaj-0"})(["display:flex;flex-direction:column;> h2{margin:0px 0px 8px 0px;","}> p{margin:0px 0px 16px 0px;","}> ul{padding-left:24px;","}> div{margin-top:32px;}> button{margin-top:16px;}"],function(e){var t=e.theme;return Z.c[t.isMobile?"t4":"t2"]},Z.c.t7,Z.c.t7),oO=n(30899),oP=n(16695),oD=(0,l.memo)(function(e){var t=e.onStackPop,n=e.onClose,r=(0,l.useState)(!1),i=r[0],s=r[1],u=(0,C.bI)("currentGroup","self"),p=u.dispatch,f=u.currentGroup,m=u.self,h=(0,c.useRouter)().push,v=(0,l.useCallback)(function(e){p(e0.bI,{message:e||"There was an issue with your request, please try again",severity:"error"})},[p]),b=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,r,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,d.Z.deleteGroupSubscription({groupId:f.id});case 3:if(r=(t=e.sent).data,!(o=t.error)){e.next=10;break}return v(null===(i=o.data)||void 0===i||null===(i=i.fields)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.error),s(!1),e.abrupt("return");case 10:return e.prev=10,e.next=13,(0,oO.Cx)({token:r.token,userID:null==m?void 0:m.id,timeoutMS:6e4});case 13:(0,J.Lx)({message:"You left the group",expireInMSec:3e3}),n(),h("/".concat(f.name,"/about")),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(10),v(),s(!1);case 22:case"end":return e.stop()}},e,null,[[10,18]])})),[v,f,n,m,h]);return(0,k.jsxs)(ok,{children:[(0,k.jsx)("h2",{children:"Leave ".concat(f.metadata.displayName)}),(0,k.jsx)("p",{children:"Are you sure you want to leave ".concat(f.metadata.displayName,"?")}),(0,k.jsx)("p",{style:{margin:0},children:"If you leave, your subscription will be cancelled and your billing cycle will end immediately. If you want to join again, you'll start a new subscription with a new billing cycle."}),(0,k.jsx)(oP.e,{onConfirm:b,onCancel:t,loading:i,confirmVariant:"error",confirmLabel:"Leave group",confirmTestId:"confirm-leave-group",cancelTestId:"confirm-want-to-stay",cancelLabel:"Actually, I want to stay"})]})}),oI=(0,g.iv)(["> h2{margin:0px 0px 24px 0px;","}"],Z.c.t4),oZ=g.ZP.div.withConfig({displayName:"styled__GroupMembershipUpdatePaymentWrapper",componentId:"sc-1lax90t-0"})(["display:flex;flex-direction:column;> h2{margin:0px 0px 32px 0px;","}> div:nth-child(2){width:390px;max-width:100%;}> div:last-child{margin-top:32px;}",""],Z.c.t2,function(e){return e.theme.isMobile&&oI}),oS=n(66271),o_=(0,l.memo)(function(e){var t=e.onStackPop,n=e.onGetState,r=(0,C.bI)("currentGroup"),i=r.currentGroup,s=r.dispatch,c=(0,l.useState)(null),u=c[0],p=c[1],f=(0,l.useState)(!1),m=f[0],h=f[1],v=(0,l.useRef)(),b=n("subscription"),g=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,v.current.getSelectedPayment();case 3:if(!(n=e.sent).stripeError){e.next=7;break}return h(!1),e.abrupt("return");case 7:return e.next=9,d.Z.updatePaymentMethodForGroup({groupId:i.id,newPaymentMethodId:n.id});case 9:if(!e.sent.error){e.next=15;break}return s(e0.bI,{message:"There was an issue with your request, please try again",severity:"error"}),h(!1),e.abrupt("return");case 15:s(e0.bI,{message:"Payment method updated"}),h(!1),t();case 18:case"end":return e.stop()}},e)})),[i,s,t]);return(0,k.jsxs)(oZ,{children:[(0,k.jsx)("h2",{children:"Update payment method"}),(0,k.jsx)(oS.t,{ref:v,initialPaymentId:b.paymentMethodId,onPaymentMethodChange:p}),(0,k.jsx)(oP.e,{onConfirm:g,onCancel:t,loading:m,confirmLabel:"Save",confirmDisabled:b.paymentMethodId===(null==u?void 0:u.stripePaymentMethodId)})]})}),oM=g.ZP.div.withConfig({displayName:"styled__GroupMembershipCancelSubscriptionWrapper",componentId:"sc-1gvdhz3-0"})(["display:flex;flex-direction:column;> h2{margin:0px 0px 8px 0px;","}> p{margin:0px;","}> ul{padding-left:24px;","}> div{margin-top:32px;}> button{margin-top:16px;}a{color:",";&:hover{text-decoration:underline;}}"],function(e){var t=e.theme;return Z.c[t.isMobile?"t4":"t2"]},Z.c.t7,Z.c.t7,v.O9.sd1);function oN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var oE=(0,l.memo)(function(e){var t=e.onStackPop,n=e.onClose,i=(0,l.useState)(!1),s=i[0],c=i[1],u=(0,l.useState)(!1),p=u[0],f=u[1],m=(0,C.bI)("currentGroup","self"),h=m.dispatch,v=m.currentGroup,b=m.self,g=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,d.Z.cancelGroupSubscription({groupId:v.id});case 3:if(n=(t=e.sent).data,!(o=t.error)){e.next=10;break}return h(e0.bI,{message:(null===(i=o.data)||void 0===i||null===(i=i.fields)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.error)||"There was an issue with your request, please try again",severity:"error"}),f(!1),e.abrupt("return");case 10:return e.prev=10,e.next=13,(0,oO.Cx)({token:n.token,userID:null==b?void 0:b.id});case 13:h(e0._$,function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oN(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return t.member.billingCanceled=!0,t}),f(!1),c(!0),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(10),h(e0.bI,{message:"There was an issue with your request, please try again",severity:"error"}),f(!1);case 22:case"end":return e.stop()}},e,null,[[10,18]])})),[h,v,b]);if(s)return(0,k.jsxs)(oM,{children:[(0,k.jsx)("h2",{children:"Subscription cancelled"}),(0,k.jsx)("p",{children:"You will not be charged again."}),(0,k.jsxs)("ul",{children:[(0,k.jsx)("li",{children:"You will be removed from the group at the end of your billing cycle"}),(0,k.jsx)("li",{children:"If you change your mind, you can reactivate your subscription"})]}),(0,k.jsx)(S.z,{label:"Got it",variant:"secondary",onClick:t})]});var x=v.metadata.gbSupportEmail;return(0,k.jsxs)(oM,{children:[(0,k.jsx)("h2",{children:"Cancel subscription?"}),(0,k.jsx)("p",{children:"Are you sure you want to cancel your ".concat(v.metadata.displayName," subscription?")}),(0,k.jsxs)("ul",{children:[(0,k.jsx)("li",{children:"You will be removed from the group at the end of your billing cycle"}),(0,k.jsx)("li",{children:"If you want to rejoin the community, you can subscribe again"})]}),(0,k.jsxs)("p",{children:["If you need help, you can DM the ",(0,k.jsx)(ox.Z,{admin:!0,group:v,onClick:n,children:"community admins"})," or email ",(0,k.jsx)(W.r,{href:"mailto:".concat(x),children:x}),"."]}),(0,k.jsx)(oP.e,{onConfirm:g,onCancel:t,loading:p,confirmVariant:"error",confirmLabel:"Cancel Subscription",confirmTestId:"confirm-cancel-subscription",cancelLabel:"Actually, I want to stay",cancelTestId:"confirm-stayon-subscription"})]})}),oA=g.ZP.div.withConfig({displayName:"styled__BulkErrorWrapper",componentId:"sc-17xz622-0"})(["color:",";",""],v.O9.e2,Z.c.t7),oL=g.ZP.div.withConfig({displayName:"styled__GroupInviteWrapper",componentId:"sc-17xz622-1"})(["display:flex;flex-direction:column;"]),oT=(0,g.iv)(["",""],Z.c.t4),oF=g.ZP.div.withConfig({displayName:"styled__GroupInviteTitle",componentId:"sc-17xz622-2"})(["margin-bottom:8px;"," ",""],Z.c.t2,function(e){return e.theme.isMobile&&oT}),oB=g.ZP.div.withConfig({displayName:"styled__GroupAdminContent",componentId:"sc-17xz622-3"})(["display:flex;flex-direction:column;gap:","px;margin-top:104px;"],function(e){return e.$isAdmin?32:24}),oR=g.ZP.a.withConfig({displayName:"styled__GroupPendingInvitesLink",componentId:"sc-17xz622-4"})(["color:",";text-decoration:none;width:fit-content;margin-bottom:16px;"," &:hover{text-decoration:underline;}"],v.O9.n5,Z.c.t7),oz=g.ZP.div.withConfig({displayName:"styled__ActionItemContent",componentId:"sc-17xz622-5"})(["display:flex;flex-direction:column;margin-right:32px;> label{margin-bottom:3px;","}> p{margin:0px;","}"],Z.c.t5,Z.c.t9),oG=(0,g.iv)(["flex-direction:column;gap:8px;width:auto;> div{margin-right:0;}"]),oU=(0,g.iv)(["width:475px;margin-right:32px;"]),o$=(0,g.iv)(["width:491px;margin-right:16px;"]),oW=(0,g.iv)(["align-items:flex-start;> div{","}> button{margin-top:2px;width:125px;}"],function(e){return e.$isAdmin?oU:o$}),oH=g.ZP.div.withConfig({displayName:"styled__GroupAdminEmailInput",componentId:"sc-17xz622-6"})(["display:flex;",""],function(e){return e.theme.isMobile?oG:oW}),oq=(0,g.iv)(["flex-direction:column;> div{margin-bottom:16px;}","{margin-right:0px;}"],oz),oV=g.ZP.div.withConfig({displayName:"styled__ActionRow",componentId:"sc-17xz622-7"})(["display:flex;align-items:center;> div{display:flex;align-items:flex-start;}",""],function(e){return e.theme.isMobile&&oq}),oY=g.ZP.div.withConfig({displayName:"styled__ActionRowImage",componentId:"sc-17xz622-8"})(["height:48px;width:48px;background-position:center;background-size:cover;border-radius:10px;flex-shrink:0;margin-right:12px;"]),oJ=g.ZP.div.withConfig({displayName:"styled__ActionItems",componentId:"sc-17xz622-9"})(["display:flex;flex-direction:column;gap:32px;"]),oX=g.ZP.div.withConfig({displayName:"styled__CoursePermissionsLine",componentId:"sc-17xz622-10"})([""," margin-top:16px;> span{color:",";cursor:pointer;&:hover{text-decoration:underline;}}"],Z.c.t7,v.O9.sd1),oK=g.ZP.div.withConfig({displayName:"styled__GroupInviteLinkSection",componentId:"sc-17xz622-11"})(["position:relative;margin-top:24px;width:100%;input{"," color:",";}"],Z.c.t5,v.O9.sd1),oQ=g.ZP.div.withConfig({displayName:"styled__InviteLinkText",componentId:"sc-17xz622-12"})(["",""],Z.c.t7),o0=n(28506),o1=g.ZP.div.withConfig({displayName:"styled__ManageCoursePermissionsDialogWrapper",componentId:"sc-1e2g2au-0"})(["",""],Z.c.t7),o2=g.ZP.div.withConfig({displayName:"styled__CourseContainer",componentId:"sc-1e2g2au-1"})(["display:flex;align-items:flex-start;> span{padding:0px 11px !important;}"]),o9=g.ZP.div.withConfig({displayName:"styled__CourseList",componentId:"sc-1e2g2au-2"})(["display:flex;flex-direction:column;margin-bottom:16px;> div{&:not(:last-child){margin-bottom:12px;}}"]),o3=g.ZP.div.withConfig({displayName:"styled__CourseContainerRight",componentId:"sc-1e2g2au-3"})(["display:flex;flex-direction:column;align-items:flex-start;"]),o5=g.ZP.div.withConfig({displayName:"styled__DripRow",componentId:"sc-1e2g2au-4"})(["> span{cursor:pointer;color:",";}",";"],v.O9.sd1,Z.c.t7),o6=g.ZP.div.withConfig({displayName:"styled__CoursePermissionsDescription",componentId:"sc-1e2g2au-5"})(["margin-bottom:16px;",""],Z.c.t7),o4=g.ZP.div.withConfig({displayName:"styled__CourseListHeader",componentId:"sc-1e2g2au-6"})(["margin-bottom:16px;",";"],Z.c.t5),o8=(0,g.ZP)(o0.Y).withConfig({displayName:"styled__CourseCheckbox",componentId:"sc-1e2g2au-7"})(["margin:2px 12px 0px 12px;"]),o7=(0,l.memo)(function(e){var t=e.open,n=e.onClose,r=e.courses,o=e.onSave,i=e.selectedCourses,a=void 0===i?[]:i,s=(0,l.useState)(a),c=s[0],u=s[1],d=(0,l.useRef)([]),p=(0,l.useRef)(!1),f=(0,l.useMemo)(function(){return r?r.defaultCourses:[]},[r]),m=(0,l.useMemo)(function(){return r?r.coursesByMember:[]},[r]),h=(0,l.useMemo)(function(){return r?r.coursesByLevel:[]},[r]),b=(0,l.useMemo)(function(){return!(0,rB.isEqual)(c,a)},[c,a]);(0,l.useEffect)(function(){return p.current=!0,function(){p.current=!1}},[]);var g=(0,l.useCallback)(function(){o(c.filter(function(e){return!d.current.includes(e)})),n()},[c,n,o]),x=(0,l.useCallback)(function(e){var t,n,r,o;return(null==e||null===(t=e.metadata)||void 0===t?void 0:t.privacy)!==2?null:(0,k.jsx)(o5,{children:null!=e&&null!==(n=e.metadata)&&void 0!==n&&n.userHasAccess?"Unlocked at Level ".concat(null==e||null===(r=e.metadata)||void 0===r?void 0:r.minAccessLevel):"Unlocks at Level ".concat(null==e||null===(o=e.metadata)||void 0===o?void 0:o.minAccessLevel)})},[]),y=(0,l.useCallback)(function(e,t){var n,r,o;return 0===t?(n=!0,r=v.O9.n5,o=!0):1===t&&(r=(n=c.includes(e.id))?v.O9.sd1:v.O9.n5,o=!1),(0,k.jsxs)(o2,{checkboxColor:r,children:[2!==t&&(0,k.jsx)(o8,{size:20,variant:"square",active:n,onClick:function(){0!==t&&(c.includes(e.id)?u(function(t){return t.filter(function(t){return t!==e.id})}):u(function(t){return[].concat((0,rj.Z)(t),[e.id])}))},disabled:o}),(0,k.jsxs)(o3,{children:[e.metadata.title,x(e)]})]},e.id)},[c,x]),w=(0,l.useMemo)(function(){return f.filter(function(e){return 2===e.state})},[f]),C=(0,l.useMemo)(function(){return m.filter(function(e){return 2===e.state})},[m]),j=(0,l.useMemo)(function(){return h.filter(function(e){return 2===e.state}).sort(function(e,t){var n,r,o,i,a,s;return(null==e||null===(n=e.metadata)||void 0===n?void 0:n.minAccessLevel)-(null==t||null===(r=t.metadata)||void 0===r?void 0:r.minAccessLevel)!=0?(null==e||null===(o=e.metadata)||void 0===o?void 0:o.minAccessLevel)-(null==t||null===(i=t.metadata)||void 0===i?void 0:i.minAccessLevel):(null==e||null===(a=e.metadata)||void 0===a?void 0:a.title)-(null==t||null===(s=t.metadata)||void 0===s?void 0:s.title)})},[h]),O=(0,l.useMemo)(function(){var e=!w.length&&!C.length;return(0,k.jsxs)(o1,{children:[(0,k.jsx)(o6,{children:e?"There are currently no published courses.":"Member will have access to the following courses:"}),w.length>0&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(o4,{children:"All members have access:"}),(0,k.jsx)(o9,{children:w.map(function(e){return y(e,0)})})]}),C.length>0&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(o4,{children:"Only some members have access:"}),(0,k.jsx)(o9,{children:C.map(function(e){return y(e,1)})})]}),j.length>0&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(o4,{children:"Only members at a certain level have access:"}),(0,k.jsx)(o9,{children:j.map(function(e){return y(e,2)})})]})]})},[y,w,C,j]);return(0,k.jsx)(nQ.T,{open:t,onClose:n,scrollable:!0,onCancel:n,confirmLabel:"Save",disabled:!b,header:"Manage access",onConfirm:g,children:O})}),ie=n(64727),it=n(13656),ir=n(47691),io="There was a problem uploading your csv. Please try again later.",ii=function(e,t){var n=e.label,r=e.description,o=e.image,i=e.cta;return(0,k.jsxs)(oV,{children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(oY,{style:{backgroundImage:'url("'.concat(o,'")')}}),(0,k.jsxs)(oz,{children:[(0,k.jsx)("label",{children:n}),(0,k.jsx)("p",{children:r})]})]}),i]},t)},ia=(0,l.memo)(function(e){var t=e.self,n=e.dispatch,r=e.onStackPush,i=e.currentGroup,s=e.onTabChange,c=e.setContentLoading,u=(0,m.CP)({user:t,member:null==t?void 0:t.member,group:i}),p=(0,m.q2)({user:t,member:null==t?void 0:t.member,group:i}),f=(0,l.useState)(null),h=f[0],v=f[1],b=(0,l.useState)(""),g=b[0],x=b[1],y=(0,l.useState)(null),w=y[0],C=y[1],j=(0,l.useState)(null),O=j[0],P=j[1],D=(0,l.useState)({defaultCourses:[],coursesByMember:[],coursesByLevel:[]}),I=D[0],Z=D[1],_=(0,l.useState)([]),M=_[0],N=_[1],E=(0,en.C1)(),A=(0,Q.Z)(E,3),L=A[0],T=A[1],F=A[2],B=(0,l.useCallback)(function(e){N(e)},[]),R=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var n,r,o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,d.Z.getMemberCoursePermissions({groupID:i.id,memberID:t.member.id});case 4:n=e.sent.data,r=[],o=[],s=[],null!=n&&n.courses&&n.courses.forEach(function(e){0===e.metadata.privacy?r.push(e):1===e.metadata.privacy?o.push(e):2===e.metadata.privacy&&s.push(e)}),Z({defaultCourses:r,coursesByMember:o,coursesByLevel:s});case 11:case"end":return e.stop()}},e)})),[i,t,u]),z=(0,l.useMemo)(function(){var e=I.defaultCourses,t=I.coursesByMember;return e.filter(function(e){return 2===e.state}).length+t.filter(function(e){return M.includes(e.id)}).length},[I,M]),$=(0,l.useCallback)(function(){s("adminPlugins",!0),r("adminZapier")},[s,r]),W=(0,l.useMemo)(function(){return[{label:"Import .CSV file",description:"Invite members in bulk by uploading a .CSV file of email addresses.",image:"https://assets.skool.com/skool/7feb150c4e064cd099e78e8a3a749a76.png",cta:(0,k.jsx)(S.z,{onClick:function(){return r("adminInviteCsv")},variant:"secondary",label:"Import"})},{label:"Zapier integration",description:"Invite members by connecting Skool to over 500 tools using Zapier.",image:"https://assets.skool.com/skool/be42073f7ce84d079e3e1d9f4f6fd844.png",cta:(0,k.jsx)(S.z,{variant:"secondary",label:"Integrate",onClick:$})}]},[r,$]),H=(0,l.useCallback)(function(e){if(h&&v(null),null!==(t=e.target)&&void 0!==t&&null!==(t=t.files)&&void 0!==t&&t.length){var t,n=e.target.files[0],s=new FileReader;s.onload=function(e){var t;if(!(null===(t=e.target)||void 0===t||null===(t=t.result)||void 0===t?void 0:t.split("\n").some(function(e){var t=(e||"").split(",");return!!t.length&&(0,U.vV)(t[0].trim())})))return v("There was a problem uploading your csv. Please check that the list contains a valid email as the first item in each line.");(0,o.Z)(a().mark(function e(){var t,o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.createFile({fileName:n.name,contentType:n.type,contentLength:n.size});case 2:if(o=(t=e.sent).data,!t.error){e.next=8;break}return v(io),e.abrupt("return");case 8:return e.prev=8,e.next=11,(0,ie.cT)({fileID:o.file.id,writeUrl:o.writeUrl,acl:o.acl,contentType:o.contentType,data:n,timeout:6e4});case 11:if(!(s=e.sent)){e.next=22;break}return e.next=15,d.Z.addBulkGroupMembers({groupName:i.id,fileId:s.id});case 15:if(!e.sent.error){e.next=20;break}return v(io),e.abrupt("return");case 20:return r("adminMembershipCsv"),e.abrupt("return");case 22:e.next=28;break;case 24:return e.prev=24,e.t0=e.catch(8),v(io),e.abrupt("return");case 28:case"end":return e.stop()}},e,null,[[8,24]])}))()},s.readAsText(n)}},[h,i,r]),q=(0,l.useMemo)(function(){var e=(0,G.jQ)({group:i});return"".concat(window.location.protocol,"//").concat(window.location.host).concat(e.as)},[i]),V=(0,G.ZG)({group:i}),Y=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,d.Z.countGroupPendingInvites({groupID:i.id});case 4:C(e.sent.data.pendingInvites);case 7:case"end":return e.stop()}},e)})),[i,u]);(0,l.useEffect)(function(){(0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,Promise.all([Y(),R()]);case 3:c(!1);case 4:case"end":return e.stop()}},e)}))()},[c,Y,R]);var J=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,d.Z.inviteUsersToGroup({groupName:i.id,emails:[g],courseIds:M});case 4:if(!(t=e.sent.error)){e.next=9;break}return 422===t.status&&null!=t&&null!==(r=t.data)&&void 0!==r&&null!==(r=r.fields)&&void 0!==r&&r.length&&t.data.fields[0].name.startsWith("emails.")&&P("Invalid email"),e.abrupt("return");case 9:x(""),n(e0.bI,{message:"Group invite sent"}),Y();case 12:case"end":return e.stop()}},e)})),[Y,M,i,n,g]),X=(0,l.useMemo)(function(){var e;return u?(0,k.jsxs)(oX,{children:["This member will have access to ",(0,k.jsx)("span",{onClick:T,children:"(".concat(z,"/").concat((null==i||null===(e=i.metadata)||void 0===e?void 0:e.numCourses)||0," courses)")}),"."]}):null},[T,z,i,u]),K=(0,l.useMemo)(function(){return w?(0,k.jsx)(oR,{href:V.as,children:"See ".concat(w," pending ").concat(n2()("invite",w,!1))}):null},[w,V]),ee=(0,l.useCallback)(function(e){P(null),x(e.target.value)},[]),et=(0,l.useMemo)(function(){return p?(0,k.jsxs)(oB,{$isAdmin:u,children:[(0,k.jsx)(oQ,{children:u?"These invite methods will grant instant access without purchasing or requesting membership.":"Sending an email invite will grant instant access without purchasing or requesting membership."}),(0,k.jsxs)("div",{children:[(0,k.jsxs)(oH,{$isAdmin:u,children:[(0,k.jsx)(ir.I,{label:"Email address",value:g,type:"text",onChange:ee,error:O}),(0,k.jsx)(S.z,{onClick:J,label:"Send",disabled:!g})]}),X]}),u&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(oJ,{children:[(0,k.jsx)("input",{type:"file",style:{display:"none"},accept:".csv",multiple:!1,onChange:H,onClick:function(e){e.target.value=null},id:"upload-csv"}),W.map(ii)]}),h&&(0,k.jsx)(oA,{children:h}),K]})]}):null},[W,h,H,p,u,g,O,J,K,X,ee]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(oL,{children:[(0,k.jsx)(oF,{children:p?"Share your group link":"Invite"}),(0,k.jsx)(oQ,{children:p?"This will take people to your group’s About page where they can purchase or request membership.":"Share a link to ".concat(i.metadata.displayName," with your friends.")}),(0,k.jsx)(oK,{children:(0,k.jsx)(it.v,{value:q})}),et]}),L&&(0,k.jsx)(o7,{open:!0,courses:I,onSave:B,selectedCourses:M,onClose:F})]})}),is=g.ZP.div.withConfig({displayName:"styled__ImportCsvWrapper",componentId:"sc-1dwb5sb-0"})([""]),il=g.ZP.a.withConfig({displayName:"styled__ImportCsvLink",componentId:"sc-1dwb5sb-1"})(["color:",";text-decoration:none;"," &:hover{text-decoration:underline;}"],v.O9.sd1,Z.c.t7),ic=g.ZP.div.withConfig({displayName:"styled__ImportCsvTitle",componentId:"sc-1dwb5sb-2"})(["",""],Z.c.t2),iu=(0,g.iv)(["margin-top:24px;"]),id=g.ZP.div.withConfig({displayName:"styled__ImportCsvSectionTitle",componentId:"sc-1dwb5sb-3"})(["margin-top:32px;margin-bottom:8px;"," ",""],Z.c.t5,function(e){return e.theme.isMobile&&iu}),ip=g.ZP.div.withConfig({displayName:"styled__ImportCsvInfo",componentId:"sc-1dwb5sb-4"})(["",""],Z.c.t7),im=g.ZP.button.withConfig({displayName:"styled__LinkButton",componentId:"sc-1dwb5sb-5"})(["color:",";text-decoration:none;border:none;background:none;padding:0px;cursor:pointer;"," &:hover{text-decoration:underline;}"],v.O9.sd1,Z.c.t7),ih=(0,g.ZP)(im).withConfig({displayName:"styled__BackButton",componentId:"sc-1dwb5sb-6"})(["",""],Z.c.t11),iv=(0,g.iv)(["flex-direction:column;align-items:flex-start;"]),ib=g.ZP.div.withConfig({displayName:"styled__ImportCsvButtonRow",componentId:"sc-1dwb5sb-7"})(["display:flex;align-items:center;gap:16px;margin-top:16px;> span{","}> div{display:flex;align-items:center;gap:6px;"," > div{color:",";height:24px;width:24px;}}",""],Z.c.t7,Z.c.t5,v.O9.s2,function(e){return e.theme.isMobile&&iv}),ig="There was a problem uploading your csv. Please try again later.",ix=(0,l.memo)(function(e){var t,n=e.self,r=e.isMobile,i=e.currentGroup,s=e.onStackPop,c=e.onStackPush,u=(0,l.useState)(null),p=u[0],f=u[1],m=(0,l.useState)(null),h=m[0],b=m[1],g=(0,l.useState)({defaultCourses:[],coursesByMember:[],coursesByLevel:[]}),x=g[0],y=g[1],w=(0,l.useState)(!1),C=w[0],j=w[1],O=(0,l.useState)([]),P=O[0],D=O[1],I=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,r,o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.getMemberCoursePermissions({groupID:i.id,memberID:n.member.id});case 2:t=e.sent.data,r=[],o=[],s=[],t.courses&&t.courses.forEach(function(e){0===e.metadata.privacy?r.push(e):1===e.metadata.privacy?o.push(e):2===e.metadata.privacy&&s.push(e)}),y({defaultCourses:r,coursesByMember:o,coursesByLevel:s});case 9:case"end":return e.stop()}},e)})),[i,n]);(0,l.useEffect)(function(){I()},[I]);var Z=(0,l.useCallback)(function(e){if(p&&f(null),null!==(t=e.target)&&void 0!==t&&null!==(t=t.files)&&void 0!==t&&t.length){var t,n=e.target.files[0],r=new FileReader;r.onload=function(e){var t;if(!(null===(t=e.target)||void 0===t||null===(t=t.result)||void 0===t?void 0:t.split("\n").some(function(e){var t=(e||"").split(",");return!!t.length&&(0,U.vV)(t[0].trim())})))return f("There was a problem uploading your csv. Please check that the list contains a valid email as the first item in each line.");b(n)},r.readAsText(n)}},[p]),_=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.createFile({fileName:h.name,contentType:h.type,contentLength:h.size});case 2:if(n=(t=e.sent).data,!t.error){e.next=8;break}return f(ig),e.abrupt("return");case 8:return e.prev=8,e.next=11,(0,ie.cT)({fileID:n.file.id,writeUrl:n.writeUrl,acl:n.acl,contentType:n.contentType,data:h,timeout:6e4});case 11:if(!(o=e.sent)){e.next=22;break}return e.next=15,d.Z.addBulkGroupMembers({groupName:i.id,fileId:o.id,courseIds:P});case 15:if(!e.sent.error){e.next=20;break}return f(ig),e.abrupt("return");case 20:return c("adminMembershipCsv",r),e.abrupt("return");case 22:e.next=28;break;case 24:return e.prev=24,e.t0=e.catch(8),f(ig),e.abrupt("return");case 28:case"end":return e.stop()}},e,null,[[8,24]])})),[h,i,r,c,P]),M=(0,l.useMemo)(function(){var e=(0,k.jsx)("span",{children:"You haven't uploaded a file yet."});return p&&(e=(0,k.jsx)("span",{style:{color:v.O9.e2},children:p})),h&&(e=(0,k.jsxs)("div",{children:[(0,k.jsx)(eF.J,{name:"FileExcel"}),h.name]})),(0,k.jsxs)(ib,{children:[(0,k.jsx)("input",{type:"file",style:{display:"none"},accept:".csv",multiple:!1,onChange:Z,onClick:function(e){e.target.value=null},id:"upload-csv"}),(0,k.jsx)(S.z,{label:"Upload file",variant:"secondary",htmlFor:"upload-csv"}),e]})},[Z,p,h]),N=(0,l.useMemo)(function(){var e=x.defaultCourses,t=x.coursesByMember;return e.filter(function(e){return 2===e.state}).length+t.filter(function(e){return P.includes(e.id)}).length},[x,P]),E=(0,l.useCallback)(function(){j(!1)},[]),A=(0,l.useCallback)(function(){j(!0)},[]),L=(0,l.useCallback)(function(e){D(e)},[]);return(0,k.jsxs)(is,{children:[(0,k.jsx)(ic,{children:"Import .CSV file"}),(0,k.jsx)(ih,{onClick:s,children:"< Back to invite"}),(0,k.jsx)(id,{children:"Step 1. Upload .CSV file"}),(0,k.jsxs)(ip,{children:["Upload a .CSV file of email addresses you want to invite. You can ",(0,k.jsx)(il,{href:"https://assets.skool.com/skool/3a0f6f4f0a8448439ddf61185efc1d23.csv",children:"use this template"}),"."]}),M,(0,k.jsx)(id,{children:"Step 2. Select what courses these members will have access to"}),(0,k.jsxs)(ip,{children:["These members will have access to ",(0,k.jsx)(im,{type:"button",onClick:A,children:"(".concat(N,"/").concat((null==i||null===(t=i.metadata)||void 0===t?void 0:t.numCourses)||0," courses)")}),"."]}),(0,k.jsx)(id,{children:"Step 3. Send invites"}),(0,k.jsxs)(ip,{children:["By clicking “Send Invites”, we'll send an email with a unique invite link to each member so they can join your group instantly without going through the membership approval process. The email ",(0,k.jsx)(il,{href:"https://assets.skool.com/skool/da839dc5d5024d5d93d0e569985e098c.png",target:"_blank",rel:"noreferrer",children:"looks like this"}),"."]}),(0,k.jsx)(S.z,{disabled:!h,onClick:_,label:"Send invites",style:{marginTop:r?16:32}}),C&&(0,k.jsx)(o7,{open:!0,courses:x,onSave:L,selectedCourses:P,onClose:E})]})}),iy=g.ZP.div.withConfig({displayName:"styled__CsvSuccessfulUploadWrapper",componentId:"sc-1rez64n-0"})([""]),iw=g.ZP.a.withConfig({displayName:"styled__SuccessfulUploadLink",componentId:"sc-1rez64n-1"})(["color:",";text-decoration:none;&:hover:{text-decoration:underline;}"],v.O9.sd1),iC=(0,l.memo)(function(e){var t=e.self,n=e.currentGroup,r=e.onStackPop,o=e.isMobile,i=(0,G.DW)({group:n,tab:eJ.bI.GroupMembersInvited});return(0,k.jsxs)(iy,{children:[(0,k.jsx)(e4.Z,{variant:o?"t1":"t2",style:{marginBottom:16},children:"We’re sending your invites!"}),(0,k.jsxs)(e4.Z,{variant:"t7",children:["We're sending your invites in the background. We'll send an email to ",(0,k.jsx)("b",{children:t.email})," when all invitations are sent. You can ",(0,k.jsx)(iw,{href:i.as,children:"see your pending invites here."})]}),(0,k.jsx)("div",{style:{marginTop:32},children:(0,k.jsx)(S.z,{label:"Got It",variant:"secondary",onClick:r})})]})}),ij=n(10925),ik=g.ZP.div.withConfig({displayName:"styled__DropdownLabel",componentId:"sc-1jv5kqg-0"})(["",""],Z.c.t10),iO=g.ZP.div.withConfig({displayName:"styled__MetricLabel",componentId:"sc-1jv5kqg-1"})(["",""],Z.c.t5),iP=(0,g.iv)(["",""],Z.c.t2),iD=g.ZP.div.withConfig({displayName:"styled__MetricTitle",componentId:"sc-1jv5kqg-2"})(["width:100%;text-align:center;",";",""],Z.c.t1,function(e){return e.theme.isMobile&&iP}),iI=g.ZP.div.withConfig({displayName:"styled__LoaderWrapper",componentId:"sc-1jv5kqg-3"})(["width:100%;display:flex;justify-content:center;"]),iZ=g.ZP.div.withConfig({displayName:"styled__Weekday",componentId:"sc-1jv5kqg-4"})(["color:",";position:absolute;user-select:none;left:0;top:","px;",";"],v.O9.n5,function(e){return e.$top},Z.c.t11),iS=g.ZP.div.withConfig({displayName:"styled__Square",componentId:"sc-1jv5kqg-5"})(["height:11px;width:11px;background-color:",";margin-right:2px;border-radius:2px;"],function(e){return e.$backgroundColor}),i_=g.ZP.div.withConfig({displayName:"styled__HeatmapWrapper",componentId:"sc-1jv5kqg-6"})(["background-color:",";position:relative;padding:",";"],v.O9.n1,function(e){return e.$padding}),iM=g.ZP.div.withConfig({displayName:"styled__LegendText",componentId:"sc-1jv5kqg-7"})(["color:",";user-select:none;",";"],v.O9.n5,Z.c.t11),iN=g.ZP.span.withConfig({displayName:"styled__WhatIsThisLink",componentId:"sc-1jv5kqg-8"})(["color:",";cursor:pointer;&:hover{text-decoration:underline;}",";"],v.O9.n5,Z.c.t11),iE=(0,l.memo)(function(e){var t=e.data,n=e.groupCreatedAt,r=Math.max.apply(Math,(0,rj.Z)(null==t?void 0:t.counts)),o=r<15,i=(0,l.useState)([{color:"rgba(0,143,83,1)",min:o?10:Math.floor(.9*r)},{color:"rgba(0,143,83,0.7)",min:o?6:Math.floor(.5*r)},{color:"rgba(0,143,83,0.5)",min:o?3:Math.floor(.1*r)},{color:"rgba(0,143,83,0.3)",min:1},{color:v.O9.n3,min:0}]),a=i[0],s=i[1],c=(0,en.C1)(),u=(0,Q.Z)(c,3),d=u[0],p=u[1],f=u[2],m=(0,C.bI)("isMobile").isMobile,h=(0,l.useCallback)(function(e,t){if(!m){e.preventDefault();var n=prompt("Want to try a different color?",a[t].color);n&&s(function(e){var r=(0,rj.Z)(e);return r[t].color=n,r})}},[a,m]),b=(0,l.useMemo)(function(){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(iZ,{$top:23,children:"Mon"},"week-mon"),(0,k.jsx)(iZ,{$top:49,children:"Wed"},"week-wed"),(0,k.jsx)(iZ,{$top:75,children:"Fri"},"week-fri"),(0,k.jsx)(iZ,{$top:101,children:"Sun"},"week-sun")]})},[]),g=(0,l.useMemo)(function(){for(var e=[],t=function(t){var n=0===a[t].min?"No activities":"".concat(a[t].min,"+ activities");e.push((0,k.jsx)(et.u,{content:n,placement:"bottom",children:(0,k.jsx)(iS,{$backgroundColor:a[t].color,onDoubleClick:function(e){return h(e,t)}})},t))},n=a.length-1;n>=0;n--)t(n);return(0,k.jsxs)(e5.X,{alignItems:"center",gap:8,children:[(0,k.jsx)(iM,{children:"Less"}),(0,k.jsx)(e5.X,{children:e}),(0,k.jsx)(iM,{children:"More"})]})},[a,h]);return(0,k.jsx)(eg.s,{gap:16,marginBottom:m?16:32,children:(0,k.jsxs)(i_,{$padding:"".concat(0,"px ").concat(m?13:7,"px ").concat(0,"px ").concat(m?13:40,"px"),children:[b,(0,k.jsx)(eG.x,{marginBottom:16,marginLeft:m?40:10,children:(0,k.jsx)(ij.x,{startDate:eQ().utc(t.startDate),counts:t.counts,ranks:a,since:n?eQ()(n).utc().startOf("day"):void 0})}),(0,k.jsxs)(e5.X,{alignItems:"center",justifyContent:"space-between",marginLeft:10,children:[(0,k.jsx)(iN,{onClick:p,children:"What is this?"}),g]}),(0,k.jsxs)(rt.u_,{size:"small",open:d,onClose:f,shouldFullscreenOnMobile:!0,children:[(0,k.jsx)(rt.xB,{style:{paddingTop:m?32:void 0},children:"Daily activity"}),(0,k.jsx)(rt.fe,{children:(0,k.jsxs)(eg.s,{gap:16,children:[(0,k.jsx)("div",{children:"The daily activity chart is a visual display of your group activity on Skool over the past year. Activities that contribute towards this chart include liking posts, writing posts, commenting on posts and voting on polls."}),(0,k.jsx)("div",{children:"Activities are timestamped according to Coordinated Universal Time (UTC) rather than your local time zone."})]})})]})]})})}),iA=n(29009),iL=n(77180),iT=n(14195),iF=n(3023),iB=n(75358),iR=n(26050),iz=n(56880),iG=g.ZP.div.withConfig({displayName:"MetricChartTooltip__MetricChartTooltipWrapper",componentId:"sc-7wloeo-0"})(["width:100%;border-radius:5px;border:1px solid ",";box-shadow:0px 1px 2px rgba(60,64,67,0.32),0px 2px 6px rgba(60,64,67,0.15),0px 1px 8px rgba(0,0,0,0.1);padding:16px;background:",";display:flex;flex-direction:column;align-items:flex-start;"],v.O9.n3,v.O9.n1),iU=function(e){var t=e.payload,n=e.formatValue;if(!(null!=t&&t.length))return null;var r=n?n(t[0].payload):t[0].payload.value.toLocaleString("en-US");return(0,k.jsxs)(iG,{children:[(0,k.jsx)(e4.Z,{variant:"t11",color:v.O9.n5,children:eQ()(t[0].payload.time).utc().format("MMMM DD, YYYY")}),(0,k.jsx)(e4.Z,{variant:"t1",color:v.O9.n7,children:r})]})};function i$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i$(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var iH=g.ZP.div.withConfig({displayName:"MetricChart__MetricChartWrapper",componentId:"sc-1qusg4x-0"})([".recharts-cartesian-axis-line{stroke:",";}.recharts-cartesian-axis-tick-value{color:",";}.recharts-text{","}"],v.O9.n3,v.O9.n5,Z.c.t11);function iq(e){var t=e.entries,n=e.width,r=e.height,o=e.cursor,i=e.syncID,a=e.lineType,s=e.hideAxisX,c=e.hideAxisY,u=e.hideGrid,d=e.hideTooltip,p=e.formatValue,f=(0,l.useRef)(!1);(0,l.useEffect)(function(){return f.current=!0,function(){f.current=!1}},[]);var m=(0,l.useMemo)(function(){var e=t.slice(),n=0;return rR().each(e,function(e,t){return 0===e.result||(n=t,!1)}),t.length&&0===t[t.length-1].result&&(t[t.length-1].result=null),e.map(function(e,t){var r=!rR().isNull(e.value)&&t>=n?Math.round(e.value):null;return iW(iW({},e),{},{label:eQ()(e.time).utc().format("MMM DD"),value:r})})},[t]);return(0,k.jsx)(iH,{children:(0,k.jsx)(iA.h,{width:n,height:r,children:(0,k.jsxs)(iL.w,{data:m,margin:{top:16},cursor:o,syncId:i,children:[!u&&(0,k.jsx)(iT.q,{horizontal:!0,vertical:!1,stroke:v.O9.n3}),!s&&(0,k.jsx)(iF.K,{dataKey:"label",tickLine:!1,minTickGap:75}),!c&&(0,k.jsx)(iB.B,{orientation:"left",axisLine:!1,tickLine:!1,type:"number",tickCount:5,tickFormatter:function(e){return null==e?void 0:e.toLocaleString()}}),!d&&(0,k.jsx)(iR.u,{content:iU,isAnimationActive:!1,formatValue:p}),(0,k.jsx)(iz.x,{type:a,dataKey:"value",stroke:v.O9.sd1,fill:v.O9.sd1,fillOpacity:.75,strokeWidth:1+3*Math.min(1,20/((null==m?void 0:m.length)||1)),dot:{strokeWidth:0,r:1},activeDot:{stroke:v.O9.n1,strokeWidth:2,r:4},isAnimationActive:!1})]})})})}iq.defaultProps={lineType:"linear"};var iV=(0,l.memo)(iq),iY="daily",iJ="weekly",iX="monthly",iK={daily:"Daily active",weekly:"Weekly active",monthly:"Monthly active"};function iQ(e){if(!(null!=e&&e.length))return[];for(var t=e.slice().reverse(),n=0;n<t.length;n++)if(0===t[n].value)t[n].value=null;else break;return 0===t[t.length-1].value&&(t[t.length-1].value=null),t}var i0=(0,l.memo)(function(e){var t=e.currentGroup,n=e.isMobile,r=e.setContentLoading,i=(0,l.useState)(iX),s=i[0],c=i[1],u=(0,l.useState)(null),p=u[0],f=u[1],m=(0,l.useState)(null),h=m[0],v=m[1],b=(0,l.useState)(null),g=b[0],x=b[1],y=(0,l.useState)(0),w=y[0],C=y[1],j=(0,l.useState)(!0),O=j[0],P=j[1];(0,l.useEffect)(function(){r(!0),(0,o.Z)(a().mark(function e(){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.getGroupAdminMetrics({groupID:t.id,timeRange:"30d",activeMembersTerm:s});case 2:f(iQ((n=e.sent.data).totalMembers)),v(iQ(n.activeMembers)),x(n.dailyActivities),C(n.latestActiveMembers),P(!1),r(!1);case 10:case"end":return e.stop()}},e)}))()},[t,s,r]);var D=(0,l.useMemo)(function(){if(O)return null;var e,t=p.slice(-1)[0].value||0,r=t-((null===(e=p.find(function(e){return e.value>0}))||void 0===e?void 0:e.value)||0),o=r>0?" (+".concat(r.toLocaleString("en-US"),")"):r<0?" (".concat(r.toLocaleString("en-US"),")"):"",i=t>0?Math.min(Math.round(w/t*100),100):0;return(0,k.jsxs)(iD,{children:["In the past 30 days, your group ".concat(r>0?"grew to ":r<0?"shrank to":"stayed at"," ").concat(t.toLocaleString("en-US")," members").concat(o," "),!n&&(0,k.jsx)("br",{}),"and ".concat(w.toLocaleString("en-US")," members (").concat(i,"%) were active.")]})},[n,O,p,w]),I=(0,l.useCallback)(function(e){var t=e.value,n=e.time,r=p.find(function(e){return e.time===n}).value;return r?"".concat(t.toLocaleString("en-US")," (").concat(Math.floor(t/r*100),"%)"):t},[p]),Z=(0,l.useMemo)(function(){return[{label:"Daily active",active:s===iY,onClick:function(){return c(iY)}},{label:"Weekly active",active:s===iJ,onClick:function(){return c(iJ)}},{label:"Monthly active",active:s===iX,onClick:function(){return c(iX)}}]},[s]),S=(0,l.useMemo)(function(){return(0,k.jsx)(ik,{children:iK[s]})},[s]);return O?(0,k.jsx)(iI,{children:(0,k.jsx)(rF.D,{})}):(0,k.jsxs)(eg.s,{gap:32,children:[D,(0,k.jsxs)(eg.s,{gap:16,children:[(0,k.jsx)(iO,{children:"Total members"}),(0,k.jsx)(iV,{width:"100%",height:220,entries:p,syncID:t.id})]}),(0,k.jsxs)(eg.s,{gap:16,children:[(0,k.jsxs)(e5.X,{alignItems:"center",justifyContent:"space-between",children:[(0,k.jsx)(iO,{children:"Active members"}),(0,k.jsx)(ee.h_,{variant:"borderless",options:Z,label:S})]}),(0,k.jsx)(iV,{width:"100%",height:220,entries:h,formatValue:I,syncID:t.id})]}),(0,k.jsxs)(eg.s,{gap:16,children:[(0,k.jsx)(iO,{children:"Daily activity"}),(0,k.jsx)(iE,{data:g,groupCreatedAt:t.createdAt})]})]})}),i1=n(38475),i2=n(42668),i9=g.ZP.div.withConfig({displayName:"styled__ColorPickerWrapper",componentId:"sc-p2888m-0"})(["display:flex;gap:8px;> div:last-child{flex:1;> div:first-child{width:100%;}button{height:52px;width:100%;}}"]),i3=g.ZP.div.withConfig({displayName:"styled__SelectedColor",componentId:"sc-p2888m-1"})(["width:52px;height:52px;cursor:pointer;border-radius:4px;"]),i5=g.ZP.div.withConfig({displayName:"styled__ColorPickerDropdownContent",componentId:"sc-p2888m-2"})(["padding:16px;gap:8px;display:flex;flex-direction:column;"]),i6=g.ZP.div.withConfig({displayName:"styled__ColorItem",componentId:"sc-p2888m-3"})(["height:40px;width:40px;cursor:pointer;border-radius:7px;"]),i4=g.ZP.div.withConfig({displayName:"styled__ColorItemRow",componentId:"sc-p2888m-4"})(["display:flex;gap:8px;"]),i8=(0,l.memo)(function(e){var t=e.paletteColors,n=void 0===t?v.O9.defaultGroupColors:t,r=e.value,o=e.onChange,i=(0,l.useRef)(),a=(0,l.useState)(r),s=a[0],c=a[1],u=(0,l.useState)(r?r.slice(1):""),d=u[0],p=u[1],f=(0,C.bI)("isMobile").isMobile;10!==n.length&&console.error("palette must be 10 colors"),(0,l.useEffect)(function(){o&&o(s)},[o,s]),(0,l.useEffect)(function(){var e=d.replace(/#/g,"").toUpperCase();e.match(/^[0-9A-F]{3}$/)?c("#"+e[0]+e[0]+e[1]+e[1]+e[2]+e[2]):e.match(/^[0-9A-F]{6}$/)&&c("#"+e)},[d]);var m=(0,l.useCallback)(function(e){c(e),p(e.slice(1)),i.current.closeDropdown()},[]),h=(0,l.useCallback)(function(e){return(0,k.jsx)(i6,{style:{backgroundColor:e},onClick:function(){return m(e)}},e)},[m]),b=(0,l.useCallback)(function(e){p(e.target.value)},[]),g=(0,l.useMemo)(function(){return(0,k.jsxs)(i5,{children:[(0,k.jsx)(i4,{children:n.slice(0,5).map(h)}),(0,k.jsx)(i4,{children:n.slice(5,10).map(h)}),!f&&(0,k.jsx)(ir.I,{prefix:"#",value:d,onChange:b})]})},[f,d,n,h,b]),x=(0,l.useCallback)(function(e){e.preventDefault()},[]),y=(0,l.useCallback)(function(){i.current.openDropdown()},[]);return(0,k.jsxs)(i9,{children:[(0,k.jsx)(i3,{style:{backgroundColor:s},onClick:y}),(0,k.jsx)(ee.h_,{yOffset:8,ref:i,inputLabel:"Color",onClick:x,customContent:g,label:s||"Select color",variant:"input-floating-label"})]})}),i7=function(){return(0,k.jsx)("div",{style:{width:24,height:24,borderRadius:"50%",backgroundColor:"transparent",border:"1px solid #BABABA"}})},ae=function(){return(0,k.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 4C5.76 4 4 5.76 4 8C4 10.24 5.76 12 8 12C10.24 12 12 10.24 12 8C12 5.76 10.24 4 8 4ZM8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8.00069 14.4C4.48069 14.4 1.60069 11.52 1.60069 7.99999C1.60069 4.47999 4.48069 1.59999 8.00069 1.59999C11.5207 1.59999 14.4007 4.47999 14.4007 7.99999C14.4007 11.52 11.5207 14.4 8.00069 14.4Z",fill:"#3D68CF"})})},at=n(11990),an=n(32512),ar=g.ZP.div.withConfig({displayName:"styled__Dropzone",componentId:"sc-svsks4-0"})(["position:absolute;height:100%;width:100%;background:",";border:1px solid ",";top:0;left:0;z-index:1000;padding:8px;border-radius:10px;"],v.O9.n2,v.O9.n3),ao=g.ZP.div.withConfig({displayName:"styled__DropzoneInner",componentId:"sc-svsks4-1"})(["height:100%;width:100%;border:2px dashed ",";border-radius:10px;display:flex;justify-content:center;align-items:center;"],v.O9.n3),ai=g.ZP.div.withConfig({displayName:"styled__DropzoneContainer",componentId:"sc-svsks4-2"})(["position:relative;&:focus{outline:none;}"]),aa=g.ZP.div.withConfig({displayName:"styled__RemoveImageIcon",componentId:"sc-svsks4-3"})(["position:absolute;right:4px;top:4px;visibility:",";z-index:1;"],function(e){return e.theme.isMobile?"inherit":"hidden"}),as=(0,g.iv)(["width:222px;height:118px;border:1px solid ",";background-color:",";"],v.O9.n3,v.O9.n2),al=g.ZP.div.withConfig({displayName:"styled__ImageWrapper",componentId:"sc-svsks4-4"})(["width:271px;height:144px;border-radius:10px;background-color:",";position:relative;display:flex;align-items:center;justify-content:center;user-select:none;cursor:pointer;&:hover ","{visibility:inherit;}",""],v.O9.n3,aa,function(e){return e.theme.isMobile&&as});function ac(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function au(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ac(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ac(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ad=(0,l.forwardRef)(function(e,t){var n=e.handleCoverFileChange,r=e.handleRemoveCoverClick,o=e.coverURL,i=e.isDragging,a=(0,C.bI)("isMobile").isMobile,s=(0,l.useMemo)(function(){return o?{backgroundImage:'url("'.concat(o,'")'),backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}:{}},[o]),c=(0,l.useCallback)(function(e){n({target:{files:e}})},[n]),u=(0,an.u)({onDrop:c}),d=u.getRootProps,p=u.getInputProps,f=u.isDragActive,m=d(),h=p({}),b=(0,l.useCallback)(function(e){n(e)},[n]),g=(0,l.useCallback)(function(){var e;null===(e=t.current)||void 0===e||e.click()},[t]);return(0,k.jsxs)(eG.x,{children:[(0,k.jsxs)(ai,au(au({},m),{},{children:[(0,k.jsx)("input",au(au({},h),{},{type:"file",style:{display:"none"},accept:"image/*",multiple:!1,onChange:b,id:"cover-file-upload-input",ref:t})),(i||f)&&(0,k.jsx)(ar,{children:(0,k.jsx)(ao,{children:(0,k.jsx)(e4.Z,{variant:"t2",color:v.O9.n5,children:"Drop here"})})}),(0,k.jsx)(al,{style:s,onClick:o?void 0:g,children:o?(0,k.jsx)(aa,{children:(0,k.jsx)(S.z,{variant:"icon",icon:"Close",onClick:r,iconSize:16.66})}):(0,k.jsx)(e4.Z,{variant:"t7",color:v.O9.sd1,children:"Upload"})})]})),!a&&(0,k.jsxs)(eg.s,{alignItems:"flex-start",padding:"0 16px",children:[(0,k.jsx)(e4.Z,{textAlign:"center",variant:"t5",color:v.O9.n7,children:"Cover"}),(0,k.jsxs)(e4.Z,{textAlign:"center",variant:"t11",color:v.O9.n5,style:{marginBottom:16},children:["Recommended:",(0,k.jsx)("span",{style:{display:"flex"},children:"".concat(i2.Rj.coverWidth,"x").concat(i2.Rj.coverHeight)})]}),(0,k.jsx)(S.z,{variant:"secondary",label:"Change",onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},style:{padding:"11px 24px"}})]})]})}),ap=(0,l.memo)(ad),af=g.ZP.div.withConfig({displayName:"styled__Dropzone",componentId:"sc-126fsev-0"})(["position:absolute;height:72px;width:100%;background:",";border:1px solid ",";top:0;left:0;z-index:1000;padding:8px;border-radius:10px;"],v.O9.n2,v.O9.n3),am=g.ZP.div.withConfig({displayName:"styled__DropzoneInner",componentId:"sc-126fsev-1"})(["height:100%;width:100%;border:2px dashed ",";border-radius:10px;display:flex;justify-content:center;align-items:center;"],v.O9.n3),ah=g.ZP.div.withConfig({displayName:"styled__DropzoneContainer",componentId:"sc-126fsev-2"})(["position:relative;&:focus{outline:none;}"]),av=g.ZP.div.withConfig({displayName:"styled__RemoveImageIcon",componentId:"sc-126fsev-3"})(["position:absolute;right:4px;top:4px;visibility:",";z-index:1;"],function(e){return e.theme.isMobile?"inherit":"hidden"}),ab=(0,g.iv)(["height:64px;width:64px;border:1px solid ",";background-color:",";"],v.O9.n3,v.O9.n2),ag=g.ZP.div.withConfig({displayName:"styled__ImageWrapper",componentId:"sc-126fsev-4"})(["width:72px;height:72px;border-radius:10px;background-color:",";position:relative;display:flex;align-items:center;justify-content:center;user-select:none;cursor:pointer;&:hover ","{visibility:inherit;}",""],v.O9.n3,av,function(e){return e.theme.isMobile&&ab});function ax(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ay(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ax(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ax(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var aw=(0,l.forwardRef)(function(e,t){var n=e.handleRemoveIconClick,r=e.handleIconFileChange,o=e.iconURL,i=e.isDragging,a=(0,C.bI)("isMobile").isMobile,s=(0,l.useMemo)(function(){var e={};return o&&(e.backgroundImage='url("'.concat(o,'")'),e.backgroundPosition="center center",e.backgroundSize="cover",e.backgroundRepeat="no-repeat"),e},[o]),c=(0,l.useCallback)(function(e){r({target:{files:e}})},[r]),u=(0,an.u)({onDrop:c}),d=u.getRootProps,p=u.getInputProps,f=u.isDragActive,m=d(),h=p({}),b=(0,l.useCallback)(function(){var e;null===(e=t.current)||void 0===e||e.click()},[t]);return(0,k.jsxs)(eG.x,{children:[(0,k.jsxs)(ah,ay(ay({},m),{},{children:[(0,k.jsx)("input",ay(ay({},h),{},{type:"file",style:{display:"none"},accept:"image/*",multiple:!1,onChange:function(e){r(e)},id:"icon-file-upload-input",ref:t})),(i||f)&&(0,k.jsx)(af,{children:(0,k.jsx)(am,{children:(0,k.jsx)(e4.Z,{variant:"t2",color:v.O9.n5,children:"Drop"})})}),(0,k.jsx)(ag,{style:s,onClick:o?void 0:b,children:o?(0,k.jsx)(av,{children:(0,k.jsx)(S.z,{variant:"icon",icon:"Close",onClick:n,iconSize:16.66})}):(0,k.jsx)(e4.Z,{variant:"t7",color:v.O9.sd1,children:"Upload"})})]})),!a&&(0,k.jsxs)(eg.s,{alignItems:"flex-start",padding:"0 16px",children:[(0,k.jsx)(e4.Z,{textAlign:"center",variant:"t5",color:v.O9.n7,children:"Icon"}),(0,k.jsxs)(e4.Z,{textAlign:"center",variant:"t11",color:v.O9.n5,style:{marginBottom:16},children:["Recommended:",(0,k.jsx)("span",{style:{display:"flex"},children:"".concat(i2.Rj.iconWidth,"x").concat(i2.Rj.iconHeight)})]}),(0,k.jsx)(S.z,{variant:"secondary",label:"Change",onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},style:{padding:"11px 24px"}})]})]})}),aC=n(500),aj=(0,l.memo)(function(e){var t=e.group,n=e.onCancel,r=e.onSuccess,i=e.onTimeout,s=(0,l.useState)(!1),c=s[0],u=s[1],p=(0,C.bI)("self"),f=p.self,m=p.dispatch,h=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var n,o,s,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,d.Z.endTrial({groupID:t.id});case 3:if(o=(n=e.sent).data,!(s=n.error)){e.next=10;break}return u(!1),m(e0.bI,{message:(null===(l=s.data)||void 0===l||null===(l=l.fields)||void 0===l||null===(l=l[0])||void 0===l?void 0:l.error)||"There was an issue with your request, please try again",severity:"error"}),e.abrupt("return");case 10:return e.prev=10,e.next=13,(0,oO.Cx)({token:o.token,userID:null==f?void 0:f.id,timeoutMS:6e4});case 13:r(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),e.t0===oO.k9?i():m(e0.bI,{message:"There was an issue with your request, please try again.",severity:"error"});case 19:case"end":return e.stop()}},e,null,[[10,16]])})),[t,r,i,m,f]);return(0,k.jsx)(nQ.T,{open:!0,loading:c,header:"Start subscription now?",onConfirm:h,onCancel:n,children:"Are you sure you want to start your $99 /month subscription now?"})});v.O9.sd1;var ak=g.ZP.div.withConfig({displayName:"styled__PrivacyCard",componentId:"sc-1q4v7i5-2"})(["width:100%;padding:14px;border:none;background-color:transparent;user-select:none;cursor:pointer;min-height:",";&.selected{background-color:",";}"],function(e){return e.theme.isMobile?"auto":"160px"},v.O9.n2),aO=g.ZP.div.withConfig({displayName:"styled__UrlChangeLink",componentId:"sc-1q4v7i5-3"})(["cursor:pointer;color:",";&:hover{text-decoration:underline;}",""],v.O9.sd1,Z.c.t11),aP=g.ZP.div.withConfig({displayName:"styled__PrivacyTitle",componentId:"sc-1q4v7i5-4"})(["color:",";",""],v.O9.n7,Z.c.t7),aD=g.ZP.div.withConfig({displayName:"styled__PrivacyDescription",componentId:"sc-1q4v7i5-5"})(["color:",";",""],v.O9.n7,Z.c.t9),aI=g.ZP.div.withConfig({displayName:"styled__GroupNameChangesLabel",componentId:"sc-1q4v7i5-6"})(["color:",";",""],v.O9.n4,Z.c.t11),aZ=g.ZP.div.withConfig({displayName:"styled__CharacterCountLabel",componentId:"sc-1q4v7i5-7"})(["color:",";",";"],function(e){return e.$error?v.O9.e2:v.O9.n4},Z.c.t11),aS=g.ZP.div.withConfig({displayName:"styled__UpgradeNowLink",componentId:"sc-1q4v7i5-8"})(["color:",";cursor:pointer;&:hover{text-decoration:underline;}",";"],v.O9.sd1,Z.c.t11),a_=(0,g.ZP)(eG.x).withConfig({displayName:"styled__InputWrapper",componentId:"sc-1q4v7i5-9"})(["flex:1 1 100%;> div{width:100%;}"]),aM=(0,g.ZP)(eG.x).withConfig({displayName:"styled__ColorPickerWrapper",componentId:"sc-1q4v7i5-10"})(["flex:1 1 100%;width:",";> div{width:100%;}"],function(e){return e.theme.isMobile?void 0:"100%"}),aN=function(e,t,n,r,o,i){e.beginPath(),e.moveTo(t+i,n),e.lineTo(t+r-i,n),e.quadraticCurveTo(t+r,n,t+r,n+i),e.lineTo(t+r,n+o-i),e.quadraticCurveTo(t+r,n+o,t+r-i,n+o),e.lineTo(t+i,n+o),e.quadraticCurveTo(t,n+o,t,n+o-i),e.lineTo(t,n+i),e.quadraticCurveTo(t,n,t+i,n),e.closePath()};function aE(){return(aE=(0,o.Z)(a().mark(function e(t){var n,r,o,i,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="image/png",(r=document.createElement("canvas")).width=i2.Rj.iconWidth,r.height=i2.Rj.iconHeight,o=r.getContext("2d"),e.next=7,(0,i2.Bi)({src:t.metadata.readUrl||t.metadata.srcReadUrl});case 7:return i=e.sent,s=.23*i2.Rj.iconWidth,aN(o,0,0,i2.Rj.iconWidth,i2.Rj.iconHeight,s),o.clip(),o.drawImage(i,0,0,i2.Rj.iconWidth,i2.Rj.iconHeight),e.abrupt("return",new Promise(function(e){r.toBlob(function(t){return e(t)},n)}));case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}var aA=(0,l.memo)(function(e){var t,n,r,i,s,u=e.onSetState,p=e.onMutateState,f=e.hasChanges,m=e.onGetFullContentState,h=e.onStackPush,b=(0,C.bI)("self","currentGroup","isMobile"),g=b.self,x=b.currentGroup,y=b.isMobile,w=b.dispatch,j=(0,l.useState)(null),O=j[0],P=j[1],D=(0,l.useState)(null),I=D[0],Z=D[1],_=(0,l.useState)(null),M=_[0],N=_[1],E=(0,l.useState)(null),A=E[0],L=E[1],T=(0,l.useState)(null),F=T[0],B=T[1],R=(0,l.useState)(null),z=R[0],G=R[1],$=(0,l.useState)(!1),W=$[0],H=$[1],q=(0,l.useRef)(),Y=(0,l.useRef)(),X=(0,c.useRouter)(),K=m(),ee=K.group,et=K.iconURL,en=K.iconImage,er=K.faviconURL,eo=K.coverURL,ei=K.coverSmallURL,ea=K.coverImage,es=K.displayName,el=void 0===es?"":es,ec=K.description,eu=void 0===ec?"":ec,ed=K.initials,ep=void 0===ed?"":ed,ef=K.color,em=void 0===ef?x.metadata.color||v.O9.defaultGroupColors[Math.floor(Math.random()*v.O9.defaultGroupColors.length)]:ef,eh=K.privacy,ev=K.groupNameChanges,eb=K.groupURL,ex=K.noOwnerDisplay,ey=(0,l.useMemo)(function(){if(0!==ev||!g||!(null!=x&&null!==(e=x.metadata)&&void 0!==e&&e.creatorUser)||(null==x||null===(t=x.metadata)||void 0===t?void 0:t.paymentStatus)!=="trial")return!1;var e,t,n=(0,U.W4)(JSON.parse(x.metadata.creatorUser));return g.id===n.id},[ev,g,x]);(0,l.useEffect)(function(){u({group:x,iconURL:x.metadata.logoUrl,iconImage:null,faviconURL:null,coverURL:x.metadata.logoBigUrl,coverSmallURL:x.metadata.coverSmallUrl||x.metadata.logoBigUrl,coverImage:null,displayName:x.metadata.displayName,description:x.metadata.description,initials:x.metadata.initials||(0,U.$g)(x.metadata.displayName),color:x.metadata.color||v.O9.defaultGroupColors[Math.floor(Math.random()*v.O9.defaultGroupColors.length)],privacy:parseInt(x.metadata.privacy)||0,groupNameChanges:x.metadata.nameChanges||0,groupURL:x.name,noOwnerDisplay:!!x.metadata.noOwnerDisplay})},[u,x]),(0,l.useEffect)(function(){N(null)},[el]),(0,l.useEffect)(function(){L(null)},[eu]),(0,l.useEffect)(function(){P(null)},[et]),(0,l.useEffect)(function(){Z(null)},[eo]),(0,l.useEffect)(function(){G(null)},[em]);var ew=(0,aC.V)((0,l.useRef)({}).curraent),eC=(0,Q.Z)(ew,1)[0],ej=(0,l.useCallback)(function(e){e.target.value.length>2||(p({initials:e.target.value.toUpperCase()}),B(null))},[p]),ek=(0,l.useCallback)(function(e){p({faviconURL:e.metadata.readUrl||e.metadata.srcReadUrl})},[p]),eO=(0,l.useCallback)((t=(0,o.Z)(a().mark(function e(t,n,r){var o,i,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.createFile({fileName:"".concat(r,".png"),contentType:n,contentLength:t.size,ownerID:x.id});case 2:if(i=(o=e.sent).data,!o.error){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,(0,ie.cT)({fileID:i.file.id,writeUrl:i.writeUrl,acl:i.acl,contentType:i.contentType,data:t,timeout:6e4,waitToken:i.waitToken,userID:null==g?void 0:g.id});case 10:(s=e.sent)&&ek(s),e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(7),e.abrupt("return");case 17:case"end":return e.stop()}},e,null,[[7,14]])})),function(e,n,r){return t.apply(this,arguments)}),[x,g,ek]),eP=(0,l.useCallback)(function(e){p({iconImage:null}),p({iconURL:e.metadata.readUrl||e.metadata.srcReadUrl}),P(null)},[p]),eD=(0,l.useCallback)((n=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e){return aE.apply(this,arguments)}(t);case 2:eO(e.sent,"image/png","favicon"),eP(t);case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[eO,eP]),eI=(0,l.useCallback)(function(){p({iconImage:null})},[p]),eZ=(0,l.useCallback)(function(e){p({iconImage:null}),(0,J.Lx)({message:e,severity:"error",expireInMSec:3e3})},[p]),eS=(0,l.useCallback)((r=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p({coverImage:null}),p({coverURL:t.metadata.readUrl||t.metadata.srcReadUrl}),p({coverSmallURL:t.metadata.imageMdUrl||t.metadata.readUrl||t.metadata.srcReadUrl}),Z(null);case 4:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),[p]),e_=(0,l.useCallback)(function(){p({coverImage:null})},[p]),eM=(0,l.useCallback)(function(e){p({coverImage:null}),(0,J.Lx)({message:e,severity:"error",expireInMSec:3e3})},[p]),eN=(0,l.useCallback)((i=(0,o.Z)(a().mark(function e(t){var n,r,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.target)&&void 0!==n&&null!==(n=n.files)&&void 0!==n&&n.length){e.next=2;break}return e.abrupt("return");case 2:if(r=t.target.files[0],!(0,ie.ZP)(r.type)){e.next=5;break}return e.abrupt("return");case 5:if(!(r.size>i1.R.attachmentImageFileMaxSize)){e.next=8;break}return w(e0.bI,{message:"File too large, ".concat(Math.round(i1.R.attachmentImageFileMaxSize/1024/1024),"mb max"),severity:"error"}),e.abrupt("return");case 8:return e.next=10,(0,i2.s4)({file:r,minWidth:i2.Rj.iconWidth,minHeight:i2.Rj.iconHeight});case 10:o=e.sent,i=(0,Q.Z)(o,1)[0],t.target&&(t.target.value=null),p({iconImage:{image:i,contentType:r.type}});case 15:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),[w,p]),eE=(0,l.useCallback)((s=(0,o.Z)(a().mark(function e(t){var n,r,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.target)&&void 0!==n&&null!==(n=n.files)&&void 0!==n&&n.length){e.next=2;break}return e.abrupt("return");case 2:if(r=t.target.files[0],!(0,ie.ZP)(r.type)){e.next=5;break}return e.abrupt("return");case 5:if(!(r.size>i1.R.attachmentImageFileMaxSize)){e.next=8;break}return w(e0.bI,{message:"File too large, ".concat(Math.round(i1.R.attachmentImageFileMaxSize/1024/1024),"mb max"),severity:"error"}),e.abrupt("return");case 8:return e.next=10,(0,i2.s4)({file:r,minWidth:i2.Rj.coverWidth,minHeight:i2.Rj.coverHeight});case 10:o=e.sent,i=(0,Q.Z)(o,1)[0],t.target&&(t.target.value=null),p({coverImage:{image:i,contentType:r.type}});case 15:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)}),[w,p]),eA=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={groupName:ee.id,displayName:el,description:eu,logo:et,faviconUrl:er,bigLogo:eo,coverSmall:ei,initials:ep,color:em,privacy:eh,removeLogo:""===et,removeBigLogo:""===eo,noOwnerDisplay:!!ex},e.next=3,d.Z.updateGroup(t);case 3:if(n=e.sent.error,u(t),!n){e.next=9;break}return 422===n.status&&null!=n&&null!==(r=n.data)&&void 0!==r&&null!==(r=r.fields)&&void 0!==r&&r.length?n.data.fields.forEach(function(e){switch(e.name){case"metadata.description":L(e.error);break;case"metadata.logo_url":case"metadata.favicon_url":P(e.error);break;case"metadata.logo_big_url":Z(e.error);break;case"metadata.initials":B(e.error);break;case"metadata.color":G(e.error);break;default:N(e.error)}}):N("Failed to update group settings"),e.abrupt("return");case 9:w(e0.bI,{message:"Settings updated"}),(0,V.H5)(X);case 11:case"end":return e.stop()}},e)})),[em,ei,eo,eu,w,el,er,ee,et,ep,ex,u,eh,X]),eL=(0,l.useCallback)(function(e){e.stopPropagation(),e.preventDefault(),p({iconURL:""})},[p]),eT=(0,l.useCallback)(function(e){e.stopPropagation(),e.preventDefault(),p({coverURL:""}),p({coverSmallURL:""})},[p]),eB=(0,l.useCallback)(function(){u({groupURL:eb},"adminUrlChange"),h("adminUrlChange",y)},[eb,y,u,h]),eR=(0,k.jsxs)(e5.X,{alignItems:"flex-start",gap:y?8:32,marginBottom:y?32:0,children:[(0,k.jsx)(aw,{ref:q,handleIconFileChange:eN,handleRemoveIconClick:eL,iconURL:et,isDragging:eC}),(0,k.jsx)(ap,{ref:Y,handleCoverFileChange:eE,handleRemoveCoverClick:eT,coverURL:eo,isDragging:eC})]}),ez=(0,l.useCallback)(function(){w(e0.bI,{message:"Subscription started"}),H(!1),p({groupNameChanges:1})},[w,p]),eU=(0,l.useCallback)(function(){w(e0.bI,{message:"Subscription started"}),H(!1),p({groupNameChanges:1})},[w,p]),e$=(0,l.useCallback)(function(){H(!1)},[]),eW=(0,l.useCallback)(function(){H(!0)},[]),eH=ee&&(0,k.jsxs)(eg.s,{gap:8,marginBottom:y?32:void 0,marginTop:8,children:[(0,k.jsx)(ir.I,{autoFocus:!y,id:"display-name",label:"Group name",type:"text",value:el,onChange:function(e){return p({displayName:e.target.value})},error:M||""}),(0,k.jsx)(eG.x,{justifyContent:"flex-end",marginBottom:y?0:8,children:(0,k.jsx)(aZ,{$error:el.length>i1.R.maxDisplayName,children:"".concat(el.length,"/").concat(i1.R.maxDisplayName)})}),(0,k.jsx)(ir.I,{disabled:!0,label:"URL",value:"skool.com/".concat(eb),readOnly:!0}),(0,k.jsxs)(eG.x,{flexDirection:y?"column":"row",paddingLeft:14,alignItems:"flex-start",children:[ev>0&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(aI,{children:["You can change your group URL one time only.","\xa0"]}),(0,k.jsx)("span",{onClick:eB,children:(0,k.jsx)(aO,{children:"Change URL"})})]}),ev<0&&(0,k.jsx)(aI,{children:"Group URL has already been changed. No further changes are permitted."}),0===ev&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(aI,{style:{marginRight:4},children:"You can change your URL with a paid account."}),ey&&(0,k.jsx)(aS,{onClick:eW,children:"Upgrade now?"})]})]})]}),eq=(0,l.useCallback)(function(e){p({color:e})},[p]),eV=(0,k.jsxs)(eg.s,{gap:8,marginTop:16,children:[(0,k.jsx)(ir.I,{id:"description",label:"Group description",type:"text",value:eu,onChange:function(e){return p({description:e.target.value})},error:A||"",multiline:!0,rows:3}),(0,k.jsx)(eG.x,{justifyContent:"flex-end",marginBottom:y?0:8,children:(0,k.jsx)(aZ,{$error:((null==eu?void 0:eu.length)||0)>i1.R.maxDescription,children:"".concat((null==eu?void 0:eu.length)||0,"/").concat(i1.R.maxDescription)})}),(0,k.jsxs)(e5.X,{gap:y?24:8,alignItems:"flex-start",style:{overflow:"inherit"},children:[(0,k.jsx)(a_,{children:(0,k.jsx)(ir.I,{id:"initials",label:"Initials",type:"text",style:{maxWidth:y?72:"100%"},value:ep,onChange:ej,error:F||""})}),(0,k.jsx)(aM,{children:(0,k.jsx)(i8,{value:em,onChange:eq})})]})]}),eY=(0,k.jsx)(eg.s,{gap:16,marginBottom:16,children:(0,k.jsxs)(e5.X,{alignItems:"flex-start",style:{borderRadius:4,border:"1px solid ".concat(v.O9.n3)},children:[(0,k.jsx)(ak,{onClick:function(){return p({privacy:1})},className:"".concat(1===eh?"selected":""),children:(0,k.jsxs)(eg.s,{gap:16,children:[(0,k.jsxs)(e5.X,{gap:8,alignItems:"center",children:[1===eh?(0,k.jsx)(ae,{}):(0,k.jsx)(i7,{}),(0,k.jsxs)(e5.X,{gap:8,alignItems:"center",children:[(0,k.jsx)(eF.J,{name:"Lock",style:{color:v.O9.n7,width:20,height:20}}),(0,k.jsx)(aP,{children:"Private"})]})]}),(0,k.jsx)(aD,{children:"Only members can see who's in the group and what they post. Content is hidden from search engines."})]})}),(0,k.jsx)(ak,{onClick:function(){return p({privacy:0})},className:"".concat(0===eh?"selected":""),children:(0,k.jsxs)(eg.s,{gap:16,children:[(0,k.jsxs)(e5.X,{gap:8,alignItems:"center",children:[0===eh?(0,k.jsx)(ae,{}):(0,k.jsx)(i7,{}),(0,k.jsxs)(e5.X,{gap:8,alignItems:"center",children:[(0,k.jsx)(eF.J,{name:"Globe",style:{color:v.O9.n7,width:20,height:20}}),(0,k.jsx)(aP,{children:"Public"})]})]}),(0,k.jsx)(aD,{children:"Anyone can see who's in the group and what they post. Content is discoverable by search engines."})]})})]})}),eJ=y?"auto":"100%",eX=!f||!!M||!!A||!!O||!!I||!!F||!!z||!el||!ep||!em||el.length>i1.R.maxDisplayName||(null==eu?void 0:eu.length)>i1.R.maxDescription;return(0,k.jsxs)(eg.s,{gap:24,children:[(0,k.jsx)("form",{children:(0,k.jsxs)(eg.s,{gap:y?16:32,marginBottom:32,style:{width:eJ,minWidth:y?void 0:eJ},children:[eR,eH,(0,k.jsxs)(eg.s,{gap:16,children:[eV,eY]}),M&&(0,k.jsx)("span",{style:{color:v.O9.e2},children:M}),(0,k.jsx)(S.z,{disabled:eX,onClick:eA,label:"Update Settings"})]})}),!!en&&(0,k.jsx)(at.Z,{cropShape:"rect",title:"Crop new icon",minWidth:i2.Rj.iconWidth,minHeight:i2.Rj.iconHeight,uploadFileName:"icon",onCancel:eI,onError:eZ,onSuccess:eD,image:en.image,imageContentType:en.contentType,open:!0,waitForPostProcessing:!0,fileInputRef:q,fileOwnerID:x.id}),!!ea&&(0,k.jsx)(at.Z,{cropShape:"rect",title:"Crop new cover photo",minWidth:i2.Rj.coverWidth,minHeight:i2.Rj.coverHeight,uploadFileName:"cover",onCancel:e_,onError:eM,onSuccess:eS,image:ea.image,imageContentType:ea.contentType,open:!0,waitForPostProcessing:!0,fileInputRef:Y,fileOwnerID:x.id}),W&&(0,k.jsx)(aj,{group:x,onCancel:e$,onSuccess:ez,onTimeout:eU})]})}),aL=g.ZP.span.withConfig({displayName:"styled__InputPrefix",componentId:"sc-fqe9od-0"})(["color:",";margin-right:-14px;",";"],v.O9.n5,Z.c.t7),aT=(0,g.iv)(["margin-bottom:inherit;padding-left:32px;width:auto;"]),aF=(0,g.iv)(["margin-bottom:8px;padding-left:0;width:100%;height:40px;"]),aB=(0,g.ZP)(S.z).withConfig({displayName:"styled__UrlChangeUpdateButton",componentId:"sc-fqe9od-1"})(["margin-right:16px;",""],function(e){return e.theme.isMobile?aF:aT}),aR=(0,g.iv)(["padding-left:32px;padding-right:32px;width:auto;"]),az=(0,g.iv)(["padding-left:0;padding-right:0;width:100%;height:40px;"]),aG=(0,g.ZP)(S.z).withConfig({displayName:"styled__UrlChangeCancelButton",componentId:"sc-fqe9od-2"})(["",""],function(e){return e.theme.isMobile?az:aR}),aU=g.ZP.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-fqe9od-3"})(["position:",";top:0;left:0;width:100%;height:100%;background:",";z-index:1;padding:",";"],function(e){return e.theme.isMobile?"relative":"absolute"},v.O9.n1,function(e){return e.theme.isMobile?"0":"32px"}),a$=(0,l.memo)(function(e){var t,n=e.dispatch,r=e.isMobile,i=e.onGetState,s=e.onStackPop,u=e.currentGroup,p=e.onMutateState,f=(0,l.useState)(!1),m=f[0],h=f[1],b=(0,l.useState)(null),g=b[0],x=b[1],y=i("groupURL"),w=(0,c.useRouter)(),C=(0,l.useCallback)((t=(0,o.Z)(a().mark(function e(t){var r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.renameGroup({groupId:u.id,newName:t});case 2:if(!(r=e.sent.error)){e.next=8;break}return h(!1),422===r.status?x(r.data.fields[0].error):400===r.status?x("URL cannot be used, please try again."):x("Failed to update group url"),e.abrupt("return");case 8:n(e0.bI,{message:"Group URL Updated"}),(0,V.H5)(w),s({bypassCheck:!0}),p({groupURL:t}),p({groupNameChanges:-1});case 13:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[u,n,p,s,w]);return(0,k.jsxs)(aU,{children:[!m&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(e4.Z,{variant:r?"t1":"t2",style:{marginBottom:8},children:"Change URL"}),(0,k.jsx)(e4.Z,{variant:"t7",style:{marginBottom:24},children:"You can only change your URL once, so be careful."}),(0,k.jsx)(ir.I,{autoFocus:!r,id:"url",label:"URL",type:"text",value:y,onChange:function(e){return p({groupURL:e.target.value})},error:g,prefix:(0,k.jsx)(aL,{children:"skool.com/"}),staticLabel:!0}),(0,k.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8,marginBottom:r?24:void 0},children:(0,k.jsx)(e4.Z,{variant:"t11",color:y.length>i1.R.maxURLName?v.O9.e2:v.O9.n5,children:"".concat(y.length,"/").concat(i1.R.maxURLName)})})]}),m&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(e4.Z,{variant:"t2",style:{marginBottom:"16px"},children:"Change URL?"}),(0,k.jsxs)(e4.Z,{variant:"t7",style:{marginBottom:r?24:16},children:["Are you sure you want to change your URL from ",(0,k.jsx)(e4.Z,{variant:"t5",inline:!0,children:"skool.com/".concat(u.name)})," to ",(0,k.jsx)(e4.Z,{variant:"t5",inline:!0,children:"skool.com/".concat(y)}),"? You can only change your URL once, so be careful."]})]}),(0,k.jsxs)("div",{style:{display:"flex",marginTop:4},children:[(0,k.jsx)(aB,{label:"Change URL",onClick:function(){m?m&&C(y):h(!0)},disabled:y.length>i1.R.maxURLName||!y.length>0}),(0,k.jsx)(aG,{variant:"secondary",label:"Cancel",onClick:function(){m?h(!1):s()}})]})]})}),aW=(0,g.iv)(["flex-direction:column;align-items:flex-start;margin:32px 0px;> div{margin-left:0px;}"]),aH=g.ZP.div.withConfig({displayName:"styled__BillingActionsWrapper",componentId:"sc-oaiix1-0"})(["display:flex;align-items:center;margin:32px 0px 40px;> div{margin-left:32px;}",""],function(e){return e.theme.isMobile&&aW}),aq=g.ZP.div.withConfig({displayName:"styled__ReferralWrapper",componentId:"sc-oaiix1-1"})(["display:flex;flex-direction:column;> a{margin-top:32px;}"]),aV=g.ZP.div.withConfig({displayName:"styled__AffiliateUser",componentId:"sc-oaiix1-2"})(["display:flex;align-items:center;margin-bottom:32px;> div{margin-right:12px;}> span{"," margin-left:12px;color:",";cursor:pointer;&:hover{text-decoration:underline;}}"],Z.c.t7,v.O9.sd1),aY=g.ZP.div.withConfig({displayName:"styled__LinkTitle",componentId:"sc-oaiix1-3"})(["display:flex;align-items:center;margin-bottom:16px;"]),aJ=(0,g.iv)(["display:initial;margin:32px 0 0 0;"]),aX=g.ZP.div.withConfig({displayName:"styled__BillingLinksWrapper",componentId:"sc-oaiix1-4"})(["display:flex;column-gap:32px;> div{display:flex;flex-direction:column;}",""],function(e){return e.theme.isMobile&&aJ}),aK=g.ZP.button.withConfig({displayName:"styled__InvoiceHistoryBack",componentId:"sc-oaiix1-5"})(["border:none;background:none;cursor:pointer;padding:0px;color:",";",""],v.O9.sd1,Z.c.t11),aQ=(0,g.iv)(["",""],Z.c.t4),a0=g.ZP.div.withConfig({displayName:"styled__InvoiceHistoryHeader",componentId:"sc-oaiix1-6"})([""," margin:0px;",""],Z.c.t2,function(e){return e.theme.isMobile&&aQ}),a1=g.ZP.div.withConfig({displayName:"styled__InvoiceList",componentId:"sc-oaiix1-7"})(["margin-top:32px;"]),a2=(0,g.iv)(["flex-direction:column;"]),a9=g.ZP.div.withConfig({displayName:"styled__InvoiceListItem",componentId:"sc-oaiix1-8"})(["display:flex;"," margin-bottom:16px;",""],Z.c.t7,function(e){return e.theme.isMobile&&a2}),a3=(0,g.iv)(["margin-left:0;"]),a5=g.ZP.div.withConfig({displayName:"styled__InvoiceListItemData",componentId:"sc-oaiix1-9"})(["margin-left:16px;",""],function(e){return e.theme.isMobile&&a3}),a6=g.ZP.div.withConfig({displayName:"styled__LoadingWrapper",componentId:"sc-oaiix1-10"})(["height:60px;display:flex;justify-content:center;align-items:center;"]),a4=g.ZP.div.withConfig({displayName:"styled__InvoiceListEmpty",componentId:"sc-oaiix1-11"})(["display:flex;margin-top:32px;",""],Z.c.t7),a8=(0,g.iv)(["margin-bottom:8px;"]),a7=g.ZP.div.withConfig({displayName:"styled__CancelButton",componentId:"sc-oaiix1-12"})([""," cursor:pointer;&:hover{text-decoration:underline;}color:",";",""],Z.c.t7,function(e){return e.theme.isDarkTheme?v.O9.n5:v.O9.n6},function(e){return e.theme.isMobile&&a8}),se=g.ZP.div.withConfig({displayName:"styled__ReferralLinkTitle",componentId:"sc-oaiix1-13"})([""," color:",";"],Z.c.t5,v.O9.n7),st=(0,g.iv)([""," margin-bottom:16px;"],Z.c.t4),sn=g.ZP.div.withConfig({displayName:"styled__ReferralTitle",componentId:"sc-oaiix1-14"})([""," color:",";margin-bottom:8px;",""],Z.c.t2,v.O9.n7,function(e){return e.theme.isMobile&&st}),sr=g.ZP.div.withConfig({displayName:"styled__ReferralBodyText",componentId:"sc-oaiix1-15"})([""," color:",";margin-bottom:16px;"],Z.c.t7,v.O9.n7),so=g.ZP.div.withConfig({displayName:"styled__CancelSubscriptionWrapper",componentId:"sc-oaiix1-16"})(["",""],Z.c.t7),si=g.ZP.div.withConfig({displayName:"styled__CancelSubscriptionHeader",componentId:"sc-oaiix1-17"})(["",";margin-bottom:8px;"],function(e){return e.theme.isMobile?Z.c.t4:Z.c.t2}),sa=g.ZP.div.withConfig({displayName:"styled__CancelSubscriptionUpdatePaymentMethod",componentId:"sc-oaiix1-18"})(["display:flex;flex-direction:",";margin-top:32px;"],function(e){return e.theme.isMobile?"column":"row"}),ss=(0,g.ZP)(S.z).withConfig({displayName:"styled__BillingUpdateButton",componentId:"sc-oaiix1-19"})(["height:","px;margin:",";"],function(e){return e.theme.isMobile?40:48},function(e){return e.theme.isMobile?"16px 0px 8px":0}),sl=(0,g.ZP)(S.z).withConfig({displayName:"styled__BillingCancelButton",componentId:"sc-oaiix1-20"})(["height:","px;margin-left:","px;"],function(e){return e.theme.isMobile?40:48},function(e){return e.theme.isMobile?0:16}),sc=g.ZP.div.withConfig({displayName:"styled__PaymentElementWrapper",componentId:"sc-oaiix1-21"})(["width:",";"],function(e){return e.theme.isMobile?"100%":"390px"}),su=g.ZP.div.withConfig({displayName:"styled__UpdatePaymentMethodButtonWrapper",componentId:"sc-oaiix1-22"})(["margin-top:24px;display:flex;flex-direction:",";"],function(e){return e.theme.isMobile?"column":"row"}),sd=g.ZP.div.withConfig({displayName:"styled__BillingActionButtons",componentId:"sc-oaiix1-23"})(["display:flex;flex-direction:",";"],function(e){return e.theme.isMobile?"column":"row"}),sp=g.ZP.div.withConfig({displayName:"styled__InputWrapper",componentId:"sc-oaiix1-24"})(["margin:40px 0 32px;"]);function sf(e){var t=e.invoiceName,n=e.invoiceAddress,r=e.invoiceTaxID,o=e.onChange,i=e.onCancel,a=(0,l.useState)(t),s=a[0],c=a[1],u=(0,l.useState)(n),d=u[0],p=u[1],f=(0,l.useState)(r),m=f[0],h=f[1],v=(0,C.bI)("isMobile").isMobile,b=(0,l.useCallback)(function(){o({invoiceName:s,invoiceAddress:d,invoiceTaxID:m})},[s,d,m,o]),g=(0,l.useCallback)(function(e){c(e.target.value)},[]),x=(0,l.useCallback)(function(e){p(e.target.value)},[]),y=(0,l.useCallback)(function(e){h(e.target.value)},[]);return(0,k.jsxs)(eg.s,{gap:16,children:[(0,k.jsxs)(eg.s,{gap:8,children:[(0,k.jsx)(e4.Z,{variant:v?"t4":"t2",children:"Customize invoice"}),(0,k.jsx)(e4.Z,{variant:"t7",children:"Custom fields added here will be reflected on all past and future invoices."})]}),(0,k.jsxs)(eg.s,{gap:32,children:[(0,k.jsxs)(eg.s,{gap:12,children:[(0,k.jsx)(ir.I,{id:"invoice-name",label:"Name on invoice",type:"text",value:s,onChange:g}),(0,k.jsx)(ir.I,{id:"invoice-address",label:"Address",value:d,onChange:x,multiline:!0,minRows:3,maxRows:3}),(0,k.jsx)(ir.I,{id:"invoice-tax-id",label:"Tax ID",type:"text",value:m,onChange:y})]}),(0,k.jsxs)(sd,{children:[(0,k.jsx)(ss,{label:"Update",onClick:b}),(0,k.jsx)(sl,{label:"Cancel",variant:"secondary",onClick:i})]})]})]})}sf.defaultProps={invoiceName:"",invoiceAddress:"",invoiceTaxID:""};var sm=(0,l.memo)(sf),sh=n(23332),sv=(0,l.memo)(function(e){var t,n=e.toggleUpdatePayment,r=e.handleStatusChange,i=(0,C.bI)("currentGroup","isMobile"),s=i.currentGroup,c=i.isMobile,u=i.dispatch,p=(0,l.useRef)(),f=(0,l.useState)(null),m=f[0],h=f[1],v=(0,l.useState)(""),b=v[0],g=v[1],x=(0,l.useState)(null),y=x[0],w=x[1],j=(0,l.useState)(!1),O=j[0],P=j[1],D=(0,l.useState)(!1),I=D[0],Z=D[1];(0,l.useEffect)(function(){(0,o.Z)(a().mark(function e(){var t,r,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.updatePaymentMethod({groupID:s.id});case 2:r=(t=e.sent).data,(o=t.error)&&(u(e0.bI,{message:(null===(i=o.data)||void 0===i||null===(i=i.fields)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.error)||"There was an issue with your request, please try again",severity:"error"}),n()),null!=r&&r.clientSecret&&h(r.clientSecret),null!=r&&r.immediate?g("paymentIntent"):g("setupIntent"),null!=r&&r.waitToken&&w(r.waitToken);case 9:case"end":return e.stop()}},e)}))()},[s.id,u,n]);var S=(0,l.useCallback)((t=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),Z(!0),e.prev=2,e.next=5,p.current.handleIntentConfirmation(b);case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),Z(!1),e.abrupt("return");case 11:Z(!1),r({waitToken:y}),n(),u(e0.bI,{message:"Payment info updated"});case 15:case"end":return e.stop()}},e,null,[[2,7]])})),function(e){return t.apply(this,arguments)}),[u,r,b,n,y]);return(0,k.jsxs)("div",{children:[(0,k.jsx)(e4.Z,{variant:c?"t4":"t2",style:{marginBottom:32},children:"Update payment info"}),(0,k.jsx)(sc,{children:(0,k.jsx)(sh.Z,{ref:p,intentClientSecret:m,paymentElementOnChange:P,isLoading:I,alignLoaderLeft:!0})}),(0,k.jsxs)(su,{children:[(0,k.jsx)(ss,{label:"Update",onClick:S,disabled:!O,loading:I}),(0,k.jsx)(sl,{label:"Cancel",variant:"secondary",onClick:n})]})]})}),sb=(0,l.memo)(function(e){var t,n,r=e.toggleCancelSubscription,i=e.showCancelConfirmation,s=e.handleStatusChange,c=e.paymentStatus,u=(0,C.bI)("currentGroup"),p=u.currentGroup,f=u.dispatch,m=(0,l.useState)(""),h=m[0],b=m[1],g=(0,l.useState)(!1),x=g[0],y=g[1],w=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,d.Z.cancelTrial({groupID:p.id,reason:h});case 3:if(n=(t=e.sent).data,!(r=t.error)){e.next=10;break}return y(!1),f(e0.bI,{message:(null===(o=r.data)||void 0===o||null===(o=o.fields)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.error)||"There was an issue with your request, please try again",severity:"error"}),e.abrupt("return");case 10:f(e0.bI,{message:"Free trial cancelled"}),s({waitToken:n.token,showCancelConfirmation:!0});case 12:case"end":return e.stop()}},e)})),[h,p,f,s]),j=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,d.Z.cancelSubscription({groupID:p.id,reason:h});case 3:if(n=(t=e.sent).data,!(r=t.error)){e.next=10;break}return y(!1),f(e0.bI,{message:null!==(o=null===(i=r.data)||void 0===i||null===(i=i.fields)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.error)&&void 0!==o?o:"There was an issue cancelling, please try again.",severity:"error"}),e.abrupt("return");case 10:s({waitToken:null==n?void 0:n.token,showCancelConfirmation:!0,successMessage:"Subscripton cancelled"});case 11:case"end":return e.stop()}},e)})),[h,p,f,s]),O=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{children:"Are you sure you want to cancel your free trial?"}),(0,k.jsxs)("ul",{children:[(0,k.jsx)("li",{children:"Your “".concat(null==p||null===(t=p.metadata)||void 0===t?void 0:t.displayName,"” group will be archived")}),(0,k.jsx)("li",{children:"This means your group will be read only, nobody will be able to like, post, comment, or chat"}),(0,k.jsx)("li",{children:"You can reactivate your group anytime to restore full functionality"})]}),(0,k.jsxs)("div",{children:["If you need help, you can post in ",(0,k.jsx)(W.r,{label:"Skool Community",href:"/community",style:{color:v.O9.sd1}})," or email ",(0,k.jsx)(W.r,{label:"help@skool.com.",href:"mailto:help@skool.com",style:{color:v.O9.sd1}})]}),(0,k.jsx)("br",{}),(0,k.jsx)("div",{children:"Still want to cancel your free trial? Please tell us why to help us improve!"})]}),P=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{children:"Are you sure you want to cancel your subscription?"}),(0,k.jsxs)("ul",{children:[(0,k.jsx)("li",{children:"Your “".concat(null==p||null===(n=p.metadata)||void 0===n?void 0:n.displayName,"” group will be archived at the end of your current billing cycle")}),(0,k.jsx)("li",{children:"This means your group will be read only, nobody will be able to like, post, comment, or chat"}),(0,k.jsx)("li",{children:"You can reactivate your group anytime to restore full functionality"})]}),(0,k.jsxs)("div",{children:["If you need help, you can post in ",(0,k.jsx)(W.r,{label:"Skool Community",href:"/community",style:{color:v.O9.sd1}})," or email ",(0,k.jsx)(W.r,{label:"help@skool.com.",href:"mailto:help@skool.com",style:{color:v.O9.sd1}})]}),(0,k.jsx)("br",{}),(0,k.jsx)("div",{children:"Still want to cancel your subscription? Please tell us why to help us improve!"})]}),D=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(si,{children:"Your free trial has been cancelled"}),(0,k.jsx)("div",{children:"You will not be charged."}),(0,k.jsxs)("ul",{children:[(0,k.jsx)("li",{children:"Your group has been archived"}),(0,k.jsx)("li",{children:"You can reactivate your group anytime to restore full functionality"})]})]}),I=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(si,{children:"Your subscription has been cancelled"}),(0,k.jsx)("div",{children:"You will not be charged again."}),(0,k.jsxs)("ul",{children:[(0,k.jsx)("li",{children:"Your group will be archived at the end of your current billing cycle"}),(0,k.jsx)("li",{children:"You can re-activate your subscription anytime to restore full functionality"})]})]});return i?(0,k.jsxs)("div",{children:["archived"===c&&D,"archived"!==c&&I,(0,k.jsx)(sa,{children:(0,k.jsx)(S.z,{label:"Back to Billing",variant:"secondary",onClick:r})})]}):(0,k.jsxs)(so,{children:[(0,k.jsx)(si,{children:"Cancel ".concat("trial"===c?"free trial":"subscription")}),"trial"===c&&O,"trial"!==c&&P,(0,k.jsx)(sp,{children:(0,k.jsx)(ir.I,{id:"cancellation-reason",label:"I'm cancelling because...",value:h,onChange:function(e){b(e.target.value)},multiline:!0,minRows:3,maxRows:3,inputProps:{"data-testid":"cancellation-reason-input"}})}),(0,k.jsx)(oP.e,{onConfirm:"trial"===c?w:j,confirmDisabled:!h,loading:x,confirmVariant:"error",confirmLabel:"Cancel ".concat("trial"===c?"free trial":"subscription"),cancelLabel:"Back",onCancel:r})]})}),sg=function(e){var t,n=e.toggleUnarchiveGroup,r=e.handleStatusChange,i=(0,C.bI)("currentGroup","isMobile"),s=i.currentGroup,c=i.isMobile,u=i.dispatch,p=(0,l.useRef)(),f=(0,l.useState)(null),m=f[0],h=f[1],v=(0,l.useState)(""),b=v[0],g=v[1],x=(0,l.useState)(null),y=x[0],w=x[1],j=(0,l.useState)(!1),O=j[0],P=j[1],D=(0,l.useState)(!1),I=D[0],Z=D[1];(0,l.useEffect)(function(){(0,o.Z)(a().mark(function e(){var t,r,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.activatePayment({groupID:s.id});case 2:r=(t=e.sent).data,(o=t.error)&&(u(e0.bI,{message:(null===(i=o.data)||void 0===i||null===(i=i.fields)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.error)||"There was an issue with your request, please try again",severity:"error"}),n()),null!=r&&r.clientSecret&&h(r.clientSecret),null!=r&&r.immediate?g("paymentIntent"):g("setupIntent"),null!=r&&r.waitToken&&w(r.waitToken);case 9:case"end":return e.stop()}},e)}))()},[s.id,u,n]);var S=(0,l.useCallback)((t=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),Z(!0),e.prev=2,e.next=5,p.current.handleIntentConfirmation(b);case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),Z(!1),e.abrupt("return");case 11:Z(!1),r({waitToken:y}),n(),u(e0.bI,{message:"Payment info updated"});case 15:case"end":return e.stop()}},e,null,[[2,7]])})),function(e){return t.apply(this,arguments)}),[u,r,b,n,y]);return(0,k.jsxs)("div",{children:[(0,k.jsx)(e4.Z,{variant:c?"t4":"t2",style:{marginBottom:32},children:"Update payment info"}),(0,k.jsx)(sc,{children:(0,k.jsx)(sh.Z,{ref:p,intentClientSecret:m,paymentElementOnChange:P,isLoading:I,alignLoaderLeft:!0})}),(0,k.jsxs)(su,{children:[(0,k.jsx)(ss,{label:"Update",onClick:S,disabled:!O,loading:I}),(0,k.jsx)(sl,{label:"Cancel",variant:"secondary",onClick:n})]})]})},sx=(0,l.memo)(function(e){var t=e.onSetState,n=e.onStackPush,r=e.currentGroup,i=e.onGetFullContentState,s=e.isMobile,c=i()||{},u=c.affiliateUser,p=c.affiliateCode,f=c.candidateUsers,m=(0,l.useState)(!1),h=m[0],b=m[1];(0,l.useEffect)(function(){var e;(e=(0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,d.Z.getGroupAutoAffiliateData({groupID:r.id});case 3:t(e.sent.data),b(!1);case 7:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()},[r,t]);var g=(0,l.useCallback)(function(){t({candidateUsers:f,affiliateUser:u},"adminBillingReferralChange"),n("adminBillingReferralChange")},[n,t,f,u]),x=(0,l.useMemo)(function(){return h||!u?(0,k.jsx)(eG.x,{height:200,justifyContent:"center",alignItems:"center",children:(0,k.jsx)(rF.D,{})}):h||u?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(aV,{children:[(0,k.jsx)(ex.Z,{user:u,size:40,disableLink:!0}),(0,k.jsx)(ey.Z,{user:u,disableLink:!0,typographyVariant:"t5"}),(0,k.jsx)("span",{onClick:g,children:"(Change)"})]}),(0,k.jsxs)(aY,{children:[(0,k.jsx)(eF.J,{name:"LinkAlt",style:{height:16,width:16,marginRight:8,color:v.O9.n7}}),(0,k.jsx)(se,{children:"".concat(null==u?void 0:u.firstName,"'s referral link")})]}),(0,k.jsx)(it.v,{value:"".concat(location.origin,"/refer?ref=").concat(p)}),(0,k.jsx)(W.r,{href:"https://skool.com/settings?t=referrals",children:(0,k.jsx)(S.z,{variant:"secondary",label:"See your referrals",style:{margin:"32px 0 0 0"}})})]}):null},[p,u,g,h]);return(0,k.jsxs)(aq,{children:[(0,k.jsx)(sn,{children:"Referrals"}),(0,k.jsxs)(sr,{children:["If somebody creates a group from your group, we’ll automatically pay you 40% every month. ",!s&&(0,k.jsx)("br",{}),"This way Skool becomes an income stream, not a cost. Earnings will go to this admin:"]}),x]})});function sy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sy(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var sC=g.ZP.div.withConfig({displayName:"GroupBilling__Wrapper",componentId:"sc-1ivrmrg-0"})(["position:relative;display:flex;flex-direction:column;"]),sj=(0,l.memo)(function(e){var t,n=(0,C.bI)("self","currentGroup","isMobile"),r=n.self,i=n.currentGroup,s=n.isMobile,u=n.dispatch,p=e.onStackPush,f=(0,l.useState)(!1),m=f[0],h=f[1],v=(0,l.useState)(null),b=v[0],g=v[1],x=(0,l.useState)(!1),y=x[0],w=x[1],j=(0,l.useState)(!1),O=j[0],P=j[1],D=(0,l.useState)(!1),I=D[0],Z=D[1],_=(0,l.useState)(!1),M=_[0],N=_[1],E=(0,l.useState)(!1),A=E[0],L=E[1],T=(0,l.useState)(!1),F=T[0],B=T[1],R=(0,l.useState)(!1),z=R[0],G=R[1],U=(0,l.useRef)(),$=(0,c.useRouter)(),W=(null==b?void 0:b.billingCycleEnd)||null,H=(null==b?void 0:b.paymentCard)||null,q=(null==b?void 0:b.paymentStatus)||null,Y=JSON.parse(H),J=r.id===(null==b?void 0:b.createdBy)||null;(0,l.useEffect)(function(){(0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.getGroup({groupID:i.id});case 2:g(e.sent.data.metadata),h(!0);case 6:case"end":return e.stop()}},e)}))()},[i.id]);var X=(0,l.useCallback)(function(){L(function(e){return!e})},[]),K=(0,l.useCallback)(function(){P(function(e){return!e})},[]),Q=(0,l.useCallback)(function(){p("adminBillingInvoiceHistory")},[p]),ee=(0,l.useCallback)((t=(0,o.Z)(a().mark(function e(t){var n,o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.waitToken,o=t.showCancelConfirmation,s=t.successMessage,N(!0),!n){e.next=13;break}return e.prev=3,e.next=6,(0,oO.Cx)({token:n,userID:null==r?void 0:r.id,timeoutMS:6e4});case 6:e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(3),u(e0.bI,{message:"There was an issue with your request, please try again.",severity:"error"}),N(!1),e.abrupt("return");case 13:return s&&u(e0.bI,{message:s}),e.next=16,d.Z.getGroup({groupID:i.id});case 16:g(e.sent.data.metadata),N(!1),(0,V.H5)($),o&&G(!0);case 22:case"end":return e.stop()}},e,null,[[3,8]])})),function(e){return t.apply(this,arguments)}),[i,u,$,r]),et=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r,o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),e.next=3,d.Z.uncancelSubscription({groupID:i.id});case 3:if(n=(t=e.sent).data,!(r=t.error)){e.next=10;break}return B(!1),u(e0.bI,{message:null!==(o=null===(s=r.data)||void 0===s||null===(s=s.fields)||void 0===s||null===(s=s[0])||void 0===s?void 0:s.error)&&void 0!==o?o:"There was an issue with reactivation, please try again.",severity:"error"}),e.abrupt("return");case 10:return e.next=12,ee({waitToken:null==n?void 0:n.token});case 12:B(!1);case 13:case"end":return e.stop()}},e)})),[i,u,ee]),en=(0,l.useCallback)(function(){w(!y)},[y]),er=(0,l.useCallback)(function(){Z(!I)},[I]),eo=(0,l.useCallback)(function(e){var t=e.invoiceName,n=e.invoiceAddress,r=e.invoiceTaxID;(0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.updateGroupInvoiceFields({groupID:i.id,name:t,address:n,taxID:r});case 2:e.sent.error?u(e0.bI,{message:"Failed to update invoice fields, please try again.",severity:"error"}):(g(function(e){return sw(sw({},e),{},{invoiceName:t,invoiceAddress:n,invoiceTaxId:r})}),u(e0.bI,{message:"Invoice info updated"}));case 5:case"end":return e.stop()}},e)}))(),L(!1)},[i,u]),ei=(0,l.useCallback)(function(){L(!1)},[]);return m?M?(0,k.jsxs)(sC,{children:[(0,k.jsx)("div",{style:{marginBottom:16},children:(0,k.jsx)(rF.D,{})}),(0,k.jsx)(e4.Z,{variant:s?"t4":"t2",textAlign:"left",children:"One moment.."}),(0,k.jsx)(e4.Z,{variant:"t7",textAlign:"left",style:{margin:"8px 0"},children:"Your billing information is being updated."})]}):I?(0,k.jsx)(sg,{toggleUnarchiveGroup:er,handleStatusChange:ee}):O?(0,k.jsx)(sb,{ref:U,toggleCancelSubscription:K,paymentStatus:q,handleStatusChange:ee,showCancelConfirmation:z}):y?(0,k.jsx)(sv,{toggleUpdatePayment:en,handleStatusChange:ee}):A?(0,k.jsx)(sm,{invoiceName:null==b?void 0:b.invoiceName,invoiceAddress:null==b?void 0:b.invoiceAddress,invoiceTaxID:null==b?void 0:b.invoiceTaxId,onChange:eo,onCancel:ei}):"canceled"===q?(0,k.jsxs)(sC,{children:[(0,k.jsx)(e4.Z,{variant:s?"t4":"t2",style:{marginBottom:s?16:8},children:"Billing"}),(0,k.jsx)(e4.Z,{variant:"t7",children:"Your subscription has been cancelled. You will not be charged again. Your group will be archived at the end of your current billing cycle. If you change your mind, you can reactivate your group at any time."}),(0,k.jsx)(S.z,{variant:"secondary",label:"Reactivate Group",onClick:et,loading:F,style:{margin:"32px 0"}})]}):"archived"===q?(0,k.jsxs)(sC,{children:[(0,k.jsx)(e4.Z,{variant:s?"t4":"t2",style:{marginBottom:s?16:8},children:"Billing"}),(0,k.jsx)(e4.Z,{variant:"t7",children:"Your group has been archived. This means your group is read only. Nobody can like, post, comment, or chat. You can reactivate your group anytime to restore full functionality."}),(0,k.jsx)(S.z,{variant:"secondary",label:"Reactivate Group",onClick:er,style:{margin:"32px 0"}})]}):(0,k.jsxs)(sC,{children:[(0,k.jsx)(e4.Z,{variant:s?"t4":"t2",style:{marginBottom:s?16:8},children:"Billing"}),"legacy"===q&&(0,k.jsxs)(e4.Z,{variant:"t7",children:["You have a legacy account.",(0,k.jsx)("br",{}),(0,k.jsx)("br",{}),"Skool is now $99/month. Please update your payment info to continue using the platform."]}),"active"===q&&(0,k.jsxs)(e4.Z,{variant:"t7",children:["You are currently paying $99/month for this group\n            ".concat(null!=Y&&Y.brand&&null!=Y&&Y.last4?"with your ".concat(Y.brand.toUpperCase()," ending in ").concat(Y.last4,"."):".")," ",!s&&(0,k.jsx)("br",{}),W&&"Your next billing date is ".concat(eQ()(1e3*W).format("MMMM Do, YYYY"),".\n          ")]}),"trial"===q&&(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(e4.Z,{variant:"t7",children:["Your 14-day free trial ends on ".concat(eQ()(1e3*W).format("MMMM Do, YYYY"),"."),(0,k.jsx)("br",{}),(0,k.jsx)("br",{}),"Your ".concat(Y.brand.toUpperCase()," ending in ").concat(Y.last4," will be charged $99/month from that date forward."),(0,k.jsx)("br",{})]})}),(0,k.jsxs)(aH,{children:[(0,k.jsx)(S.z,{variant:"secondary",label:"Update Payment Info",onClick:"legacy"!==q?en:er}),(0,k.jsxs)(aX,{children:[(0,k.jsxs)("div",{children:["legacy"!==q&&"trial"!==q&&(0,k.jsx)(a7,{onClick:Q,children:"Invoice history"}),("active"===q||"trial"===q)&&(0,k.jsx)(a7,{onClick:X,children:"Customize invoice"})]}),"legacy"!==q&&"active"===q&&(0,k.jsx)(a7,{onClick:K,children:"Cancel subscription"}),"legacy"!==q&&"trial"===q&&J&&(0,k.jsx)(a7,{onClick:K,children:"Cancel free trial"})]})]}),(0,k.jsx)(sx,sw({},e))]}):(0,k.jsx)(sC,{children:(0,k.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:(0,k.jsx)(rF.D,{})})})}),sk=g.ZP.div.withConfig({displayName:"styled__ReferralChangeWrapper",componentId:"sc-i1s7w9-0"})(["display:flex;flex-direction:column;"]),sO=g.ZP.div.withConfig({displayName:"styled__UserItems",componentId:"sc-i1s7w9-1"})(["display:flex;flex-direction:column;> button{display:flex;align-items:center;margin-bottom:16px;}"]),sP=g.ZP.div.withConfig({displayName:"styled__UserItem",componentId:"sc-i1s7w9-2"})(["display:flex;align-items:center;padding-left:14px;width:100%;> div{margin-right:12px;}"]),sD=(0,g.iv)(["flex-direction:column;gap:8px;"]),sI=g.ZP.div.withConfig({displayName:"styled__ButtonsWrapper",componentId:"sc-i1s7w9-3"})(["display:flex;margin-top:16px;gap:16px;",""],function(e){return e.isMobile&&sD}),sZ=g.ZP.div.withConfig({displayName:"styled__ReferralChangeLabel",componentId:"sc-i1s7w9-4"})(["margin-bottom:32px;",""],Z.c.t2),sS=(0,l.memo)(function(e){var t=e.onGetFullContentState,n=e.onMutateState,r=e.currentGroup,i=e.onStackPop,s=e.hasChanges,c=e.isMobile,u=e.dispatch,p=t()||{},f=p.candidateUsers,m=p.affiliateUser,h=void 0===m?{}:m,v=(0,l.useCallback)(function(e){var t=(0,k.jsxs)(sP,{children:[(0,k.jsx)(ex.Z,{user:e,size:40,disableLink:!0}),(0,k.jsx)(ey.Z,{user:e,disableLink:!0,typographyVariant:"t5"})]});return(0,k.jsx)(o0.Y,{label:t,onClick:function(){n({affiliateUser:e})},active:e.id===h.id},t.id)},[h,n]),b=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.updateGroupAutoAffiliateUser({groupID:r.id,userID:h.id});case 2:if(!e.sent.error){e.next=7;break}return u(e0.bI,{message:"Failed to update. Try again later.",severity:"error"}),e.abrupt("return");case 7:u(e0.bI,{message:"Admin updated."}),i({bypassCheck:!0});case 9:case"end":return e.stop()}},e)})),[h,r,u,i]);return(0,k.jsxs)(sk,{children:[(0,k.jsx)(sZ,{children:"Earnings will go to"}),(0,k.jsx)(sO,{children:(void 0===f?[]:f).map(v)}),(0,k.jsxs)(sI,{isMobile:c,children:[(0,k.jsx)(S.z,{label:"Change",disabled:!s,onClick:b}),(0,k.jsx)(S.z,{label:"Cancel",onClick:i,variant:"secondary"})]})]})}),s_=n(5565),sM=(0,l.memo)(function(e){var t=e.onStackPop,n=(0,l.useState)([]),r=n[0],i=n[1],s=(0,l.useState)(!0),c=s[0],u=s[1],p=(0,C.bI)("currentGroup").currentGroup;(0,l.useEffect)(function(){(0,o.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.getGroupInvoices({groupID:p.id});case 2:null!=(t=e.sent.data)&&t.invoices&&i(t.invoices),u(!1);case 6:case"end":return e.stop()}},e)}))()},[p]);var f=(0,l.useCallback)(function(e,t){return(0,k.jsxs)(a9,{children:[(0,k.jsx)(W.r,{label:eQ()(e.createdAt).format("MMMM Do, YYYY"),href:"/".concat(p.name,"/--/invoices/").concat(e.invoiceNumber),newTab:!0}),(0,k.jsx)(a5,{children:"(".concat((0,s_.v)({amount:e.totalAmount/100,currency:"usd"})," — ").concat(e.paymentMethod.replace("-"," ending in "),")")})]},"".concat(t,"-invoice"))},[p]);return c?(0,k.jsx)(a6,{children:(0,k.jsx)(rF.D,{})}):(0,k.jsxs)("div",{children:[(0,k.jsx)(a0,{children:"Invoice history"}),(0,k.jsx)(aK,{type:"button",onClick:t,children:"< Back to billing"}),!r&&(0,k.jsx)(a4,{children:"No invoice history to display"}),r&&(0,k.jsx)(a1,{children:r.map(f)})]})}),sN=n(96864),sE=n(22063),sA=g.ZP.div.withConfig({displayName:"styled__ResourceListHeaderWrapper",componentId:"sc-3i6njg-0"})(["margin-bottom:16px;"]),sL=g.ZP.div.withConfig({displayName:"styled__ResourceListHeaderLeftColumn",componentId:"sc-3i6njg-1"})(["flex:1;> h2{"," margin:0px;}"],function(e){var t=e.theme;return Z.c[t.isMobile?"t4":"t2"]}),sT=(0,g.iv)(["flex-direction:column;gap:16px;"]),sF=g.ZP.div.withConfig({displayName:"styled__ResourceListHeaderTop",componentId:"sc-3i6njg-2"})(["display:flex;gap:32px;",""],function(e){return e.theme.isMobile&&sT}),sB=g.ZP.div.withConfig({displayName:"styled__ResourceListHeaderLeft",componentId:"sc-3i6njg-3"})(["flex:1;display:flex;align-items:center;> h2{"," margin:0px;}"],Z.c.t2),sR=g.ZP.div.withConfig({displayName:"styled__ResourceListHeaderDescription",componentId:"sc-3i6njg-4"})([""," margin-top:8px;"],Z.c.t7),sz=g.ZP.button.withConfig({displayName:"styled__BackButton",componentId:"sc-3i6njg-5"})(["border:none;background:none;cursor:pointer;padding:0px;color:",";",""],v.O9.sd1,Z.c.t11),sG=["onCta","title","description","onBack","ctaLabel","ctaDisabled","extraAction","backLabel"];function sU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sU(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var sW=(0,l.memo)(function(e){var t=e.onCta,n=e.title,r=e.description,o=e.onBack,i=e.ctaLabel,a=e.ctaDisabled,s=e.extraAction,c=e.backLabel,u=void 0===c?"< Back":c,d=(0,b.Z)(e,sG),p=(0,l.useMemo)(function(){if(o)return(0,k.jsx)(sz,{type:"button",onClick:o,children:u})},[u,o]),f=(0,l.useMemo)(function(){if(t)return(0,k.jsx)(S.z,{label:i,onClick:t,disabled:a})},[t,i,a]);return(0,k.jsxs)(sA,s$(s$({},d),{},{children:[(0,k.jsxs)(sF,{children:[(0,k.jsxs)(sB,{children:[(0,k.jsxs)(sL,{children:[(0,k.jsx)("h2",{children:n}),p]}),s]}),f]}),r&&(0,k.jsx)(sR,{children:r})]}))}),sH=g.ZP.span.withConfig({displayName:"styled__PluginEnabled",componentId:"sc-otor8f-0"})(["color:",";margin-left:4px;"],function(e){var t=e.$enabled;return v.O9[t?"s2":"n5"]}),sq=["id"];function sV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var sY=(0,l.memo)(function(e){var t=e.currentGroup,n=e.onStackPush,o=e.groupMembershipQuestions,i=(0,l.useMemo)(function(){var e,i,a,s,l,c=(null==t||null===(e=t.metadata)||void 0===e?void 0:e.pluginZapierEnabled)===1,u=(null==t||null===(i=t.metadata)||void 0===i?void 0:i.pluginWebhookEnabled)===1,d=(null==t||null===(a=t.metadata)||void 0===a?void 0:a.pluginAutoDmEnabled)===1,p=(null==t||null===(s=t.metadata)||void 0===s?void 0:s.pluginMinChatLevelEnabled)===1,f=(null==t||null===(l=t.metadata)||void 0===l?void 0:l.pluginMetaConversionsEnabled)===1;return[{logo:"https://assets.skool.com/skool/c113aabbdd6b48c7b0c3e8bdb3cd0259.png",title:(0,k.jsxs)(k.Fragment,{children:["Membership questions ",(0,k.jsx)(sH,{$enabled:o.enabled,children:"(".concat(o.enabled?"On":"Off",")")})]}),description:"Ask members questions when they request access to your group.",id:"adminMembershipQuestions"},{logo:"https://assets.skool.com/skool/be42073f7ce84d079e3e1d9f4f6fd844.png",title:(0,k.jsxs)(k.Fragment,{children:["Zapier integration ",(0,k.jsx)(sH,{$enabled:c,children:"(".concat(c?"On":"Off",")")})]}),description:"Invite members, unlock courses, and send membership questions to your CRM.",id:"adminZapier"},{logo:"https://assets.skool.com/skool/e6f613ba897e4dae8b34603e525bbee8.png",title:(0,k.jsxs)(k.Fragment,{children:["Webhook ",(0,k.jsx)(sH,{$enabled:u,children:"(".concat(u?"On":"Off",")")})]}),description:"Invite members to your group with a simple webhook.",id:"adminWebhook"},{logo:"https://assets.skool.com/skool/75903c9daef8441fac49035c0ef9dccd.png",title:(0,k.jsxs)(k.Fragment,{children:["Auto DM new members ",(0,k.jsx)(sH,{$enabled:d,children:"(".concat(d?"On":"Off",")")})]}),description:"Send an automated DM to new group members.",id:"adminAutoDm"},{logo:"https://assets.skool.com/skool/6e824025010348ffb70bdc6110139aa6.svg",title:(0,k.jsxs)(k.Fragment,{children:["Unlock chat at Level 2 ",(0,k.jsx)(sH,{$enabled:p,children:"(".concat(p?"On":"Off",")")})]}),description:"Reduce DM spam by requiring members to be at Level 2 to chat.",id:"adminChatUnlock"},{logo:"https://assets.skool.com/skool/6beb9ac148a5495b949e4a43eefb9446.svg",title:(0,k.jsxs)(k.Fragment,{children:["Meta pixel tracking",(0,k.jsx)(sH,{$enabled:f,children:"(".concat(f?"On":"Off",")")})]}),description:"Run FB/IG ads to your about page, retarget visitors, and track signups with precision.",id:"adminMetaPixel"}].map(function(e){var t=e.id,o=(0,b.Z)(e,sq);return(0,k.jsx)(sE.L,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sV(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sV(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({onEdit:function(){return n(t)}},o),t)})},[o,n,t]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(sW,{title:"Plugins"}),(0,k.jsx)(sN.D,{resources:i,noBorder:!0,customNodes:!0})]})}),sJ=n(22441),sX=g.ZP.div.withConfig({displayName:"styled__MembershipWebhookWrapper",componentId:"sc-1oreufy-0"})(["> div{&:first-child{margin-bottom:32px;}}",""],Z.c.t7),sK=g.ZP.a.withConfig({displayName:"styled__VideoUrl",componentId:"sc-1oreufy-1"})(["color:",";text-decoration:underline;&:hover{text-decoration:underline;}"],v.O9.sd1),sQ=(0,l.memo)(function(e){var t,n=e.currentGroup,r=e.onStackPop,i=(0,l.useState)(""),s=i[0],u=i[1],p=(0,l.useRef)(!1),f=(0,c.useRouter)();(0,l.useEffect)(function(){return p.current=!0,(0,o.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.createGroupInviteWebhook({groupName:n.id});case 2:(t=e.sent.data.id)&&p.current&&u("".concat((0,U.QH)(),"/groups/").concat(n.name,"/webhooks/").concat(t));case 5:case"end":return e.stop()}},e)}))(),function(){p.current=!1}},[n]);var m=!!(null!=n&&null!==(t=n.metadata)&&void 0!==t&&t.pluginWebhookEnabled),h=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=5;break}return e.next=3,d.Z.disableWebhook({groupID:n.id});case 3:e.next=7;break;case 5:return e.next=7,d.Z.enableWebhook({groupID:n.id});case 7:return e.next=9,(0,V.H5)(f);case 9:case"end":return e.stop()}},e)})),[m,n,f]),v=(0,l.useMemo)(function(){return(0,k.jsx)(sJ.Z,{label:m?"On":"Off",onClick:h,active:m})},[m,h]);return(0,k.jsxs)(sX,{children:[(0,k.jsx)(sW,{onBack:r,title:"Webhook",backLabel:"< Back to plugins",extraAction:v}),(0,k.jsx)(it.v,{label:"Webhook URL",value:s}),(0,k.jsxs)("div",{style:{marginTop:32},children:["Append emails to the end of your webhook URL like this:","\xa0",(0,k.jsx)("b",{children:"yourwebhookurl?email=bob@gmail.com"})]}),(0,k.jsxs)("p",{children:["Emails sent to this custom webhook URL will be sent a unique invite link so they can join your group instantly without going through the membership approval process. Don’t share this link with anybody, they'll be able to invite people to your group. ",(0,k.jsx)(sK,{href:"https://vimeo.com/483886415",target:"_blank",rel:"noreferrer",children:"Video instructions"}),"."]}),(0,k.jsx)(S.z,{style:{marginTop:32},label:"Done",variant:"secondary",onClick:r})]})}),s0=g.ZP.div.withConfig({displayName:"styled__GroupPluginsAutoDmWrapper",componentId:"sc-3ngwxc-0"})(["> div:first-child{margin-bottom:32px;}display:flex;flex-direction:column;"," > p{margin:0px;}"],Z.c.t7),s1=(0,g.iv)(["flex-direction:column;margin:16px 0px 32px 0px;gap:8px;"]),s2=g.ZP.div.withConfig({displayName:"styled__ButtonWrapper",componentId:"sc-3ngwxc-1"})(["display:flex;gap:16px;margin:4px 0px 32px 0px;",""],function(e){return e.theme.isMobile&&s1}),s9=g.ZP.div.withConfig({displayName:"styled__UserWrapper",componentId:"sc-3ngwxc-2"})(["margin-bottom:24px;display:flex;align-items:center;> span{margin:0px 6px 0px 12px;","}> a{color:",";cursor:pointer;&:hover{text-decoration:underline;}}"],Z.c.t5,v.O9.sd1),s3=g.ZP.div.withConfig({displayName:"styled__PreviewContent",componentId:"sc-3ngwxc-3"})(["white-space:pre-line;word-break:break-word;padding-top:24px;padding-bottom:8px;"]),s5=(0,l.memo)(function(e){var t,n,r=e.currentGroup,i=e.onStackPop,s=e.onSetState,u=e.onStackPush,p=e.dispatch,f=(0,l.useRef)(!1),m=(0,c.useRouter)(),h=(0,l.useState)(!0),v=h[0],b=h[1],g=(0,l.useState)(null),x=g[0],y=g[1],w=(0,l.useState)(null),C=w[0],j=w[1],O=(0,l.useState)(null),P=O[0],D=O[1],I=(0,l.useState)([]),Z=I[0],_=I[1],M=(0,l.useState)(null),N=M[0],E=M[1];(0,l.useEffect)(function(){return f.current=!0,(0,o.Z)(a().mark(function e(){var t,n,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.getAutoDmSettings({groupId:r.id});case 2:n=(t=e.sent.data).autoDmMessage,o=t.autoDmUser,i=t.candidateUsers,y(o),D(n),j(n),_(i),b(!1);case 12:case"end":return e.stop()}},e)}))(),function(){f.current=!1}},[r]);var A=!!(null!=r&&null!==(t=r.metadata)&&void 0!==t&&t.pluginAutoDmEnabled),L=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!A){e.next=5;break}return e.next=3,d.Z.disableAutoDm({groupId:r.id});case 3:e.next=7;break;case 5:return e.next=7,d.Z.enableAutoDm({groupId:r.id});case 7:return e.next=9,(0,V.H5)(m);case 9:case"end":return e.stop()}},e)})),[A,r,m]),T=(0,l.useMemo)(function(){return(0,k.jsx)(sJ.Z,{label:A?"On":"Off",onClick:L,active:A})},[A,L]),F=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.updateAutoDmMessage({groupId:r.id,message:P.replace(/#NAME#/gi,"#NAME#").replace(/#GROUPNAME#/gi,"#GROUPNAME#")});case 2:j(P),p(e0.bI,{message:"Auto DM updated"});case 4:case"end":return e.stop()}},e)})),[p,r,P]),B=(0,l.useCallback)(function(){s({autoDmUser:x,candidateUsers:Z},"adminAutoDmChangeUser"),u("adminAutoDmChangeUser")},[x,Z,s,u]),R=(0,l.useCallback)(function(){E(!0)},[]);return v?null:(0,k.jsxs)(s0,{children:[(0,k.jsx)(sW,{onBack:i,title:"Auto DM new members",backLabel:"< Back to plugins",extraAction:T}),(0,k.jsxs)(s9,{children:[(0,k.jsx)(ex.Z,{user:x,size:40,disableLink:!0}),(0,k.jsx)("span",{children:"From: ".concat(null==x?void 0:x.firstName," ").concat(null==x?void 0:x.lastName)}),(0,k.jsx)("a",{onClick:B,children:"(Change)"})]}),(0,k.jsx)(ir.I,{multiline:!0,label:"Message",value:P,minRows:5,maxRows:5,maxCharacters:300,onChange:function(e){return D(e.target.value)},inputProps:{"data-testid":"auto-dm-message-input"}}),(0,k.jsxs)(s2,{children:[(0,k.jsx)(S.z,{label:"Save",onClick:F,disabled:C===P||!P.trim()||P.length>300}),(0,k.jsx)(S.z,{label:"Preview",variant:"secondary",onClick:R,disabled:!P.trim()||P.length>300})]}),(0,k.jsx)("p",{style:{marginBottom:16},children:"Send a DM to new members to welcome them or start a conversation. The DM will be sent at a random time 1-5 mins after the member joins. If a conversation already exists, we won't send the message."}),(0,k.jsxs)("p",{children:[(0,k.jsx)("b",{children:"Tips:"})," Use #NAME# to personalize your message with the member's first name. Use #GROUPNAME# for your groups name. Keep your message short and conversational, like you'd DM a friend. The goal is to start a conversation."]}),(0,k.jsx)(nQ.T,{open:N,onClose:function(){return E(!1)},onConfirm:function(){return E(!1)},confirmLabel:"Close",header:"Preview",children:(0,k.jsx)(s3,{children:null==P?void 0:P.replace(/#NAME#/gi,null==x?void 0:x.firstName).replace(/#GROUPNAME#/gi,null==r||null===(n=r.metadata)||void 0===n?void 0:n.displayName)})})]})}),s6=g.ZP.div.withConfig({displayName:"styled__ConnectMetaPixelModalWrapper",componentId:"sc-101oeda-0"})(["display:flex;flex-direction:column;padding-top:16px;"]),s4=g.ZP.div.withConfig({displayName:"styled__InputLabel",componentId:"sc-101oeda-1"})(["margin-bottom:8px;",";> a{margin-left:16px;}"],Z.c.t5),s8=g.ZP.div.withConfig({displayName:"styled__InputErrorWrapper",componentId:"sc-101oeda-2"})(["margin-top:16px;color:",";",""],v.O9.e2,Z.c.t7),s7=g.ZP.div.withConfig({displayName:"styled__InputsWrapper",componentId:"sc-101oeda-3"})(["display:flex;flex-direction:column;gap:24px;"]);function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ln=(0,l.memo)(function(e){var t=e.onClose,n=(0,l.useState)(""),r=n[0],i=n[1],s=(0,l.useState)(""),u=s[0],p=s[1],f=(0,l.useState)(!1),m=f[0],h=f[1],v=(0,C.bI)("currentGroup"),b=v.currentGroup,g=v.dispatch,x=(0,c.useRouter)(),y=(0,l.useCallback)(function(e){h(!1),i(e.target.value)},[]),w=(0,l.useCallback)(function(e){h(!1),p(e.target.value)},[]),j=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.connectMetaPixel({groupId:b.id,accessToken:u,pixelId:r});case 2:if(!(n=e.sent.error)){e.next=10;break}if(422!==n.status){e.next=8;break}return h(!0),e.abrupt("return");case 8:return g(e0.bI,{message:"Something went wrong, please try again",severity:"error"}),e.abrupt("return");case 10:(0,V.H5)(x),t();case 12:case"end":return e.stop()}},e)})),[t,b,u,r,x,g]);return(0,k.jsx)(nQ.T,lt(lt({header:"Connect Meta pixel",onConfirm:j,confirmLabel:"Connect"},e),{},{children:(0,k.jsxs)(s6,{children:[(0,k.jsxs)(s7,{children:[(0,k.jsxs)(eg.s,{children:[(0,k.jsxs)(s4,{children:[(0,k.jsx)("span",{children:"Meta pixel ID"}),(0,k.jsx)(W.r,{label:"where can I find this?",href:"https://help.skool.com/article/163-how-to-set-up-facebook-pixel-tracking",newTab:!0})]}),(0,k.jsx)(ir.I,{staticLabel:!0,placeholder:"Meta pixel ID",onChange:y,value:r})]}),(0,k.jsxs)(eg.s,{children:[(0,k.jsxs)(s4,{children:[(0,k.jsx)("span",{children:"Access token"}),(0,k.jsx)(W.r,{label:"where can I find this?",href:"https://help.skool.com/article/163-how-to-set-up-facebook-pixel-tracking",newTab:!0})]}),(0,k.jsx)(ir.I,{staticLabel:!0,placeholder:"Access token",onChange:w,value:u})]})]}),m&&(0,k.jsx)(s8,{children:"Invalid pixel ID or access token"})]})}))}),lr=g.ZP.div.withConfig({displayName:"styled__GroupPluginsMetaPixelWrapper",componentId:"sc-1jt9z93-0"})(["display:flex;flex-direction:column;"]),lo=g.ZP.div.withConfig({displayName:"styled__PixelDescription",componentId:"sc-1jt9z93-1"})(["margin:16px 0px 32px 0px;",""],Z.c.t7),li=g.ZP.div.withConfig({displayName:"styled__InfoLabel",componentId:"sc-1jt9z93-2"})(["margin-top:40px;",""],Z.c.t5),la=g.ZP.ol.withConfig({displayName:"styled__InfoItems",componentId:"sc-1jt9z93-3"})(["display:flex;flex-direction:column;gap:24px;padding-inline-start:24px;margin:16px 0px;",""],Z.c.t7),ls=g.ZP.div.withConfig({displayName:"styled__LearnMore",componentId:"sc-1jt9z93-4"})(["",""],Z.c.t7),ll=(0,g.iv)(["flex-direction:column;align-items:flex-start;> div{&:last-child{> div{button{margin-left:0px;}}}}"]),lc=g.ZP.div.withConfig({displayName:"styled__PixelIdWrapper",componentId:"sc-1jt9z93-5"})(["display:flex;align-items:center;> div{&:first-child{"," > span{color:",";}}&:last-child{display:flex;> button{margin-left:16px;height:fit-content;","}> div{button{color:",";margin-left:16px;height:fit-content;","}}}}",""],Z.c.t5,v.O9.s2,Z.c.t7,v.O9.e2,Z.c.t7,function(e){return e.theme.isMobile&&ll}),lu=(0,l.memo)(function(e){var t,n,r=e.currentGroup,i=e.onStackPop,s=e.dispatch,u=(0,c.useRouter)(),p=(0,en.C1)(),f=(0,Q.Z)(p,3),m=f[0],h=f[1],b=f[2],g=(0,l.useState)(null),x=g[0],y=g[1],w=(0,l.useState)(null),C=w[0],j=w[1],O=(null==r||null===(t=r.metadata)||void 0===t?void 0:t.pluginMetaConversionsEnabled)===1,P=(null==r||null===(n=r.metadata)||void 0===n?void 0:n.metaConversionsStatus)==="success",D=(0,l.useRef)(!1);(0,l.useEffect)(function(){D.current=!0},[]);var I=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.getMetaPixelId({groupId:r.id});case 2:if(n=(t=e.sent).data,!t.error){e.next=8;break}return s(e0.bI,{message:"Something went wrong, please try again",severity:"error"}),e.abrupt("return");case 8:y(n);case 9:case"end":return e.stop()}},e)})),[r,s]);(0,l.useEffect)(function(){P&&I()},[P,I]);var Z=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.testMetaPixel({groupId:r.id});case 2:j(e.sent.error?"Failed":"Success"),setTimeout(function(){D.current&&j(null)},2e3);case 6:case"end":return e.stop()}},e)})),[r]),_=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=10;break}return e.next=3,d.Z.disableMetaPixel({groupId:r.id});case 3:if(!e.sent.error){e.next=8;break}return s(e0.bI,{message:"Something went wrong, please try again",severity:"error"}),e.abrupt("return");case 8:e.next=17;break;case 10:return e.next=12,d.Z.enableMetaPixel({groupId:r.id});case 12:if(!e.sent.error){e.next=17;break}return s(e0.bI,{message:"Something went wrong, please try again",severity:"error"}),e.abrupt("return");case 17:return e.next=19,(0,V.H5)(u);case 19:case"end":return e.stop()}},e)})),[O,r,u,s]),M=(0,l.useMemo)(function(){return(0,k.jsx)(sJ.Z,{label:O?"On":"Off",onClick:_,active:O})},[O,_]),N=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.disconnectMetaPixel({groupId:r.id});case 2:if(!e.sent.error){e.next=7;break}return s(e0.bI,{message:"Something went wrong, please try again",severity:"error"}),e.abrupt("return");case 7:(0,V.H5)(u);case 8:case"end":return e.stop()}},e)})),[r,s,u]),E=(0,l.useMemo)(function(){if(!C)return(0,k.jsx)(S.z,{variant:"link",label:"Test",onClick:Z});var e="Success"===C?v.O9.s2:v.O9.e2;return(0,k.jsx)(e4.Z,{variant:"t7",color:e,style:{marginLeft:16},children:C})},[C,Z]),A=(0,l.useMemo)(function(){return P?x?(0,k.jsxs)(lc,{children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{children:"Meta pixel ID: "}),(0,k.jsx)("span",{children:"".concat(x," (connected)")})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(tj.s,{header:"Disconnect Meta pixel?",content:"Are you sure you want to disconnect your Meta pixel? You'll need the Pixel ID and Access token to connect it again. FB/IG tracking will end immediately.",onConfirm:N,confirmLabel:"Disconnect",children:(0,k.jsx)(S.z,{variant:"link",label:"Disconnect"})}),E]})]}):void 0:(0,k.jsx)(S.z,{label:"Connect Meta Pixel",onClick:h,disabled:!O})},[P,O,h,N,x,E]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(lr,{children:[(0,k.jsx)(sW,{onBack:i,title:"Meta pixel tracking",backLabel:"< Back to plugins",extraAction:M}),(0,k.jsx)(lo,{children:"Run FB/IG ads to your about page, retarget visitors, and track signups with precision."}),A,(0,k.jsx)(li,{children:"We send these events server-side:"}),(0,k.jsxs)(la,{children:[(0,k.jsxs)("li",{children:["Page view — when somebody visits your about page",(0,k.jsx)("br",{}),"Use this to build a custom audience for retargeting campaigns."]}),(0,k.jsxs)("li",{children:["Complete registration — when somebody requests access to your group",(0,k.jsx)("br",{}),"Use this as a conversion event to optimize for if your group is free."]}),(0,k.jsxs)("li",{children:["Purchase — when somebody joins your group as a paid member",(0,k.jsx)("br",{}),"Use this as a conversion event to optimize for if your group is paid."]})]}),(0,k.jsxs)(ls,{children:["Learn more about this feature in our ",(0,k.jsx)(W.r,{newTab:!0,label:"help center",href:"https://help.skool.com/article/163-how-to-set-up-facebook-pixel-tracking"}),"."]})]}),(0,k.jsx)(ln,{open:m,onClose:b,onCancel:b})]})}),ld=n(66117),lp=g.ZP.div.withConfig({displayName:"styled__GroupPluginsAutoDmChangeUserWrapper",componentId:"sc-1cpjnvq-0"})(["> h4{margin:0px 0px 32px 0px;","}"],function(e){var t=e.theme;return Z.c[t.isMobile?"t4":"t2"]}),lf=g.ZP.div.withConfig({displayName:"styled__UserWrapper",componentId:"sc-1cpjnvq-1"})(["display:flex;align-items:center;gap:12px;margin-left:8px;",""],Z.c.t5),lm=(0,g.iv)(["flex-direction:column;gap:8px;"]),lh=g.ZP.div.withConfig({displayName:"styled__ButtonWrapper",componentId:"sc-1cpjnvq-2"})(["display:flex;gap:16px;margin:32px 0px;",""],function(e){return e.theme.isMobile&&lm}),lv=(0,l.memo)(function(e){var t=e.onGetFullContentState,n=e.currentGroup,r=e.onStackPop,i=e.dispatch,s=t()||{},c=s.candidateUsers,u=void 0===c?[]:c,p=s.autoDmUser,f=void 0===p?{}:p,m=(0,l.useState)(!1),h=m[0],v=m[1],b=(0,l.useState)(null==f?void 0:f.id),g=b[0],x=b[1],y=(0,l.useMemo)(function(){return u.map(function(e){return{key:e.id,label:(0,k.jsxs)(lf,{children:[(0,k.jsx)(ex.Z,{user:e,size:40,disableLink:!0}),"".concat(e.firstName," ").concat(e.lastName)]})}},[])},[u]),w=(0,l.useCallback)(function(e){x(e)},[]),C=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,d.Z.updateAutoDmUser({groupId:n.id,userId:g});case 3:i(e0.bI,{message:"Admin updated"}),r(),v(!1);case 6:case"end":return e.stop()}},e)})),[n,i,r,g]);return(0,k.jsxs)(lp,{children:[(0,k.jsx)("h4",{children:"Message will send from"}),(0,k.jsx)(ld.M,{gap:16,value:g,alignItems:"center",options:y,onChange:w}),(0,k.jsxs)(lh,{children:[(0,k.jsx)(S.z,{loading:h,label:"Change",onClick:C,disabled:f.id===g}),(0,k.jsx)(S.z,{label:"Cancel",variant:"secondary",onClick:r})]})]})}),lb=g.ZP.div.withConfig({displayName:"styled__GroupZapierWrapper",componentId:"sc-g6u5um-0"})(["display:flex;flex-direction:column;"]),lg=g.ZP.div.withConfig({displayName:"styled__GroupZapierUseCases",componentId:"sc-g6u5um-1"})(["display:flex;flex-direction:column;margin:32px 0px;"," a{color:",";}"],Z.c.t7,v.O9.sd1),lx=g.ZP.button.withConfig({displayName:"styled__NewApiKeyButton",componentId:"sc-g6u5um-2"})(["border:none;padding:0px;background:none;width:fit-content;cursor:pointer;margin-top:8px;color:",";",";"],v.O9.sd1,Z.c.t11),ly=g.ZP.div.withConfig({displayName:"styled__StepsHeader",componentId:"sc-g6u5um-3"})(["margin-bottom:16px;",""],Z.c.t5),lw=[{info:"Trigger: Send paid members name and email to your CRM",link:"https://help.skool.com/article/162-zapier-new-paid-member-info-to-crm"},{info:"Trigger: Send membership questions/answers to your CRM",link:"https://help.skool.com/article/59-zapier-for-membership-questions"},{info:"Action: Invite a member to your group",link:"https://help.skool.com/article/60-zapier-invite-with-custom-course-access"},{info:"Action: Unlock a course for a member in your group",link:"https://help.skool.com/article/61-zapier-unlock-a-course-for-a-member-in-your-group"}],lC=(0,l.memo)(function(e){var t=e.onStackPop,n=e.currentGroup,r=e.onStackPush,i=(0,C.bI)("isMobile","self"),s=i.dispatch,u=i.isMobile,p=i.self,f=(0,c.useRouter)(),m=(0,l.useMemo)(function(){var e,t;return null!=n&&null!==(e=n.metadata)&&void 0!==e&&!!e.apiKeys&&JSON.parse(null==n||null===(t=n.metadata)||void 0===t?void 0:t.apiKeys)[0].token},[n]);(0,l.useEffect)(function(){(0,o.Z)(a().mark(function e(){var t,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n&&null!==(t=n.metadata)&&void 0!==t&&t.apiKeys){e.next=17;break}return e.next=3,d.Z.rotateApiKey({groupID:n.id});case 3:return r=e.sent.data.token,e.prev=6,e.next=9,(0,oO.Cx)({token:r,userID:null==p?void 0:p.id});case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),s(e0.bI,{message:"There was an issue with your request, please try again.",severity:"error"}),e.abrupt("return");case 15:return e.next=17,(0,V.H5)(f);case 17:case"end":return e.stop()}},e,null,[[6,11]])}))()},[n,f,s,p]);var h=(0,l.useMemo)(function(){var e;return(null==n||null===(e=n.metadata)||void 0===e?void 0:e.pluginZapierEnabled)===1},[n]),v=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=5;break}return e.next=3,d.Z.disableZapier({groupID:n.id});case 3:e.next=7;break;case 5:return e.next=7,d.Z.enableZapier({groupID:n.id});case 7:return e.next=9,(0,V.H5)(f);case 9:case"end":return e.stop()}},e)})),[h,n,f]),b=(0,l.useMemo)(function(){return(0,k.jsx)(sJ.Z,{label:h?"On":"Off",onClick:v,active:h})},[h,v]),g=(0,l.useCallback)(function(){r("adminZapierRotate",u)},[r,u]);return(0,k.jsxs)(lb,{children:[(0,k.jsx)(sW,{onBack:t,title:"Zapier integration",backLabel:"< Back to plugins",extraAction:b,style:{marginBottom:32}}),(0,k.jsx)(it.v,{label:"API Key",value:m||"Generating API Key, please wait...",isHiddenValue:!0}),(0,k.jsx)(lx,{type:"button",onClick:g,children:"Generate new API key"}),(0,k.jsxs)(lg,{children:[(0,k.jsx)(ly,{children:"Four use cases:"}),lw.map(function(e,t){var n=e.info,r=e.link;return(0,k.jsxs)("span",{children:["".concat(t+1,". ").concat(n)," ",r&&(0,k.jsx)(W.r,{href:r,newTab:!0,children:"(instructions here)"})]},t)})]}),(0,k.jsx)(S.z,{label:"Done",onClick:t,variant:"secondary",style:{marginBottom:32}})]})}),lj=(0,l.memo)(function(e){var t=e.onStackPop,n=e.currentGroup,r=(0,C.bI)("self"),i=r.self,s=r.dispatch,u=(0,c.useRouter)(),p=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.rotateApiKey({groupID:n.id});case 2:return r=e.sent.data.token,e.prev=5,e.next=8,(0,oO.Cx)({token:r,userID:null==i?void 0:i.id});case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),s(e0.bI,{message:"There was an issue with your request, please try again.",severity:"error"}),e.abrupt("return");case 14:return e.abrupt("return",{message:"New API key generated",onSuccess:function(){var e=(0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({bypassCheck:!0}),e.next=3,(0,V.H5)(u);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()});case 15:case"end":return e.stop()}},e,null,[[5,10]])})),[n,s,u,t,i]);return(0,k.jsx)(ov,{isAsync:!0,onCancel:t,title:"Generate new API key?",confirmLabel:"Generate",onConfirm:p,description:"Are you sure you want to generate a new API key? Integrations with the existing key will no longer work."})}),lk=g.ZP.div.withConfig({displayName:"styled__GroupMembershipQuestionsWrapper",componentId:"sc-1q8e50x-0"})(["display:flex;flex-direction:column;"]);function lO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lO(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lD={text:"Text box",email:"Email address",options:"Multiple choice"},lI=(0,l.memo)(function(e){var t,n,r=e.isMobile,i=e.onSetState,s=e.onStackPop,c=e.onStackPush,u=e.currentGroup,p=e.groupMembershipQuestions,f=e.setGroupMembershipQuestions,m=p.enabled,h=p.questions,v=(0,l.useCallback)(function(){i({reloadOnClose:!0},"root")},[i]),b=(0,l.useCallback)(function(){i({question:"",type:"text",options:["",""]},"adminMembershipQuestionsAdd"),c("adminMembershipQuestionsAdd",r)},[c,r,i]),g=(0,l.useCallback)(function(e){i(lP(lP({},h[e]),{},{idx:e}),"adminMembershipQuestionsEdit"),c("adminMembershipQuestionsEdit",r)},[i,c,h,r]),x=(0,l.useCallback)((t=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.moveSurveyQuestion({groupID:u.id,from:t,to:t-1});case 2:f(function(e){var n=(0,rj.Z)(e.questions),r=n[t];return n[t]=n[t-1],n[t-1]=r,lP(lP({},e),{},{questions:n})}),v();case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[u,v,f]),y=(0,l.useCallback)((n=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.moveSurveyQuestion({groupID:u.id,from:t,to:t+1});case 2:f(function(e){var n=(0,rj.Z)(e.questions),r=n[t];return n[t]=n[t+1],n[t+1]=r,lP(lP({},e),{},{questions:n})}),v();case 4:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[u,v,f]),w=(0,l.useCallback)(function(e){i(lP({idx:e},h[e]),"adminMembershipQuestionsDelete"),c("adminMembershipQuestionsDelete",r)},[h,c,i,r]),C=(0,l.useMemo)(function(){return h.map(function(e,t){return(0,l.createElement)(sE.L,lP(lP({},e),{},{key:e.question,title:e.question,description:lD[e.type],onEdit:function(){return g(t)},menuItems:[{disabled:0===t,label:"Move up",onClick:function(){x(t)},testid:"manage-question-dropdown-move-up"},{disabled:t===h.length-1,label:"Move down",onClick:function(){y(t)},testid:"manage-question-dropdown-move-down"},{label:"Delete",onClick:function(){w(t)},testid:"manage-question-dropdown-delete"}]}))})},[h,w,y,x,g]),j=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=6;break}return e.next=3,d.Z.disableSurvey({groupID:u.id});case 3:f(function(e){return lP(lP({},e),{},{enabled:!1})}),e.next=9;break;case 6:return e.next=8,d.Z.enableSurvey({groupID:u.id});case 8:f(function(e){return lP(lP({},e),{},{enabled:!0})});case 9:v();case 10:case"end":return e.stop()}},e)})),[v,u,f,m]),O=(0,l.useMemo)(function(){return(0,k.jsx)(sJ.Z,{label:m?"On":"Off",onClick:j,active:m})},[m,j]);return(0,k.jsxs)(lk,{children:[(0,k.jsx)(sW,{onBack:s,title:"Membership questions",backLabel:"< Back to plugins",ctaLabel:"Add question",onCta:b,ctaDisabled:3===h.length,extraAction:O}),(0,k.jsx)(sN.D,{customNodes:!0,resources:C,noResourceView:"Ask members up to three questions when they request to join your group. Only admins and moderators will see the answers. You can send new members questions/answers to your CRM using Zapier."})]})}),lZ=g.ZP.form.withConfig({displayName:"styled__GeneratedFormWrapper",componentId:"sc-6h5g90-0"})(["display:flex;flex-direction:column;"]),lS=g.ZP.div.withConfig({displayName:"styled__GeneratedFormFields",componentId:"sc-6h5g90-1"})(["display:flex;flex-direction:column;gap:16px;margin-bottom:","px;> *{&:not(:last-child){margin-bottom:16px !important;}}"],function(e){return e.$bottomMargin}),l_=(0,g.iv)(["flex-direction:column;"]),lM=g.ZP.div.withConfig({displayName:"styled__GeneratedFormButtons",componentId:"sc-6h5g90-2"})(["display:flex;",""],function(e){return e.theme.isMobile&&l_}),lN=g.ZP.div.withConfig({displayName:"styled__GeneratedFormRow",componentId:"sc-6h5g90-3"})(["display:flex;align-items:flex-end;> *{&:not(:last-child){margin-right:16px;}}"]),lE=g.ZP.div.withConfig({displayName:"styled__GeneratedFormHeader",componentId:"sc-6h5g90-4"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:","px;"],function(e){return e.theme.isMobile?16:24}),lA=g.ZP.div.withConfig({displayName:"styled__GeneratedFormTitle",componentId:"sc-6h5g90-5"})(["",""],function(e){return e.theme.isMobile?Z.c.t1:Z.c.t2}),lL=g.ZP.div.withConfig({displayName:"styled__GeneratedFormNoteWrapper",componentId:"sc-6h5g90-6"})(["display:flex;flex-direction:column;> span{margin:8px 0px 0px 14px;color:",";","}"],v.O9.n5,Z.c.t11),lT=(0,g.ZP)(ee.h_).withConfig({displayName:"styled__GeneratedFormDropdownMenu",componentId:"sc-6h5g90-7"})(["width:100%;> button{width:100%;}"]),lF=g.ZP.div.withConfig({displayName:"styled__OptionsInputWrapper",componentId:"sc-10hx1fk-0"})(["display:flex;flex-direction:column;"]),lB=g.ZP.div.withConfig({displayName:"styled__OptionItemsWrapper",componentId:"sc-10hx1fk-1"})(["display:flex;flex-direction:column;margin-bottom:16px;gap:8px;"]),lR=g.ZP.div.withConfig({displayName:"styled__OptionItem",componentId:"sc-10hx1fk-2"})(["display:flex;align-items:center;gap:8px;> div{&:first-child{width:100%;}}> button{flex-shrink:0;}"]),lz=g.ZP.div.withConfig({displayName:"styled__RemovePlaceholder",componentId:"sc-10hx1fk-3"})(["height:40px;width:40px;"]),lG=["value","maxOptions","onChange"];function lU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lU(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lW={optionsInput:(0,l.memo)(function(e){var t=e.value,n=void 0===t?["","",""]:t,r=e.maxOptions,o=void 0===r?10:r,i=e.onChange,a=(0,b.Z)(e,lG),s=(0,l.useCallback)(function(e){var t=e.e,r=e.idx;i((0,U.DM)({arr:n,idx:r,value:t.target.value}))},[i,n]),c=(0,l.useCallback)(function(e){var t=e.idx;i((0,U.Rw)({arr:n,idx:t}))},[i,n]),u=(0,l.useCallback)(function(e,t){var r=2===n.length;return(0,k.jsxs)(lR,{children:[(0,k.jsx)(ir.I,{value:e,staticLabel:!0,onChange:function(e){return s({e:e,idx:t})},placeholder:"Option ".concat(t+1)}),r?(0,k.jsx)(lz,{}):(0,k.jsx)(S.z,{onClick:function(){return c({idx:t})},variant:"icon-borderless",icon:"Close",iconSize:16})]},t)},[s,c,n]),d=(0,l.useMemo)(function(){return n.length===o},[n,o]),p=(0,l.useCallback)(function(){i([].concat((0,rj.Z)(n),[""]))},[i,n]);return(0,k.jsxs)(lF,l$(l$({},a),{},{children:[(0,k.jsx)(lB,{children:n.map(u)}),(0,k.jsx)(S.z,{label:"Add Option",variant:"secondary",onClick:p,disabled:d})]}))}),dropdownMenu:lT,input:ir.I};function lH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lH(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lV=(0,l.memo)(function(e){var t,n=e.title,i=e.fields,s=e.onSubmit,c=e.onCancel,u=e.formState,d=e.submitLabel,p=void 0===d?"Submit":d,f=e.buttonMargin,m=e.bottomMargin,h=e.onFormChange,v=e.headerFields,b=e.submitDisabled,g=(0,l.useState)(!1),x=g[0],y=g[1],w=(0,l.useState)({}),j=w[0],O=w[1],P=(0,C.bI)("isMobile"),D=P.isMobile,I=P.dispatch,Z=(0,l.useCallback)(function(e,t){var n=e.key,o=e.note,i=e.component,a=e.props,s=e.rows;if("row"===i)return(0,k.jsx)(lN,{children:s.map(Z)},t);var l=lW[i],c={key:n,value:u[n],error:j[n],helperText:j[n]},d={};switch(i){case"input":d.height=a.height,c.onChange=function(e){return h((0,r.Z)({},n,e.target.value))};break;case"dropdownMenu":c.fitButton=!0,c.variant="input-floating-label",c.options=a.menuItems.map(function(e){return e.value===u[n]&&(c.label=e.label),lq(lq({},e),{},{active:e.value===u[n],onClick:function(){return h((0,r.Z)({},n,e.value))}})});break;case"optionsInput":c.onChange=function(e){return h((0,r.Z)({},n,e))};break;default:c.onChange=function(e){return h((0,r.Z)({},n,e.target.value))}}var p=(0,k.jsx)(l,lq(lq({style:d},c),a));return o?(0,k.jsxs)(lL,{children:[p,(0,k.jsx)("span",{children:o})]}):p},[j,u,h]),_=(0,l.useCallback)((t=(0,o.Z)(a().mark(function e(t){var n,r,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),y(!0),e.next=4,s();case 4:r=(n=e.sent).errors,o=n.message,i=n.onSuccess,o&&I(e0.bI,{message:o}),r?O(r):i(),y(!1);case 11:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[s,I]),M=(0,l.useMemo)(function(){if(n)return(0,k.jsxs)(lE,{children:[(0,k.jsx)(lA,{children:n}),(0,k.jsx)("div",{children:v&&v.map(Z)})]})},[n,Z,v]),N=(0,l.useMemo)(function(){return(0,k.jsxs)(lM,{children:[(0,k.jsx)(eG.x,{margin:f||(D?"16px 0px 8px":"0px"),children:(0,k.jsx)(S.z,{type:"submit",label:p,loading:x,disabled:b})}),(0,k.jsx)(eG.x,{marginLeft:D?0:16,children:(0,k.jsx)(S.z,{label:"Cancel",onClick:c,variant:"secondary"})})]})},[D,b,x,p,c,f]);return(0,k.jsxs)(lZ,{onSubmit:_,children:[M,(0,k.jsx)(lS,{$bottomMargin:void 0===m?32:m,children:i.map(Z)}),N]})}),lY=function(e){var t=e.optionsSelected,n=[{key:"question",component:"input",props:{label:"Question",maxCharacters:150,"data-testid":"group-member-questions-question"}},{key:"type",component:"dropdownMenu",note:t?"Members can only select 1 answer for multiple choice questions!":"",props:{inputLabel:"Response type",menuItems:[{label:"Text box",value:"text"},{label:"Multiple choice",value:"options"},{label:"Email address",value:"email",disabled:e.emailDisabled}],"data-testid":"group-member-questions-type"}}];return t&&n.push({key:"options",component:"optionsInput",props:{maxOptions:4,"data-testid":"group-member-questions-options"}}),n};function lJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lJ(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lK=(0,l.memo)(function(e){var t,n=e.isMobile,r=e.onStackPop,i=e.onSetState,s=e.currentGroup,c=e.onMutateState,u=e.onGetFullContentState,p=e.groupMembershipQuestions,f=e.setGroupMembershipQuestions,m=u(),h=lY({optionsSelected:"options"===m.type,emailDisabled:null==p||null===(t=p.questions)||void 0===t?void 0:t.some(function(e){return"email"===e.type})}),v=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,o,l,c,p,m;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=u()).question,o=t.type,l=t.options,e.next=3,d.Z.addSurveyQuestion({groupID:s.id,question:n,type:o,options:"options"===o?l:void 0});case 3:if(!(c=e.sent.error)||!(422===c.status&&null!=c&&null!==(p=c.data)&&void 0!==p&&null!==(p=p.fields)&&void 0!==p&&p.length)){e.next=10;break}return m={},c.data.fields.forEach(function(e){switch(e.name){case"question":m.question=e.error;break;case"type":m.type=e.error;break;case"options":m.options=e.error;break;default:m.title=e.error}}),e.abrupt("return",{errors:m});case 10:return e.abrupt("return",{message:"Question added",onSuccess:function(){f(function(e){return lX(lX({},e),{},{questions:[].concat((0,rj.Z)(e.questions),[{question:n,type:o,options:l}])})}),i({reloadOnClose:!0},"root"),r({bypassCheck:!0})}});case 11:case"end":return e.stop()}},e)})),[i,r,s,u,f]),b=(0,l.useMemo)(function(){var e=m.question;return!e||e.length>150||"options"===m.type&&m.options&&m.options.some(function(e){return!e})},[m]);return(0,k.jsx)(lV,{bottomMargin:n?8:32,title:"Add question",fields:h,submitLabel:"Add",onSubmit:v,formState:m,onCancel:r,onFormChange:c,submitDisabled:b})});function lQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lQ(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lQ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l1=(0,l.memo)(function(e){var t=e.onSetState,n=e.onStackPop,r=e.currentGroup,i=e.onGetFullContentState,s=e.setGroupMembershipQuestions,c=i(),u=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.idx,e.next=3,d.Z.deleteSurveyQuestion({groupID:r.id,idx:o});case 3:return e.abrupt("return",{message:"Question deleted",onSuccess:function(){t({reloadOnClose:!0},"root"),n({bypassCheck:!0}),s(function(e){return l0(l0({},e),{},{questions:[].concat((0,rj.Z)(e.questions.slice(0,o)),(0,rj.Z)(e.questions.slice(o+1)))})})}});case 4:case"end":return e.stop()}},e)})),[r,c,n,t,s]);return(0,k.jsx)(ov,{isAsync:!0,onCancel:n,title:"Delete question?",confirmLabel:"Delete",onConfirm:u,description:"Are you sure you want to delete the question “".concat(c.question,"”? You can’t undo this.")})});function l2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l2(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l3=(0,l.memo)(function(e){var t,n=e.onStackPop,r=e.onSetState,i=e.currentGroup,s=e.onMutateState,c=e.onGetFullContentState,u=e.groupMembershipQuestions,p=e.setGroupMembershipQuestions,f=c(),m=lY({optionsSelected:"options"===f.type,emailDisabled:null==u||null===(t=u.questions)||void 0===t?void 0:t.some(function(e){return"email"===e.type})}),h=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,o,s,l,u,f,m,h;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(t=c()).idx,s=t.question,l=t.type,u=t.options,e.next=3,d.Z.editSurveyQuestion({idx:o,type:l,question:s,groupID:i.id,options:"options"===l?u:void 0});case 3:if(!(f=e.sent.error)||!(422===f.status&&null!=f&&null!==(m=f.data)&&void 0!==m&&null!==(m=m.fields)&&void 0!==m&&m.length)){e.next=10;break}return h={},f.data.fields.forEach(function(e){switch(e.name){case"question":h.question=e.error;break;case"type":h.type=e.error;break;case"options":h.options=e.error;break;default:h.title=e.error}}),e.abrupt("return",{errors:h});case 10:return e.abrupt("return",{message:"Question edited",onSuccess:function(){p(function(e){return l9(l9({},e),{},{questions:[].concat((0,rj.Z)(e.questions.slice(0,o)),[{question:s,type:l,options:u}],(0,rj.Z)(e.questions.slice(o+1)))})}),r({reloadOnClose:!0},"root"),n({bypassCheck:!0})}});case 11:case"end":return e.stop()}},e)})),[r,n,i,c,p]),v=(0,l.useMemo)(function(){var e=f.question;return!e||e.length>150||"options"===f.type&&f.options&&f.options.some(function(e){return!e})},[f]);return(0,k.jsx)(lV,{bottomMargin:32,title:"Edit question",fields:m,submitLabel:"Save",onSubmit:h,formState:f,onCancel:n,onFormChange:s,submitDisabled:v})}),l5=g.ZP.div.withConfig({displayName:"styled__GroupGamificationLevelsUnlockLink",componentId:"sc-3fmp1a-0"})([""," margin:32px auto 16px;"],Z.c.t6),l6=g.ZP.div.withConfig({displayName:"styled__GroupGamificationLevelsUnlockInfo",componentId:"sc-3fmp1a-1"})(["",""],Z.c.t7),l4=g.ZP.span.withConfig({displayName:"styled__GroupGamificationCourseLink",componentId:"sc-3fmp1a-2"})([""," > a{color:",";}"],Z.c.t6,v.O9.sd1),l8=g.ZP.div.withConfig({displayName:"styled__GamificationLoadingOverlay",componentId:"sc-3fmp1a-3"})(["display:flex;height:100%;width:100%;align-items:center;justify-content:center;position:absolute;top:-32px;left:-32px;"]),l7=g.ZP.span.withConfig({displayName:"styled__InputAdornment",componentId:"sc-3fmp1a-4"})(["",""],Z.c.t7),ce=(0,l.memo)(function(e){var t=e.isMobile,n=e.onSetState,r=e.onGetState,i=e.onStackPush,s=e.currentGroup,c=(0,l.useState)(!0),u=c[0],p=c[1],f=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,d.Z.getGroupLevels({groupId:s.id});case 3:n({levels:(null==(t=e.sent.data)?void 0:t.levels)||[]}),p(!1);case 7:case"end":return e.stop()}},e)})),[s,n]);(0,l.useEffect)(function(){f()},[f]);var m=r("levels"),h=(0,l.useCallback)(function(e,t,n){return(0,k.jsxs)(l4,{children:[(0,k.jsx)(W.r,{href:e.href,as:e.as,underline:"hover",newTab:!0,children:'"'.concat(e.title,'"')}),t+1===n.length?null:(0,k.jsx)("span",{children:", "})]},"course-link-".concat(e.title,"-").concat(t))},[]),v=(0,l.useCallback)(function(e){n({reloadOnClose:!0},"root"),n({number:null==e?void 0:e.number,title:null==e?void 0:e.levelTitle,levelName:"Level ".concat(null==e?void 0:e.number),onEdit:t&&f,generatedFormExtraContent:null==e?void 0:e.generatedFormExtraContent},"adminGamificationEdit"),i("adminGamificationEdit",t)},[n,i,t,f]),b=(0,l.useMemo)(function(){return m?m.map(function(e){var t=e.title,n=e.percentOfMembers,r=e.courses,o=e.number,i=null==r?void 0:r.map(function(e){var t=(0,G.rE)({group:{name:s.name},course:{name:e.id}});return{href:t.href,as:t.as,title:(null==e?void 0:e.title)||"this course"}}),a="Level ".concat(o," ").concat(t?" - "+t:""),l={number:o,title:a,levelTitle:t,key:a,description:(0,k.jsxs)("div",{children:["".concat(n,"% of members - "),i?(0,k.jsxs)(k.Fragment,{children:[i.map(h)," ","unlocks"]}):"No courses unlock"]}),onEdit:function(){return v(l)},generatedFormExtraContent:(0,k.jsxs)("div",{children:[(0,k.jsx)(l5,{children:i?(0,k.jsxs)(k.Fragment,{children:[i.map(h)," ","unlocks at this level."]}):"No courses unlock at this level."}),(0,k.jsx)(l6,{children:"You can unlock courses for members at different levels from the course settings menu."})]})};return l}):[]},[m,h,v,s]);return u?(0,k.jsx)(l8,{children:(0,k.jsx)(rF.D,{})}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(sW,{title:"Gamification",description:"Make your group fun! Personalize your group by naming your levels. Incentivize engagement by unlocking courses when members reach a higher level."}),(0,k.jsx)(sN.D,{resources:b})]})}),ct=function(e){var t=e.levelName;return[{key:"title",component:"input",props:{label:"Name",staticLabel:!0,maxCharacters:20,"data-testid":"group-levels-title",prefix:(0,k.jsx)(l7,{style:{color:v.O9.n6},children:"".concat(t," -  ")})}}]},cn=(0,l.memo)(function(e){var t=e.hasChanges,n=e.onStackPop,r=e.currentGroup,i=e.onMutateState,s=e.onGetFullContentState,c=s(),u=ct({levelName:c.levelName}),p=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,o,i,l,u,p;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(t=s()).title,i=t.onEdit,e.next=3,d.Z.updateGroupLevel({groupId:r.id,number:c.number,title:o.trim()});case 3:if(!(l=e.sent.error)||!(422===l.status&&null!=l&&null!==(u=l.data)&&void 0!==u&&null!==(u=u.fields)&&void 0!==u&&u.length)){e.next=10;break}return p={},l.data.fields.forEach(function(e){e.name,p.title=e.error}),e.abrupt("return",{errors:p});case 10:return e.abrupt("return",{message:"Level name updated",onSuccess:function(){i&&i(),n({bypassCheck:!0})}});case 11:case"end":return e.stop()}},e)})),[s,r,n,c]),f=(0,l.useMemo)(function(){var e,n=c.title;return!t||(null===(e=(0,rj.Z)(n))||void 0===e?void 0:e.length)>20},[c,t]);return(0,k.jsxs)("div",{children:[(0,k.jsx)(lV,{bottomMargin:4,title:"Edit level",fields:u,submitLabel:"Save",formState:c,onCancel:n,onSubmit:p,onFormChange:i,submitDisabled:f}),(null==c?void 0:c.generatedFormExtraContent)||null]})}),cr=n(83909),co=g.ZP.div.withConfig({displayName:"styled__GroupCategoriesWrapper",componentId:"sc-1ln9roz-0"})(["display:flex;flex-direction:column;"]),ci=g.ZP.div.withConfig({displayName:"styled__CategoriesLoadingOverlay",componentId:"sc-1ln9roz-1"})(["display:flex;height:100%;width:100%;align-items:center;justify-content:center;position:absolute;top:-32px;left:-32px;"]);function ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ca(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cl=(0,l.memo)(function(e){var t,n,r,i=e.isMobile,s=e.currentGroup,c=e.onSetState,u=e.onGetState,p=e.onStackPush,f=e.setCommunityMeta,m=(0,l.useState)(!0),h=m[0],v=m[1],b=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,d.Z.getGroupLabels({groupId:s.id});case 3:c({categories:r=null!==(t=null==(n=e.sent.data)?void 0:n.labels)&&void 0!==t?t:[]}),f(function(e){return cs(cs({},e),{},{totalCategories:r.length})}),v(!1);case 9:case"end":return e.stop()}},e)})),[s,c,f]);(0,l.useEffect)(function(){b()},[b]);var g=u("categories"),x=(0,l.useMemo)(function(){return g?g.map(function(e){var t=e.metadata,n=t.description,r=t.displayName,o=t.postWriteRole,i=t.posts,a=void 0===i?0:i;return{id:e.id,posts:a,displayName:r,postWriteRole:o,title:"".concat(r," (").concat(a,")"),description:n}}):[]},[g]),y=(0,l.useCallback)(function(){c({displayName:"",description:"",postWriteRole:4,onAdd:i&&b},"adminCategoriesAdd"),p("adminCategoriesAdd",i)},[p,i,b,c]),w=(0,l.useCallback)(function(e){c({onEdit:i&&b,labelID:x[e].id,displayName:x[e].displayName,description:x[e].description||"",postWriteRole:x[e].postWriteRole?+"".concat(x[e].postWriteRole):+cr.Nw},"adminCategoriesEdit"),p("adminCategoriesEdit",i)},[c,p,x,i,b]),C=(0,l.useCallback)((t=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.updateGroupLabelOrder({groupName:s.id,oldOrdinal:t+1,newOrdinal:t});case 2:b();case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[s,b]),j=(0,l.useCallback)((n=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.updateGroupLabelOrder({groupName:s.id,oldOrdinal:t+1,newOrdinal:t+2});case 2:b();case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[s,b]),O=(0,l.useCallback)((r=(0,o.Z)(a().mark(function e(t){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!x[t].posts){e.next=8;break}return e.next=3,d.Z.readGroupLabel({groupName:s.id,labelID:x[t].id});case 3:return n=e.sent.data,c({categories:x.filter(function(e,n){return n!==t}).map(function(e){return{text:e.displayName,value:e.id}}),labelToDelete:n,onDelete:i&&b},"adminCategoriesMigrate"),p("adminCategoriesMigrate",i),e.abrupt("return");case 8:c(cs({idx:t,onDelete:i&&b},x[t]),"adminCategoriesDelete"),p("adminCategoriesDelete",i);case 10:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),[x,p,c,i,b,s]),P=(0,l.useMemo)(function(){return x.map(function(e,t){var n=[{disabled:0===t,label:"Move up",onClick:function(){C(t)},testid:"manage-rule-category-move-up"},{disabled:t===x.length-1,label:"Move down",onClick:function(){j(t)},testid:"manage-rule-category-move-down"},{label:"Delete",disabled:1===x.length,onClick:function(){O(t)},testid:"manage-rule-category-delete"}];return(0,k.jsx)(sE.L,cs({onEdit:function(){return w(t)},menuItems:n},e),t)})},[x,w,O,j,C]);return(0,k.jsxs)(co,{children:[h&&(0,k.jsx)(ci,{children:(0,k.jsx)(rF.D,{})}),!h&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(sW,{title:"Categories",ctaLabel:"Add category",onCta:y,ctaDisabled:10===x.length}),(0,k.jsx)(sN.D,{resources:P,customNodes:!0})]})]})}),cc=[{key:"displayName",component:"input",props:{label:"Name",maxCharacters:30,"data-testid":"add-category-name-input"}},{key:"description",component:"input",props:{label:"Description",multiline:!0,height:90,maxCharacters:150,"data-testid":"add-category-description-input"}},{key:"postWriteRole",component:"dropdownMenu",props:{inputLabel:"Permissions",menuItems:[{value:cr.Nw,label:"Anyone can post, anyone can view"},{value:cr.xC,label:"Only admins/mods can post, anyone can view"}],"data-testid":"add-category-permissions-select"}}],cu=(0,l.memo)(function(e){var t=e.onStackPop,n=e.onSetState,r=e.currentGroup,i=e.onMutateState,s=e.onGetFullContentState;(0,l.useEffect)(function(){n({displayName:"",description:"",postWriteRole:+cr.Nw})},[n]);var c=s(),u=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var n,o,i,l,c,u,p,f;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(n=s()).displayName,i=n.description,l=n.postWriteRole,c=n.onAdd,e.next=3,d.Z.createLabel({groupID:r.id,displayName:o,description:i,postWriteRole:l});case 3:if(!(u=e.sent.error)||!(422===u.status&&null!=u&&null!==(p=u.data)&&void 0!==p&&null!==(p=p.fields)&&void 0!==p&&p.length)){e.next=10;break}return f={},u.data.fields.forEach(function(e){switch(e.name){case"metadata.display_name":default:f.displayName=e.error;break;case"metadata.description":f.description=e.error}}),e.abrupt("return",{errors:f});case 10:return e.abrupt("return",{message:"Category added",onSuccess:function(){c&&c(),t({bypassCheck:!0})}});case 11:case"end":return e.stop()}},e)})),[s,r,t]),p=(0,l.useMemo)(function(){var e=c.displayName,t=c.description;return!e||!e.trim().length||e.length>30||t.length>150},[c]);return(0,k.jsx)(lV,{title:"Add category",fields:cc,submitLabel:"Add",onSubmit:u,formState:c,onCancel:t,onFormChange:i,submitDisabled:p})}),cd=(0,l.memo)(function(e){var t=e.hasChanges,n=e.onStackPop,r=e.onMutateState,i=(0,e.onGetFullContentState)(),s=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,r,o,s,l,c,u,p;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.labelID,r=i.displayName,o=i.description,s=i.postWriteRole,l=i.onEdit,e.next=3,d.Z.updateLabel({labelID:t,displayName:r,description:o,postWriteRole:s});case 3:if(!(c=e.sent.error)||!(422===c.status&&null!=c&&null!==(u=c.data)&&void 0!==u&&null!==(u=u.fields)&&void 0!==u&&u.length)){e.next=10;break}return p={},c.data.fields.forEach(function(e){switch(e.name){case"metadata.display_name":default:p.displayName=e.error;break;case"metadata.description":p.description=e.error}}),e.abrupt("return",{errors:p});case 10:return e.abrupt("return",{message:"Category edited",onSuccess:function(){l&&l(),n({bypassCheck:!0})}});case 11:case"end":return e.stop()}},e)})),[n,i]),c=(0,l.useMemo)(function(){var e=i.displayName,n=i.description;return!t||!e||!e.trim().length||e.length>30||n.length>150},[t,i]);return(0,k.jsx)(lV,{title:"Edit category",fields:cc,submitLabel:"Save",formState:i,onCancel:n,onSubmit:s,onFormChange:r,submitDisabled:c})}),cp=(0,l.memo)(function(e){var t=e.onStackPop,n=e.currentGroup,r=(0,e.onGetFullContentState)(),i=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var o,i,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.id,i=r.onDelete,e.next=3,d.Z.readGroupLabel({groupName:n.id,labelID:o});case 3:if(s=e.sent.data){e.next=7;break}return e.abrupt("return",{});case 7:return e.next=9,d.Z.deleteLabel({labelID:s.id});case 9:return e.abrupt("return",{message:"Category deleted",onSuccess:function(){i&&i(),t({bypassCheck:!0})}});case 10:case"end":return e.stop()}},e)})),[n,r,t]);return(0,k.jsx)(ov,{isAsync:!0,onCancel:t,confirmLabel:"Delete",onConfirm:i,title:"Delete category?",description:'Are you sure you want to delete the category "'.concat(r.displayName,"\"? You can't undo this.")})}),cf=g.ZP.div.withConfig({displayName:"styled__Placeholder",componentId:"sc-ywl5d2-0"})(["color:",";"],v.O9.n5),cm=g.ZP.div.withConfig({displayName:"styled__DropdownMenuWrapper",componentId:"sc-ywl5d2-1"})(["margin-top:20px;width:100%;> div > div:first-child{width:100%;button{width:100%;}}&:hover ","{color:",";}"],cf,v.O9.n7),ch=g.ZP.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-ywl5d2-2"})(["position:",";top:0;left:0;width:100%;height:100%;background:",";z-index:1;padding:","px;"],function(e){return e.theme.isMobile?"relative":"absolute"},v.O9.n1,function(e){return e.theme.isMobile?0:32});function cv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cv(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cg=(0,l.memo)(function(e){var t=e.isMobile,n=e.dispatch,r=e.onStackPop,i=e.onGetFullContentState,s=(0,l.useState)(!1),c=s[0],u=s[1],p=(0,l.useState)(!1),f=p[0],m=p[1],h=i(),b=h.labelToDelete,g=h.categories,x=h.onDelete,y=(0,l.useState)(""),w=y[0],C=y[1],j=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,d.Z.deleteLabel({labelID:b.id,migrateLabelID:w});case 3:n(e0.bI,{message:"Migration completed"}),x&&x(),r({bypassCheck:!0}),u(!1);case 7:case"end":return e.stop()}},e)})),[n,b,w,x,r]),O=(0,l.useCallback)(function(){m(!f)},[f]),P=(0,l.useMemo)(function(){return g.map(function(e){return cb(cb({},e),{},{active:e.value===w,label:e.text,onClick:function(){return C(e.value)}})})},[g,w]),D=(0,l.useMemo)(function(){return w?P.find(function(e){return e.value===w}).label:(0,k.jsx)(cf,{children:"Select category"})},[P,w]);return(0,k.jsxs)(ch,{children:[(0,k.jsx)(e4.Z,{variant:"t2",children:"Recategorize ".concat(n2()("post",b.metadata.posts,!0))}),(0,k.jsx)(e4.Z,{variant:"t7",style:{margin:"8px 0px 16px 0px"},children:'The category "'.concat(b.metadata.displayName,'" contains ').concat(b.metadata.posts," posts. You must recategorize all posts before deleting a category. You can recategorize the posts manually, or, you can bulk migrate them to another category.")}),(0,k.jsx)(e4.Z,{variant:"t5",style:{margin:"16px 0"},color:"".concat(v.O9.e2),children:"Bulk migrate ".concat(b.metadata.posts,' posts from "').concat(b.metadata.displayName,'" to:')}),(0,k.jsx)(cm,{children:(0,k.jsx)(ee.h_,{style:{margin:"8px 0 16px"},id:"migrate-label-id",variant:w?"input-floating-label":"input",label:D,inputLabel:w?"Select category":void 0,options:P,fitButton:!0})}),(0,k.jsxs)(e5.X,{style:{margin:t?"8px 0":"16px 0 32px"},children:[(0,k.jsx)(o0.Y,{variant:"square",active:f,size:18,onClick:O,style:{height:"100%",marginTop:4}}),(0,k.jsx)(e4.Z,{inline:!0,variant:"t7",style:{marginLeft:12},children:"I confirm that I want to bulk migrate ".concat(b.metadata.posts," posts from “").concat(b.metadata.displayName,"” to the above category, and then delete “").concat(b.metadata.displayName,"”. I understand this action is permanent.")})]}),(0,k.jsxs)("div",{style:{display:"flex",flexDirection:t?"column":"row"},children:[(0,k.jsx)(S.z,{style:{margin:t?"8px 0":"0px"},label:"Proceed",onClick:j,loading:c,disabled:!f||!w}),(0,k.jsx)(S.z,{style:{marginLeft:t?"0px":"16px"},label:"Cancel",variant:"secondary",onClick:r})]})]})}),cx=g.ZP.div.withConfig({displayName:"styled__LinksLoadingOverlay",componentId:"sc-xitlc1-0"})(["display:flex;height:100%;width:100%;align-items:center;justify-content:center;position:absolute;top:-32px;left:-32px;"]);function cy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cy(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cC=(0,l.memo)(function(e){var t,n,r=e.isMobile,i=e.currentGroup,s=e.onSetState,c=e.onGetState,u=e.onStackPush,p=e.setCommunityMeta,f=(0,l.useState)(!0),m=f[0],h=f[1],v=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,d.Z.getGroupLinks({groupId:i.id});case 3:s({links:n=(null==(t=e.sent.data)?void 0:t.links)||[]}),p(function(e){return cw(cw({},e),{},{totalLinks:n.length})}),h(!1);case 9:case"end":return e.stop()}},e)})),[i,s,p]);(0,l.useEffect)(function(){v()},[v]);var b=c("links"),g=(0,l.useMemo)(function(){return b?b.map(function(e,t){var n=e.url,r=e.label,o=e.public;return{idx:t,label:r,key:r,title:"".concat(r," (").concat(o?"Public":"Private",")"),description:n,public:o}}):[]},[b]),x=(0,l.useCallback)(function(){s({url:"",label:"",public:!1,onAdd:r&&v},"adminLinksAdd"),u("adminLinksAdd",r)},[u,s,r,v]),y=(0,l.useCallback)(function(e){s({ordinal:e+1,url:g[e].description,label:g[e].label,public:g[e].public,onEdit:r&&v},"adminLinksEdit"),u("adminLinksEdit",r)},[r,s,u,g,v]),w=(0,l.useCallback)((t=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.updateGroupLinkOrder({groupName:i.id,oldOrdinal:t+1,newOrdinal:t});case 2:v();case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[i,v]),C=(0,l.useCallback)((n=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.updateGroupLinkOrder({groupName:i.id,oldOrdinal:t+1,newOrdinal:t+2});case 2:v();case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[i,v]),j=(0,l.useCallback)(function(e){s(cw(cw({idx:e},g[e]),{},{onDelete:r&&v}),"adminLinksDelete"),u("adminLinksDelete",r)},[g,u,s,r,v]),O=(0,l.useMemo)(function(){return g.map(function(e,t){var n=[{disabled:0===t,label:"Move up",onClick:function(){w(t)},testid:"manage-link-dropdown-move-up"},{disabled:t===g.length-1,label:"Move down",onClick:function(){C(t)},testid:"manage-link-dropdown-move-down"},{label:"Delete",onClick:function(){j(t)},testid:"manage-link-dropdown-delete"}];return cw(cw({},e),{},{menuItems:n,onEdit:function(){return y(t)}})})},[g,j,C,w,y]);return m?(0,k.jsx)(cx,{children:(0,k.jsx)(rF.D,{})}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(sW,{title:"Links",ctaLabel:"Add link",onCta:x,ctaDisabled:3===g.length}),(0,k.jsx)(sN.D,{noResourceView:"Share important resources with your members by adding links.",resources:O})]})}),cj=[{key:"label",component:"input",props:{label:"Label",maxCharacters:34,"data-testid":"add-link-label-input"}},{key:"url",component:"input",props:{label:"URL","data-testid":"add-link-url-input"}},{key:"public",component:"dropdownMenu",props:{inputLabel:"Privacy",menuItems:[{value:!1,label:"Private (only members can see)"},{value:!0,label:"Public (everybody can see)"}],"data-testid":"add-link-permission-select"}}],ck=(0,l.memo)(function(e){var t=e.onSetState,n=e.onStackPop,r=e.currentGroup,i=e.onMutateState,s=e.onGetFullContentState,c=s(),u=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var o,i,l,c,u,p,f,m;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(o=s()).url,l=o.label,c=o.public,u=o.onAdd,(0,U.K2)(i)){e.next=3;break}return e.abrupt("return",{errors:{url:"Please input a valid link."}});case 3:return e.next=5,d.Z.addGroupLink({groupName:r.id,link:{url:(0,G.X2)(i),label:l,public:c}});case 5:if(!(p=e.sent.error)||!(422===p.status&&null!=p&&null!==(f=p.data)&&void 0!==f&&null!==(f=f.fields)&&void 0!==f&&f.length)){e.next=12;break}return m={},p.data.fields.forEach(function(e){switch(e.name){case"url":default:m.url=e.error;break;case"label":m.label=e.error}}),e.abrupt("return",{errors:m});case 12:return e.abrupt("return",{message:"Link added",onSuccess:function(){u&&u(),t({reloadOnClose:!0},"root"),n({bypassCheck:!0})}});case 13:case"end":return e.stop()}},e)})),[s,r,n,t]),p=(0,l.useMemo)(function(){var e=c.label;return!e||e.length>34},[c]);return(0,k.jsx)(lV,{title:"Add link",fields:cj,submitLabel:"Add",onSubmit:u,formState:c,onCancel:n,onFormChange:i,submitDisabled:p})}),cO=(0,l.memo)(function(e){var t=e.onStackPop,n=e.onSetState,r=e.currentGroup,i=e.onMutateState,s=e.onGetFullContentState,c=s(),u=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var o,i,l,c,u,p,f,m,h;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(o=s()).label,l=o.url,c=o.public,u=o.ordinal,p=o.onEdit,(0,U.K2)(l)){e.next=3;break}return e.abrupt("return",{errors:{url:"Please input a valid link."}});case 3:return e.next=5,d.Z.updateGroupLink({groupName:r.id,ordinal:u,link:{url:(0,G.X2)(l),label:i,public:c}});case 5:if(!(f=e.sent.error)||!(422===f.status&&null!=f&&null!==(m=f.data)&&void 0!==m&&null!==(m=m.fields)&&void 0!==m&&m.length)){e.next=12;break}return h={},f.data.fields.forEach(function(e){switch(e.name){case"url":default:h.url=e.error;break;case"label":h.label=e.error}}),e.abrupt("return",{errors:h});case 12:return e.abrupt("return",{message:"Link edited",onSuccess:function(){p&&p(),n({reloadOnClose:!0},"root"),t({bypassCheck:!0})}});case 13:case"end":return e.stop()}},e)})),[s,r,t,n]),p=(0,l.useMemo)(function(){var e=c.label;return!e||e.length>34},[c]);return(0,k.jsx)(lV,{title:"Edit link",fields:cj,submitLabel:"Save",onSubmit:u,formState:c,onCancel:t,onFormChange:i,submitDisabled:p})}),cP=(0,l.memo)(function(e){var t=e.onStackPop,n=e.onSetState,r=e.currentGroup,i=(0,e.onGetFullContentState)(),s=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.idx,s=i.onDelete,e.next=3,d.Z.deleteGroupLink({groupName:r.id,ordinal:o+1});case 3:return e.abrupt("return",{message:"Link deleted",onSuccess:function(){s&&s(),n({reloadOnClose:!0},"root"),t({bypassCheck:!0})}});case 4:case"end":return e.stop()}},e)})),[r,i,t,n]);return(0,k.jsx)(ov,{isAsync:!0,onCancel:t,title:"Delete link?",confirmLabel:"Delete",onConfirm:s,description:'Are you sure you want to delete the link "'.concat(i.title,"\"? You can't undo this.")})}),cD=g.ZP.div.withConfig({displayName:"styled__GroupChatUnlockWrapper",componentId:"sc-1y8cj70-0"})(["display:flex;flex-direction:column;"]),cI=g.ZP.div.withConfig({displayName:"styled__GroupChatUnlockDescription",componentId:"sc-1y8cj70-1"})(["margin-bottom:16px;> p{","}"],Z.c.t7),cZ=(0,l.memo)(function(e){var t=e.onStackPop,n=e.currentGroup,r=(0,c.useRouter)(),i=(0,l.useMemo)(function(){var e;return(null==n||null===(e=n.metadata)||void 0===e?void 0:e.pluginMinChatLevelEnabled)===1},[n]),s=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=5;break}return e.next=3,d.Z.disableChatUnlock({groupID:n.id});case 3:e.next=7;break;case 5:return e.next=7,d.Z.enableChatUnlock({groupID:n.id});case 7:return e.next=9,(0,V.H5)(r);case 9:case"end":return e.stop()}},e)})),[n,i,r]),u=(0,l.useMemo)(function(){return(0,k.jsx)(sJ.Z,{label:i?"On":"Off",onClick:s,active:i})},[i,s]);return(0,k.jsxs)(cD,{children:[(0,k.jsx)(sW,{onBack:t,title:"Unlock chat at Level 2",backLabel:"< Back to plugins",extraAction:u}),(0,k.jsxs)(cI,{children:[(0,k.jsx)("p",{children:"When groups get big, some people DM spam/pitch members. Unlocking chat at Level 2 makes it harder for DM spammers/pitchers because they need to contribute to the community to DM other members."}),(0,k.jsx)("p",{children:"We don't recommend turning this on for small groups where DM pitching/spam isn't an issue. It might block natural conversations between honest members from happening."})]}),(0,k.jsx)(S.z,{label:"done",variant:"secondary",onClick:t})]})}),cS=n(96166),c_=(0,g.iv)(["> h2{","}"],Z.c.t4),cM=g.ZP.div.withConfig({displayName:"styled__GroupSubscriptionsWrapper",componentId:"sc-e2pjk3-0"})(["display:flex;flex-direction:column;position:relative;> h2{margin:0px 0px 8px 0px;","}> p{margin:0px 0px 32px 0px;","}",""],Z.c.t2,Z.c.t7,function(e){return e.theme.isMobile&&c_}),cN=g.ZP.div.withConfig({displayName:"styled__PricesWrapper",componentId:"sc-e2pjk3-1"})(["display:flex;flex-direction:column;margin-bottom:32px;gap:16px;"]),cE=(0,g.iv)(["top:-8px;"]),cA=(0,g.ZP)(S.z).withConfig({displayName:"styled__DashboardButton",componentId:"sc-e2pjk3-2"})(["border-radius:4px;position:absolute;right:0px;top:0px;",""],function(e){return e.theme.isMobile&&cE});Z.c.t4,v.O9.p1,v.O9.fgPrimary,Z.c.t2,Z.c.t7;var cL=(0,g.iv)(["> div{> h3{","}}"],Z.c.t4),cT=g.ZP.div.withConfig({displayName:"styled__SupportEmailBanner",componentId:"sc-e2pjk3-4"})(["margin-top:32px;background:","33;border-radius:10px;padding:16px;> div{display:flex;justify-content:space-between;> h3{margin:0px 0px 8px 0px;","}> button{margin-top:-5px;margin-right:-8px;}}> p{margin:0px;"," > span{color:",";cursor:pointer;&:hover{text-decoration:underline;}}}",""],v.O9.p3,Z.c.t2,Z.c.t7,v.O9.sd1,function(e){return e.theme.isMobile&&cL}),cF=g.ZP.div.withConfig({displayName:"styled__DashboardModalWrapper",componentId:"sc-j4hnhp-0"})(["display:flex;flex-direction:column;margin-top:24px;> div:first-child{margin-bottom:32px;}> p{margin:0px 0px 16px 0px;","}"],Z.c.t11),cB=g.ZP.div.withConfig({displayName:"styled__StripeDashboardText",componentId:"sc-j4hnhp-1"})(["a{color:",";}"],v.O9.sd1),cR=g.ZP.div.withConfig({displayName:"styled__SubscriptionToggles",componentId:"sc-j4hnhp-2"})(["display:flex;flex-direction:column;gap:16px;margin-bottom:32px;> div{justify-content:space-between;> span{color:",";","}}"],v.O9.n7,Z.c.t7);function cz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var cG=(0,l.memo)(function(e){var t,n=e.onClose,i=(0,l.useState)(!1),s=i[0],u=i[1],p=(0,l.useState)({}),f=p[0],m=p[1],h=(0,l.useState)(""),v=h[0],b=h[1],g=(0,l.useState)(!0),x=g[0],y=g[1],w=(0,C.bI)("currentGroup","isMobile","self"),j=w.self,O=w.currentGroup,P=w.isMobile,D=w.dispatch,I=(0,l.useState)(!(null!=j&&null!==(t=j.member)&&void 0!==t&&null!==(t=t.metadata)&&void 0!==t&&t.mbncno)),Z=I[0],S=I[1],_=(0,l.useState)(O.metadata.gbSupportEmail),M=_[0],N=_[1],E=(0,l.useRef)(O.metadata.gbSupportEmail),A=(0,c.useRouter)().reload,L=(0,l.useCallback)(function(){S(function(e){return!e})},[]),T=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.getConnectAccount({groupId:O.id});case 2:n=(t=e.sent).data,t.error?D(e0.bI,{message:"Failed to fetch account data. Try it again later.",severity:"error"}):m(n),y(!1);case 7:case"end":return e.stop()}},e)})),[O,D]);(0,l.useEffect)(function(){T()},[T]);var F=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!1,(0,U.vV)(M)||(b("Please enter a valid email"),o=!0),!o){e.next=4;break}return e.abrupt("return");case 4:if(u(!0),!(!(null!=j&&null!==(t=j.member)&&void 0!==t&&null!==(t=t.metadata)&&void 0!==t&&t.mbncno)!==Z)){e.next=22;break}if(!Z){e.next=12;break}return e.next=9,d.Z.enableNewCustomerNotification({memberId:j.member.id});case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,d.Z.disableNewCustomerNotification({memberId:j.member.id});case 14:e.t0=e.sent;case 15:if(!e.t0.error){e.next=21;break}return D(e0.bI,{message:"Failed to update notification. Try it again later.",severity:"error"}),u(!1),e.abrupt("return");case 21:i=!0;case 22:if(!(M!==E.current)){e.next=32;break}return e.next=25,d.Z.updateConnectAccount({groupId:O.id,supportEmail:M});case 25:if(!e.sent.error){e.next=31;break}return D(e0.bI,{message:"Failed to update email. Try it again later.",severity:"error"}),u(!1),e.abrupt("return");case 31:D(e0.k9,function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cz(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cz(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return t.metadata.gbSupportEmail=M,t});case 32:if(!i){e.next=36;break}return(0,J.Lx)({message:"Subscription settings updated"}),A(),e.abrupt("return");case 36:u(!1),D(e0.bI,{message:"Subscription settings updated"}),n();case 39:case"end":return e.stop()}},e)})),[M,O,D,Z,n,j,A]),B=(0,l.useCallback)(function(e){b(""),N(e.target.value)},[]),R=(0,l.useMemo)(function(){return x?(0,k.jsx)(rF.D,{fitWidth:!0}):(0,k.jsxs)(cF,{children:[(0,k.jsx)(ir.I,{error:v,value:M,label:"Support email",onChange:B}),(0,k.jsx)(cR,{children:(0,k.jsx)(sJ.Z,{label:"New customer notification/sound",active:Z,onClick:L})}),(0,k.jsxs)(cB,{children:["You can change the bank account payouts go to from your ",(0,k.jsx)(W.r,{href:null==f?void 0:f.dashboardUrl,newTab:!0,children:"Stripe dashboard here"}),"."]})]})},[x,v,f,M,B,Z,L]),z=(0,l.useMemo)(function(){var e;return x||!M||M===E.current&&!(null!=j&&null!==(e=j.member)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.mbncno)===Z},[x,Z,M,j]);return(0,k.jsx)(nQ.T,{open:!0,onClose:n,onCancel:n,confirmLabel:"Save",disabled:z,loading:s,header:"Subscription settings",onConfirm:F,cancelButtonVariant:P?"secondary":"borderless",children:R})}),cU=g.ZP.div.withConfig({displayName:"styled__AddPriceModalWrapper",componentId:"sc-1w5znzb-0"})(["display:flex;flex-direction:column;gap:16px;> p{margin:0px;color:",";","}"],v.O9.n5,Z.c.t9);function c$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var cW=(0,l.memo)(function(e){var t=e.onClose,n=e.fetchProducts,i=e.products,s=(0,l.useState)(""),c=s[0],u=s[1],p=(0,l.useState)(""),f=p[0],m=p[1],h=(0,l.useState)(!1),v=h[0],b=h[1],g=(0,C.bI)("currentGroup","isMobile"),x=g.currentGroup,y=g.isMobile,w=g.dispatch,j=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var o,s,l,u,p,f,h,v,g;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m(""),s=(o=oi.jY.USD).multiplier,l=o.max,u=o.min,p=c*s,!i.find(function(e){return e.amount===p&&"usd"===e.currency})){e.next=6;break}return m("Price already exists"),e.abrupt("return");case 6:if(!(p>l||p<u)){e.next=11;break}return f=(0,oi.O5)({currency:"USD",amount:u}),h=(0,oi.O5)({currency:"USD",amount:l}),m("Please set an amount between ".concat(f," and ").concat(h)),e.abrupt("return");case 11:return b(!0),e.next=14,d.Z.addSubscriptionPrice({groupId:x.id,amount:p,currency:"usd"});case 14:if(g=(v=e.sent).data,!v.error){e.next=21;break}return w(e0.bI,{message:"Failed to add price. Try it again later.",severity:"error"}),b(!1),e.abrupt("return");case 21:return e.next=23,d.Z.setCurrentSubscriptionPrice({groupId:x.id,priceId:g.id});case 23:return w(e0.k9,function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c$(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return t.metadata.currentMBpId=g.id,t}),w(e0.bI,{message:"Price added."}),e.next=27,n();case 27:b(!1),t();case 29:case"end":return e.stop()}},e)})),[n,x,w,i,t,c]),O=(0,l.useCallback)(function(e){/^[0-9]*$/.test(e.target.value)&&u(e.target.value)},[]);return(0,k.jsx)(nQ.T,{open:!0,loading:v,onClose:t,onCancel:t,confirmLabel:"Add",header:"Add price",onConfirm:j,cancelButtonVariant:y?"secondary":"borderless",children:(0,k.jsxs)(cU,{children:[(0,k.jsx)(ir.I,{prefix:oi.jY.USD.symbol,onChange:O,suffix:"/month",value:c,error:f,inputProps:{"data-testid":"subscription-price-input"}}),(0,k.jsx)("p",{children:"Prices are in USD, but payouts will be in your local currency."})]})})}),cH=(0,g.iv)(["flex-direction:column;height:fit-content;padding:8px 13px 16px 13px;"]),cq=g.ZP.div.withConfig({displayName:"styled__PriceItemWrapper",componentId:"sc-1o5codt-0"})(["display:flex;height:56px;padding:0px 16px;border-radius:10px;align-items:center;background:",";",""],v.O9.n2,function(e){return e.theme.isMobile&&cH}),cV=(0,g.iv)(["width:100%;flex:0;"]),cY=g.ZP.div.withConfig({displayName:"styled__PriceItemTop",componentId:"sc-1o5codt-1"})(["flex:1;display:flex;align-items:center;justify-content:space-between;> div:first-child{display:flex;gap:40px;}",""],function(e){return e.theme.isMobile&&cV}),cJ=(0,g.iv)(["align-items:center;justify-content:flex-start;width:100%;gap:24px;"]),cX=g.ZP.div.withConfig({displayName:"styled__PriceMeta",componentId:"sc-1o5codt-2"})(["display:flex;align-items:center;gap:48px;> a > button{height:fit-content;}",""],function(e){return e.theme.isMobile&&cJ}),cK=g.ZP.div.withConfig({displayName:"styled__PriceName",componentId:"sc-1o5codt-3"})(["align-items:center;display:flex;gap:8px;",";> div{height:24px;width:24px;}"],Z.c.t5),cQ=n(51236);function c0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var c1=(0,l.memo)(function(e){var t,n=e.id,i=e.amount,s=e.metadata,c=e.currency,u=e.fetchProducts,p=(0,C.bI)("isMobile","currentGroup"),f=p.isMobile,m=p.currentGroup,h=p.dispatch,v=null==m||null===(t=m.metadata)||void 0===t?void 0:t.currentMBpId,b=v===n||0===i&&!v,g=0===i,x=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.setCurrentSubscriptionPrice({groupId:m.id,priceId:n});case 2:if(!e.sent.error){e.next=7;break}return h(e0.bI,{message:"Failed to set current price. Try it again later.",severity:"error"}),e.abrupt("return");case 7:h(e0.bI,{message:"Price set"}),h(e0.k9,function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c0(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return t.metadata.currentMBpId=n,t});case 9:case"end":return e.stop()}},e)})),[h,m,n]),y=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.deleteSubscriptionPrice({groupId:m.id,priceId:n});case 2:if(!e.sent.error){e.next=7;break}return h(e0.bI,{message:"Failed to delete price. Try it again later.",severity:"error"}),e.abrupt("return");case 7:h(e0.bI,{message:"Price deleted"}),u();case 9:case"end":return e.stop()}},e)})),[h,u,m,n]),w=(0,l.useMemo)(function(){return(0,k.jsxs)(cX,{children:[(0,k.jsx)(S.z,{newTab:!0,variant:"link",typography:"t7",label:n2()("member",(null==s?void 0:s.membershipCount)||0,!0),href:"/".concat(m.name,"/-/members?price=").concat(g?"memberfreebillingproduct00000000":n)}),b&&(0,k.jsx)(cQ.C,{label:"Current price"})]})},[n,m,b,g,s]),j=(0,l.useMemo)(function(){return[{label:"Make current",disabled:b,onClick:x},{label:"Delete price",disabled:b||0===i||!!(null!=s&&s.membershipCount),onClick:y}]},[b,x,i,y,s]),O=(0,l.useMemo)(function(){var e=g?"Free":"".concat((0,oi.O5)({amount:i,currency:c})," /month");return(0,k.jsxs)(cY,{children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)(cK,{children:[(0,k.jsx)(eF.J,{name:"Tag"}),(0,k.jsx)("span",{children:e})]}),!f&&w]}),(0,k.jsx)(ee.h_,{icon:"HorizontalDots",options:j,variant:"icon-borderless"})]})},[i,w,f,j,c,g]),P=(0,l.useMemo)(function(){if(f)return w},[f,w]);return(0,k.jsxs)(cq,{children:[O,P]})}),c2=["id"];function c9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c9(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c9(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c5=(0,l.memo)(function(e){var t,n=e.setContentLoading,r=e.onClose,i=(0,l.useState)([]),s=i[0],u=i[1],p=(0,C.bI)("currentGroup","self"),f=p.currentGroup,m=p.self,h=p.dispatch,v=null==f||null===(t=f.metadata)||void 0===t?void 0:t.gbSetupStatus,g=(0,l.useState)(!v),x=g[0],y=g[1],w="rdy"===v,j=(0,c.useRouter)(),O=j.push,P=j.query,D=(0,en.C1)(),I=(0,Q.Z)(D,3),Z=I[0],_=I[1],M=I[2],N=(0,en.C1)(),E=(0,Q.Z)(N,3),A=E[0],L=E[1],T=E[2],F=(0,l.useState)(0),B=F[0],R=F[1];(0,l.useEffect)(function(){P.ap&&(_(),(0,V.hj)(j,"ap"))},[j,P,_]);var z=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.getBillingProducts({groupId:f.id});case 2:u((null==(t=e.sent.data)?void 0:t.billingProducts)||[]),R((null==t?void 0:t.freeMembers)||0),n(!1);case 7:case"end":return e.stop()}},e)})),[f,n]);(0,l.useEffect)(function(){n(!0),z()},[z,n]);var G=(0,l.useCallback)(function(e,t){var n=e.id,r=(0,b.Z)(e,c2);return(0,k.jsx)(c1,c3({fetchProducts:z,id:n},r),t)},[z]),U=(0,l.useMemo)(function(){var e=[{amount:0,metadata:{membershipCount:B}}];return null!=s&&s.length&&(e=[].concat((0,rj.Z)(s),(0,rj.Z)(e))),(0,k.jsx)(cN,{children:e.map(G)})},[s,B,G]),$=(0,l.useCallback)(function(){r(),O("/".concat(f.name,"/--/billing/connect?sm=adminSubscriptions"))},[O,r,f]),H=(0,l.useMemo)(function(){return w||x?null:(0,k.jsx)(cS.Z,{onClick:$})},[w,x,$]),q=(0,l.useCallback)(function(){x?y(!1):_()},[x,_]),Y=(0,l.useMemo)(function(){return w?(0,k.jsx)(cA,{iconSize:17,variant:"icon",icon:"GearOutlined",onClick:L}):null},[w,L]),J=(0,l.useMemo)(function(){if(Z)return(0,k.jsx)(cW,{products:s,onClose:M,fetchProducts:z})},[Z,M,z,s]),X=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.hideSupportEmailBanner({memberId:null==m||null===(t=m.member)||void 0===t?void 0:t.id});case 2:h(e0._$,function(e){var t=c3({},e);return t.member.metadata.hideSeb=!0,t});case 3:case"end":return e.stop()}},e)})),[m,h]),K=(0,l.useMemo)(function(){var e;return!w||null!=m&&null!==(e=m.member)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.hideSeb?null:(0,k.jsxs)(cT,{children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{children:"Support email"}),(0,k.jsx)(S.z,{iconSize:14,icon:"Close",onClick:X,variant:"icon-borderless"})]}),(0,k.jsxs)("p",{children:["We're showing ",(0,k.jsx)("span",{onClick:L,children:f.metadata.gbSupportEmail})," as the support email on your receipts. You can change it by clicking the settings icon at the top right of this page."]})]})},[f,w,X,L,m]),ee=(0,l.useMemo)(function(){if(A)return(0,k.jsx)(cG,{onClose:T})},[A,T]);return(0,k.jsxs)(cM,{children:[Y,(0,k.jsx)("h2",{children:"Subscriptions"}),(0,k.jsxs)("p",{children:["Make money by charging a monthly subscription for access to your community. ",(0,k.jsx)(W.r,{newTab:!0,label:"Learn more",href:"https://help.skool.com/article/86-subscriptions-faq"}),"."]}),U,(0,k.jsx)(S.z,{label:"Add Price",disabled:!w&&!x||(null==s?void 0:s.length)===10,onClick:q}),K,H,J,ee]})}),c6=(0,g.iv)(["> h2{","}"],Z.c.t4),c4=g.ZP.div.withConfig({displayName:"styled__GroupDashboardWrapper",componentId:"sc-118pr9v-0"})(["display:flex;flex-direction:column;position:relative;> h2{margin:0px 0px 24px 0px;","}",""],Z.c.t2,function(e){return e.theme.isMobile&&c6}),c8=g.ZP.div.withConfig({displayName:"styled__MetricItems",componentId:"sc-118pr9v-1"})(["display:flex;gap:16px;"]),c7=g.ZP.div.withConfig({displayName:"styled__MetricItem",componentId:"sc-118pr9v-2"})(["width:235px;height:87px;background:",";border:1px solid ",";border-radius:10px;display:flex;justify-content:center;align-items:center;flex-direction:column;> div{&:first-child{","}&:last-child{color:",";",";}}"],v.O9.n2,v.O9.n3,Z.c.t1,v.O9.n5,Z.c.t10),ue=(0,l.memo)(function(e){var t,n=e.setContentLoading,r=(0,C.bI)("currentGroup","self"),i=r.currentGroup,s=r.self,c=(0,l.useState)(null),u=c[0],p=c[1],f=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.next=3,d.Z.getBillingDashboard({groupId:i.id});case 3:p(e.sent.data),n(!1);case 7:case"end":return e.stop()}},e)})),[i,n]);(0,l.useEffect)(function(){f()},[f]);var m=null!==(t=null==u?void 0:u.totalPaidMembers)&&void 0!==t?t:0,h=(null==u?void 0:u.allTimeCourseSales)&&(null==u?void 0:u.allTimeCourseSales)-(null==u?void 0:u.allTimeCourseSales)%100,v=(0,l.useMemo)(function(){return h?(0,oi.O5)({amount:h,currency:"USD"}):"$0"},[h]),b=(0,l.useMemo)(function(){return null!=u&&u.mrr?(0,oi.O5)({amount:null==u?void 0:u.mrr,currency:"USD"}):"$0"},[u]);return(0,k.jsxs)(c4,{children:[(0,k.jsx)("h2",{children:"\uD83C\uDF89 Happy ".concat(eQ()().format("dddd"),", ").concat(s.firstName)}),(0,k.jsxs)(c8,{children:[(0,k.jsxs)(c7,{children:[(0,k.jsx)("div",{children:m}),(0,k.jsx)("div",{children:"Paid members"})]}),(0,k.jsxs)(c7,{children:[(0,k.jsx)("div",{children:b}),(0,k.jsx)("div",{children:"MRR"})]}),(0,k.jsxs)(c7,{children:[(0,k.jsx)("div",{children:v}),(0,k.jsx)("div",{children:"Course sales"})]})]})]})}),ut=(0,g.iv)(["> h2{","}"],Z.c.t4),un=g.ZP.div.withConfig({displayName:"styled__GroupDashboardWrapper",componentId:"sc-b8oaun-0"})(["display:flex;flex-direction:column;position:relative;> h2{margin:0px 0px 24px 0px;","}",""],Z.c.t2,function(e){return e.theme.isMobile&&ut}),ur=(0,g.iv)(["margin:0px 0px 16px 0px;"]),uo=g.ZP.h3.withConfig({displayName:"styled__GroupPayoutsLabel",componentId:"sc-b8oaun-1"})(["margin:0px 0px 8px 0px;"," ",""],Z.c.t10,function(e){return e.theme.isMobile&&ur}),ui=g.ZP.div.withConfig({displayName:"styled__MetricItem",componentId:"sc-b8oaun-2"})(["width:235px;height:87px;background:",";border:1px solid ",";border-radius:10px;display:flex;justify-content:center;align-items:center;flex-direction:column;> div{&:first-child{","}&:last-child{color:",";",";}}"],v.O9.n2,v.O9.n3,Z.c.t1,v.O9.n5,Z.c.t10),ua=(0,g.iv)(["flex-direction:column;align-items:flex-start;gap:16px;margin-bottom:32px;"]),us=g.ZP.div.withConfig({displayName:"styled__PayoutsTop",componentId:"sc-b8oaun-3"})(["display:flex;margin-bottom:24px;align-items:center;gap:40px;",""],function(e){return e.theme.isMobile&&ua}),ul=g.ZP.div.withConfig({displayName:"styled__NextPayout",componentId:"sc-b8oaun-4"})(["",""],Z.c.t10),uc=g.ZP.div.withConfig({displayName:"styled__PendingPayout",componentId:"sc-b8oaun-5"})([""," display:flex;align-items:center;"],Z.c.t11),uu=(0,g.ZP)(eF.J).withConfig({displayName:"styled__PendingIcon",componentId:"sc-b8oaun-6"})(["cursor:pointer;margin-left:4px;height:18px;width:18px;color:",";"],v.O9.n5),ud=g.ZP.div.withConfig({displayName:"styled__PayoutHistory",componentId:"sc-b8oaun-7"})(["display:flex;flex-direction:column;border-top:1px solid ",";"],v.O9.n3),up=(0,g.iv)(["align-items:flex-end;"]),uf=g.ZP.div.withConfig({displayName:"styled__PayoutItem",componentId:"sc-b8oaun-8"})(["display:flex;justify-content:space-between;align-items:center;padding:16px 0px;border-bottom:1px solid ",";"," ",""],v.O9.n3,Z.c.t9,function(e){return e.theme.isMobile&&up}),um=(0,g.iv)(["flex-direction:column;gap:4px;"]),uh=g.ZP.div.withConfig({displayName:"styled__PayoutItemLeft",componentId:"sc-b8oaun-9"})(["display:flex;gap:40px;",""],function(e){return e.theme.isMobile&&um}),uv=g.ZP.div.withConfig({displayName:"styled__NoHistory",componentId:"sc-b8oaun-10"})(["margin-top:16px;",""],Z.c.t7),ub=g.ZP.div.withConfig({displayName:"styled__PayoutPendingModalWrapper",componentId:"sc-b8oaun-11"})(["> h1{margin:0 0 16px;","}> p{margin:0;","}> p > a{color:",";}"],Z.c.t1,Z.c.t7,v.O9.sd1),ug=function(e,t){var n=e.currency,r=e.amount,o=e.createdAt,i=e.externalAccount;return(0,k.jsxs)(uf,{children:[(0,k.jsxs)(uh,{children:[(0,k.jsx)(et.u,{content:eQ()(o).format("MMMM D, YYYY, HH:mm:ss"),children:(0,k.jsx)("div",{children:eQ()(o).format("MMMM D, YYYY")})}),(0,k.jsx)("div",{children:"Payout to ".concat(i)})]}),(0,k.jsx)("div",{children:(0,oi.O5)({amount:-1*r,currency:n,showZeroes:!0})})]},t)},ux=(0,l.memo)(function(e){var t=e.setContentLoading,n=e.onClose,r=(0,C.bI)("currentGroup").currentGroup,i=(0,l.useState)(null),s=i[0],c=i[1],u=(0,l.useState)(null),p=u[0],f=u[1],m=(0,l.useState)(!0),h=m[0],v=m[1],b=(0,en.C1)(),g=(0,Q.Z)(b,3),x=g[0],y=g[1],w=g[2],j=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var n,o,i,s,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.next=3,d.Z.getBillingPayouts({groupId:r.id});case 3:c({balance:(null==(l=e.sent.data)||null===(n=l.balances)||void 0===n||null===(n=n.usd)||void 0===n?void 0:n.balance)||0,nextTransfer:(null==l||null===(o=l.balances)||void 0===o||null===(o=o.usd)||void 0===o?void 0:o.nextTransfer)||0,pending:(null==l||null===(i=l.balances)||void 0===i||null===(i=i.usd)||void 0===i?void 0:i.pending)||0,currency:"USD",transfers:(null==l||null===(s=l.transfers)||void 0===s||null===(s=s.usd)||void 0===s?void 0:s.transfers)||[]}),t(!1);case 7:case"end":return e.stop()}},e)})),[r,t]);(0,l.useEffect)(function(){j()},[j]);var O=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((null==r||null===(t=r.metadata)||void 0===t?void 0:t.gbSetupStatus)!=="rdy"){e.next=8;break}return e.next=3,d.Z.getConnectAccount({groupId:r.id});case 3:f({href:e.sent.data.dashboardUrl,newTab:!0}),e.next=9;break;case 8:f({href:"/".concat(r.name,"/--/billing/connect?sm=adminPayouts"),onClick:n});case 9:v(!1);case 10:case"end":return e.stop()}},e)})),[r,n]);(0,l.useEffect)(function(){!p&&x&&O()},[O,p,x]);var P=(0,l.useMemo)(function(){var e=eQ().tz("America/Los_Angeles").startOf("day"),t=e.clone();return(t.day()>=3||0===t.day())&&t.add(1,"weeks"),t.isoWeekday(3).diff(e,"days")},[]),D=(0,l.useMemo)(function(){var e;return null!=s&&null!==(e=s.transfers)&&void 0!==e&&e.length?s.transfers.map(ug):(0,k.jsx)(uv,{children:"No payout history."})},[s]);if(!s)return null;var I=s.nextTransfer,Z=s.balance,S=s.pending,_=s.currency;return(0,k.jsxs)(un,{children:[(0,k.jsx)("h2",{children:"Payouts"}),(0,k.jsxs)(us,{children:[(0,k.jsxs)(ui,{children:[(0,k.jsx)("div",{children:(0,oi.O5)({amount:Z,currency:_,showZeroes:!0})}),(0,k.jsx)("div",{children:"Balance"})]}),(0,k.jsxs)(eg.s,{gap:8,children:[(0,k.jsx)(ul,{children:"Next payout will be ".concat((0,oi.O5)({amount:I,currency:_})," in ").concat(n2()("day",P,!0))}),(0,k.jsxs)(uc,{children:["".concat((0,oi.O5)({amount:S,currency:_})," is pending"),(0,k.jsx)(uu,{onClick:y,name:"InfoOutline"})]})]})]}),(0,k.jsx)(uo,{children:"Payout history"}),(0,k.jsx)(ud,{children:D}),x&&(0,k.jsx)(rt.u_,{open:!0,onClose:w,size:"small",children:(0,k.jsxs)(ub,{children:[(0,k.jsx)("h1",{children:"Payouts"}),h?(0,k.jsx)(rF.D,{fitWidth:!0}):(0,k.jsxs)("p",{children:["We pay out your available balance every Wednesday.",(0,k.jsx)("br",{}),(0,k.jsx)("br",{}),(0,k.jsx)("strong",{children:"Pending"})," is your balance that hasn’t yet settled. Transactions take 7-14 days to settle.",(0,k.jsx)("br",{}),(0,k.jsx)("br",{}),"Payouts are direct to your bank account. You can change your connected bank account ",(0,k.jsx)(W.r,{href:null==p?void 0:p.href,newTab:null==p?void 0:p.newTab,onClick:null==p?void 0:p.onClick,children:"here"}),"."]})]})})]})}),uy=(0,g.iv)(["> h2{","}"],Z.c.t4),uw=g.ZP.div.withConfig({displayName:"styled__GroupDiscoveryWrapper",componentId:"sc-16m8szr-0"})(["display:flex;flex-direction:column;position:relative;> h2{margin:0 0 8px;","}> p{"," margin:0;}",""],Z.c.t2,Z.c.t7,function(e){return e.theme.isMobile&&uy}),uC=(0,g.iv)(["flex-direction:column;gap:8px;"]),uj=(0,g.iv)(["flex-direction:row;gap:32px;"]),uk=g.ZP.div.withConfig({displayName:"styled__GroupDiscoveryStatusWrapper",componentId:"sc-16m8szr-1"})(["display:flex;margin:32px 0 40px;"," > p{"," color:",";margin:0;> strong{color:",";}}"],function(e){return e.theme.isMobile?uC:uj},Z.c.t5,function(e){return e.$isActive?v.O9.success:v.O9.error},v.O9.n7),uO=g.ZP.div.withConfig({displayName:"styled__GroupDiscoveryMoreInfo",componentId:"sc-16m8szr-2"})(["display:flex;flex-direction:column;gap:16px;> p{"," margin:0;> strong{color:",";}}"],Z.c.t7,v.O9.n7),uP=(0,l.memo)(function(e){var t=e.setContentLoading,n=(0,C.bI)("currentGroup").currentGroup,r=(0,l.useState)(null),i=r[0],s=r[1],c=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.next=3,d.Z.getGroupDiscoveryData({groupId:n.id});case 3:s(e.sent.data),t(!1);case 7:case"end":return e.stop()}},e)})),[n,t]);return(0,l.useEffect)(function(){c()},[c]),(0,k.jsxs)(uw,{children:[(0,k.jsx)("h2",{children:"Discovery"}),(0,k.jsx)("p",{children:"Get discovered by millions of active users."}),i&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(uk,{$isActive:i.isShowing,children:[(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"Showing in discovery: "}),i.isShowing?"Yes":"No"]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"Rank: "}),i.isShowing?"#".concat(i.rank):"None"]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"Category: "}),i.isShowing?i.category.name:"None"]})]}),(0,k.jsxs)(uO,{children:[(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"Showing in discovery — "}),"Your group needs to meet a minimum threshold of members, posts, and activity to show in discovery. You also need a good group description, about page description, group cover image, and some photos/videos on your about page."]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"Discovery rank — "}),"Groups are ranked by engagement using an algorithm that looks at member growth, member activity, posts, comments, and likes. The more engaged your group is, the higher your rank."]}),(0,k.jsxs)("p",{children:["If your category is wrong, please ",(0,k.jsx)(W.r,{href:"/support",label:"contact support",newTab:!0}),"."]})]})]})]})}),uD=(0,g.iv)(["> h2{","}"],Z.c.t4),uI=g.ZP.div.withConfig({displayName:"styled__GroupTabVisibilityWrapper",componentId:"sc-agkc35-0"})(["> h2{margin:0 0 8px;","}> p{"," margin:0 0 32px;}",""],Z.c.t2,Z.c.t7,function(e){return e.theme.isMobile&&uD}),uZ=(0,g.iv)(["> h2{","}"],Z.c.t4),uS=g.ZP.div.withConfig({displayName:"styled__GroupTabWrapper",componentId:"sc-1wel26g-0"})(["border-radius:10px;background-color:",";margin-bottom:16px;padding:16px ","px;> div > h3{margin:0 0 8px;","}> p{"," margin:0;white-space:pre-line;}",""],v.O9.n2,function(e){return e.theme.isMobile?13:16},Z.c.t5,Z.c.t9,function(e){return e.theme.isMobile&&uZ}),u_=(0,l.memo)(function(e){var t=e.title,n=e.description,r=e.enabled,o=e.onToggleClick;return(0,k.jsxs)(uS,{children:[(0,k.jsxs)(e5.X,{justifyContent:"space-between",children:[(0,k.jsx)("h3",{children:t}),(0,k.jsx)(sJ.Z,{label:r?"On":"Off",onClick:o,active:r})]}),(0,k.jsx)("p",{children:n})]})}),uM={userInvite:ia,userNotifications:rX,userMembership:os,userMembershipLeave:ob,userMembershipCancelJoin:ow,userMembershipSupport:oy,userMembershipCancelSubscription:oE,userMembershipUpdatePayment:o_,userMembershipReactivate:oj,userMembershipLeaveGroup:oD,userChat:r6,adminInvite:ia,adminInviteCsv:ix,adminGeneral:aA,adminUrlChange:a$,adminBilling:sj,adminBillingReferralChange:sS,adminBillingInvoiceHistory:sM,adminMembershipCsv:iC,adminGamification:ce,adminGamificationEdit:cn,adminPlugins:sY,adminZapier:lC,adminZapierRotate:lj,adminWebhook:sQ,adminAutoDm:s5,adminAutoDmChangeUser:lv,adminMembershipQuestions:lI,adminMembershipQuestionsAdd:lK,adminMembershipQuestionsDelete:l1,adminMembershipQuestionsEdit:l3,adminCategories:cl,adminCategoriesAdd:cu,adminCategoriesEdit:cd,adminCategoriesDelete:cp,adminCategoriesMigrate:cg,adminLinks:cC,adminLinksAdd:ck,adminLinksEdit:cO,adminLinksDelete:cP,adminMetrics:i0,adminChatUnlock:cZ,adminSubscriptions:c5,adminDashboard:ue,adminPayouts:ux,adminDiscovery:uP,adminMetaPixel:lu,adminTabVisibility:(0,l.memo)(function(){var e,t,n,r=(0,C.bI)("currentGroup"),i=r.currentGroup,s=r.dispatch,u=(0,c.useRouter)(),p=(0,l.useMemo)(function(){var e,t;return JSON.parse(null!==(e=null===(t=i.metadata)||void 0===t?void 0:t.tabs)&&void 0!==e?e:"{}")},[i]),f=(0,l.useCallback)((e=(0,o.Z)(a().mark(function e(t){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=p&&null!==(n=p[t])&&void 0!==n&&n.visible)){e.next=7;break}return e.next=4,d.Z.setGroupTabHidden({groupId:i.id,tabId:t});case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,d.Z.setGroupTabVisible({groupId:i.id,tabId:t});case 9:e.t0=e.sent;case 10:if(!e.t0.error){e.next=15;break}return s(e0.bI,{message:"Something went wrong, please try again",severity:"error"}),e.abrupt("return");case 15:(0,V.H5)(u);case 16:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),[p,i,u,s]),m=(0,l.useCallback)(function(){f("classroom")},[f]),h=(0,l.useCallback)(function(){f("calendar")},[f]);return(0,k.jsxs)(uI,{children:[(0,k.jsx)("h2",{children:"Tabs"}),(0,k.jsx)("p",{children:"Show/hide tabs in your community."}),(0,k.jsx)(u_,{title:"Classroom",description:"Organize useful information to help your community do whatever they want to do.\n          Some people use this space for guides, instructions, courses, recipes, workout plans, resources, templates, etc.",enabled:null==p||null===(t=p.classroom)||void 0===t?void 0:t.visible,onToggleClick:m}),(0,k.jsx)(u_,{title:"Calendar",description:"One of fastest ways to build community is to get members together to hangout live on Zoom, Google Meet, or in-person. Some people use this for coffee hours, Q&As, co-working, happy hour, etc.",enabled:null==p||null===(n=p.calendar)||void 0===n?void 0:n.visible,onToggleClick:h})]})})},uN=[{label:"Membership",key:"userMembership",dataTestId:"user-membership-tab"},{label:"Notifications",key:"userNotifications",dataTestId:"user-notifications-tab"},{label:"Chat",key:"userChat",dataTestId:"user-chat-tab"},{label:"Invite",key:"userInvite",dataTestId:"user-invite-tab"}],uE=[{label:"Dashboard",dataTestId:"admin-dashboard-tab",key:"adminDashboard",billingMgrOnly:!0},{label:"Payouts",dataTestId:"admin-payouts-tab",key:"adminPayouts",billingMgrOnly:!0},{label:"Invite",dataTestId:"admin-invite-tab",key:"adminInvite"},{label:"General",dataTestId:"admin-general-tab",key:"adminGeneral"},{label:"Subscriptions",dataTestId:"admin-subscriptions-tab",key:"adminSubscriptions",billingMgrOnly:!0},{label:"Categories",dataTestId:"admin-categories-tab",key:"adminCategories"},{label:"Tabs",dataTestId:"admin-tab-visibility-tab",key:"adminTabVisibility"},{label:"Plugins",dataTestId:"admin-plugins-tab",key:"adminPlugins"},{label:"Metrics",dataTestId:"admin-metrics-tab",key:"adminMetrics"},{label:"Gamification",dataTestId:"admin-gamification-tab",key:"adminGamification"},{label:"Discovery",dataTestId:"admin-discovery-tab",key:"adminDiscovery"},{label:"Links",dataTestId:"admin-links-tab",key:"adminLinks"}],uA=g.ZP.div.withConfig({displayName:"styled__SettingsModalMobileHeaderWrapper",componentId:"sc-1tetzlf-0"})(["display:flex;flex-direction:column;position:sticky;top:0px;z-index:2;background:",";"],v.O9.n1),uL=g.ZP.div.withConfig({displayName:"styled__MobileHeaderWrapper",componentId:"sc-1tetzlf-1"})(["height:52px;border-bottom:1px solid ",";"],v.O9.n3),uT=(0,l.memo)(function(e){var t=e.canAccessGroup;return(0,k.jsx)(uA,{children:(0,k.jsx)(uL,{children:(0,k.jsx)(nb.Z,{canAccessGroup:t,settings:{mainMenuName:"group-settings-modal"}})})})}),uF=g.ZP.div.withConfig({displayName:"styled__SettingsModalHeaderDesktop",componentId:"sc-1bu00ne-0"})(["display:flex;justify-content:space-between;align-items:center;height:100%;padding:0px 24px 0px 32px;"]),uB=g.ZP.div.withConfig({displayName:"styled__UserSettingsLeft",componentId:"sc-1bu00ne-1"})(["display:flex;align-items:center;gap:16px;> div{display:flex;flex-direction:column;> p{color:",";margin:0px;","}}"],v.O9.n5,Z.c.t9),uR=n(65856),uz=(0,l.memo)(function(e){var t=e.isAdminSettings,n=e.onClose,r=(0,C.bI)("currentGroup").currentGroup,o=(0,l.useMemo)(function(){return(0,k.jsxs)(uB,{children:[(0,k.jsx)(tz.F,{group:r,disableLink:!0}),(0,k.jsxs)("div",{children:[(0,k.jsx)(uR.D,{desktopTypography:"t5",group:r,disableLink:!0}),(0,k.jsx)("p",{children:t?"Group settings":"Membership settings"})]})]})},[r,t]);return(0,k.jsxs)(uF,{children:[o,(0,k.jsx)(S.z,{iconSize:14,icon:"Close",onClick:n,variant:"icon-borderless"})]})}),uG=n(42108);function uU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uU(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var uW="You have unsaved changes. Do you want to leave without saving?",uH=function(e){var t,n,i,s,u,d=e.initialView,p=void 0===d?"userNotifications":d,f=e.canAccessGroup,h=(0,l.useState)({}),v=h[0],b=h[1],g=(0,l.useState)({}),x=g[0],y=g[1],w=(0,l.useState)([p]),j=w[0],O=w[1],P=(0,l.useState)(!1),D=P[0],I=P[1],Z=(0,l.useState)(null),S=Z[0],_=Z[1],M=(0,C.bI)("self","eventId","isMobile","viewDate","currentGroup","currentCourseId","currentModuleId","occurrenceId"),N=M.dispatch,E=M.self,A=M.currentGroup,L=M.isMobile,T=M.currentCourseId,F=M.currentModuleId,B=M.viewDate,R=M.eventId,z=M.occurrenceId,U=(0,l.useState)({totalCategories:(null==A||null===(t=A.labels)||void 0===t?void 0:t.length)||0,totalRules:(null==A||null===(n=A.metadata)||void 0===n?void 0:n.totalRules)||0,totalLinks:A.metadata.links&&JSON.parse(A.metadata.links).links.length||0}),$=U[0],W=U[1],H=(0,l.useState)(null==A?void 0:A.metadata),q=H[0],Y=H[1],J=(0,l.useState)({enabled:!!(null!=A&&null!==(i=A.metadata)&&void 0!==i&&i.surveyEnabled),questions:null!=A&&null!==(s=A.metadata)&&void 0!==s&&s.survey?JSON.parse(null==A||null===(u=A.metadata)||void 0===u?void 0:u.survey).survey:[]}),X=J[0],K=J[1],Q=(0,c.useRouter)();(0,l.useEffect)(function(){Y(null==A?void 0:A.metadata)},[A]);var ee=(0,l.useMemo)(function(){return p.includes("admin")},[p]),et=(0,l.useMemo)(function(){return(0,m.CP)({user:E,member:null==E?void 0:E.member,group:A})},[E,A]),en=(0,l.useMemo)(function(){return j.slice(-1)[0]},[j]);(0,l.useEffect)(function(){if(!en){N("setSettingsModalState",function(e){return u$(u$({},e),{},{settingsModal:null})});return}en.startsWith("admin")&&!et&&O(["userNotifications"])},[en,et,N]);var er=(0,l.useMemo)(function(){return j[0]},[j]),eo=(0,l.useMemo)(function(){var e=S||en;return!(0,rB.isEqual)(x[e],v[e])},[en,S,x,v]),ei=(0,l.useCallback)(function(){var e;(!eo||confirm(uW))&&(null!=v&&null!==(e=v.root)&&void 0!==e&&e.reloadOnClose&&(0,V.H5)(Q),N("setSettingsModalState",function(e){return u$(u$({},e),{},{settingsModal:null})}))},[eo,N,v,Q]),ea=(0,l.useCallback)(function(e){return(v[en]||{})[e]},[en,v]),es=(0,l.useCallback)(function(e){return(v[S]||{})[e]},[S,v]),el=(0,l.useCallback)(function(e){return(x[en]||{})[e]},[en,x]),ec=(0,l.useCallback)(function(){return x[en]||{}},[en,x]),eu=(0,l.useCallback)(function(){return v[en]||{}},[en,v]),ed=(0,l.useCallback)(function(){return v[S]||{}},[S,v]),ep=(0,l.useCallback)(function(e,t){var n=t||en;b(function(t){return u$(u$({},t),{},(0,r.Z)({},n,u$(u$({},t[n]),e)))})},[en]),ef=(0,l.useCallback)(function(e,t){var n=t||S;b(function(t){return u$(u$({},t),{},(0,r.Z)({},n,u$(u$({},t[n]),e)))})},[S]),em=(0,l.useCallback)(function(e,t){var n=t||en;b(function(t){return u$(u$({},t),{},(0,r.Z)({},n,u$(u$({},t[n]),e)))}),y(function(t){return u$(u$({},t),{},(0,r.Z)({},n,u$(u$({},t[n]),e)))})},[en]),eh=(0,l.useCallback)(function(e,t){var n=t||S;b(function(t){return u$(u$({},t),{},(0,r.Z)({},n,u$(u$({},t[n]),e)))}),y(function(t){return u$(u$({},t),{},(0,r.Z)({},n,u$(u$({},t[n]),e)))})},[S]),ev=(0,l.useCallback)(function(e){b(function(t){return u$(u$({},t),{},(0,r.Z)({},e,null))}),y(function(t){return u$(u$({},t),{},(0,r.Z)({},e,null))})},[]),eb=(0,l.useCallback)(function(){b(function(e){return u$(u$({},e),{},(0,r.Z)({},en,x[en]))})},[x,en]),eg=(0,l.useCallback)(function(){b(function(e){return u$(u$({},e),{},(0,r.Z)({},S,x[S]))})},[x,S]),ex=(0,l.useCallback)(function(e,t){(t||e!==en)&&(t||!eo||confirm(uW))&&(_(null),O([e]),y({}),b(function(e){return{root:e.root}}))},[eo,en]),ey=(0,l.useCallback)(function(e,t){if(t)return _(e);O(function(t){return[].concat((0,rj.Z)(t),[e])})},[]),ew=(0,l.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e.bypassCheck||!eo||confirm(uW))&&(eb(),O(function(e){return e.slice(0,-1)}))},[eo,eb]),eC=(0,l.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e.bypassCheck||!eo||confirm(uW))&&(eg(),_(null))},[eo,eg]),ej=(0,l.useMemo)(function(){return(0,k.jsx)(uz,{isAdminSettings:ee,onClose:ei})},[ee,ei]),ek=(0,l.useCallback)(function(e){_(e)},[]),eO=(0,l.useMemo)(function(){if(!uM[en])return null;var e=uM[en];return(0,k.jsx)(e,{self:E,eventId:R,viewDate:B,dispatch:N,isMobile:L,onClose:ei,hasChanges:eo,occurrenceId:z,currentGroup:A,onGetState:ea,onSetState:em,onStackPop:ew,communityMeta:$,onTabChange:ex,onStackPush:ey,contentLoading:D,onResetState:eb,onClearState:ev,onMutateState:ep,currentModuleId:F,currentCourseId:T,setCommunityMeta:W,setContentLoading:I,onStackPopModal:eC,onSetContentModal:ek,onGetInitialState:el,groupMembershipQuestions:X,setGroupMembershipQuestions:K,onGetFullInitialState:ec,onGetFullContentState:eu})},[E,R,B,N,L,eo,en,ei,A,$,z,D,ew,ey,ex,T,ea,em,F,ev,eb,ep,eC,ek,el,X,ec,eu]),eP=(0,l.useMemo)(function(){return(0,k.jsx)(uT,{self:E,currentGroup:A,canAccessGroup:f,isGroupAdmin:et,onNavigate:ex,currentRootTab:er,paymentStatus:null==q?void 0:q.paymentStatus})},[A,ex,er,q,et,f,E]),eD=(0,l.useMemo)(function(){if(!L||!S)return null;var e=uM[S],t=(0,k.jsx)(e,{self:E,eventId:R,viewDate:B,dispatch:N,isMobile:L,onClose:ei,hasChanges:eo,occurrenceId:z,currentGroup:A,onGetState:es,onSetState:eh,onStackPop:eC,onTabChange:ex,onStackPush:ey,contentLoading:D,onResetState:eg,onClearState:ev,onMutateState:ef,setContentLoading:I,onGetInitialState:el,onGetFullInitialState:ec,onGetFullContentState:ed,groupMembershipQuestions:X,setGroupMembershipQuestions:K});return(0,k.jsx)(rt.u_,{open:!0,onClose:eC,size:"medium",children:t})},[E,R,B,N,L,eo,ei,S,z,A,D,eC,ey,ex,es,eh,ev,eg,ef,X,el,ec,ed]),eI=(0,l.useMemo)(function(){return L?{title:(0,k.jsxs)(e5.X,{gap:8,alignItems:"center",onClick:(0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,V.VF)(Q,(0,G.AZ)({groupName:A.name}));case 2:N(e0.fi,function(e){return u$(u$({},e),{},{settingsModal:null})});case 3:case"end":return e.stop()}},e)})),children:[(0,k.jsx)(eT.Z,{disableLink:!0,group:A,variant:"t8",iconSize:24,iconOnly:!0}),(0,k.jsx)(e4.Z,{variant:"t8",children:"Settings"})]}),disableGroupLogo:!0}:null},[A,N,L,Q]);(0,uG.l)(uG.C.SETTINGS_MODAL,eI);var eZ=(0,l.useMemo)(function(){return L?eP:ej},[eP,ej,L]),eS=(0,l.useMemo)(function(){if(D)return(0,k.jsx)(rF.D,{fitWidth:!0})},[D]),e_=(0,l.useMemo)(function(){return L?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(rU,{$contentLoading:D,children:[eO,eS]}),eD]}):(0,k.jsxs)(rG,{$contentLoading:D,children:[eO,eS]})},[eO,L,eD,eS,D]),eM=(0,l.useMemo)(function(){var e,t=(0,rj.Z)(uE),n=(null==E||null===(e=E.member)||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.billingMgr)===1;return(n&&t.push({label:"Billing & referrals",key:"adminBilling",dataTestId:"admin-billing-tab"}),n||(t=t.filter(function(e){return!e.billingMgrOnly})),A.archived)?t.map(function(e){return u$(u$({},e),{},{disabled:"adminBilling"!==e.key})}):t},[A,E]);return(0,k.jsx)(rT,{open:!0,header:eZ,content:e_,onClose:ei,activeTab:er,onTabChange:ex,width:ee?1074:800,height:ee?772:576,navWidth:ee?272:204,tabs:ee?eM:uN})},uq=function(e){var t=e.canAccessGroup,n=(0,C.bI)("settingsModal","currentGroup"),r=n.settingsModal,o=n.currentGroup,i=n.dispatch,a=(0,c.useRouter)();return((0,l.useEffect)(function(){a.query.sm&&(i(e0.fi,function(e){return u$(u$({},e),{},{settingsModal:a.query.sm})}),(0,V.hj)(a,"sm"))},[a,i]),(0,l.useEffect)(function(){o||i(e0.fi,function(e){return u$(u$({},e),{},{settingsModal:null})})},[o,i]),r&&o)?(0,k.jsx)(uH,{initialView:r,canAccessGroup:t}):null},uV=(0,g.iv)(["flex-direction:column;padding:",";"],function(e){var t=e.theme,n=e.$bottom;return t.isApp&&0===n?"16px 16px 48px 16px":"16px"}),uY=g.ZP.div.withConfig({displayName:"styled__GroupBanner",componentId:"sc-1ya57th-0"})(["position:fixed;bottom:","px;width:100%;height:auto;background-color:",";z-index:1298;display:flex;align-items:center;justify-content:center;padding:8px;",";"],function(e){var t=e.$bottom;return void 0===t?0:t},function(e){return e.$bgColor},function(e){return e.theme.isMobile&&uV}),uJ=(0,g.ZP)(S.z).withConfig({displayName:"styled__GroupBannerButton",componentId:"sc-1ya57th-1"})(["width:auto;height:","px;margin:",";padding:7px 24px;",""],function(e){return e.theme.isMobile?40:48},function(e){return e.theme.isMobile?"8px 0 0 0":"0 32px"},function(e){return e.theme.isDarkTheme?"color: ".concat(v.O9.n7,";"):void 0}),uX=(0,l.memo)(function(){var e,t,n,r,o,i,a=(0,C.bI)("currentGroup","isMobile","self","mobileBottomOffset"),s=a.currentGroup,c=a.isMobile,u=a.self,d=a.mobileBottomOffset,p=a.dispatch,f=(null==u||null===(e=u.member)||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.billingMgr)===1,m=!!(null!=s&&null!==(t=s.metadata)&&void 0!==t&&t.archived),h=(null==s||null===(n=s.metadata)||void 0===n?void 0:n.paymentStatus)||null,b=(0,l.useCallback)(function(e){p(e0.ZV,{showPaymentDialog:!0}),p(e0.dO,{paymentDialogType:e})},[p]),g=(0,l.useCallback)(function(){b("update")},[b]),x=(0,l.useCallback)(function(){b("activate")},[b]),y=(0,l.useCallback)(function(){b("unarchive")},[b]);return f&&"failing"===h?(0,k.jsxs)(uY,{$bgColor:v.O9.e2,$bottom:null==d||null===(r=d[j.V.SAFE])||void 0===r?void 0:r.offset,children:[(0,k.jsx)(e4.Z,{variant:c?"t5":"t4",color:v.O9.fgError,children:"Your payment has been declined"}),(0,k.jsx)(uJ,{variant:"secondary",label:"Fix Billing Issue",onClick:g})]}):f&&"legacy"===h?(0,k.jsxs)(uY,{$bgColor:v.O9.s2,$bottom:null==d||null===(o=d[j.V.SAFE])||void 0===o?void 0:o.offset,children:[(0,k.jsx)(e4.Z,{variant:c?"t5":"t4",color:v.O9.fgSuccess,children:"Skool is $99/month"}),(0,k.jsx)(uJ,{variant:"secondary",label:"Enter Payment Info",onClick:x})]}):f&&("archived"===h||m)?(0,k.jsxs)(uY,{$bgColor:v.O9.e2,$bottom:null==d||null===(i=d[j.V.SAFE])||void 0===i?void 0:i.offset,children:[(0,k.jsx)(e4.Z,{variant:c?"t5":"t4",color:v.O9.fgError,children:"This group has been archived"}),f&&(0,k.jsx)(uJ,{variant:"secondary",label:"Reactivate Group",onClick:y})]}):null}),uK=g.ZP.div.withConfig({displayName:"styled__PaymentDialogTitle",componentId:"sc-bd7xa7-0"})([""," text-align:center;margin-bottom:8px;"],Z.c.t1),uQ=g.ZP.div.withConfig({displayName:"styled__PaymentDialogBody",componentId:"sc-bd7xa7-1"})([""," text-align:center;margin-bottom:32px;"],Z.c.t7),u0=g.ZP.div.withConfig({displayName:"styled__PaymentDialogLegal",componentId:"sc-bd7xa7-2"})([""," margin-top:16px;"],Z.c.t11),u1=(0,g.ZP)(S.z).withConfig({displayName:"styled__PaymentDialogSubmit",componentId:"sc-bd7xa7-3"})(["width:100%;height:","px;margin-top:24px;"],function(e){return e.theme.isMobile?40:48}),u2=["update","unarchive","activate"],u9={update:{button:"Submit",title:"Payment Failed",body:"Please try entering payment information again."},activate:{button:"Activate Now",title:"Upgrade your account",body:"Skool is $99/month. To continue using Skool, please enter your payment information below."},unarchive:{button:"Reactivate Now",title:"This group has been archived",body:"Skool is $99/month. To reactivate and continue using Skool, please enter your payment information below."}},u3=(0,l.memo)(function(){var e,t,n,r,i,s,u,p=(0,C.bI)("currentGroup","showPaymentDialog","paymentDialogType","self","specifiedGroup"),f=p.currentGroup,m=p.showPaymentDialog,h=p.paymentDialogType,b=p.self,g=p.dispatch,x=p.specifiedGroup,y=(0,c.useRouter)(),w=(0,G.Im)(y.query),j=(0,G.kU)({tab:"terms"}),O=(0,G.kU)({tab:"privacy"}),P=(0,l.useRef)(),D=(0,l.useState)(null),I=D[0],Z=D[1],S=(0,l.useState)(""),_=S[0],M=S[1],N=(0,l.useState)(null),E=N[0],A=N[1],L=(0,l.useState)(!1),T=L[0],F=L[1],B=(0,l.useState)(!1),R=B[0],z=B[1],U=(null==b||null===(t=b.member)||void 0===t||null===(t=t.metadata)||void 0===t?void 0:t.billingMgr)===1,$=x||f,H=(null==$||null===(n=$.metadata)||void 0===n?void 0:n.paymentStatus)||null,q=(0,l.useCallback)(function(e){g(e0.ZV,{showPaymentDialog:!0}),g(e0.dO,{paymentDialogType:e})},[g]);(0,l.useEffect)(function(){if(U&&"true"===w){if("failing"===H)q("update");else if("archived"===H)q("unarchive");else if("legacy"===H)q("activate");else{var e=(0,G.AZ)({groupName:$.name}),t=e.href,n=e.as;y.push(t,n,{shallow:!0})}}},[w,q,U,H,$,y]);var V=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r,o,i,s,l,c,u;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=h,e.next="update"===e.t0?3:"activate"===e.t0?9:"unarchive"===e.t0?15:21;break;case 3:return e.next=5,d.Z.updatePaymentMethod({groupID:null==$?void 0:$.id});case 5:return o=(s=e.sent).data,i=s.error,e.abrupt("break",21);case 9:return e.next=11,d.Z.activatePayment({groupID:null==$?void 0:$.id});case 11:return o=(l=e.sent).data,i=l.error,e.abrupt("break",21);case 15:return e.next=17,d.Z.activatePayment({groupID:null==$?void 0:$.id});case 17:return o=(c=e.sent).data,i=c.error,e.abrupt("break",21);case 21:if(!i){e.next=26;break}return g(e0.bI,{message:(null===(u=i.data)||void 0===u||null===(u=u.fields)||void 0===u||null===(u=u[0])||void 0===u?void 0:u.error)||"There was an issue with your request, please try again",severity:"error"}),g(e0.ZV,{showPaymentDialog:!1}),g(e0.dO,{paymentDialogType:""}),e.abrupt("return");case 26:null!==(t=o)&&void 0!==t&&t.clientSecret&&Z(o.clientSecret),null!==(n=o)&&void 0!==n&&n.immediate?M("paymentIntent"):M("setupIntent"),null!==(r=o)&&void 0!==r&&r.waitToken?A(o.waitToken):g(e0.bI,{message:"There was an issue with your request, please try again.",severity:"error"});case 29:case"end":return e.stop()}},e)})),[g,$,h]);(0,l.useEffect)(function(){h&&m&&u2.includes(h)&&V()},[h,m,V]);var Y=(0,l.useCallback)(function(){if(Z(null),M(""),F(!1),z(!1),g(e0.ZV,{showPaymentDialog:!1}),g(e0.dO,{paymentDialogType:""}),w){var e=(0,G.AZ)({groupName:$.name}),t=e.href,n=e.as;y.push(t,n,{shallow:!0})}},[$,g,w,y]),X=(0,l.useCallback)((e=(0,o.Z)(a().mark(function e(t){var n,r,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),z(!0),e.prev=2,e.next=5,P.current.handleIntentConfirmation(_);case 5:e.next=14;break;case 7:if(e.prev=7,e.t0=e.catch(2),"payment_intent_unexpected_state"!==e.t0.message){e.next=12;break}return e.next=12,V();case 12:return z(!1),e.abrupt("return");case 14:if(n=({update:"Payment info updated",activate:"Subscription is now active",unarchive:"Group is unarchived"})[h],!E){e.next=27;break}return e.prev=17,e.next=20,(0,oO.Cx)({token:E,userID:null==b?void 0:b.id,timeoutMS:6e4});case 20:e.next=27;break;case 22:return e.prev=22,e.t1=e.catch(17),g(e0.bI,{message:"There was an issue with your request, please try again.",severity:"error"}),z(!1),e.abrupt("return");case 27:if(Y(),"/games/onboarding"!==y.asPath){e.next=31;break}return y.reload(),e.abrupt("return");case 31:(0,J.Lx)({message:n}),o=(r=(0,G.AZ)({groupName:$.name})).href,i=r.as,y.push(o,i,{shallow:!1});case 34:case"end":return e.stop()}},e,null,[[2,7],[17,22]])})),function(t){return e.apply(this,arguments)}),[$,g,_,Y,h,y,b,E,V]),K=(0,k.jsxs)("div",{children:[(0,k.jsx)(uK,{children:null===(r=u9[h])||void 0===r?void 0:r.title}),(0,k.jsx)(uQ,{children:null===(i=u9[h])||void 0===i?void 0:i.body}),(0,k.jsx)(sh.Z,{ref:P,intentClientSecret:I,paymentElementOnChange:F,isLoading:R}),(0,k.jsxs)(u0,{children:["Your card will be charged once now for $99 and will incur recurring monthly charges. You can 1-click cancel anytime with no penalty. By clicking “".concat(null===(s=u9[h])||void 0===s?void 0:s.button,"”, you accept our "),(0,k.jsx)(W.r,{label:"terms",href:j.href,as:j.as,newTab:!0,underline:"none",style:{color:v.O9.sd1,fontSize:"inherit"}})," & ",(0,k.jsx)(W.r,{label:"privacy policy",href:O.href,as:O.as,newTab:!0,underline:"none",style:{color:v.O9.sd1,fontSize:"inherit"}}),"."]}),(0,k.jsx)(u1,{type:"submit",onClick:X,disabled:!T,loading:R,label:null===(u=u9[h])||void 0===u?void 0:u.button})]});return!u2.includes(h)&&m?(console.error("Invalid paymentDialogType set: dialog not rendered"),null):(0,k.jsx)(rt.u_,{size:"small",open:m,onClose:R?void 0:Y,children:K})}),u5=n(20452),u6=(0,u5.$o)(),u4=(0,g.vJ)(["@keyframes bg-fade-out-comment{0%{background-color:",";}40%{background-color:",";}100%{background-color:",";}}@keyframes bg-fade-out{0%{background-color:",";}40%{background-color:",';}100%{background-color:inherit;}}.skool-editor{font-family:"Roboto","Helvetica","Arial",sans-serif;font-size:16px;line-height:24px;color:',";}.skool-editor:focus{outline:none;}.skool-editor p{margin:0;}.skool-editor ul,.skool-editor ol{margin:0;margin-block-start:0;margin-block-end:0;padding-left:0;list-style-position:inside;}",' .skool-editor ul p,.skool-editor ol p{font-family:"Roboto","Helvetica","Arial",sans-serif;font-size:16px;line-height:24px;color:',';display:inline;}.skool-editor ul li p br:first-child,.skool-editor ol li p br:first-child{font-family:"Roboto","Helvetica","Arial",sans-serif;font-size:16px;line-height:21px;}.skool-editor .user-mention{color:',";background-color:",";}.skool-editor .user-mention.ProseMirror-selectednode{color:",";background-color:#c6e3ec;}.skool-editor .course-reference{color:",";background-color:",";}.skool-editor .course-reference.ProseMirror-selectednode{color:",";background-color:#c6e3ec;}.skool-editor a.link{color:",";text-decoration:none;}.skool-editor a.link:hover{color:",";text-decoration:underline;}.skool-editor-suggestion-list{padding:16px 0;z-index:2;transition:all 0.25s cubic-bezier(0.3,1.2,0.2,1) 0s;position:relative;border-radius:10px;border:1px solid ",";background:",";overflow:hidden;display:flex;flex-direction:column;","}.skool-editor p.is-editor-empty:first-child::before{content:attr(data-placeholder);float:left;color:",";pointer-events:none;height:0;}.skool-editor2{"," color:",";overflow-x:hidden;overflow-y:hidden;padding:0;width:100%;}.skool-editor2:focus{outline:none;}.skool-editor2 p{"," margin-block-start:1em;margin-block-end:1em;}.skool-editor2 h1{","}.skool-editor2 h1:first-child{margin-top:0;}.skool-editor2 h2{","}.skool-editor2 h2:first-child{margin-top:0;}.skool-editor2 h3{","}.skool-editor2 h3:first-child{margin-top:0;}.skool-editor2 h4{","}.skool-editor2 h4:first-child{margin-top:0;}.skool-editor2 a.link{color:",";text-decoration:none;}.skool-editor2 a.link:hover{color:",";text-decoration:underline;}.skool-editor2 p.is-editor-empty:first-child::before{content:attr(data-placeholder);float:left;color:",";pointer-events:none;height:0;}.skool-editor2 img{max-width:100%;border-radius:4px;}.skool-editor2[contenteditable=true]:focus-within div.ProseMirror-selectednode img{outline:3px solid ",";padding:0;}.skool-editor2 blockquote{background-color:",";margin:16px 8px;}.skool-editor2 blockquote p{border-left:3px solid ",";padding:0.5em 16px;margin-block:0;}.skool-editor2 blockquote p:last-child{padding-top:0.5em;padding-bottom:1.0em;}.skool-editor2 blockquote p:first-child{padding-top:1.0em;padding-bottom:0.5em;}.skool-editor2 hr{margin:8px;}.skool-editor2 pre{background-color:",";display:block;padding:16px;border-radius:5px;overflow:auto;}.skool-editor2 pre code{color:inherit;background:none;display:inline;font-size:85%;padding:0;}.skool-editor2 code{color:inherit;display:inline;background-color:",';border-radius:3px;padding:0.2em 0.4em;font-family:SFMono-Regular,Menlo,Consolas,"PT Mono","Liberation Mono",Courier,monospace;font-size:85%;}.ProseMirror pre{white-space:pre !important;}.skool-editor2 ul,.skool-editor2 ol{padding-inline-start:2em;}.EmojiPickerReact:not(.epr-dark-theme){--epr-highlight-color:var(--epr-search-input-bg-color);}:root{color-scheme:',";}"],u6?"".concat(v.O9.p2,"26"):v.O9.p1,u6?"".concat(v.O9.p2,"26"):v.O9.p1,v.O9.n2,u6?"".concat(v.O9.p2,"26"):v.O9.p1,u6?"".concat(v.O9.p2,"26"):v.O9.p1,v.O9.n7,(0,U.G6)()&&".skool-editor ul { padding-inline-start: 18px; list-style-position: outside; } .skool-editor ol { padding-inline-start: 22px; list-style-position: outside; }",v.O9.n7,v.O9.sd1,u6?v.O9.n3:"#e5f3f7",v.O9.sd1,v.O9.sd1,u6?v.O9.n3:"#e5f3f7",v.O9.sd1,v.O9.sd1,v.O9.sd1,v.O9.n3,v.O9.n1,Y.Wn,v.O9.n5,Z.c.t7,v.O9.n7,Z.c.t7,Z.c.t1,Z.c.t2,Z.c.t3,Z.c.t4,v.O9.sd1,v.O9.sd1,v.O9.n5,v.O9.sd1,v.O9.n2,v.O9.n7,v.O9.n2,v.O9.n2,u6?"dark":"normal"),u8=n(54465),u7=n(80199),de=g.ZP.div.withConfig({displayName:"styled__DesktopHeader",componentId:"sc-7fpsl8-0"})(["height:100%;padding:14px 32px;display:flex;gap:16px;> div{display:flex;flex-direction:column;> span{color:",";","}}"],v.O9.n5,Z.c.t9),dt=g.ZP.div.withConfig({displayName:"styled__MobileHeader",componentId:"sc-7fpsl8-1"})(["display:flex;align-items:center;gap:8px;padding-left:4px;height:52px;border-bottom:1px solid ",";"],v.O9.n3),dn=g.ZP.div.withConfig({displayName:"styled__CoursesTabWrapper",componentId:"sc-401lps-0"})(["padding-bottom:64px;position:relative;"]),dr=g.ZP.div.withConfig({displayName:"styled__CourseTabLabel",componentId:"sc-401lps-1"})(["margin-bottom:8px;",""],Z.c.t5),di=g.ZP.div.withConfig({displayName:"styled__CourseItem",componentId:"sc-401lps-2"})(["> div:first-child{display:flex;gap:8px;}"]),da=g.ZP.div.withConfig({displayName:"styled__CourseItemWrapper",componentId:"sc-401lps-3"})(["display:flex;flex-direction:column;margin:16px 0px 24px 0px;gap:16px;"]),ds=g.ZP.div.withConfig({displayName:"styled__CourseTitle",componentId:"sc-401lps-4"})([""," ",""],Z.c.ellipsis,Z.c.t5),dl=g.ZP.div.withConfig({displayName:"styled__CourseProgress",componentId:"sc-401lps-5"})(["flex-shrink:0;color:",";",""],v.O9.s2,Z.c.t7),dc=g.ZP.div.withConfig({displayName:"styled__AccessLine",componentId:"sc-401lps-6"})(["color:",";",""],v.O9.n6,Z.c.t11),du=g.ZP.div.withConfig({displayName:"styled__CourseOption",componentId:"sc-401lps-7"})(["display:flex;flex-direction:column;> label{cursor:pointer;"," ","}> span{color:",";","}"],Z.c.t5,Z.c.ellipsis,v.O9.n6,Z.c.t9),dd=(0,g.iv)(["width:100% !important;"]),dp=(0,g.ZP)(ee.h_).withConfig({displayName:"styled__AccessDropdown",componentId:"sc-401lps-8"})(["width:390px !important;> button{width:100%;}",""],function(e){return e.theme.isMobile&&dd}),df=g.ZP.span.withConfig({displayName:"styled__ActionText",componentId:"sc-401lps-9"})(["color:",";cursor:pointer;margin-left:4px;&:hover{text-decoration:underline;}"],v.O9.sd1),dm=g.ZP.div.withConfig({displayName:"styled__Refunded",componentId:"sc-401lps-10"})(["color:",";"],v.O9.e2),dh=g.ZP.div.withConfig({displayName:"styled__DripLine",componentId:"sc-401lps-11"})(["display:flex;color:",";",""],v.O9.n5,Z.c.t11),dv=g.ZP.span.withConfig({displayName:"styled__DropdownLabel",componentId:"sc-401lps-12"})(["color:",";"],v.O9.n5),db=n(51577),dg=g.ZP.div.withConfig({displayName:"styled__PaymentDetailsModalWrapper",componentId:"sc-o8xi68-0"})(["> h2{"," margin:0px 0px 16px 0px;}"],Z.c.t1),dx=g.ZP.div.withConfig({displayName:"styled__InfoBlock",componentId:"sc-o8xi68-1"})(["display:flex;flex-direction:column;"]),dy=g.ZP.div.withConfig({displayName:"styled__InfoItem",componentId:"sc-o8xi68-2"})(["display:flex;flex-wrap:wrap;"," > div{","}"],Z.c.t7,Z.c.t5),dw=(0,g.iv)(["justify-content:start;display:inherit;"]),dC=g.ZP.div.withConfig({displayName:"styled__SpreadInfoItem",componentId:"sc-o8xi68-3"})(["display:flex;justify-content:space-between;"," > span:last-child{color:",";}",""],Z.c.t7,v.O9.n5,function(e){return e.theme.isMobile&&dw}),dj=(0,g.ZP)(W.r).withConfig({displayName:"styled__InvoiceId",componentId:"sc-o8xi68-4"})(["cursor:pointer;color:",";&:hover{text-decoration:underline;}"],v.O9.sd1),dk=g.ZP.div.withConfig({displayName:"styled__TotalPaid",componentId:"sc-o8xi68-5"})(["> span{color:",";}"],v.O9.e2);function dO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dO(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var dD=function(e){var t=e.invoice,n=e.onClose,r=e.markRefunded,i=(0,C.bI)("self","membershipSettingsUser","currentGroup"),s=i.self,c=i.dispatch,u=i.membershipSettingsUser,p=i.currentGroup,f=(0,l.useState)(!1),m=f[0],h=f[1],v=(0,l.useState)(!1),b=v[0],g=v[1],x=(0,l.useState)(null),y=x[0],w=x[1],j=t.invoiceId,O=t.invoiceNumber,P=t.chargeCreatedAt,D=t.currency,I=void 0===D?"usd":D,Z=t.amount,S=t.chargeId,_=t.userPaymentMethod,M=void 0===_?{}:_,N=t.refunded,E=t.fees,A=void 0===E?[]:E,L=t.status,T=t.refundable,F=M.brand,B=M.last4,R=M.country,z=u.firstName,G=u.lastName,U="".concat(z," ").concat(G),$="open"===L,W=(0,l.useMemo)(function(){return(null==A?void 0:A.reduce(function(e,t){return t.amount+e},0))||0},[A]),H=(0,l.useCallback)(function(e,t){var n=e.label,r=e.content;return(0,k.jsxs)(dy,{children:[(0,k.jsxs)("span",{children:["".concat(n,":"),"\xa0"]}),(0,k.jsx)("div",{children:r})]},t)},[]),q=(0,l.useCallback)(function(e,t){var n=e.label,r=e.content;return(0,k.jsxs)(dC,{children:[(0,k.jsxs)("span",{children:["".concat(n,":"),"\xa0"]}),(0,k.jsx)("span",{children:r})]},t)},[]),V=(0,l.useMemo)(function(){var e=[{label:"Invoice",content:(0,k.jsx)(dj,{href:"/".concat(p.name,"/--/inv/").concat(j),newTab:!0,children:O})},{label:"Date paid",content:eQ().unix(P).format("MMM D, YYYY")},{label:"Customer",content:U},{label:"Payment method",content:"".concat(null==F?void 0:F.toUpperCase()," - ").concat(B)}];return(0,k.jsx)(dx,{style:{marginBottom:24},children:e.map(H)})},[H,j,O,P,U,F,B,p]),Y=(0,l.useMemo)(function(){var e=(0,oi.O5)({currency:I,amount:$?0:Z,showZeroes:!0}),t=[{label:"Total paid",content:(0,k.jsxs)(dk,{children:[e,N&&(0,k.jsx)("span",{children:" (".concat(e," refunded)")})]})},{label:"Fees",content:(0,oi.O5)({currency:I,amount:W,showZeroes:!0})},{label:"Amount received after fees",content:(0,oi.O5)({currency:I,amount:$?0:Z-W,showZeroes:!0})}];return(0,k.jsx)(dx,{style:{marginBottom:24},children:t.map(H)})},[H,Z,I,N,W,$]),J=(0,l.useMemo)(function(){var e=[{label:"Fee breakdown"},{label:"Country",content:R}],t=null;return null==A||A.forEach(function(e){var n=e.type,r=e.amount,o=(0,oi.O5)({currency:I,amount:r,showZeroes:!0}),i={label:db.zD[n],content:o};n===db.$K&&(t=i)}),t&&e.push(t),(0,k.jsx)(dx,{style:{marginBottom:32},children:e.map(q)})},[q,A,I,R]),X=(0,l.useCallback)(function(){w(null)},[]),K=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=2;break}return e.abrupt("return");case 2:return g(!0),e.next=5,d.Z.refundPayment({memberId:u.member.id,chargeId:S});case 5:if(n=(t=e.sent).data,!(o=t.error)){e.next=11;break}return g(!1),e.abrupt("return",c(e0.bI,{message:(null===(i=o.data)||void 0===i||null===(i=i.fields)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.error)||"There was an issue with your request, please try again",severity:"error"}));case 11:return e.prev=11,e.next=14,(0,oO.Cx)({token:n.token,userID:null==s?void 0:s.id});case 14:h(!0),g(!1),r(),X(),c(e0.bI,{message:"Payment refunded"}),e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(11),g(!1),e.abrupt("return",c(e0.bI,{message:"Something went wrong, please try again later.",severity:"error"}));case 25:case"end":return e.stop()}},e,null,[[11,21]])})),[u,S,r,c,X,T,s]),Q=(0,l.useMemo)(function(){return{header:"Refund payment",content:(0,k.jsxs)("span",{children:["Are you sure you want to refund ",(0,k.jsx)("b",{children:(0,oi.O5)({currency:I,amount:Z,showZeroes:!0})})," to ".concat(U,"?")]}),confirmLabel:"Refund payment",confirmButtonVariant:"error",waitForComplete:!0,completed:m,onConfirm:K,onClose:X}},[Z,X,I,K,m,U]),ee=(0,l.useMemo)(function(){return{header:"Insufficient balance",content:"This refund is greater than your account balance. Try refunding this transaction when you have more money in your account, or you can refund the customer manually using another method like PayPal.",hideCancel:!0,confirmLabel:"Cancel",confirmButtonVariant:"borderless",onConfirm:X,onClose:X}},[X]);return y?(0,k.jsx)(tj.s,dP({open:!0,loading:b},y)):(0,k.jsx)(nQ.T,{open:!0,size:"small",onClose:n,onCancel:n,confirmButtonVariant:"error",confirmLabel:"Refund Payment",disabled:N||"open"===L,onConfirm:function(){return w(T?Q:ee)},children:(0,k.jsxs)(dg,{children:[(0,k.jsx)("h2",{children:"Payment details"}),V,Y,J]})})},dI=(0,l.memo)(function(e){var t=e.markRefunded,n=e.invoiceId,r=e.onClose,i=(0,C.bI)("currentGroup"),s=i.dispatch,c=i.currentGroup,u=(0,l.useState)(null),p=u[0],f=u[1],m=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.getSubscriptionInvoiceAdmin({invoice:n,groupId:c.id});case 2:if(r=(t=e.sent).data,!t.error){e.next=7;break}return e.abrupt("return",s(e0.bI,{message:"Something went wrong, please try again later.",severity:"error"}));case 7:f(r);case 8:case"end":return e.stop()}},e)})),[c,n,s]);return((0,l.useEffect)(function(){m()},[n,m]),p)?(0,k.jsx)(dD,{invoice:p,onClose:r,markRefunded:function(){t(p.chargeId),f(function(e){return dP(dP({},e),{},{refunded:!0})})}}):(0,k.jsx)(rt.u_,{open:!0,size:"small",children:(0,k.jsx)(rF.D,{fitWidth:!0})})}),dZ=n(54408);function dS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dS(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var dM=(0,l.memo)(function(){var e,t,n,r=(0,C.bI)("membershipSettingsUser","currentGroup"),i=r.dispatch,s=r.membershipSettingsUser,c=r.currentGroup,u=(0,l.useState)([]),p=u[0],f=u[1],m=(0,l.useState)(!0),h=m[0],v=m[1],b=(0,l.useState)(!0),g=b[0],x=b[1],y=(0,l.useState)(null),w=y[0],j=y[1],O=(0,l.useState)(!0),P=O[0],D=O[1],I=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.getMemberCoursePermissions({groupID:c.id,memberID:s.member.id,progression:!0});case 2:if(n=(t=e.sent).data,!(r=t.error)){e.next=9;break}return i(e0.bI,{message:(null==r||null===(o=r.data)||void 0===o||null===(o=o.fields)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.error)||"There was an issue fetching this user's courses, please try again.",severity:"error"}),v(!1),e.abrupt("return");case 9:f((null==n?void 0:n.courses)||[]),v(!1);case 11:case"end":return e.stop()}},e)})),[c,s,i]),Z=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r,o,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.getMemberPaymentHistory({memberId:s.member.id,productType:"course"});case 2:if(n=(t=e.sent).data,!(r=t.error)){e.next=9;break}return i(e0.bI,{message:(null==r||null===(o=r.data)||void 0===o||null===(o=o.fields)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.error)||"There was an issue fetching this user's invoices, please try again.",severity:"error"}),D(!1),e.abrupt("return");case 9:n&&(x((null!=(l=n.invoices)?l:[]).reduce(function(e,t){var n=t.referenceProductId;return e[n]?(e[n].push(t),e[n].sort(function(e,t){return t.chargeCreatedAt-e.chargeCreatedAt})):e[n]=[t],e},{})),D(!1));case 10:case"end":return e.stop()}},e)})),[s,i]),S=(0,l.useMemo)(function(){return p.filter(function(e){return e.metadata.userHasAccess})},[p]),_=(0,l.useMemo)(function(){return p.filter(function(e){var t=e.metadata,n=e.id,r=t.userHasAccess,o=t.privacy===dZ.pf,i=g[n],a=o&&(null==i?void 0:i.length)>0?i[0]:null;return!r&&o&&(null==a?void 0:a.refunded)})},[p,g]),M=(0,l.useCallback)((e=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.updateMemberCoursePermission({groupID:c.id,memberID:s.member.id,grants:[t]});case 2:return e.sent.error&&i(e0.bI,{message:"Failed to grant access. Try it again later.",severity:"error"}),e.next=7,I();case 7:i(e0.bI,{message:"Access granted"});case 8:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),[s,i,I,c]),N=(0,l.useCallback)((t=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.updateMemberCoursePermission({groupID:c.id,memberID:s.member.id,revokes:[t]});case 2:return e.sent.error&&i(e0.bI,{message:"Failed to remove access. Try it again later.",severity:"error"}),e.next=7,I();case 7:i(e0.bI,{message:"Access removed"});case 8:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[s,i,I,c]),E=(0,l.useCallback)(function(e){j(e)},[]),A=(0,l.useCallback)(function(){j(null)},[]),L=(0,l.useCallback)((n=(0,o.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.unlockCourse({courseId:t,memberId:s.member.id});case 2:return e.next=4,I();case 4:i(e0.bI,{message:"Content released"});case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[i,I,s]),T=(0,l.useCallback)(function(e){var t,n;return!(null!=e&&null!==(t=e.metadata)&&void 0!==t&&t.hasDripModules)||null!=e&&e.metadata.unlocked?null:(0,k.jsxs)(dh,{children:[(0,k.jsx)("div",{children:"Currently in drip"}),(0,k.jsx)(tj.s,{confirmLabel:"Release",header:"Release all content?",onConfirm:function(){return L(e.id)},content:"Are you sure you want to release all ".concat(null==e||null===(n=e.metadata)||void 0===n?void 0:n.title," content for ").concat(null==s?void 0:s.firstName," ").concat(null==s?void 0:s.lastName,"? You can't undo this."),children:(0,k.jsx)(df,{children:"(release all content)"})})]})},[L,s]),F=(0,l.useCallback)(function(e){var t=e.metadata,n=e.id,r=t.title,o=t.userCompleted,i=t.numModules,a=void 0===i?0:i,s=t.privacy,l=t.minAccessLevel,c="All members have access",u=s===dZ.pf,d=g[n],p=u&&(null==d?void 0:d.length)>0?d[0]:null,f=null!=p&&p.currency&&null!=p&&p.amount?(0,oi.O5)({currency:null==p?void 0:p.currency,amount:null==p?void 0:p.amount,showZeroes:!1}):"";switch(s){case 1:c="Specific members have access";break;case 2:c="Level ".concat(l," members have access");break;case 3:c="Paid ".concat(f," for access")}return(0,k.jsxs)(di,{children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(ds,{children:r}),(0,k.jsx)(dl,{children:"(".concat(0===a?100:Math.floor((void 0===o?0:o)/a*100),"% progress)")})]}),(0,k.jsxs)(dc,{children:[c,1===s&&(0,k.jsx)(df,{onClick:function(){return N(n)},children:"(remove access)"}),u&&p&&(0,k.jsx)(df,{onClick:function(){return E(p.invoiceId)},children:"(view transaction)"}),u&&(null==p?void 0:p.refunded)&&(0,k.jsx)(dm,{children:"Refunded (access removed)"})]}),T(e)]},n)},[N,T,E,g]),B=(0,l.useMemo)(function(){return p.map(function(e){var t=e.currency,n=e.amount,r=e.metadata,o=r.title,i=r.privacy,a=r.minAccessLevel,s="All members have access",l=t&&n?(0,oi.O5)({currency:t,amount:n,showZeroes:!1}):"";switch(i){case 1:s="Specific members have access";break;case 2:s="Level ".concat(a," members have access");break;case 3:s="".concat(l," for access")}return d_(d_({},e),{},{label:(0,k.jsxs)(du,{children:[(0,k.jsx)("label",{children:o}),(0,k.jsx)("span",{children:s})]}),disabled:!!e.metadata.userHasAccess||1!==e.metadata.privacy,onClick:function(){return M(e.id)}})})},[p,M]),R=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:j(null);case 3:case"end":return e.stop()}},e)})),[Z]);return((0,l.useEffect)(function(){I(),Z()},[I,Z]),h||P)?(0,k.jsx)(rF.D,{fitWidth:!0}):(0,k.jsxs)(dn,{children:[(0,k.jsx)(dr,{children:"Has access to:"}),(0,k.jsxs)(da,{children:[S.map(F),_.map(F)]}),(0,k.jsx)(dr,{children:"Give access to:"}),(0,k.jsx)(dp,{fitButton:!0,maxDropdownHeight:400,variant:"input",label:(0,k.jsx)(dv,{children:"Select course"}),options:B}),w&&(0,k.jsx)(dI,{invoiceId:w,onClose:A,markRefunded:R})]})}),dN=g.ZP.div.withConfig({displayName:"styled__MembershipTabWrapper",componentId:"sc-gmyn28-0"})([""]),dE=g.ZP.div.withConfig({displayName:"styled__MembershipInfo",componentId:"sc-gmyn28-1"})(["display:flex;flex-wrap:wrap;> label{margin-right:8px;","}> span{","}> div{margin-left:4px;height:24px;}"],Z.c.t5,Z.c.t7),dA=g.ZP.div.withConfig({displayName:"styled__MembershipInfoBlock",componentId:"sc-gmyn28-2"})(["flex-direction:column;display:flex;gap:16px;"]),dL=g.ZP.div.withConfig({displayName:"styled__MemberActionWithConfirm",componentId:"sc-gmyn28-3"})(["color:",";cursor:pointer;width:fit-content;"," &:hover{text-decoration:underline;}"],v.O9.e2,Z.c.t7),dT=g.ZP.div.withConfig({displayName:"styled__ChangeRole",componentId:"sc-gmyn28-4"})(["display:flex;align-items:center;color:",";"," &:hover{text-decoration:underline;}"],v.O9.sd1,Z.c.t7),dF=g.ZP.div.withConfig({displayName:"styled__ConfirmModalWrapper",componentId:"sc-gmyn28-5"})(["strong{","}"],Z.c.t5),dB=["label","content"];function dR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dR(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var dG={member:"Member","group-admin":"Admin","group-moderator":"Moderator"},dU=(0,l.memo)(function(e){var t,n,r,i,s=e.memberInGroup,u=e.memberIsAdminModerator,p=(0,C.bI)("self","membershipSettingsUser","currentGroup"),f=p.self,h=p.dispatch,v=p.membershipSettingsUser,g=p.currentGroup,x=(0,l.useState)(!1),y=x[0],w=x[1],j=(0,l.useState)(!1),O=j[0],P=j[1],D=(0,c.useRouter)().reload,I=(null==v||null===(r=v.member)||void 0===r||null===(r=r.metadata)||void 0===r?void 0:r.billingMgr)===1,Z=!!(null!=v&&null!==(i=v.member)&&void 0!==i&&null!==(i=i.metadata)&&void 0!==i&&i.msbs),S=v.member.role,_=(0,l.useMemo)(function(){var e=(null==v||null===(t=v.member)||void 0===t?void 0:t.inviteEmail)||(null==v||null===(n=v.member)||void 0===n||null===(n=n.metadata)||void 0===n?void 0:n.mbme);if(!e){var t,n,r,o=(null==v||null===(r=v.member)||void 0===r||null===(r=r.metadata)||void 0===r?void 0:r.survey)&&JSON.parse(v.member.metadata.survey);if(null!=o&&o.survey){var i=o.survey.find(function(e){return"email"===e.type});e=i?i.answer:""}}if(e)return(0,k.jsxs)(dE,{children:[(0,k.jsx)("label",{children:"Email:"}),(0,k.jsx)("span",{children:e})]})},[v]),M=(0,l.useCallback)((t=(0,o.Z)(a().mark(function e(t,n){var r,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.updateMemberRole({memberID:v.member.id,newRole:t});case 2:if(!(r=e.sent.error)){e.next=8;break}return i=422===r.status&&null!=r&&null!==(o=r.data)&&void 0!==o&&null!==(o=o.fields)&&void 0!==o&&o.length?r.data.fields[0].error:"Failed to update member role",h(e0.bI,{message:i,severity:"error"}),e.abrupt("return");case 8:n&&(0,J.Lx)({message:n,expireInMSec:3e3}),D();case 10:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),[v,h,D]),N=(0,l.useCallback)((n=(0,o.Z)(a().mark(function e(t){var n,r,o,i,s,l,c;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.newRole,r=t.message,P(!0),e.next=4,d.Z.updateMemberRole({memberID:v.member.id,newRole:n});case 4:if(i=(o=e.sent).data,!(s=o.error)){e.next=12;break}return c=422===s.status&&null!=s&&null!==(l=s.data)&&void 0!==l&&null!==(l=l.fields)&&void 0!==l&&l.length?s.data.fields[0].error:"Failed to ".concat(n===q.th?"ban":"remove"," member"),h(e0.bI,{message:c,severity:"error"}),P(!1),e.abrupt("return");case 12:return r&&(0,J.Lx)({message:r,expireInMSec:3e3}),e.prev=13,e.next=16,(0,oO.Cx)({token:i.token,userID:null==f?void 0:f.id,timeoutMS:6e4});case 16:w(!0),P(!1),D(),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(13),h(e0.bI,{message:"Something went wrong, please try again later",severity:"error"}),P(!1);case 25:case"end":return e.stop()}},e,null,[[13,21]])})),function(e){return n.apply(this,arguments)}),[h,v,D,f]),E=(0,l.useCallback)(function(){Z?N({message:"Member removed",newRole:q.Wo}):M(q.Wo,"Member removed")},[M,N,Z]),A=(0,l.useCallback)(function(){Z?N({message:"Member banned",newRole:q.th}):M(q.th,"Member banned")},[M,N,Z]),L=(0,l.useCallback)(function(){M(q.Wo,"Member unbanned")},[M]),T=(0,l.useCallback)(function(e){var t=e.label,n=e.content,r=(0,b.Z)(e,dB);return(0,k.jsx)(tj.s,dz(dz({},r),{},{content:(0,k.jsx)(dF,{children:n}),loading:O,waitForComplete:Z,completed:y,confirmButtonVariant:"error",children:(0,k.jsx)(dL,{children:t})}))},[y,O,Z]),F=(0,l.useMemo)(function(){if(!s||!(0,m.CP)({user:f,member:f.member,group:g}))return null;var e=[{label:"Member",active:S===q.bD,onClick:function(){return M(q.bD,"Role updated")}},{label:"Admin",active:S===q.oN,onClick:function(){return M(q.oN,"Role updated")}},{label:"Moderator",active:S===q.xC,onClick:function(){return M(q.xC,"Role updated")},disabled:u&&S!==q.xC}];return(0,k.jsx)(ee.h_,{options:e,placement:"bottom-end",children:(0,k.jsx)(dT,{children:"(change)"})})},[M,s,u,g,S,f]),B=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.addBillingManager({groupId:g.id,userId:v.id});case 2:(0,J.Lx)({message:"Billing access granted",expireInMSec:3e3}),D();case 4:case"end":return e.stop()}},e)})),[g,v,D]),R=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.removeBillingManager({groupId:g.id,userId:v.id});case 2:(0,J.Lx)({message:"Billing access removed",expireInMSec:3e3}),D();case 4:case"end":return e.stop()}},e)})),[g,v,D]),z=(0,l.useMemo)(function(){if(!((0,m.Td)({user:f,member:f.member,group:g})&&S===q.oN))return null;var e=[{label:"Yes",active:I,onClick:B},{label:"No",active:!I,onClick:R}];return(0,k.jsxs)(dE,{children:[(0,k.jsx)("label",{children:"Billing access:"}),(0,k.jsx)("span",{children:I?"Yes":"No"}),(0,k.jsx)(ee.h_,{options:e,placement:"bottom-end",children:(0,k.jsx)(dT,{children:"(change)"})})]})},[f,S,g,I,B,R]),U=(0,l.useMemo)(function(){if(u)return null;var e,t=null!=g&&null!==(e=g.metadata)&&void 0!==e&&e.displayName?(0,k.jsxs)(k.Fragment,{children:[" from ",(0,k.jsx)("strong",{children:g.metadata.displayName})]}):"";if(S===q.th)return(0,k.jsx)(dA,{children:T({confirmLabel:"Unban",label:"Unban from group",header:"Unban from group?",onConfirm:L,content:(0,k.jsxs)(k.Fragment,{children:["Are you sure you want to unban ",(0,k.jsxs)("strong",{children:[v.firstName," ",v.lastName]}),t,"?"]})})});var n=(0,k.jsxs)(k.Fragment,{children:["Are you sure you want to remove ",(0,k.jsxs)("strong",{children:[v.firstName," ",v.lastName]}),t,"? You can't undo this."]}),r=(0,k.jsxs)(k.Fragment,{children:["You're banning ",(0,k.jsxs)("strong",{children:[v.firstName," ",v.lastName]}),t,"."]});Z&&(r=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("strong",{children:"".concat(v.firstName," ").concat(v.lastName,"'s")})," subscription will be cancelled and their billing cycle will end immediately. If they want to join again, they can start a new subscription."]}));var o=(0,G.sB)({userName:v.name,group:g}),i=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{children:r}),(0,k.jsx)("p",{children:"Delete recent activity?"}),(0,k.jsxs)("p",{children:["Delete ",(0,k.jsx)("strong",{children:"".concat(v.firstName,"'s")})," recent posts and comments ",(0,k.jsx)(W.r,{href:o.as,label:"from their profile here",newTab:!0})," before banning them. It's easier this way."]})]});return(0,k.jsxs)(dA,{children:[s&&T({confirmLabel:"Remove",label:"Remove from group",header:"Remove from group?",onConfirm:E,content:n}),s&&T({confirmLabel:"Ban",label:"Ban from group",testid:"ban-from-group",header:"Ban from group?",onConfirm:A,content:i})]})},[T,E,L,A,s,u,g,Z,S,v]);return(0,k.jsxs)(dN,{children:[(0,k.jsxs)(dA,{children:[_,(0,k.jsxs)(dE,{children:[(0,k.jsx)("label",{children:"Role:"}),(0,k.jsx)("span",{children:dG[S]||"Nonmember"}),F]}),z]}),(0,k.jsx)(eG.x,{marginTop:32,children:U})]})}),d$=g.ZP.div.withConfig({displayName:"styled__SubscriptionTabWrapper",componentId:"sc-1dxmuqf-0"})(["> h2{margin:0px 0px 24px 0px;","}"],Z.c.t5),dW=g.ZP.div.withConfig({displayName:"styled__SubscriptionInfoItems",componentId:"sc-1dxmuqf-1"})(["display:flex;flex-direction:column;gap:16px;margin-bottom:32px;"]),dH=g.ZP.div.withConfig({displayName:"styled__SubscriptionInfoItem",componentId:"sc-1dxmuqf-2"})(["display:flex;gap:16px;align-items:center;color:",";> span{","}"],function(e){return e.$color},Z.c.t7),dq=g.ZP.div.withConfig({displayName:"styled__MemberActionText",componentId:"sc-1dxmuqf-3"})(["cursor:pointer;color:",";"," &:hover{text-decoration:underline;}"],function(e){return e.$color},Z.c.t7),dV=(0,g.ZP)(eF.J).withConfig({displayName:"styled__StyledIcon",componentId:"sc-1dxmuqf-4"})(["height:","px;width:24px;"],function(e){return e.$height}),dY=g.ZP.div.withConfig({displayName:"styled__PaymentHistoryWrapper",componentId:"sc-13p2s7y-0"})(["> h2{margin:0px;","}"],Z.c.t5),dJ=g.ZP.div.withConfig({displayName:"styled__BackButton",componentId:"sc-13p2s7y-1"})(["margin-bottom:24px;color:",";cursor:pointer;"," &:hover{text-decoration:underline;}"],v.O9.sd1,Z.c.t11),dX=(0,g.iv)(["flex-direction:column;align-items:flex-start;"]),dK=g.ZP.div.withConfig({displayName:"styled__PaymentItem",componentId:"sc-13p2s7y-2"})(["display:flex;align-items:center;"," > div{display:flex;align-items:center;}",""],Z.c.t7,function(e){return e.theme.isMobile&&dX}),dQ=g.ZP.div.withConfig({displayName:"styled__PaymentItems",componentId:"sc-13p2s7y-3"})(["display:flex;flex-direction:column;gap:16px;"]),d0=g.ZP.div.withConfig({displayName:"styled__PaymentItemDate",componentId:"sc-13p2s7y-4"})(["color:",";cursor:pointer;&:hover{text-decoration:underline;}"],v.O9.sd1),d1=g.ZP.span.withConfig({displayName:"styled__PaymentItemPrice",componentId:"sc-13p2s7y-5"})(["",""],Z.c.t5),d2=g.ZP.div.withConfig({displayName:"styled__NoPaymentHistory",componentId:"sc-13p2s7y-6"})(["",""],Z.c.t7),d9=(0,l.memo)(function(e){var t=e.onClose,n=(0,C.bI)("membershipSettingsUser"),r=n.dispatch,i=n.membershipSettingsUser,s=(0,l.useState)([]),c=s[0],u=s[1],p=(0,l.useState)(!1),f=p[0],m=p[1],h=(0,l.useState)(null),b=h[0],g=h[1],x=(0,l.useState)(null),y=x[0],w=x[1],j=(0,l.useState)(!0),O=j[0],P=j[1],D=(0,l.useRef)(!1),I=(0,l.useCallback)(function(e){u(function(t){var n=t.findIndex(function(t){return t.chargeId===e});return t[n].refunded=!0,t})},[]),Z=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,o,s,l,c,p;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.getMemberPaymentHistory({memberId:i.member.id,offset:b||void 0,limit:10,productType:"membership"});case 2:if(n=(t=e.sent).data,!(o=t.error)){e.next=10;break}if(400!==o.status){e.next=9;break}return P(!1),e.abrupt("return");case 9:r(e0.bI,{message:"Something went wrong, please try again",severity:"error"});case 10:l=void 0===(s=n.invoices)?[]:s,c=n.hasMore,p=n.nextPage,null!=l&&l.length&&(u(function(e){return[].concat((0,rj.Z)(e),(0,rj.Z)(l))}),m(c),g(p)),P(!1);case 13:case"end":return e.stop()}},e)})),[r,b,i]);(0,l.useEffect)(function(){D.current||(D.current=!0,Z())},[c,Z]);var _=(0,l.useCallback)(function(e){var t=e.currency,n=e.amount,r=e.invoiceId,o=e.userPaymentMethod,i=e.refunded,a=e.status,s=o.brand,l=o.last4,c="(successful)",u=v.O9.s2;return i&&(c="(refunded)",u=v.O9.e2),"open"===a&&(c="(declined)",u=v.O9.e2),(0,k.jsxs)(dK,{children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(d0,{onClick:function(){return w(r)},children:eQ().unix(e.chargeCreatedAt).format("MMMM Do, YYYY")}),(0,k.jsxs)("span",{children:["\xa0","—","\xa0"]}),(0,k.jsx)(d1,{children:(0,oi.O5)({currency:t,amount:n})}),(0,k.jsxs)("span",{style:{color:u},children:["\xa0",c]})]}),(0,k.jsxs)("span",{children:["\xa0","— ".concat(s.toUpperCase()," •••• ").concat(l)]})]},r)},[]),M=(0,l.useCallback)(function(){w(null)},[]),N=(0,l.useMemo)(function(){if(y)return(0,k.jsx)(dI,{invoiceId:y,markRefunded:I,onClose:M})},[y,I,M]),E=(0,l.useMemo)(function(){if(f)return(0,k.jsx)(S.z,{label:"Load more",variant:"secondary",loading:O,onClick:Z})},[f,O,Z]),A=(0,l.useMemo)(function(){if(!O&&!c.length)return(0,k.jsx)(d2,{children:"User has no payment history."})},[O,c]);return(0,k.jsxs)(dY,{children:[(0,k.jsx)("h2",{children:"Payment history"}),(0,k.jsx)(dJ,{onClick:t,children:"< Back"}),(0,k.jsxs)(dQ,{children:[c.map(_),A,O&&(0,k.jsx)(rF.D,{fitWidth:!0}),E]}),N]})});function d3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d3(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d6=(0,l.memo)(function(e){var t=e.reloadOnClose,n=(0,C.bI)("membershipSettingsUser","currentGroup"),r=n.dispatch,i=n.membershipSettingsUser,s=n.currentGroup,c=(0,en.c8)(),u=(0,Q.Z)(c,3),p=u[0],f=u[1],h=u[2],b=(0,l.useMemo)(function(){return(0,m.cD)({member:null==i?void 0:i.member,group:s})},[i,s]),g=(0,l.useMemo)(function(){var e,t=i.member,n=t.billingCanceled,r=t.metadata,o=t.approvedAt,a=r.mmbp,s=r.mbscpe,l=r.mbsltv,c=n2()("day",eQ().unix(s).diff(eQ()(),"days"),!0),u="Renews in ".concat(c),d="Renew";n&&(u="Cancelled (churns in ".concat(c,")"),d="Warning",e=v.O9.e2),a||(u="Lifetime access");var p=b?[{key:"price",icon:"Tag",text:a?"".concat((0,oi.O5)(JSON.parse(a))," /month"):"Free"},{key:"status",icon:d,text:u,color:e}]:[];return[{key:"join",icon:"NewCalendar",text:o?"Joined ".concat(eQ()(o).format("MMM D, YYYY")):""}].concat(p,[{key:"ltv",icon:"LTV",height:22,text:"".concat((0,oi.O5)({amount:l||0,currency:"USD"})," lifetime value")}])},[i,b]),x=(0,l.useCallback)(function(e){var t=e.key,n=e.icon,r=e.text,o=e.color,i=e.height;return(0,k.jsxs)(dH,{$color:o,children:[(0,k.jsx)(dV,{name:n,color:o||v.O9.n5,$height:void 0===i?16:i}),(0,k.jsx)("span",{children:r})]},t)},[]),y=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var n,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.cancelMemberSubscription({groupId:s.id,memberId:i.member.id});case 2:if(!(n=e.sent.error)){e.next=6;break}return e.abrupt("return",r(e0.bI,{message:(null===(o=n.data)||void 0===o||null===(o=o.fields)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.error)||"There was an issue with your request, please try again",severity:"error"}));case 6:return d5({},i).member.billingCanceled=!0,r(e0.wj,d5({},i)),t(),e.abrupt("return",r(e0.bI,{message:"Subscription cancelled"}));case 11:case"end":return e.stop()}},e)})),[r,i,s,t]),w=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var n,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.reactivateMemberSubscription({groupId:s.id,memberId:i.member.id});case 2:if(!(n=e.sent.error)){e.next=6;break}return e.abrupt("return",r(e0.bI,{message:(null===(o=n.data)||void 0===o||null===(o=o.fields)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.error)||"There was an issue with your request, please try again",severity:"error"}));case 6:return d5({},i).member.billingCanceled=null,r(e0.wj,d5({},i)),t(),e.abrupt("return",r(e0.bI,{message:"Subscription reactivated"}));case 11:case"end":return e.stop()}},e)})),[r,i,s,t]),j=(0,l.useMemo)(function(){var e=i.member,t=e.billingCanceled;return e.billingProductId?t?(0,k.jsx)(dq,{onClick:w,$color:v.O9.n5,children:"Reactivate subscription"}):(0,k.jsx)(tj.s,{onConfirm:y,confirmLabel:"Yes",header:"Cancel subscription?",content:"Are you sure you want to cancel this subscription? The member will be removed from the group at the end of their current billing cycle.",confirmButtonVariant:"error",children:(0,k.jsx)(dq,{$color:v.O9.e2,children:"Cancel subscription"})}):null},[i,y,w]);return p?(0,k.jsx)(d9,{onClose:h}):(0,k.jsxs)(d$,{children:[(0,k.jsx)("h2",{children:"Billing"}),(0,k.jsx)(dW,{children:g.map(x)}),(0,k.jsx)(dq,{onClick:f,$color:v.O9.sd1,children:"Payment history"}),(0,k.jsx)(eG.x,{marginTop:16,children:j})]})}),d4=g.ZP.div.withConfig({displayName:"styled__QuestionsTabWrapper",componentId:"sc-uc4hot-0"})([""]),d8=g.ZP.div.withConfig({displayName:"styled__QuestionsTabHeader",componentId:"sc-uc4hot-1"})(["margin-bottom:16px;",""],Z.c.t5),d7=g.ZP.div.withConfig({displayName:"styled__QuestionsItemsWrapper",componentId:"sc-uc4hot-2"})(["display:flex;flex-direction:column;gap:16px;"]),pe=g.ZP.div.withConfig({displayName:"styled__QuestionItem",componentId:"sc-uc4hot-3"})(["display:flex;flex-direction:column;> label{","}> span{color:",";","}"],Z.c.t5,v.O9.n5,Z.c.t7),pt={courses:dM,membership:dU,subscription:d6,questions:(0,l.memo)(function(){var e=(0,C.bI)("membershipSettingsUser").membershipSettingsUser,t=(0,l.useMemo)(function(){var t,n=(null==e||null===(t=e.member)||void 0===t||null===(t=t.metadata)||void 0===t?void 0:t.survey)&&JSON.parse(e.member.metadata.survey);return(null==n?void 0:n.survey)||[{answer:"Member has not answered questions"}]},[e]),n=(0,l.useCallback)(function(e,t){var n=e.question,r=e.answer;return(0,k.jsxs)(pe,{children:[(0,k.jsx)("label",{children:n}),(0,k.jsx)("span",{children:r})]},t)},[]);return(0,k.jsxs)(d4,{children:[(0,k.jsx)(d8,{children:"Membership questions:"}),(0,k.jsx)(d7,{children:t.map(n)})]})})},pn=function(){var e=(0,C.bI)("self","membershipSettingsUser","currentGroup","isMobile"),t=e.self,n=e.dispatch,r=e.isMobile,o=e.currentGroup,i=e.membershipSettingsUser,a=(0,l.useState)("membership"),s=a[0],u=a[1],d=(0,l.useRef)(!1),p=(0,c.useRouter)().reload,f=(0,l.useMemo)(function(){return(0,m.cD)({member:null==i?void 0:i.member,group:o})},[i,o]),h=(0,l.useMemo)(function(){return(0,m.q2)({group:o,user:i,member:null==i?void 0:i.member})},[o,i]),v=(0,l.useMemo)(function(){return(0,m.CP)({group:o,user:t,member:null==t?void 0:t.member})},[t,o]),b=(0,l.useCallback)(function(){n(e0.wj,null),d.current&&p()},[n,p]),g=(0,l.useCallback)(function(){d.current=!0},[]),x=(0,l.useMemo)(function(){var e,t,n=null!=o&&null!==(e=o.metadata)&&void 0!==e&&e.surveyEnabled&&f?[{key:"questions",label:"Questions",dataTestId:"questions-tab"}]:[];return[{key:"membership",label:"Membership",dataTestId:"membership-tab"}].concat(v&&f&&!h&&null!==(t=o.metadata)&&void 0!==t&&t.numCourses?[{key:"courses",label:"Courses",dataTestId:"courses-tab"}]:[],v&&o.metadata.totalMBp?[{key:"subscription",label:"Subscription",dataTestId:"subscription-tab"}]:[],n)},[o,h,f,v]),y=(0,l.useMemo)(function(){var e=pt[s];return(0,k.jsx)(e,{memberInGroup:f,reloadOnClose:g,memberIsAdminModerator:h})},[s,f,h,g]),w=(0,l.useMemo)(function(){return r?(0,k.jsxs)(dt,{children:[(0,k.jsx)(S.z,{iconSize:15,icon:"Close",onClick:b,variant:"icon-borderless",style:{flexShrink:0}}),(0,k.jsx)(ex.Z,{user:i}),(0,k.jsx)(u7.v,{user:i,typography:"t8"})]}):(0,k.jsxs)(de,{children:[(0,k.jsx)(ex.Z,{user:i,size:48}),(0,k.jsxs)("div",{children:[(0,k.jsx)(u7.v,{user:i,typography:"t5"}),(0,k.jsx)("span",{children:"Membership settings"})]})]})},[b,r,i]);return(0,k.jsx)(rT,{open:!0,tabs:x,header:w,content:y,activeTab:s,onClose:b,onTabChange:u})},pr=(0,l.memo)(function(){return(0,C.bI)("membershipSettingsUser").membershipSettingsUser?(0,k.jsx)(pn,{}):null}),po=g.ZP.div.withConfig({displayName:"styled__QuestionFormWrapper",componentId:"sc-14t4fqh-0"})(["display:flex;flex-direction:column;"]),pi=(0,g.iv)(["padding:32px 24px;"]),pa=g.ZP.div.withConfig({displayName:"styled__QuestionFormContent",componentId:"sc-14t4fqh-1"})(["display:flex;flex-direction:column;gap:24px;padding:32px;> button{margin-top:8px;}",""],function(e){return e.theme.isMobile&&pi}),ps=g.ZP.div.withConfig({displayName:"styled__QuestionItem",componentId:"sc-14t4fqh-2"})(["display:flex;flex-direction:column;gap:8px;> label{","}"],Z.c.t5),pl=(0,g.iv)(["padding:64px 0px 32px 0px;"]),pc=g.ZP.div.withConfig({displayName:"styled__QuestionFormHeader",componentId:"sc-14t4fqh-3"})(["display:flex;flex-direction:column;align-items:center;width:100%;padding:32px 0px;background:",";border-bottom:1px solid ",";> div:first-child{margin-bottom:8px;}> p{text-align:center;margin:8px 0px 0px 0px;","}",""],v.O9.n2,v.O9.n3,Z.c.t7,function(e){return e.theme.isMobile&&pl}),pu=["group","subheader","value","onChange","questions","errors","onSubmit","loading"];function pd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pd(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pd(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var pf=(0,l.memo)(function(e){var t=e.group,n=e.subheader,r=e.value,o=void 0===r?[]:r,i=e.onChange,a=e.questions,s=e.errors,c=e.onSubmit,u=e.loading,d=(0,b.Z)(e,pu),p=(0,l.useState)({}),f=p[0],m=p[1],h=(0,l.useMemo)(function(){var e=o.includes(void 0),t=o.includes("");return e||t},[o]);(0,l.useEffect)(function(){m(s||{})},[s]);var v=(0,l.useCallback)(function(e){var t=e.idx,n=e.newValue;i((0,U.DM)({arr:o,idx:t,value:n}))},[o,i]),g=(0,l.useCallback)(function(e,t){var n=e.question,r=e.type,i=e.options,a=e.maxCharacters,s=o[t]||"";return(0,k.jsxs)(ps,{children:[(0,k.jsx)("label",{children:n}),function(){if("options"===r){var e=i.map(function(e){return{key:e,label:e}});return(0,k.jsx)(ld.M,{value:s,options:e,onChange:function(e){return v({idx:t,newValue:e})},gap:16,style:{marginTop:8}})}return(0,k.jsx)(ir.I,{onChange:function(e){return v({idx:t,newValue:e.target.value})},value:s,placeholder:"email"===r?"Email address":"Your answer",maxCharacters:a,error:f[t],staticLabel:!0})}()]},t)},[o,f,v]),x=(0,l.useCallback)(function(){var e={};a.forEach(function(t,n){var r,i=t.type,a=t.maxCharacters;"email"!==i||(0,U.vV)((o[n]||"").trim())||(e[n]="Invalid email"),a&&(null===(r=o[n])||void 0===r?void 0:r.length)>a&&(e[n]="Too many characters")}),m(e),Object.keys(e).length||c()},[c,a,o]);return(0,k.jsxs)(po,pp(pp({},d),{},{children:[(0,k.jsxs)(pc,{children:[(0,k.jsx)(tz.F,{group:t,disableLink:!0,size:56}),(0,k.jsx)(uR.D,{disableLink:!0,group:t,desktopTypography:"t1",mobileTypography:"t1"}),!!n&&(0,k.jsx)("p",{children:n})]}),(0,k.jsxs)(pa,{children:[a.map(g),(0,k.jsx)(S.z,{label:"Join group",style:{width:"100%"},disabled:h||u,onClick:x})]})]}))}),pm=n(11276);function ph(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var pv=(0,l.memo)(function(){var e,t,n=(0,C.bI)("showSurvey","currentGroup","self","isMobile"),i=n.currentGroup,s=n.showSurvey,u=n.self,p=n.isMobile,f=n.dispatch,m=null==i||null===(e=i.metadata)||void 0===e?void 0:e.surveyEnabled,h=(0,c.useRouter)(),v=(0,l.useCallback)(function(e){f(e0.nx,e)},[f]),b=(0,l.useMemo)(function(){var e,t,n=null!=i&&null!==(e=i.metadata)&&void 0!==e&&e.survey?JSON.parse(null==i||null===(t=i.metadata)||void 0===t?void 0:t.survey).survey:[];return(n.filter(function(e){return"text"===e.type})||[]).forEach(function(e){return e.maxCharacters=200}),n},[i]),g=(0,l.useState)(!!(null!=u&&null!==(t=u.member)&&void 0!==t&&null!==(t=t.metadata)&&void 0!==t&&t.survey)),x=g[0],y=g[1],w=(0,l.useState)(Array(null==b?void 0:b.length)),j=w[0],O=w[1],P=(0,l.useState)(!1),D=P[0],I=P[1];(0,l.useEffect)(function(){(0,G.zu)(h.query)&&(v(!0),(0,V.hj)(h,"mq"))},[h,v]);var Z=(0,l.useMemo)(function(){var e;return m&&(null==b?void 0:b.length)&&!x&&(null==u||null===(e=u.member)||void 0===e?void 0:e.role)==="pending"},[u,b,x,m]);(0,l.useEffect)(function(){f(e0.SP,Z)},[f,Z]),(0,l.useEffect)(function(){Z&&v(!0)},[Z,v]);var S=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,o,s,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=(0,rj.Z)(b)).forEach(function(e,t){e.answer=j[t]}),e.prev=2,n=(0,pm.K)(),I(!0),e.next=7,d.Z.submitSurvey(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ph(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ph(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({groupID:i.id,answers:t},n));case 7:if(s=(o=e.sent).data,l=o.error,I(!1),!l){e.next=13;break}throw l;case 13:s.eventId&&(0,pm.i)({eventName:"CompleteRegistration",eventID:s.eventId}),v(!1),y(!0),f(e0.Nb,!0),(0,V.gx)(h,(0,G.AZ)({groupName:i.name,pending:!0})),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),f(e0.bI,{severity:"error",message:"There was an issue submitting your answers."});case 23:case"end":return e.stop()}},e,null,[[2,20]])})),[b,j,f,v,i,h]),_=(0,l.useCallback)(function(){v(!1),O(Array(null==b?void 0:b.length))},[b,v]);return(0,k.jsx)(rt.u_,{size:"small",open:s,scrollable:!0,onClose:_,shouldFullscreenOnMobile:!0,wrapperStyle:{padding:0,overflow:p?"auto":"hidden"},children:(0,k.jsx)(pf,{questions:b,group:i,subheader:"Answer questions to join group",value:j,onChange:O,onSubmit:S,loading:D})})}),pb=(0,g.iv)(["padding-top:24px;"]),pg=g.ZP.div.withConfig({displayName:"styled__OnboardingModalWrapper",componentId:"sc-1efgh2t-0"})(["display:flex;flex-direction:column;align-items:center;> h2{margin:0px 0px 8px 0px;","}> p{margin:0px 0px 32px 0px;text-align:center;","}> div:nth-child(4){width:100%;margin-bottom:16px;}> button{width:100%;}",""],Z.c.t1,Z.c.t7,function(e){return e.theme.isMobile&&pb}),px=g.ZP.div.withConfig({displayName:"styled__UploadError",componentId:"sc-1efgh2t-1"})(["color:",";",""],v.O9.error,Z.c.t7),py=n(92777),pw=n(82262),pC=n(10748),pj=n(45959),pk=n(63553),pO=n(37247);function pP(e,t){return decodeURIComponent(e.replace(RegExp("^(?:.*[&\\?]"+encodeURIComponent(t).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}var pD=function(e){(0,pj.Z)(o,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,pO.Z)(o);if(t){var r=(0,pO.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,pk.Z)(this,e)});function o(){var e;(0,py.Z)(this,o);for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];return e=n.call.apply(n,[this].concat(i)),(0,r.Z)((0,pC.Z)(e),"state",{isSdkLoaded:!1,isProcessing:!1}),(0,r.Z)((0,pC.Z)(e),"responseApi",function(t){window.FB.api("/me",{locale:e.props.language,fields:e.props.fields},function(n){Object.assign(n,t),e.props.callback(n)})}),(0,r.Z)((0,pC.Z)(e),"checkLoginState",function(t){e.setStateIfMounted({isProcessing:!1}),t.authResponse?e.responseApi(t.authResponse):e.props.onFailure?e.props.onFailure({status:t.status}):e.props.callback({status:t.status})}),(0,r.Z)((0,pC.Z)(e),"checkLoginAfterRefresh",function(t){"connected"===t.status?e.checkLoginState(t):window.FB.login(function(t){return e.checkLoginState(t)},!0)}),(0,r.Z)((0,pC.Z)(e),"click",function(t){if(e.state.isSdkLoaded&&!e.state.isProcessing&&!e.props.isDisabled){e.setState({isProcessing:!0});var n=e.props,r=n.scope,o=n.appId,i=n.onClick,a=n.returnScopes,s=n.responseType,l=n.redirectUri,c=n.disableMobileRedirect,u=n.authType,d=n.state;if("function"==typeof i&&(i(t),t.defaultPrevented)){e.setState({isProcessing:!1});return}var p={client_id:o,redirect_uri:l,state:d,return_scopes:a,scope:r,response_type:s,auth_type:u};if(e.props.isMobile&&!c)window.location.href="https://www.facebook.com/dialog/oauth".concat("?"+Object.keys(p).map(function(e){return"".concat(e,"=").concat(encodeURIComponent(p[e]))}).join("&"));else{if(!window.FB){e.props.onFailure&&e.props.onFailure({status:"facebookNotLoaded"});return}window.FB.getLoginStatus(function(t){"connected"===t.status?e.checkLoginState(t):window.FB.login(e.checkLoginState,{scope:r,return_scopes:a,auth_type:p.auth_type})})}}}),e}return(0,pw.Z)(o,[{key:"componentDidMount",value:function(){if(this._isMounted=!0,document.getElementById("facebook-jssdk")){this.sdkLoaded();return}this.setFbAsyncInit(),this.loadSdkAsynchronously();var e=document.getElementById("fb-root");e||((e=document.createElement("div")).id="fb-root",document.body.appendChild(e))}},{key:"componentDidUpdate",value:function(e){this.state.isSdkLoaded&&this.state.autoLoad&&!e.autoLoad&&window.FB.getLoginStatus(this.checkLoginAfterRefresh)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"setStateIfMounted",value:function(e){this._isMounted&&this.setState(e)}},{key:"setFbAsyncInit",value:function(){var e=this,t=this.props,n=t.appId,r=t.xfbml,o=t.cookie,i=t.version,a=t.autoLoad;window.fbAsyncInit=function(){window.FB.init({version:"v".concat(i),appId:n,xfbml:r,cookie:o,status:!0}),e.setStateIfMounted({isSdkLoaded:!0}),(a||e.isRedirectedFromFb())&&window.FB.getLoginStatus(e.checkLoginAfterRefresh)}}},{key:"isRedirectedFromFb",value:function(){var e=window.location.search;return"facebookdirect"===pP(e,"state")&&(pP(e,"code")||pP(e,"granted_scopes"))}},{key:"sdkLoaded",value:function(){this.setState({isSdkLoaded:!0})}},{key:"loadSdkAsynchronously",value:function(){var e,t,n,r,o,i=this.props.language;e=document,t="script",n="facebook-jssdk",o=r=e.getElementsByTagName(t)[0],e.getElementById(n)||((o=e.createElement(t)).id=n,o.src="https://connect.facebook.net/".concat(i,"/sdk.js"),r.parentNode.insertBefore(o,r))}},{key:"render",value:function(){if(!this.props.render)throw Error("ReactFacebookLogin requires a render prop to render");var e={onClick:this.click,isDisabled:!!this.props.isDisabled,isProcessing:this.state.isProcessing,isSdkLoaded:this.state.isSdkLoaded};return this.props.render(e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.isSdkLoaded&&e.autoLoad&&!t.autoLoad?{signedIn:e.signedIn,autoLoad:e.autoLoad}:null}}]),o}(l.Component);function pI(e){var t,n=e.updateProfilePicture,r=e.render,i=e.onSuccess,s=e.onError,c=e.self,u=(0,l.useRef)(!1),p=(0,l.useCallback)((t=(0,o.Z)(a().mark(function e(t){var r,o,l,p,f,m,h,v,b,g,x,y;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,o=t.name,l=t.email,r){e.next=4;break}return s&&s(),e.abrupt("return");case 4:if(!u.current){e.next=6;break}return e.abrupt("return");case 6:return u.current=!0,e.next=9,d.Z.updateUserMeta({userID:c.id,key:"facebook_asid",value:r});case 9:return e.next=11,d.Z.updateUserMeta({userID:c.id,key:"facebook_name",value:o});case 11:return e.next=13,d.Z.updateUserMeta({userID:c.id,key:"facebook_email",value:l});case 13:if(!n){e.next=51;break}return e.next=16,d.Z.downloadFacebookProfilePicture({asid:r,width:200,height:200});case 16:if(m=(f=(p=e.sent).data).content,h=f.contentType,!p.error){e.next=24;break}return s&&s(),e.abrupt("return");case 24:if(!(m.size>i2.Rj.attachmentImageFileMaxSize)){e.next=27;break}return s&&s(),e.abrupt("return");case 27:return e.next=29,d.Z.createFile({fileName:"facebook_picture",contentType:h,contentLength:m.size,ownerID:c.id});case 29:if(b=(v=e.sent).data,!v.error){e.next=35;break}return s&&s(),e.abrupt("return");case 35:return e.prev=35,e.next=38,(0,ie.cT)({fileID:b.file.id,writeUrl:b.writeUrl,acl:b.acl,contentType:b.contentType,data:m,timeout:6e4});case 38:if(!(g=e.sent)){e.next=46;break}return x=g.metadata.readUrl,y=g.metadata.readUrl,e.next=44,d.Z.updateUserMeta({userID:c.id,key:"picture_profile",value:x});case 44:return e.next=46,d.Z.updateUserMeta({userID:c.id,key:"picture_bubble",value:y});case 46:e.next=51;break;case 48:e.prev=48,e.t0=e.catch(35),s();case 51:i&&i();case 52:case"end":return e.stop()}},e,null,[[35,48]])})),function(e){return t.apply(this,arguments)}),[s,i,c,n]);return(0,k.jsx)(pD,{appId:"2759137094103591",fields:"name,email,picture",callback:p,isMobile:!1,render:r})}(0,r.Z)(pD,"defaultProps",{redirectUri:window.location.href,scope:"public_profile,email",returnScopes:!1,xfbml:!1,cookie:!1,authType:"",fields:"name",version:"3.1",language:"en_US",disableMobileRedirect:!1,isMobile:function(){var e=!1;try{e=!!(window.navigator&&window.navigator.standalone||navigator.userAgent.match("CriOS")||navigator.userAgent.match(/mobile/i))}catch(e){}return e}(),onFailure:null,state:"facebookdirect",responseType:"code"}),pI.defaultProps={updateProfilePicture:!1};var pZ=(0,l.memo)(pI),pS=g.ZP.div.withConfig({displayName:"styled__ProfilePictureUploadWrapper",componentId:"sc-9kkdj9-0"})(["margin-bottom:32px;&:focus{outline:none;}"]),p_=g.ZP.div.withConfig({displayName:"styled__CameraIcon",componentId:"sc-9kkdj9-1"})(["height:100%;width:100%;position:absolute;top:0px;left:0px;display:flex;align-items:center;justify-content:center;> div{height:48px;width:48px;border-radius:50%;background:",";color:",";display:flex;align-items:center;justify-content:center;> div{height:24px;width:24px;}}"],v.O9.n1,v.O9.n5),pM=g.ZP.div.withConfig({displayName:"styled__DropzoneWrapper",componentId:"sc-9kkdj9-2"})(["position:absolute;height:100%;width:100%;top:0px;left:0px;z-index:1000;padding:8px;background:",";"],v.O9.n1),pN=g.ZP.div.withConfig({displayName:"styled__DropzoneInnerWrapper",componentId:"sc-9kkdj9-3"})(["height:100%;width:100%;border:2px solid dashed ",";border-radius:10px;display:flex;justify-content:center;align-items:center;color:",";",";"],v.O9.n5,v.O9.n5,Z.c.t1),pE=g.ZP.div.withConfig({displayName:"styled__FacebookUpload",componentId:"sc-9kkdj9-4"})(["text-align:center;",""],Z.c.t7),pA=g.ZP.a.withConfig({displayName:"styled__FacebookLink",componentId:"sc-9kkdj9-5"})(["color:",";cursor:pointer;",""],v.O9.sd1,Z.c.t7),pL=g.ZP.div.withConfig({displayName:"styled__ProfilePictureUploadTop",componentId:"sc-9kkdj9-6"})(["display:flex;justify-content:center;align-items:center;margin-bottom:16px;"]),pT=g.ZP.div.withConfig({displayName:"styled__ProfilePictureAvatarWrapper",componentId:"sc-9kkdj9-7"})(["user-select:none;cursor:pointer;position:relative;"]);function pF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pF(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var pR=function(e){var t,n,r=e.setLoading,i=e.onTimeout,s=(0,C.bI)("self"),u=s.self,p=s.dispatch,f=(0,c.useRouter)(),m=(0,l.useCallback)(function(e){(0,o.Z)(a().mark(function t(){var n,o;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.metadata.imageMdUrl||e.metadata.readUrl||e.metadata.srcReadUrl,o=e.metadata.imageSmUrl||n,t.next=4,d.Z.updateUserMeta({userID:u.id,key:"picture_profile",value:n});case 4:return t.next=6,d.Z.updateUserMeta({userID:u.id,key:"picture_bubble",value:o});case 6:r(!1),(0,V.H5)(f);case 8:case"end":return t.stop()}},t)}))()},[f,r,u]),h=(0,l.useCallback)((t=(0,o.Z)(a().mark(function e(t){var n,o,s,l,c,f,h,v,b,g,x,y,w;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.target)&&void 0!==n&&null!==(n=n.files)&&void 0!==n&&n.length){e.next=2;break}return e.abrupt("return");case 2:if(o=t.target.files[0],!(0,ie.ZP)(o.type)){e.next=5;break}return e.abrupt("return");case 5:if(!(o.size>i2.Rj.attachmentImageFileMaxSize)){e.next=8;break}return p(e0.bI,{message:"File too large, ".concat(i2.Rj.attachmentImageFileMaxSizeMB,"mb max"),severity:"error"}),e.abrupt("return");case 8:return r(!0),e.prev=9,e.next=12,(0,i2.GN)(o);case 12:return s=e.sent,l=(0,i2.YY)(s.width,s.height,i2.Rj.profilePictureMinHeight,i2.Rj.profilePictureMinWidth),c=s.width>i2.Rj.profilePictureMinWidth||s.height>i2.Rj.profilePictureMinHeight,e.next=17,(0,i2.s4)({file:o,minWidth:c?l.width:s.width,minHeight:c?l.height:s.height,maxWidth:1024,maxHeight:1024});case 17:if(f=e.sent,v=(h=(0,Q.Z)(f,3))[0],!h[2]){e.next=25;break}return p(e0.bI,{message:"Failed to load image file",severity:"error"}),t.target&&(t.target.value=null),e.abrupt("return");case 25:return e.next=27,(0,i2._c)({canvas:v,contentType:"image/jpeg",quality:.95});case 27:return b=e.sent,e.next=30,d.Z.createFile({fileName:o.name,contentType:"image/jpeg",contentLength:b.size,ownerID:u.id});case 30:if(x=(g=e.sent).data,!g.error){e.next=38;break}return(0,J.Lx)({message:"Failed to upload a file",severity:"error"}),t.target&&(t.target.value=null),r(!1),e.abrupt("return");case 38:return e.next=40,(0,ie.cT)({fileID:x.file.id,writeUrl:x.writeUrl,acl:x.acl,contentType:x.contentType,data:b,timeout:6e4,waitToken:x.waitToken,userID:null==u?void 0:u.id});case 40:(y=e.sent)&&m(y),t.target&&(t.target.value=null),e.next=51;break;case 45:e.prev=45,e.t0=e.catch(9),w=e.t0.error,r(!1),p(e0.bI,{message:"Failed to upload a file",severity:"error"}),w===oO.k9&&i();case 51:case"end":return e.stop()}},e,null,[[9,45]])})),function(e){return t.apply(this,arguments)}),[r,p,u.id,m,i]),v=(0,l.useCallback)(function(e){h({target:{files:e}})},[h]),b=(0,aC.V)((0,l.useRef)({}).current),g=(0,Q.Z)(b,1)[0],x=(0,an.u)({onDrop:v,accept:"image/*"}),y=x.getRootProps,w=x.getInputProps,j=x.isDragActive,O=y(),P=w({onClick:function(e){return e.preventDefault()}}),D=!!(null!=u&&null!==(n=u.metadata)&&void 0!==n&&n.pictureProfile),I=(0,l.useMemo)(function(){if(!D)return(0,k.jsx)(p_,{children:(0,k.jsx)("div",{children:(0,k.jsx)(eF.J,{name:"Camera"})})})},[D]),Z=(0,l.useMemo)(function(){if(g||j)return(0,k.jsx)(pM,{children:(0,k.jsx)(pN,{children:"Drop image here to upload"})})},[g,j]),S=(0,l.useCallback)(function(e){var t=e.onClick;return(0,k.jsx)(pA,{onClick:function(e){t(e)},style:{cursor:"pointer"},children:"use your Facebook profile pic"})},[]);return(0,k.jsxs)(pS,pB(pB({},O),{},{children:[(0,k.jsxs)(pL,{children:[(0,k.jsx)("input",pB({},P)),(0,k.jsx)("input",{type:"file",multiple:!1,accept:"image/*",id:"file-upload-input",style:{display:"none"},onChange:h}),Z,(0,k.jsx)("label",{htmlFor:"file-upload-input",children:(0,k.jsxs)(pT,{children:[(0,k.jsx)(ex.Z,{user:u,disableLink:!0,size:150}),I]})})]}),(0,k.jsxs)(pE,{children:["Upload a photo or","\xa0",(0,k.jsx)(pZ,{self:u,render:S,updateProfilePicture:!0,onError:function(){(0,J.Lx)({message:"Failed to connect Facebook",severity:"error"}),(0,V.H5)(f)},onSuccess:function(){(0,V.H5)(f)}}),"."]})]}))},pz=function(){var e=(0,c.useRouter)(),t=(0,l.useState)(!1),n=t[0],r=t[1],i=(0,C.bI)("self","isMobile","currentGroup","onboardingBio","onboardingJoinGroup"),s=i.self,u=i.dispatch,p=i.isMobile,m=i.currentGroup,h=i.onboardingBio,v=i.onboardingJoinGroup,b=(0,en.c8)(),g=(0,Q.Z)(b,2),x=g[0],y=g[1],w=(0,l.useCallback)(function(e){u(e0.fr,e.target.value)},[u]),j=(0,l.useCallback)((0,o.Z)(a().mark(function t(){var n,o;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),t.next=3,d.Z.updateUserMeta({userID:s.id,key:"bio",value:h});case 3:v?(n=m.name,o=p?"/about":"",e.replace("/".concat(n).concat(o))):(0,V.Tr)({router:e,queries:{sc:!0}});case 4:case"end":return t.stop()}},t)})),[m,p,h,v,e,s]),O=(0,l.useCallback)(function(){(0,f.co)({key:f.H0.onboardingSkipped,value:!0,expireInMSec:864e5}),(0,V.H5)(e,!0)},[e]),P=(0,l.useMemo)(function(){return!h.trim()||!s.metadata.pictureProfile||h.length>150},[s,h]);return(0,k.jsx)(nQ.T,{open:!0,disableEscape:!0,shouldFullscreenOnMobile:!0,children:(0,k.jsxs)(pg,{children:[(0,k.jsx)("h2",{children:"Complete your profile"}),(0,k.jsx)("p",{children:"Communities feel weird without faces and names. Profiles build trust and spark connection with others."}),(0,k.jsx)(pR,{setLoading:r,onTimeout:y}),(0,k.jsx)(ir.I,{multiline:!0,label:"Add your bio...",value:h,onChange:w,maxCharacters:150,minRows:4,maxRows:4,inputProps:{"data-testid":"onboarding-bio-input"}}),(0,k.jsx)(S.z,{loading:n,label:"Complete",onClick:j,disabled:P}),x&&(0,k.jsxs)(e5.X,{gap:4,marginTop:16,alignItems:"center",justifyContent:"flex-start",width:"100%",children:[(0,k.jsx)(px,{children:"Upload error."}),(0,k.jsx)(S.z,{variant:"link",label:"Skip this step >",typography:"t7",disableRipple:!0,onClick:O})]})]})})},pG=(0,l.memo)(function(){var e,t,n=(0,l.useState)(!1),r=n[0],o=n[1],i=(0,C.bI)("self","showSurvey","showSubscribeModal","showPaymentSuccessModal"),a=i.self,s=i.showSubscribeModal,u=i.showSurvey,d=i.showPaymentSuccessModal,p=(0,c.useRouter)(),m=p.query,h=p.pathname,v=p.asPath,b=(0,l.useMemo)(function(){var e=(0,f.tv)({key:f.H0.onboardingSkipped}).value;return void 0!==e&&e},[]);return((0,l.useEffect)(function(){o(!0)},[]),!a||!r||u||s||d||(0,G.y3)(m)||(0,G.ZZ)({pathname:h})||"/games/onboarding"===v||null!=a&&null!==(e=a.metadata)&&void 0!==e&&e.bio&&null!=a&&null!==(t=a.metadata)&&void 0!==t&&t.pictureProfile||b)?null:(0,k.jsx)(pz,{})}),pU=n(86664),p$=g.ZP.div.withConfig({displayName:"styled__SubscribeModalWrapper",componentId:"sc-1krbx5g-0"})(["display:flex;flex-direction:column;align-items:center;"]),pW=(0,g.iv)(["padding:64px 0px 32px 0px;"]),pH=g.ZP.div.withConfig({displayName:"styled__SubscribeModalTop",componentId:"sc-1krbx5g-1"})(["display:flex;flex-direction:column;align-items:center;width:100%;padding:32px 0px;background:",";border-bottom:1px solid ",";> div:first-child{margin-bottom:8px;}> p{text-align:center;margin:8px 0px 0px 0px;","}",""],v.O9.n2,v.O9.n3,Z.c.t7,function(e){return e.theme.isMobile&&pW}),pq=(0,g.iv)(["padding:32px 24px;"]),pV=g.ZP.div.withConfig({displayName:"styled__SubscribeModalContent",componentId:"sc-1krbx5g-2"})(["padding:32px;background:",";> button{margin:32px 0px 16px 0px;width:100%;}",""],v.O9.n1,function(e){return e.theme.isMobile&&pq}),pY=g.ZP.div.withConfig({displayName:"styled__FieldLabel",componentId:"sc-1krbx5g-3"})(["margin-bottom:8px;",""],Z.c.t11),pJ=(0,g.ZP)(ir.I).withConfig({displayName:"styled__SubscribeInput",componentId:"sc-1krbx5g-4"})(["margin-bottom:32px;"]),pX=g.ZP.div.withConfig({displayName:"styled__SubscribeTerms",componentId:"sc-1krbx5g-5"})(["text-align:center;color:",";"," > a{text-decoration:underline;}"],v.O9.n5,Z.c.t11),pK=g.ZP.div.withConfig({displayName:"styled__PaymentSuccessfulWrapper",componentId:"sc-1krbx5g-6"})(["display:flex;flex-direction:column;align-items:center;text-align:center;> div{color:",";}> h2{margin:8px 0px;","}> p{margin:0px 0px 32px 0px;","}> button{width:100%;}"],v.O9.s2,Z.c.t1,Z.c.t7),pQ=g.ZP.div.withConfig({displayName:"styled__DeclinedText",componentId:"sc-1krbx5g-7"})(["color:",";margin-bottom:32px;",""],v.O9.e2,Z.c.t5);function p0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var p1=function(){var e,t,n=(0,C.bI)("currentGroup","self","isMobile","subscriptionRedirectUrl"),i=n.currentGroup,s=n.self,u=n.isMobile,p=n.dispatch,f=n.subscriptionRedirectUrl,h=(0,l.useState)(!1),v=h[0],b=h[1],g=(0,l.useState)(null),x=g[0],y=g[1],w=(0,l.useState)(!0),j=w[0],O=w[1],P=(0,l.useState)(null!==(e=null==s?void 0:s.email)&&void 0!==e?e:""),D=P[0],I=P[1],Z=(0,l.useRef)(),_=null==i||null===(t=i.metadata)||void 0===t?void 0:t.displayName,M=(0,l.useRef)(!1),N=(0,c.useRouter)(),E=N.push,A=N.reload,L=(0,l.useState)(!1),T=L[0],F=L[1],B=(0,l.useState)(null),R=B[0],z=B[1],G=(0,l.useState)(!1),U=G[0],$=G[1],H=(0,l.useMemo)(function(){var e;return(null==s||null===(e=s.member)||void 0===e?void 0:e.billingDeclined)&&(0,m.cD)({member:null==s?void 0:s.member,group:i})},[s,i]),q=(0,pU.useStripe)(),V=(0,l.useCallback)(function(){p(e0.RV,!1)},[p]),Y=(0,l.useCallback)(function(){b(!1),E(f||"/".concat(i.name,"?sps=true")),V()},[i,V,E,f]),J=(0,l.useCallback)(function(e){return b(!1),p(e0.bI,{message:e||"Something went wrong, please try again later.",severity:"error"})},[p]),X=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r,o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.initJoinGroupPaid({groupId:i.id});case 2:if(n=(t=e.sent).data,!(r=t.error)){e.next=13;break}if("group has a free membership"!==r.data){e.next=11;break}return A(),e.abrupt("return");case 11:return J(null==r||null===(o=r.data)||void 0===o||null===(o=o.fields)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.error),e.abrupt("return");case 13:y(void 0===(s=n.paymentMethods)?[]:s),O(!1);case 16:case"end":return e.stop()}},e)})),[i,J,A]),K=(0,l.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,d.Z.getGroupSubscription({groupId:i.id});case 3:z(e.sent.data),O(!1);case 7:case"end":return e.stop()}},e)})),[i]);(0,l.useEffect)(function(){M.current||(M.current=!0,H?K():X())},[X,H,K]);var Q=(0,l.useMemo)(function(){var e,t,n;return H?(0,oi.O5)(JSON.parse(null==s||null===(t=s.member)||void 0===t||null===(t=t.metadata)||void 0===t?void 0:t.mmbp)):null!=i&&null!==(e=i.metadata)&&void 0!==e&&e.currentMBp?(0,oi.O5)(JSON.parse(null==i||null===(n=i.metadata)||void 0===n?void 0:n.currentMBp)):void 0},[i,H,s]),ee=(0,l.useCallback)(function(e){I(e.target.value)},[]),et=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r,o,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,Z.current.getSelectedPayment();case 3:if(!(t=e.sent).stripeError){e.next=10;break}if("setup_intent_unexpected_state"!==t.stripeError){e.next=8;break}return e.next=8,Z.current.refetchIntent();case 8:return b(!1),e.abrupt("return");case 10:return e.next=12,d.Z.updatePaymentMethodForGroup({groupId:i.id,newPaymentMethodId:t.id});case 12:if(r=(n=e.sent).data,!(o=n.error)){e.next=19;break}return p(e0.bI,{message:(null===(l=o.data)||void 0===l||null===(l=l.fields)||void 0===l||null===(l=l[0])||void 0===l?void 0:l.error)||"There was an issue with your request, please try again",severity:"error"}),b(!1),e.abrupt("return");case 19:if(!r.token){e.next=29;break}return e.prev=20,e.next=23,(0,oO.Cx)({token:r.token,userID:null==s?void 0:s.id,timeoutMS:6e4});case 23:Y(),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(20),J();case 29:case"end":return e.stop()}},e,null,[[20,26]])})),[i,p,Y,s,J]),en=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,o,l,c,u,f,m,h;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=3;break}return et(),e.abrupt("return");case 3:return b(!0),e.next=6,Z.current.getSelectedPayment();case 6:if(!(t=e.sent).stripeError){e.next=16;break}if("setup_intent_authentication_failure"!==t.stripeError){e.next=14;break}return e.next=11,d.Z.cancelJoinGroupPaid({groupId:i.id});case 11:e.sent.error&&p(e0.bI,{message:"There was an issue with your request, please try again",severity:"error"});case 14:return b(!1),e.abrupt("return");case 16:if(e.prev=16,!T){e.next=23;break}return e.next=20,(0,oO.Cx)({token:T,userID:null==s?void 0:s.id,timeoutMS:6e4});case 20:Y(),e.next=51;break;case 23:return n=(0,pm.K)(),e.next=26,d.Z.joinGroupPaid(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p0(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({email:D,groupName:i.name,paymentMethodId:t.id},n));case 26:if(l=(o=e.sent).data,!(c=o.error)){e.next=36;break}if(J(f=null===(u=c.data)||void 0===u||null===(u=u.fields)||void 0===u||null===(u=u[0])||void 0===u?void 0:u.error),!("Card declined"===f&&t.newCard)){e.next=35;break}return e.next=35,Z.current.handleDeclinedCard(t.id);case 35:return e.abrupt("return");case 36:if(!l.clientSecret){e.next=46;break}return F(l.token),e.next=40,q.confirmCardPayment(l.clientSecret,{payment_method:t.id});case 40:if(!e.sent.error){e.next=46;break}return F(null),e.next=46,Z.current.handleDeclinedCard(t.id);case 46:if(!l.token){e.next=51;break}return e.next=49,(0,oO.Cx)({token:l.token,userID:null==s?void 0:s.id,timeoutMS:6e4});case 49:l.eventId&&(h=JSON.parse(null==i||null===(m=i.metadata)||void 0===m?void 0:m.currentMBp),(0,pm.i)({eventName:"Purchase",eventID:l.eventId,params:{value:h.amount/100,currency:h.currency}})),Y();case 51:e.next=56;break;case 53:e.prev=53,e.t0=e.catch(16),J("failed"===e.t0?"Card declined":void 0);case 56:case"end":return e.stop()}},e,null,[[16,53]])})),[D,q,s,p,T,i,H,J,Y,et]),er=(0,l.useMemo)(function(){if(!H)return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(pY,{children:"Email for membership"}),(0,k.jsx)(pJ,{onChange:ee,placeholder:"Email",staticLabel:!0,autoFocus:!0,value:D})]})},[D,ee,H]),eo=(0,l.useMemo)(function(){if(!H)return(0,k.jsxs)(pX,{children:["By joining, you accept ".concat(_," and Skool's"),"\xa0",(0,k.jsx)(W.r,{href:"/legal?t=terms",newTab:!0,children:"terms."}),"\xa0","You allow them to charge your card ".concat(Q," now and ").concat(Q," every month after that. You can cancel anytime.")]})},[_,Q,H]),ei=(0,l.useMemo)(function(){if(H)return(0,k.jsx)(pQ,{children:"Payment declined. Please update your payment method to keep access to this community."})},[H]);return(0,k.jsxs)(rt.u_,{open:!0,size:"small",onClose:v?void 0:V,shouldFullscreenOnMobile:!0,wrapperStyle:{padding:0,overflow:u?"auto":"hidden"},children:[(0,k.jsx)(p$,{children:(0,k.jsxs)(pH,{children:[(0,k.jsx)(tz.F,{group:i,disableLink:!0,size:56}),(0,k.jsx)(uR.D,{disableLink:!0,group:i,desktopTypography:"t1",mobileTypography:"t1"}),(0,k.jsx)("p",{children:"".concat(Q," /month membership. Cancel anytime.")})]})}),(0,k.jsxs)(pV,{children:[ei,er,(0,k.jsx)(oS.t,{onReady:$,initLoading:j,fetchPayments:H,paymentMethods:x,label:"Payment information",ref:Z,hiddenCards:H?[null==R?void 0:R.paymentMethodId]:void 0,addPaymentMethod:!1}),(0,k.jsx)(S.z,{disabled:!U,style:{textTransform:"none"},loading:v,loadingLabel:"Processing...",onClick:en,label:H?"UPDATE":"JOIN ".concat(Q," /month")}),eo]})]})},p2={fonts:[{cssSrc:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}]},p9=(0,l.memo)(function(){var e=(0,C.bI)("showPaymentSuccessModal","showSubscribeModal","billingStripePromise","currentGroup","self"),t=e.dispatch,n=e.showSubscribeModal,r=e.billingStripePromise,o=e.showPaymentSuccessModal,i=e.self,a=e.currentGroup,s=(0,c.useRouter)(),u=(0,l.useMemo)(function(){var e,t;if(null!=a&&null!==(e=a.metadata)&&void 0!==e&&e.currentMBp)return(0,oi.O5)(JSON.parse(null==a||null===(t=a.metadata)||void 0===t?void 0:t.currentMBp))},[a]);(0,l.useEffect)(function(){(0,G.A$)(s.query)&&(t(e0.RV,!0),(0,V.hj)(s,"ssm"))},[t,s]);var d=(0,l.useCallback)(function(){t(e0.KH,!0)},[t]),p=(0,l.useCallback)(function(){t(e0.KH,!1)},[t]);(0,l.useEffect)(function(){(0,G.y3)(s.query)&&(d(),(0,V.hj)(s,"sps"))},[d,s]);var f=(0,l.useMemo)(function(){return n&&a?(0,k.jsx)(p1,{openSuccessModal:d}):null},[d,n,a]),m=(0,l.useMemo)(function(){var e,t;return a?(0,k.jsx)(rt.u_,{size:"small",confettiOnClose:!!(null!=i&&null!==(e=i.metadata)&&void 0!==e&&e.bio)&&!!(null!=i&&null!==(t=i.metadata)&&void 0!==t&&t.pictureProfile),open:o,onClose:p,children:(0,k.jsxs)(pK,{children:[(0,k.jsx)(eF.J,{name:"CheckCircle"}),(0,k.jsx)("h2",{children:"Payment successful"}),(0,k.jsx)("p",{children:"".concat(a.metadata.displayName," charged your card ").concat(u," and sent a receipt to ").concat(null==i?void 0:i.email,". Your card will be charged monthly on the date you signed up.")}),(0,k.jsx)(S.z,{label:"Enter group",onClick:p})]})}):null},[i,p,o,a,u]);return(0,k.jsxs)(pU.Elements,{stripe:r,options:p2,children:[f,m]})}),p3=g.ZP.div.withConfig({displayName:"styled__StatusBadgeModalWrapper",componentId:"sc-6gk9o3-0"})(["display:flex;flex-direction:column;align-items:center;> img{height:100px;}> h3{margin:12px 0px 8px 0px;","}> p{margin:0px 0px 32px 0px;text-align:center;","}> a,> button{width:100%;> button{width:100%;}}"],Z.c.t1,Z.c.t7),p5=n(46158);function p6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var p4=function(e){var t=e.label,n=e.days,r=e.activities;return(0,k.jsx)("p",{children:"Users with a ".concat(n,"-day streak of ").concat(r,"+ activities per day get ").concat(t," status.")})},p8=function(e){var t=e.label,n=e.percentage,r="goat"===e.status;return(0,k.jsxs)("p",{children:[r?"There can only be one Goat.":"The top ".concat(n,"% of community builders get ").concat(t," status."),(0,k.jsx)("br",{}),r&&(0,k.jsxs)(k.Fragment,{children:["The ",(0,k.jsx)("strong",{children:"#1"})," community builder on Skool."]})]})},p7=function(){var e=(0,C.bI)("statusBadgeModal"),t=e.statusBadgeModal,n=e.dispatch,o=p5.g[t],i=o.label,a=o.modalImg,s=o.type,c=(0,l.useCallback)(function(){n(e0._E,null)},[n]);return(0,k.jsx)(rt.u_,{open:!0,size:"small",onClose:c,wrapperStyle:{padding:"32px 24px"},children:(0,k.jsxs)(p3,{children:[(0,k.jsx)("img",{src:a}),(0,k.jsx)("h3",{children:i}),(0,k.jsx)("mrr"===s?p8:p4,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p6(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({onClose:c,status:t},o)),(0,k.jsx)(S.z,{label:"Got it",onClick:c})]})})},fe=(0,l.memo)(function(){return(0,C.bI)("statusBadgeModal").statusBadgeModal?(0,k.jsx)(p7,{}):null}),ft=g.ZP.div.withConfig({displayName:"styled__AppAdoptionBanner",componentId:"sc-14apg61-0"})(["align-items:center;position:fixed;display:flex;bottom:","px;left:0px;width:100vw;background:",";padding:8px;border-top:1px solid ",";z-index:1298;padding-bottom:",";"," > a{height:34px;margin-right:4px;> button{padding:0px 12px;text-transform:none;height:100%;}}"],function(e){var t=e.$bottom;return void 0===t?0:t},v.O9.n1,v.O9.n3,function(e){return 0===e.$bottom&&"calc(env(safe-area-inset-bottom) + 8px)"},Y.Wn),fn=g.ZP.div.withConfig({displayName:"styled__SkoolIcon",componentId:"sc-14apg61-1"})(['background:url("https://assets.skool.com/f/-/1d8b1123248347ddb42dfd1293b27c18df01da30aa414a678a2f1d312832a785/icon.jpg");height:40px;width:40px;border-radius:10px;background-size:cover;margin-right:8px;']),fr=g.ZP.div.withConfig({displayName:"styled__InfoText",componentId:"sc-14apg61-2"})(["flex:1;",";"],Z.c.t10),fo=g.ZP.div.withConfig({displayName:"styled__AppAdoptionModalWrapper",componentId:"sc-14apg61-3"})(["display:flex;flex-direction:column;align-items:center;> h2{margin:8px 0px 16px 0px;","}> p{margin:0px 0px 32px 0px;text-align:center;","}> a{width:fit-content;}"],Z.c.t1,Z.c.t7),fi=(0,l.memo)(function(e){var t,n=e.userAgent,r=e.isApp,o=(0,l.useState)(!1),i=o[0],a=o[1],s=(0,C.bI)("self","mobileBottomOffset"),u=s.self,d=s.mobileBottomOffset,p=(0,c.useRouter)(),m=p.pathname,h=p.query;(0,l.useEffect)(function(){!((0,f.tv)({key:f.H0.hideAppBanner}).value||"/signup"===m||"/refer"===m||"/games/onboarding"===m||!u||r||(0,G.DG)({query:h}))&&((0,U.Dt)(n)||(0,U.gn)(n)||(0,U.AY)(n))&&a(!0)},[n,r,m,u,h]);var v=(0,l.useCallback)(function(){a(!1);var e=(0,U.AY)(n)?3:1;(0,f.co)({key:f.H0.hideAppBanner,value:!0,expireInMSec:864e5*e})},[n]);return i?(0,U.AY)(n)?(0,k.jsxs)(rt.u_,{open:!0,size:"small",children:[(0,k.jsxs)(fo,{children:[(0,k.jsx)(fn,{}),(0,k.jsx)("h2",{children:"Get the official app"}),(0,k.jsx)("p",{children:"Download the official Skool app. This app is no longer supported."})]}),(0,k.jsx)(S.z,{style:{marginBottom:8},label:"Get App",href:"https://apps.apple.com/us/app/skool-communities/id6447270545"})]}):(0,k.jsxs)(ft,{$bottom:null==d||null===(t=d[j.V.SAFE])||void 0===t?void 0:t.offset,children:[(0,k.jsx)(fn,{}),(0,k.jsx)(fr,{children:"Get the full experience"}),(0,k.jsx)(S.z,{href:(0,U.Dt)(n)?"https://play.google.com/store/apps/details?id=com.skool.skoolcommunities":"https://apps.apple.com/us/app/skool-communities/id6447270545",label:"Get app",newTab:!0}),(0,k.jsx)(S.z,{onClick:v,variant:"icon-borderless",icon:"Close",iconSize:14,dataTestId:"close-get-app-banner"})]}):null}),fa=n(19869),fs=(0,l.memo)(function(){var e=(0,l.useState)(!1),t=e[0],n=e[1],r=(0,c.useRouter)();return((0,l.useEffect)(function(){(0,G.wC)(r.query)&&(n(!0),(0,V.hj)(r,"sc"))},[r]),t)?(0,k.jsx)(fa.D,{}):null}),fl=n(38449),fc=(0,g.iv)(["height:auto;flex-direction:column;gap:8px;padding:16px 0px;> button{width:fit-content;padding:0px 25px;}"]),fu=g.ZP.div.withConfig({displayName:"styled__DeclinedMembershipBannerWrapper",componentId:"sc-1yhqigf-0"})(["display:flex;align-items:center;justify-content:center;position:fixed;bottom:0px;left:0px;width:100%;height:64px;background:",";color:",";gap:32px;z-index:1;"," ",""],v.O9.e2,v.O9.fgError,Z.c.t5,function(e){return e.theme.isMobile&&fc}),fd=function(){var e=(0,C.bI)().dispatch,t=(0,l.useCallback)(function(){e(e0.RV,!0)},[e]);return(0,k.jsxs)(fu,{children:[(0,k.jsx)("span",{children:"Your payment has been declined"}),(0,k.jsx)(S.z,{label:"Fix payment issue",variant:"secondary",onClick:t})]})},fp=(0,l.memo)(function(){var e=(0,l.useState)(!1),t=e[0],n=e[1],r=(0,C.bI)("self","currentGroup"),o=r.self,i=r.currentGroup;return((0,l.useEffect)(function(){var e;n((null==o||null===(e=o.member)||void 0===e?void 0:e.billingDeclined)&&(0,m.cD)({member:null==o?void 0:o.member,group:i}))},[o,i]),t)?(0,k.jsx)(fd,{}):null}),ff=n(83527),fm=n(5212),fh=["50 Cent","Warren Buffet","Dr. Dre","Bill Gates","Beyonce","Biggie","Pam Anderson"],fv=function(e){var t=e.fireNewSubscriberNotification,n=(0,l.useState)(0),r=n[0],o=n[1],i=(0,C.bI)("makeItRain").makeItRain,a=(0,l.useCallback)(function(){t({handle:"hormozi",price:"$99",name:fh[r],groupName:"games"}),o(function(e){var t=e+1;return t>fh.length-1?0:t})},[r,t]);return(0,l.useEffect)(function(){var e=function(e){var t=e.keyCode;e.ctrlKey&&52===t&&a()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[a]),(0,l.useEffect)(function(){if(i){var e=setInterval(a,500);return function(){clearInterval(e)}}},[a,i]),null};fv.propTypes={fireNewSubscriberNotification:(0,fm.EO)({required:!0})};var fb=(0,l.memo)(fv);function fg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fg(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var fy=(0,l.memo)(function(){var e=(0,C.bI)("globalAlert"),t=e.globalAlert,n=e.dispatch,r=(0,l.useCallback)(function(){n(e0.bI,null)},[n]);return(0,l.useEffect)(function(){var e,r=null!==(e=null==t?void 0:t.autoHideDuration)&&void 0!==e?e:6e3;if(t&&!(r<=1e3)){var o=setTimeout(function(){n(e0.bI,fx(fx({},t),{},{autoHideDuration:r-1e3}))},1e3);return function(){clearTimeout(o)}}},[n,t,r]),(0,k.jsx)(z,fx({open:!!t,onClose:r},t))}),fw=n(55877),fC=n(80181),fj=g.ZP.span.withConfig({displayName:"styled__GroupTitle",componentId:"sc-1c30yoj-0"})([""," padding:0 16px;text-align:center;width:100%;overflow-wrap:break-word;"],Z.c.t1),fk=g.ZP.span.withConfig({displayName:"styled__PrivacyStatus",componentId:"sc-1c30yoj-1"})(["font-size:18px;font-weight:500;"]),fO=g.ZP.div.withConfig({displayName:"styled__ModalBody",componentId:"sc-1c30yoj-2"})(["padding:",";overflow-wrap:break-word;",";"],function(e){return e.theme.isMobile?"32px 16px":"32px"},Z.c.t7),fP=g.ZP.div.withConfig({displayName:"styled__ModalFooter",componentId:"sc-1c30yoj-3"})(["padding:",";padding-top:0;display:flex;justify-content:center;flex-direction:",";gap:",";"],function(e){return e.theme.isMobile?"32px 16px":"32px"},function(e){return e.$flexDirection},function(e){return e.$gap}),fD=(0,g.ZP)(W.r).withConfig({displayName:"styled__CallToActionLink",componentId:"sc-1c30yoj-4"})(["width:100%;display:block;text-decoration:none;"]),fI=(0,g.ZP)(S.z).withConfig({displayName:"styled__CallToActionButton",componentId:"sc-1c30yoj-5"})(["width:100%;"]),fZ=(0,g.ZP)(fC.eI).withConfig({displayName:"styled__CoverPhoto",componentId:"sc-1c30yoj-6"})(["height:243px;border-radius:10px 10px 0 0;background-position:center;background-size:contain;",";",";"],function(e){var t=e.$backgroundColor;return t&&"background-color: ".concat(t)},function(e){var t=e.$backgroundImage;return t&&"background-image: url('".concat(t,"')")}),fS=(0,g.ZP)(fC.ni).withConfig({displayName:"styled__CoverPhotoContent",componentId:"sc-1c30yoj-7"})(["gap:8px;"]),f_=g.ZP.div.withConfig({displayName:"styled__PurchaseTerms",componentId:"sc-1c30yoj-8"})(["text-align:center;color:",";"," > a{text-decoration:underline;}"],v.O9.n5,Z.c.t11),fM=g.ZP.div.withConfig({displayName:"styled__Purchase",componentId:"sc-1c30yoj-9"})(["display:flex;flex-direction:column;gap:16px;"]),fN=g.ZP.div.withConfig({displayName:"styled__PurchaseSuccessContainer",componentId:"sc-1c30yoj-10"})(["display:flex;flex-direction:column;gap:32px;padding:",";align-items:center;"],function(e){return e.theme.isMobile?"32px 16px":"32px"}),fE=g.ZP.div.withConfig({displayName:"styled__PurchaseSuccessBody",componentId:"sc-1c30yoj-11"})(["display:flex;flex-direction:column;align-items:center;gap:8px;"]),fA=g.ZP.h2.withConfig({displayName:"styled__PurchaseSuccessHeader",componentId:"sc-1c30yoj-12"})(["margin:0;",""],Z.c.t1),fL=g.ZP.p.withConfig({displayName:"styled__PurchaseSuccessContent",componentId:"sc-1c30yoj-13"})([""," text-align:center;margin:0;"],Z.c.t7),fT={border:0,padding:0},fF=function(e){var t,n=e.course,r=e.group,i=e.onSuccessfulPurchase,s=e.dispatch,c=e.idemKey,u=e.self,p=e.onClose,f=(0,l.useRef)(),m=(0,l.useState)(!1),h=m[0],v=m[1],b=(0,l.useState)(!1),g=b[0],x=b[1],y=(0,l.useState)(!1),w=y[0],C=y[1],j=n.metadata,O=n.billingProductId,P=n.amount,D=n.currency,I=j.title,Z=j.coverImage,S=j.desc,_=j.privacy,M=j.minAccessLevel,N=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n,r,o,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,f.current.getSelectedPayment();case 3:if(!(t=e.sent).stripeError){e.next=10;break}if("setup_intent_unexpected_state"!==t.stripeError){e.next=8;break}return e.next=8,f.current.refetchIntent();case 8:return C(!1),e.abrupt("return");case 10:return e.next=12,d.Z.purchase({billingProductId:O,paymentMethod:t,idemKey:c});case 12:if(r=(n=e.sent).data,!(o=n.error)){e.next=19;break}return s(e0.bI,{message:(null===(l=o.data)||void 0===l||null===(l=l.fields)||void 0===l||null===(l=l[0])||void 0===l?void 0:l.error)||"There was an issue with your request, please try again",severity:"error"}),C(!1),e.abrupt("return");case 19:if(!(null!=r&&r.token)){e.next=30;break}return e.prev=20,e.next=23,(0,oO.Cx)({token:r.token,userID:null==u?void 0:u.id,timeoutMS:6e4});case 23:e.next=30;break;case 25:return e.prev=25,e.t0=e.catch(20),s(e0.bI,{message:"There was an issue with your request, please try again.",severity:"error"}),C(!1),e.abrupt("return");case 30:i(!0);case 31:case"end":return e.stop()}},e,null,[[20,25]])})),[f,O,s,i,c,u]),E=(0,l.useCallback)(function(e){x(e)},[]),A=(0,l.useCallback)(function(e){x(null!==e)},[]),L=2==_,T=3==_,F=(0,k.jsx)(fD,{onClick:p,href:"/".concat(r.name,"/-/leaderboards"),children:(0,k.jsx)(fI,{label:"Check Level on Leaderboards",variant:"primary"})}),B=(0,l.useMemo)(function(){return T&&P&&D?(0,oi.O5)({amount:P,currency:D,showZeroes:!1}):""},[T,P,D]),R=r.metadata.displayName;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(fZ,{$backgroundColor:null===(t=r.metadata)||void 0===t?void 0:t.color,$backgroundImage:Z,children:(0,k.jsxs)(fS,{children:[(0,k.jsx)(eF.J,{name:"Private",size:32,padding:0}),(0,k.jsx)(fj,{children:I}),L&&(0,k.jsx)(fk,{children:"Unlock at Level ".concat(M)}),1==_&&(0,k.jsx)(fk,{children:"Private Course"}),T&&(0,k.jsx)(fk,{children:"Unlock for ".concat(B)})]})}),(0,k.jsx)(fO,{children:S}),L&&(0,k.jsx)(fP,{children:F}),T&&(0,k.jsxs)(fP,{$flexDirection:"column",$gap:"32px",children:[(0,k.jsx)(oS.t,{onReady:v,label:"Payment information",ref:f,addPaymentMethod:!1,paymentElementOnChange:E,onPaymentMethodChange:A}),(0,k.jsxs)(fM,{children:[(0,k.jsx)(fI,{disabled:!h||!g,style:{textTransform:"none"},loading:w,loadingLabel:"Processing...",onClick:N,label:"BUY NOW ".concat(B)}),(0,k.jsxs)(f_,{children:["By purchasing, you accept ".concat(R," and Skool’s"),"\xa0",(0,k.jsx)(W.r,{href:"/legal?t=terms",newTab:!0,children:"terms."})]})]})]})]})},fB=function(e){var t=e.course,n=e.group,r=e.self,o=e.onOpenCourse,i=t.amount,a=t.currency,s=n.metadata.displayName,c=(0,l.useMemo)(function(){return(0,oi.O5)({amount:i,currency:a,showZeroes:!1})},[i,a]);return(0,k.jsxs)(fN,{children:[(0,k.jsxs)(fE,{children:[(0,k.jsx)(eF.J,{name:"CheckCircle",size:40,color:v.O9.s2}),(0,k.jsx)(fA,{children:"Payment successful"}),(0,k.jsx)(fL,{children:"".concat(s," charged your card USD ").concat(c," and sent a receipt to ").concat(r.email,".")})]}),(0,k.jsx)(fI,{label:"Open Course",variant:"primary",onClick:o})]})},fR=function(){var e=(0,C.bI)("self","isMobile","coursePreviewModal"),t=e.self,n=e.dispatch,r=e.isMobile,i=e.coursePreviewModal,s=i.course,u=i.group,d=i.isPurchaseSuccessful,p=(0,l.useState)((0,fw.v4)()),f=p[0],m=p[1],h=(0,c.useRouter)().push,b=(0,l.useCallback)(function(){n(e0.T1)},[n]),g=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,G.rE)({group:u,course:s,courseModule:r?"menu":void 0}),e.next=3,h(t.as);case 3:n(e0.el);case 4:case"end":return e.stop()}},e)})),[u,s,r,h,n]);(0,l.useEffect)(function(){m((0,fw.v4)())},[s,u]);var x=d?v.O9.n5:v.O9.n1,y=(0,k.jsx)(S.z,{onClick:b,variant:"icon-borderless",iconNode:(0,k.jsx)(eF.J,{size:14,name:"Close",color:x})});return(0,k.jsxs)(rt.u_,{size:"small",open:i.show,wrapperStyle:fT,onClose:b,dataTestId:"course-preview-modal",confettiOnClose:d,shouldFullscreenOnMobile:!0,closeIcon:y,children:[!d&&u&&s&&(0,k.jsx)(fF,{group:u,dispatch:n,course:s,onClose:b,onSuccessfulPurchase:g,idemKey:f,self:t}),d&&u&&s&&(0,k.jsx)(fB,{course:s,self:t,group:u,onOpenCourse:b})]})};function fz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fz(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fz(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var fU=["mousemove","keypress","scroll","touchstart","mousedown"],f$=(0,u5.gh)(),fW=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var r,i,u,h=n.currentGroup,b=n.self,g=n.settings,x=n.currentPage,y=n.referer,w=n.isApp,j=n.userAgent,O=(0,c.useRouter)(),P=(0,l.useState)(!1),D=P[0],I=P[1],Z=(0,l.useRef)(!1),S=(0,l.useRef)(null),_=(0,l.useState)(null),M=_[0],N=_[1],E=(0,C.bI)("lastNotification","unreadChat","pixelInitalized","isMobile"),A=E.dispatch,L=E.lastNotification,T=E.unreadChat,F=E.pixelInitalized,B=E.isMobile,R=(0,s.Ds)().enqueueSnackbar,W=(0,l.useRef)(!1),H=(0,l.useRef)((0,U.IU)()),q=(0,G.kG)(O.query),Y=(0,l.useRef)(),J=!!(0,U.Q0)(j);(0,l.useEffect)(function(){if(F){var e=function(e){e.startsWith("/".concat(null==h?void 0:h.name))||(window.location.href=O.basePath+e)};return O.events.on("routeChangeStart",e),function(){O.events.off("routeChangeStart",e)}}},[O,F,h]),(0,l.useEffect)(function(){(0,G.PS)(O)?A(e0.Xs,function(e){if(e.allUsersSelected)return{selectedUsers:[],allUsersSelected:!1}}):A(e0.Xs,function(){return{selectedUsers:[],allUsersSelected:!1}})},[A,O]),(0,l.useEffect)(function(){(0,fl.P3)("pv|".concat(O.asPath,"|1"),null==b?void 0:b.id,y)},[O,b,y]),(0,l.useEffect)(function(){var e=(0,u8.J)("pk_live_51IMiS6KvLOXsN9xSfc0bsCmz4p06QORdboo8MvJtjVBv2pnTKbysGEMu331uhK1cw2RRGMiLgAGCPfjDVJs30aLn00ui4Q8VEn"),t=(0,u8.J)("pk_live_51Msq2SK2xk1aF7GmLfdnbGQwTp0k2kt23vSuMyDBouKfriqp9W52yocwbPK72oXs5LtVsFYqiJ0oMfXouhXZMFSu00T7SlnP47");A(e0.NO,{stripePromise:e,billingStripePromise:t})},[A]),(0,l.useEffect)(function(){if(b){var e=(0,f.tv)({key:f.H0.storeTelemetry}).value;e&&(e.split(",").forEach(function(e){(0,fl.P3)(e,b.id)}),(0,f.pN)({key:f.H0.storeTelemetry}))}},[b]),(0,l.useEffect)(function(){q&&(0,o.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,f.co)({key:f.H0.savedAffiliateCode,value:q,expireInMSec:2592e6}),!b){e.next=20;break}return e.next=4,d.Z.getAffiliatesPayoutInfo();case 4:if(e.sent.data.code!==q){e.next=12;break}return(0,V.hj)(O,"ref"),e.abrupt("return");case 12:return e.next=14,d.Z.setAffiliateCustomerData({affiliateCode:q});case 14:(t=e.sent.error)&&console.error("Failed to set affiliate customer data",t),(0,V.hj)(O,"ref");case 18:e.next=22;break;case 20:(0,f.co)({key:f.H0.unsetAffiliateCode,value:q,expireInMSec:2592e6}),(0,V.hj)(O,"ref");case 22:case"end":return e.stop()}},e)}))()},[q,b,O]);var K=(0,l.useCallback)((0,o.Z)(a().mark(function e(){var t,n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,f.tv)({key:f.H0.unsetAffiliateCode}).value,!(b&&t)){e.next=8;break}return e.next=4,d.Z.setAffiliateCustomerData({affiliateCode:t});case 4:(n=e.sent.error)&&console.error("Failed to set affiliate customer data",n),(0,f.pN)({key:f.H0.unsetAffiliateCode});case 8:case"end":return e.stop()}},e)})),[b]);(0,l.useEffect)(function(){K()},[K]),(0,l.useEffect)(function(){if(!b||null==b||null===(e=b.metadata)||void 0===e||!e.noChatSound){var e,t=function(e,t){N(function(n){return n===e?t:e})};if(L&&T){var n=L.name;t("(".concat(T,") Chat"),"".concat(n," messaged you")),S.current=setInterval(function(){t("(".concat(T,") Chat"),"".concat(n," messaged you"))},2e3)}else S.current&&clearInterval(S.current),N(null);return function(){S.current&&(clearInterval(S.current),N(null))}}},[T,L,b]),(0,l.useEffect)(function(){w&&(0,p.M6)(O,!!b)},[w,O,b]);var Q=!t&&(0,m.Wr)({member:null==b?void 0:b.member,group:h})&&(null==g||null===(r=g.error)||void 0===r?void 0:r.status)!==423;(0,l.useEffect)(function(){b&&(0,o.Z)(a().mark(function e(){var n,r,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t&&!(null!==(n=b.metadata)&&void 0!==n&&n.timezone))||!(o=null===(r=Intl)||void 0===r||null===(r=r.DateTimeFormat())||void 0===r||null===(r=r.resolvedOptions())||void 0===r?void 0:r.timeZone)){e.next=5;break}return e.next=5,d.Z.updateUserMeta({userID:b.id,key:"timezone",value:o,valueType:"string"});case 5:case"end":return e.stop()}},e)}))()},[b]),(0,l.useEffect)(function(){var e=function(){Z.current||(Z.current=!0,(0,nU.Rq)())},t=setTimeout(e,6e5),n=function(){clearTimeout(t),Z.current&&(Z.current=!1,(0,nU.v4)()),t=setTimeout(e,6e5)};return fU.forEach(function(e){return window.addEventListener(e,n)}),function(){clearTimeout(t),fU.forEach(function(e){return window.removeEventListener(e,n)})}},[]),(0,l.useEffect)(function(){var e=function(){I(!0)},t=function(){I(!1)};return window.addEventListener("offline",e),window.addEventListener("online",t),function(){window.removeEventListener("offline",e),window.removeEventListener("online",t)}},[]),(0,l.useEffect)(function(){if(W.current=!0,b){var e,t=function(){var e,t,n=(e="heartbeat_session_id",t=window.sessionStorage.getItem(e)||(0,U.c9)(),window.sessionStorage.setItem(e,t),t);d.Z.sendHeartbeat({sessionID:n})};t(),e=setInterval(t,2500),d.Z.registerHeartbeatCallback(function(e){e&&W.current&&A(e0.Sb,e),w&&(0,p.TH)(e)})}return function(){W.current=!1,e&&(d.Z.registerHeartbeatCallback(null),clearInterval(e))}},[b,A,w]),(0,l.useEffect)(function(){var e;null!=b&&null!==(e=b.metadata)&&void 0!==e&&e.tracking&&(0,f.co)({key:f.H0.trackingSetting,value:b.metadata.tracking})},[b]),(0,l.useEffect)(function(){h&&(0,f.co)({key:f.H0.lastGroupAccessed,value:h.name})},[h]);var ee=null!==(i=u5.Q2[null==b||null===(u=b.metadata)||void 0===u?void 0:u.theme])&&void 0!==i?i:u5.Q2.light,et=(0,l.useState)(ee!==u5.Q2.dark&&!t),en=et[0],er=et[1];(0,l.useEffect)(function(){if(t){er(!0),(0,p.h4)(f$===u5.Q2.dark);return}(0,p.h4)(ee===u5.Q2.dark),f$===ee?er(!0):((0,u5.Dc)(ee,!0),(0,V.H5)(O,!0))},[O,en,ee]),(0,l.useEffect)(function(){if(b)return(0,nU.Ld)([(0,nU.b5)(b.id),(0,nU.p2)(b.id)],function(e){if(e.groupId===(null==h?void 0:h.id)){if("usp"===e.topic.category){var t=(0,$.y)(h,e.newLevel);R(JSON.stringify({icon:"Up",iconColor:v.O9.p3,message:"You reached",messageBold:"Level ".concat(e.newLevel).concat(t?" - "+t:"")}),{anchorOrigin:{horizontal:"left",vertical:"top"},autoHideDuration:6e3})}"cun"===e.topic.category&&e.courseTitle.forEach(function(t,n){R(JSON.stringify({href:e.linkAs[n],icon:"Unlock",iconColor:v.O9.p3,message:"Course unlocked",messageBold:'"'.concat(t,'"')}),{anchorOrigin:{horizontal:"left",vertical:"top"},autoHideDuration:6e3})})}})},[b,R,h]);var eo=(0,l.useCallback)(function(e){var t=e.handle,n=e.groupName,r=e.price,o=e.name;Y.current.playAudio("https://assets.skool.com/skool/1cd61626a37e4475b0c537c78a52d1bd.wav"),R(JSON.stringify({href:"/@".concat(t,"?g=").concat(n),variant:"success",messageBold:r,message:"from ".concat(o),boldLeft:!0,width:320}),{anchorOrigin:{horizontal:"left",vertical:"bottom"},autoHideDuration:6e3})},[R]);if((0,l.useEffect)(function(){var e;if((0,m.r1)({member:null==b?void 0:b.member})&&!(null!=b&&null!==(e=b.member)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.mbncno))return(0,nU.Ld)([(0,nU.WK)(h.id)],function(e){var t=e.price,n=e.groupName,r=e.userName,o=e.userFirstName,i=e.userLastName;eo({name:"".concat(o," ").concat(i),handle:r,groupName:n,price:t})})},[eo,R,h,b]),(0,l.useEffect)(function(){var e;if((0,m.r1)({member:null==b?void 0:b.member})&&!(null!=b&&null!==(e=b.member)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.mbncno))return(0,nU.Ld)([(0,nU.IG)(h.id)],function(e){var t=e.price,n=e.userName,r=e.userFirstName,o=e.userLastName,i=e.groupName;eo({name:"".concat(r," ").concat(o),handle:n,groupName:i,price:t})})},[eo,R,h,b]),!en)return null;if(t)return(0,k.jsxs)(ry,{children:[(0,k.jsx)(e,fG({},n),x.pageKey),(0,k.jsx)(pG,{}),(0,k.jsx)(fi,{userAgent:j,isApp:w}),(0,k.jsx)(fs,{}),(0,k.jsx)(X,{}),(0,k.jsx)(fy,{}),(0,U.S_)()&&!H.current&&(0,k.jsx)(rp,{})]});var ei=(0,k.jsx)(ni,fG({content:e,canAccessGroup:Q},n),x.pageKey),ea=(0,k.jsx)(nD,fG({content:e,canAccessGroup:Q},n),x.pageKey);return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(ry,{children:[B?ea:ei,(0,k.jsx)(fi,{userAgent:j,isApp:w}),(0,k.jsx)(fs,{}),(0,k.jsx)(pr,{}),(0,k.jsx)(z,{open:D,autoHideDuration:null,message:"It looks like you're offline",noClose:!0}),(0,k.jsx)(fy,{}),(0,k.jsx)(nK,{}),(0,k.jsx)(n0,{}),(0,k.jsx)(rr,{}),(0,k.jsx)(rd,{}),(0,k.jsx)(nG,{isBot:J}),(0,k.jsx)(p9,{}),(0,k.jsx)(fe,{}),(0,k.jsx)(pv,{}),(0,k.jsx)(fp,{}),(0,U.S_)()&&!H.current&&(0,k.jsx)(rp,{}),(0,k.jsx)(uq,{canAccessGroup:Q}),M?(0,k.jsxs)(rC(),{children:[(0,k.jsx)("title",{children:M}),(0,k.jsx)("link",{rel:"icon",type:"image/x-icon",href:"https://assets.skool.com/skool/b3c5a15dd2924afdb3e1491c11f237a1.ico"})]}):(0,k.jsx)(rC(),{children:(0,k.jsx)("link",{rel:"icon",type:"image/x-icon",href:"https://assets.skool.com/skool/ed24268642ae417a9b8e3b9827cdd1fd.ico"})}),(0,k.jsx)(uX,{}),(0,k.jsx)(u3,{}),(0,k.jsx)(ff.z,{ref:Y}),(0,k.jsx)(fb,{fireNewSubscriberNotification:eo}),(0,k.jsx)(pG,{}),(0,k.jsx)(u4,{}),(0,k.jsx)(fR,{})]})})}}},55847:function(e,t,n){n.d(t,{$5:function(){return $},F9:function(){return B},MP:function(){return Z},OB:function(){return A},Q8:function(){return R},S4:function(){return x},Sf:function(){return w},TH:function(){return C},TX:function(){return p},Tc:function(){return E},V3:function(){return H},XO:function(){return O},Yl:function(){return d},Zd:function(){return j},aS:function(){return U},bM:function(){return m},by:function(){return k},eP:function(){return M},fL:function(){return f},k3:function(){return W},lR:function(){return S},mb:function(){return g},mu:function(){return h},pI:function(){return _},pQ:function(){return z},q$:function(){return I},qm:function(){return T},rM:function(){return y},rY:function(){return b},sg:function(){return D},wJ:function(){return G},xI:function(){return P},zR:function(){return L}});var r=n(50378),o=n(20668),i=n(14251),a=n(59607),s=n(47108),l=n(65009),c=n(14760),u=(0,r.iv)(["height:auto;padding:32px 16px;flex-direction:column;"]),d=(0,r.ZP)(s.Z).withConfig({displayName:"styled__GamificationProgressCard",componentId:"sc-hb97og-0"})(["position:relative;display:flex;align-items:center;width:100%;min-height:408px;flex-direction:row;",""],function(e){return e.theme.isMobile&&u}),p=r.ZP.div.withConfig({displayName:"styled__ProgressCardLeftCol",componentId:"sc-hb97og-1"})(["width:",";"],function(e){return e.theme.isMobile?"100%":"33.5%"}),f=(0,r.ZP)(a.z).withConfig({displayName:"styled__GearIconButton",componentId:"sc-hb97og-2"})(["position:absolute;top:16px;width:48px;height:48px;z-index:1;",""],function(e){return e.theme.isMobile?"right: 16px":"left: 16px"}),m=r.ZP.div.withConfig({displayName:"styled__UserInfoWrapper",componentId:"sc-hb97og-3"})(["position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;"]),h=r.ZP.div.withConfig({displayName:"styled__UserInfoTitle",componentId:"sc-hb97og-4"})(["margin-bottom:2px;"]),v=(0,r.iv)(["width:100%;padding-top:16px;"]),b=r.ZP.div.withConfig({displayName:"styled__ProgressCardRightCol",componentId:"sc-hb97og-7"})(["width:66.5%;",""],function(e){return e.theme.isMobile&&v}),g=r.ZP.div.withConfig({displayName:"styled__LevelBlocksWrapper",componentId:"sc-hb97og-8"})(["display:flex;justify-content:space-between;gap:",";"],function(e){return e.theme.isMobile?"0px":"32px"}),x=r.ZP.div.withConfig({displayName:"styled__LevelBlockWrapper",componentId:"sc-hb97og-9"})(['display:flex;align-items:"flex-start";margin-bottom:16px;&:last-child{margin:0;}']),y=r.ZP.div.withConfig({displayName:"styled__LevelBlockCol",componentId:"sc-hb97og-10"})(["width:calc(50% - 16px);"]),w=r.ZP.div.withConfig({displayName:"styled__LevelBlockLeftCol",componentId:"sc-hb97og-11"})(["margin-right:8px;"]),C=r.ZP.div.withConfig({displayName:"styled__LevelBlockRightCol",componentId:"sc-hb97og-12"})(["> a{&:hover{text-decoration:underline;}}"]),j=r.ZP.div.withConfig({displayName:"styled__LevelBlockTitle",componentId:"sc-hb97og-13"})(["",""],o.c.t6),k=r.ZP.span.withConfig({displayName:"styled__LevelBlockCourseUnlocks",componentId:"sc-hb97og-14"})([""," color:",";"],o.c.t11,i.O9.n5),O=r.ZP.div.withConfig({displayName:"styled__UnlockCircle",componentId:"sc-hb97og-15"})(["display:flex;justify-content:center;align-items:center;width:40px;height:40px;border-radius:50%;background-color:",";"," color:",";"],function(e){return e.$unlocked?i.O9.p2:i.O9.n3},o.c.t4,i.O9.fgPrimary),P=r.ZP.div.withConfig({displayName:"styled__LeaderboardsWrapper",componentId:"sc-hb97og-16"})(["display:flex;flex-direction:",";gap:8px;align-items:flex-start;justify-content:space-between;padding-bottom:32px;"],function(e){return e.theme.isMobile?"column":"row"}),D=r.ZP.div.withConfig({displayName:"styled__Column",componentId:"sc-hb97og-17"})(["display:flex;flex-direction:column;"]),I=r.ZP.div.withConfig({displayName:"styled__InfoRow",componentId:"sc-hb97og-18"})(["display:flex;flex-direction:",";align-items:baseline;justify-content:space-between;margin:",";"],function(e){return e.theme.isMobile?"column":"row"},function(e){return e.theme.isMobile?"24px 16px 16px":"24px 0 16px"}),Z=r.ZP.span.withConfig({displayName:"styled__MemberPercentage",componentId:"sc-hb97og-19"})([""," color:",";"],o.c.t11,i.O9.n5),S=r.ZP.div.withConfig({displayName:"styled__LeaderboardsLastUpdated",componentId:"sc-hb97og-20"})([""," color:",";font-style:italic;"],o.c.t11,i.O9.n5),_=r.ZP.span.withConfig({displayName:"styled__GamificationLink",componentId:"sc-hb97og-22"})(["> a{"," color:",";}"],o.c.t10,i.O9.sd1),M=r.ZP.span.withConfig({displayName:"styled__GamificationLinkDelimiter",componentId:"sc-hb97og-23"})([""," color:",";"],o.c.t10,i.O9.n5),N=(0,r.iv)(["&:hover{text-decoration:underline;}"]),E=r.ZP.button.withConfig({displayName:"styled__LevelUnlockButton",componentId:"sc-hb97og-24"})(["padding:0;background:none;border:none;cursor:pointer;"," color:",";",""],o.c.t10,i.O9.sd1,function(e){return!e.theme.isMobile&&N}),A=r.ZP.div.withConfig({displayName:"styled__LeaderboardsContainer",componentId:"sc-hb97og-25"})(["display:flex;flex-direction:column;gap:24px;width:100%;"]),L=(0,r.ZP)(l.X).withConfig({displayName:"styled__UserItemWrapper",componentId:"sc-hb97og-26"})(["position:relative;align-items:center;justify-content:flex-start;"]),T=r.ZP.div.withConfig({displayName:"styled__TopRankWrapper",componentId:"sc-hb97og-27"})(["position:absolute;top:26px;left:8px;z-index:0;"]),F={1:i.O9.p3,2:i.O9.n5,3:"#A77B53"},B=r.ZP.div.withConfig({displayName:"styled__UserRankWrapper",componentId:"sc-hb97og-28"})(["flex-shrink:0;width:",";margin-right:",";height:27px;border-radius:50%;background-color:",";margin-bottom:3px;z-index:1;display:flex;justify-content:center;align-items:center;"],function(e){return e.$outsideTopRanks?"37px":"27px"},function(e){var t=e.$outsideTopRanks;return e.$marginRight||(t?"13px":"16px")},function(e){return F[e.$rank]||"inherit"}),R=(0,r.ZP)(c.Z).withConfig({displayName:"styled__RankText",componentId:"sc-hb97og-29"})(["margin-left:1px;"]),z=r.ZP.div.withConfig({displayName:"styled__UserAvatarWrapper",componentId:"sc-hb97og-30"})(["margin-right:9px;"]),G=r.ZP.div.withConfig({displayName:"styled__PointsWrapper",componentId:"sc-hb97og-31"})(["flex-shrink:0;"]),U=r.ZP.div.withConfig({displayName:"styled__YourRankWrapper",componentId:"sc-hb97og-32"})(["border-bottom:1px solid ",";padding:16px 0;"],i.O9.n3),$=r.ZP.div.withConfig({displayName:"styled__SelfItemWrapper",componentId:"sc-hb97og-33"})(["padding-top:16px;margin-left:-8px;"]),W=(0,r.ZP)(s.Z).withConfig({displayName:"styled__LeaderboardCard",componentId:"sc-hb97og-34"})(["width:",";padding:",";flex-shrink:0;"],function(e){return e.theme.isMobile?"100%":"350px"},function(e){return e.theme.isMobile?"16px":void 0}),H=r.ZP.div.withConfig({displayName:"styled__LeaderboardCardHeader",componentId:"sc-hb97og-35"})(["border-bottom:1px solid ",";padding-bottom:16px;"],i.O9.n3)},91575:function(e,t,n){var r=n(59499),o=n(4730),i=n(50029),a=n(64687),s=n.n(a),l=n(67294),c=n(95419),u=n(12967),d=n(31545),p=n(29027),f=n(85893),m=["videoId"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.Z=(0,l.memo)(function(e){var t=e.post,n=e.file,a=e.videoLink,v=e.open,b=e.onClose,g=(0,l.useState)([]),x=g[0],y=g[1],w=(0,l.useState)(),C=w[0],j=w[1],k=(0,l.useMemo)(function(){var e;return(0,d.sw)(null==t||null===(e=t.metadata)||void 0===e?void 0:e.videoLinksData)},[t]);return(0,l.useEffect)(function(){(0,i.Z)(s().mark(function e(){var n,i,a,l,p,f,v;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],(0,u.vc)((null==t||null===(n=t.metadata)||void 0===n?void 0:n.videoLinks)||"").forEach(function(e){var t=(0,d.ak)(e),n=k.find(function(e){return e.provider===t.provider&&e.videoId===t.videoID})||null,i=n.videoId,s=(0,o.Z)(n,m);if(s&&s.provider===d.a.Bunny&&s.thumbnail){var l=new URL(s.thumbnail);l.searchParams.has("width")&&(l.searchParams.set("width",String(1024)),s.thumbnail=l.toString())}a.push({id:i,upload:null,videoLink:!0,metadata:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},s)})}),l=(0,u.JZ)((null==t||null===(i=t.metadata)||void 0===i?void 0:i.attachments)||""),p=[],!l.length){e.next=10;break}return e.next=7,c.Z.readFiles({fileIDs:l});case 7:p=null!=(v=e.sent.data)&&null!==(f=v.files)&&void 0!==f&&f.length?l.map(function(e){return v.files.find(function(t){return e===t.id})}):[];case 10:p.forEach(function(e){a.push(e)}),y(a);case 12:case"end":return e.stop()}},e)}))()},[t,k]),(0,l.useEffect)(function(){j(x.findIndex(function(e){return n?(null==e?void 0:e.id)===n.id:(null==e?void 0:e.metadata.provider)===a.provider&&(null==e?void 0:e.id)===a.videoID}))},[x,n,a]),C>=0&&v?(0,f.jsx)(p.Z,{initialIdx:C,onClose:b,previewAttachments:x}):null})},11462:function(e,t,n){n.d(t,{Z:function(){return nw}});var r=n(50029),o=n(59499),i=n(17674),a=n(64687),s=n.n(a),l=n(67294),c=n(95419),u=n(14251),d=n(53531),p=n(23450),f=n.n(p),m=n(73793),h=n(50378),v=n(59607),b=n(4730),g=n(15554),x=n(65009),y=n(14760),w=n(85893),C=["color","typographyVariant"];function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O=(0,l.memo)(function(e){var t=e.color,n=e.typographyVariant,r=(0,b.Z)(e,C),o=(0,l.useState)(""),i=o[0],a=o[1],s=(0,m.bI)("isMobile","commentingUsers"),c=s.isMobile,d=s.commentingUsers,p=c?10:25,f=(0,l.useCallback)(function(e){return c&&(e=e.split(" ")[0]),e.length>p?"".concat(e.slice(0,p)):e},[p,c]);return((0,l.useEffect)(function(){switch(null==d?void 0:d.length){case 1:a("".concat(f(d[0].userName)," is typing a comment"));break;case 2:a("".concat(f(d[0].userName)," and ").concat(f(d[1].userName)," are typing comments"));break;default:a("Several people are typing comments")}},[d,f]),null!=d&&d.length)?(0,w.jsxs)(x.X,k(k({gap:8,alignItems:"center"},r),{},{children:[(0,w.jsx)(g.Z,{color:t}),(0,w.jsx)(y.Z,{maxLines:1,color:t||u.O9.n5,variant:n||"t7",children:i})]})):null}),P=n(59313),D=h.ZP.div.withConfig({displayName:"PostDetailBadge__BadgeWrapperDiv",componentId:"sc-1j9dowk-0"})(["position:sticky;bottom:",";width:100%;z-index:1;display:flex;justify-content:center;pointer-events:none;min-height:42px;margin-top:-42px;"],function(e){var t=e.$bottom,n=e.theme;return n.isMobile?0===t?n.isApp?"32px":"calc(env(safe-area-inset-bottom) + ".concat(t+6,"px)"):"".concat(t+6,"px"):"16px"}),I=(0,l.memo)(function(e){var t,n,r=e.count,o=e.onClick,i=(0,m.bI)("commentingUsers","mobileBottomOffset"),a=i.commentingUsers,s=i.mobileBottomOffset,l=r>0;return null!=a&&a.length?(0,w.jsx)(D,{$bottom:null==s||null===(n=s[P.V.SAFE])||void 0===n?void 0:n.offset,children:(0,w.jsx)(v.z,{icon:"ArrowDownTail",label:(0,w.jsx)(O,{color:u.O9.n7,typographyVariant:"t8"}),variant:"badge",onClick:o,style:{backgroundColor:u.O9.n1,width:"auto",minWidth:280,pointerEvents:"all",textTransform:"unset"}})}):(0,w.jsx)(D,{$bottom:null==s||null===(t=s[P.V.SAFE])||void 0===t?void 0:t.offset,children:(0,w.jsx)(v.z,{icon:"ArrowDownTail",iconLeft:!0,variant:"badge",label:l?"See ".concat(f()("new comment",r,!0)):"Jump to latest comment",onClick:o,typography:"t8",style:{backgroundColor:l?u.O9.primary:u.O9.n1,color:l?u.O9.fgPrimary:void 0,width:230,pointerEvents:"all",textTransform:"unset"}})})}),Z=n(50591),S=n(91194),_=n(29610),M=n(75331),N=n(5095),E=n(12967),A=n(91575),L=n(11163),T=n(78444),F=n(73674),B=n(500),R=(0,h.ZP)(x.X).withConfig({displayName:"styled__Wrapper",componentId:"sc-4weezf-0"})(["border-radius:15px;border:1px solid ",";cursor:pointer;padding:8px 12px;"],u.O9.n5),z=(0,l.memo)(function(e){var t=e.onClick,n=e.placeholder,r=(0,l.useCallback)(function(e){t&&t(e)},[t]);return(0,w.jsx)(R,{onClick:r,children:(0,w.jsx)(y.Z,{variant:"t7",color:u.O9.n5,children:n})})}),G=n(97221),U=n(79698),$={2:58,3:48},W=h.ZP.div.withConfig({displayName:"styled__ContentWrapper",componentId:"sc-15s0o36-0"})(["display:flex;padding-top:",";padding-left:","px;gap:8px;"],function(e){return e.theme.isMobile?"0":"8px"},function(e){var t=e.$level;return e.theme.isMobile?0:$[t]||0}),H=h.ZP.div.withConfig({displayName:"styled__PostInputFormWrapper",componentId:"sc-15s0o36-1"})(["margin-bottom:",";flex-grow:1;min-width:0;"],function(e){var t=e.$level,n=e.$isModal;return t>1||!n?"0":"32px"}),q=n(57305),V=(0,l.forwardRef)(function(e,t){var n,r,o=e.group,a=e.parentTree,s=e.rootPostID,u=e.replyToTree,p=e.autoFocus,f=e.onSuccess,h=e.onCancel,v=e.level,b=e.followingPost,g=e.allUsers,x=e.isModal,y=e.commentUser,C=e.commentId,j=e.onFocus,k=e.onBlur,O=(0,m.bI)("self","isMobile"),P=O.self,D=O.isMobile,I=(0,l.useState)(p||D),Z=I[0],_=I[1],M=(0,l.useState)(""),N=M[0],A=M[1],R=(0,L.useRouter)(),$=(0,l.useRef)(),V=(null==P||null===(n=P.member)||void 0===n?void 0:n.role)||"",Y=V!==U.oN&&V!==U.xC&&V!==U.bD,J=!!(null!=o&&null!==(r=o.metadata)&&void 0!==r&&r.archived),X=(0,B.V)((0,l.useRef)({}).current);(0,i.Z)(X,1)[0]&&!Z&&(0,G.M)(P)&&_(!0);var K=(0,l.useMemo)(function(){return(0,E.wN)(function(){c.Z.setTyping({rootPostID:s})},2e3)},[s]);(0,l.useEffect)(function(){N&&K()},[N,K]),(0,l.useEffect)(function(){_(p||D)},[p,D]);var Q=(0,l.useCallback)(function(){var e;null===(e=$.current)||void 0===e||null===(e=e.getEditor())||void 0===e||e.focus(),null==f||f()},[f]),ee=(0,l.useCallback)(function(){_(D),h&&h()},[D,h]),et=(0,l.useMemo)(function(){if(v>1&&null!=a&&a.post.user&&a.post.user.id!==(null==P?void 0:P.id)){var e=null==a?void 0:a.post.user;return"[@".concat(e.firstName," ").concat(e.lastName,"](obj://user/").concat(e.id,") ")}if(v>1&&null!=a&&a.post.userId&&a.post.userId!==(null==P?void 0:P.id))return"[@".concat(y.firstName," ").concat(y.lastName,"](obj://user/").concat(y.id,") ")},[y,v,a,null==P?void 0:P.id]);return(0,l.useImperativeHandle)(t,function(){return{getPostInputForm:function(){return $.current},reset:function(){var e;return null===(e=$.current)||void 0===e||null===(e=e.getEditor())||void 0===e?void 0:e.set({type:"doc",content:(0,q.P)(et)})}}}),(0,w.jsxs)(W,{$level:v,children:[!D&&(0,w.jsx)(F.Z,{showLevel:!0,size:v>=2&&!D?32:40,user:P,group:o,disableLink:!0}),(0,w.jsx)(H,{$level:v,$isModal:x,children:!Z||!P||Y||J?(0,w.jsx)(G.Z,{reason:d.lT.EditPost,showSignUp:!0,onSuccess:function(){return _(!0)},onPending:function(){return(0,S.H5)(R)},children:function(e){var t=e.onClick;return(0,w.jsx)(z,{onClick:t,placeholder:"Your comment"})}}):(0,w.jsx)(T.Z,{ref:$,isModal:x,postType:"comment",level:v,confirmButtonLabel:v>=2?"Reply":"Comment",showMeta:!1,group:o,rootPostID:s,parentPost:u.post,contentPrefix:et,contentPlaceholder:v>=2?"Your reply":"Your comment",onCancel:ee,hideLabel:!0,onPostCreated:Q,onContentChange:A,followingPost:b,allUsers:g,commentId:C,onEditorFocus:j,onEditorBlur:k})})]})});V.defaultProps={autoFocus:!1,allUsers:[]};var Y=(0,l.memo)(V),J=n(90116),X=n(96486),K=n(30697),Q=n(13053),ee=n(12476),et=(0,h.iv)(["height:30px;width:30px;> button{height:100%;width:100%;padding:6px;}"]),en=(0,h.ZP)(ee.h_).withConfig({displayName:"styled__PostActionMenuDropdown",componentId:"sc-119wxbl-0"})(["> button{height:40px;width:40px;padding:10px;}",""],function(e){return e.$isComment&&et});function er(e){var t,n,r,o=e.post,i=e.level,a=e.group,s=e.self,c=e.onEdit,u=e.onDelete,p=e.onPin,f=e.onUnpin,m=e.onPinToModule,h=e.onUnpinFromModule,v=e.onChangeCategory,b=e.onReport,g=e.onDisableComments,x=e.onEnableComments,y=e.onLinkCopy,w=e.isAdminOnly,C=e.isPinned,j=0===i?"post":i>1?"reply":"comment",k=!!(null!=o&&null!==(t=o.metadata)&&void 0!==t&&t.deleted),O=!!(null!=o&&null!==(n=o.metadata)&&void 0!==n&&n.commentsDisabled),P=!!(null!=a&&null!==(r=a.metadata)&&void 0!==r&&r.archived);return(0,l.useMemo)(function(){var e,t,n=[],r=(0,d.q2)({group:a,user:s,member:null==s?void 0:s.member}),l=(0,d.CP)({group:a,user:s,member:null==s?void 0:s.member});return!P&&!k&&(0,d.Db)({user:s,post:o,group:a,member:null==s?void 0:s.member})&&!w&&n.push({label:"Edit",onClick:function(){return c({post:o})},testid:"post-actions-menu-post-edit"}),!P&&!k&&(0,d.q2)({user:s,post:o,group:a,member:null==s?void 0:s.member})&&!w&&0===i&&n.push({label:"Change category",onClick:v,testid:"post-actions-menu-post-change-category"}),!P&&!k&&(0,d.MA)({user:s,post:o,group:a,member:null==s?void 0:s.member})&&!(w&&!r)&&u&&n.push({label:"Delete",onClick:function(){return u({post:o})},confirmAction:{header:"Delete ".concat(j,"?"),content:"Are you sure you want to delete? You can't undo this.",confirmLabel:"Delete"},testid:"post-actions-menu-post-delete"}),y&&n.push({label:"Copy link",onClick:function(){return y({post:o})}}),!(!P&&!k&&!(null!=o&&o.parentId)&&!C&&(0,d.lF)({user:s,post:o,group:a,member:null==s?void 0:s.member}))||w||n.push({label:"Pin to feed",onClick:function(){return p({post:o})},testid:"post-actions-menu-post-pin"}),!P&&!k&&!(null!=o&&o.parentId)&&C&&(0,d.H7)({user:s,post:o,group:a,member:null==s?void 0:s.member})&&n.push({label:"Unpin from feed",onClick:function(){return f({post:o})},testid:"post-actions-menu-post-unpin"}),P||k||null!=o&&o.parentId||null!=o&&null!==(e=o.metadata)&&void 0!==e&&e.pinnedModule||!l||n.push({label:"Pin to course page",onClick:m,testid:"post-actions-menu-post-pin-to-module"}),P||k||null!=o&&o.parentId||null==o||null===(t=o.metadata)||void 0===t||!t.pinnedModule||!l||n.push({label:"Unpin from course page",onClick:h,testid:"post-actions-menu-post-unpin-from-module"}),!s||k||w||P||n.push({testid:"post-actions-menu-post-report",label:"Report to admins",onClick:function(){return b({post:o})},confirmAction:{header:"Report to group admins",content:"Are you sure you want to report this to group admins?",confirmLabel:"Yes"}}),P||k||null!=o&&o.parentId||w||!r||(O?n.push({label:"Turn on comments",onClick:function(){return x({post:o})},testid:"post-actions-menu-post-enable-comments"}):n.push({label:"Turn off comments",onClick:function(){return g({post:o})},testid:"post-actions-menu-post-disable-comments"})),n},[O,k,a,w,P,C,i,v,u,g,c,x,y,p,m,b,f,h,o,j,s])}var eo=(0,l.memo)(function(e){var t=e.options,n=e.isComment,r=e.onShow,o=e.onHide;return(0,w.jsx)(en,{className:"post-actions-menu",icon:"HorizontalDots",$isComment:n,options:t,variant:"icon-borderless",onShow:r,onHide:o})}),ei=n(36195),ea=n(89557),es=n(86031),el=n(81849),ec=n(20668),eu=h.ZP.div.withConfig({displayName:"styled__VotesLabelWrapper",componentId:"sc-1e3d9on-0"})(["cursor:pointer;"]),ed=h.ZP.div.withConfig({displayName:"styled__VotesLabel",componentId:"sc-1e3d9on-1"})(["color:",";text-align:center;",";"],u.O9.n5,ec.c.t8),ep=(0,h.iv)(["color:",";&:hover svg{color:",";}"],u.O9.fgPrimary,u.O9.fgPrimary),ef=(0,h.ZP)(v.z).withConfig({displayName:"styled__VoteButton",componentId:"sc-1e3d9on-2"})([""," svg{margin-bottom:1px;}"],function(e){return e.$voted&&ep});function em(e){var t,n,o=e.post,i=e.group,a=e.onVoteChange,u=e.height,p=e.itemSpacing,f=e.extra,h=e.extraSpacing,v=e.newVotes,b=(0,l.useState)((null==o||null===(t=o.metadata)||void 0===t?void 0:t.myVote)||""),g=b[0],y=b[1],C=(0,l.useState)((null==o||null===(n=o.metadata)||void 0===n?void 0:n.upvotes)||0),j=C[0],k=C[1],O=(0,m.bI)("isMobile"),P=O.isMobile,D=O.dispatch,I=(0,L.useRouter)();(0,l.useEffect)(function(){var e,t;y((null==o||null===(e=o.metadata)||void 0===e?void 0:e.myVote)||""),k((null==o||null===(t=o.metadata)||void 0===t?void 0:t.upvotes)||0)},[o]);var Z=(0,l.useCallback)((0,r.Z)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="up"===g?"":"up",e.next=3,c.Z.updatePostVote({postID:o.id,oldVote:g,newVote:t});case 3:if(!e.sent.error){e.next=7;break}return e.abrupt("return");case 7:null==a||a(g,t);case 8:case"end":return e.stop()}},e)})),[g,a,o.id]),_=(0,l.useCallback)(function(){D(K.Qg,function(){return{postLikeModalProps:{post:o,group:i}}})},[D,o,i]),M=(0,l.useCallback)(function(){return(0,S.H5)(I)},[I]),N=(0,l.useMemo)(function(){var e=(null==v?void 0:v.up)||0,t=String(j+e);return(0,w.jsxs)(x.X,{alignItems:"center",children:[(0,w.jsx)(es.x,{flexGrow:1,children:(0,w.jsx)(G.Z,{reason:d.lT.Upvote,onSuccess:Z,onPending:M,showSignUp:!0,children:function(e){var t=e.onClick;return(0,w.jsx)(ef,{variant:P?"icon-borderless-no-hover":"icon-borderless",icon:"up"===g?"ThumbsUpFilled":"ThumbsUp",onClick:t,iconSize:16.66,$voted:"up"===g})}})}),(0,w.jsx)(es.x,{margin:"0px 4px",children:(0,w.jsx)(el.I,{postID:o.id,upvotes:j,newUpvotes:e,children:(0,w.jsx)(eu,{onClick:_,children:(0,w.jsx)(ed,{children:t})})})})]})},[null==v?void 0:v.up,j,Z,M,o.id,_,P,g]);return(0,w.jsxs)(x.X,{gap:8*p,height:u,width:"100%",children:[N,!!f&&(0,w.jsx)(es.x,{marginLeft:8*(h-p),children:f})]})}em.defaultProps={height:16,itemSpacing:3,extraSpacing:0,newVotes:{}};var eh=(0,l.memo)(em),ev=n(96276),eb=h.ZP.div.withConfig({displayName:"styled__CommentsListWrapper",componentId:"sc-1lql1qn-0"})(["display:flex;flex-direction:column;padding:",";"],function(e){return e.theme.isMobile?"8px 8px 0":"8px 32px 0px"}),eg=h.ZP.div.withConfig({displayName:"styled__CommentItemContainer",componentId:"sc-1lql1qn-1"})(["display:flex;flex-direction:row;margin:8px 0 0 0;margin:",";transform:",";"],function(e){var t=e.theme,n=e.$level;return!t.isMobile&&n>1?"4px 0 0 0":"8px 0 0 0"},function(e){return e.$editing?"none":"translate3d(0, 0, 0)"}),ex=h.ZP.div.withConfig({displayName:"styled__CommentItemContent",componentId:"sc-1lql1qn-2"})(["flex:1;min-width:0;"]),ey=(0,h.iv)([".post-actions-menu{opacity:1;}"]),ew=h.ZP.div.withConfig({displayName:"styled__CommentItemBubble",componentId:"sc-1lql1qn-3"})(["position:relative;background:",";padding:8px 13px;border-radius:15px;border:1px solid ",";display:flex;flex-grow:1;flex-direction:column;animation:",";.post-actions-menu{opacity:0;}&:focus-within,&:hover{.post-actions-menu{opacity:1;}}",""],function(e){var t=e.theme;return e.$highlighted?t.isDarkTheme?"".concat(u.O9.p2,"26"):u.O9.p1:u.O9.n2},u.O9.n3,function(e){return e.$bgAnimation?"bg-fade-out-comment ease-in 4s":void 0},function(e){return e.theme.isMobile&&ey}),eC=h.ZP.div.withConfig({displayName:"styled__CommentItemAvatar",componentId:"sc-1lql1qn-4"})(["margin-right:8px;"]),ej=h.ZP.div.withConfig({displayName:"styled__CommentItemReactions",componentId:"sc-1lql1qn-5"})(["display:flex;margin-top:0;"]),ek=(0,h.ZP)(v.z).withConfig({displayName:"styled__CommentItemReplyButton",componentId:"sc-1lql1qn-6"})(["width:57px;height:40px;",";text-transform:none;"],function(e){return e.theme.isMobile&&"padding: 0;"}),eO=h.ZP.div.withConfig({displayName:"styled__ReplyListWrapper",componentId:"sc-1lql1qn-7"})(["display:flex;flex-direction:column;padding:0px 0px 0px 58px;"]),eP=h.ZP.div.withConfig({displayName:"styled__ExpandRepliesWrapper",componentId:"sc-1lql1qn-8"})(["display:flex;align-items:center;cursor:pointer;padding:8px 0px 8px 58px;color:",";"],function(e){return e.$color}),eD=h.ZP.div.withConfig({displayName:"styled__ExpandRepliesLabel",componentId:"sc-1lql1qn-9"})(["margin-left:12px;",""],ec.c.t8),eI=h.ZP.div.withConfig({displayName:"styled__LoadMoreComments",componentId:"sc-1lql1qn-10"})(["display:flex;align-items:center;gap:8px;margin:8px 0 16px;width:fit-content;height:40px;cursor:pointer;color:",";"," &:hover{text-decoration:underline;}"],u.O9.sd1,ec.c.t8),eZ=h.ZP.div.withConfig({displayName:"styled__CommentsLoaderWrapper",componentId:"sc-1lql1qn-11"})(["display:flex;justify-content:center;padding-top:16px;"]),eS=h.ZP.div.withConfig({displayName:"styled__DeletedComment",componentId:"sc-1lql1qn-12"})(["margin-bottom:8px;",""],ec.c.t6),e_=(0,l.forwardRef)(function(e,t){var n,o=e.group,i=e.self,a=e.isMobile,d=e.replyItems,p=e.onPostDelete,m=e.onCommentLinkCopy,h=e.isAdminOnly,v=e.level,b=e.onFilePreviewItemClick,g=e.newVotes,x=e.isGroupAdmin,y=e.isModal,C=e.rootPost,j=e.replyToTree,k=e.followingPost,O=e.allUsers,P=e.selectedPostID,D=e.parentTree,I=e.setCommentReplyShowing,Z=e.isBot,S=(0,l.useState)(d.slice(0,2)),_=S[0],M=S[1],N=(0,l.useState)(d.slice(2)),E=N[0],A=N[1],L=(0,l.useState)(!1),T=L[0],F=L[1],B=(0,l.useRef)(!1);(0,l.useImperativeHandle)(t,function(){return{expandReplies:function(){F(!0)}}}),(0,l.useEffect)(function(){if(B.current){var e,t=!(0,X.isEqual)([].concat((0,J.Z)(_),(0,J.Z)(E)),d),n=[].concat((0,J.Z)(_),(0,J.Z)(E)).length!==d.length,r=null==D||null===(e=D.post)||void 0===e?void 0:e.metadata.hasNewComments;if(n&&!r){M(d),A([]),F(!0);return}if(t&&T){M(d);return}if(t&&!T){M(d.slice(0,2)),A(d.slice(2));return}}else B.current=!0},[d,_,E,T,D]),(0,l.useEffect)(function(){!T&&E.map(function(e){return e.post.id.substring(0,8)}).includes(P)&&(M(d),A([]),F(!0))},[P,T,E,d]);var R=(0,l.useCallback)((0,r.Z)(s().mark(function e(){var t,n,r,o,i,a,l;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((void 0===(r=(n=null==D||null===(t=D.post)||void 0===t?void 0:t.metadata).lastComment)?0:r)>(void 0===(o=n.lastCommentView)?-1:o))){e.next=5;break}return l=null==D?void 0:D.children[D.children.length-1],e.next=5,c.Z.readComments({postID:null==D||null===(i=D.post)||void 0===i?void 0:i.id,last:null==l||null===(a=l.post)||void 0===a?void 0:a.id});case 5:T||(F(!0),M([].concat((0,J.Z)(_),(0,J.Z)(E))),A([]));case 6:case"end":return e.stop()}},e)})),[D,T,_,E]),z=null!=D&&null!==(n=D.post)&&void 0!==n&&n.metadata.hasNewComments?u.O9.sd1:u.O9.n5;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(eO,{children:_.map(function(e,t){return(0,w.jsx)(eA,{isModal:y,self:i,isMobile:a,group:o,selectedPostID:P,commentItem:e.post,replyItems:void 0,onPostDelete:p,onCommentLinkCopy:m,isAdminOnly:h,level:v,onFilePreviewItemClick:b,newVotes:g,isGroupAdmin:x,rootPost:C,postTree:e,replyToTree:j,followingPost:k,allUsers:O,setCommentReplyShowing:I,onSuccess:R,isBot:Z},"reply-item-".concat(t))})}),!!E.length&&!T&&(0,w.jsxs)(eP,{onClick:R,$color:z,children:[(0,w.jsx)(ev.J,{name:"ArrowBentRight",size:13}),(0,w.jsx)(eD,{children:"View ".concat(E.length," more ").concat(f()("reply",E.length))})]})]})}),eM=(0,l.memo)(e_);function eN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eN(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eA=(0,l.memo)(function(e){var t,n,o=e.group,i=e.self,a=e.isMobile,u=e.selectedPostID,p=e.commentItem,f=e.onPostDelete,h=e.onCommentLinkCopy,v=e.isAdminOnly,b=e.replyItems,g=e.level,x=e.onFilePreviewItemClick,y=e.newVotes,C=e.isGroupAdmin,j=e.rootPost,k=e.postTree,O=e.replyToTree,P=e.isModal,D=e.followingPost,I=e.allUsers,Z=e.lastComment,M=e.setCommentReplyShowing,N=e.onFocusCommentInput,A=e.isBot,B=e.onSuccess,R=e.preview,z=e.highlighted,U=(0,m.bI)("mobileCommentEditContext"),$=U.mobileCommentEditContext,W=U.dispatch,H=(0,L.useRouter)(),q=(0,l.useRef)(),V=(0,l.useRef)(),ee=(0,l.useRef)(p),et=(0,l.useState)(p),en=et[0],es=et[1],el=(0,l.useState)(null),ec=el[0],eu=el[1],ed=(0,l.useState)(!1),ep=ed[0],ef=ed[1],em=(0,l.useState)(!1),ev=em[0],eb=em[1],ey=(0,l.useState)(null),eO=ey[0],eP=ey[1],eD=(0,l.useMemo)(function(){return u&&p.id.startsWith(u)},[p,u]),eI=null==j?void 0:j.metadata.commentsDisabled,eZ=!!(null!=en&&null!==(t=en.metadata)&&void 0!==t&&t.deleted),e_=eZ?null:null==en?void 0:en.user;(0,l.useEffect)(function(){(0,X.isEqual)(ee.current,p)||(es(p),ee.current=p)},[ee,p]),(0,l.useEffect)(function(){(0,X.isEqual)(ec,b)||eu(b)},[ec,b]),(0,l.useEffect)(function(){a&&!R&&(ev?null==M||M(!0):null==M||M(!1))},[a,M,ev,R]);var eN=(0,l.useCallback)(function(e){null!==e&&(eD&&setTimeout(function(){e.scrollIntoView({behavior:"auto",block:"center",inline:"center"})},100),Z&&N())},[eD,Z,N]),eA=(0,l.useCallback)(function(e){var t=e.post;t&&(0,r.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.reportPost({postID:t.id});case 2:W(K.bI,{message:"Reported to group admins"});case 3:case"end":return e.stop()}},e)}))()},[W]),eL=(0,l.useCallback)(function(){ef(!1)},[]),eT=(0,l.useCallback)(function(e){var t=e.post;ef(!1),es(function(e){return eE(eE({},e),t)}),P&&W(K.Ek,function(){return{disableEscape:!1}})},[P,W]),eF=(0,l.useCallback)(function(){if(a){var e,t={post:en,level:g,onPostUpdated:eT,replyToUser:(null==j?void 0:j.id)===(null==en?void 0:en.parentId)?null:null==O||null===(e=O.post)||void 0===e?void 0:e.user,ready:!1};eP(t),null!=$&&$.ready||W(K.oX,t)}},[a,en,g,eT,null==j?void 0:j.id,null==O||null===(n=O.post)||void 0===n?void 0:n.user,null==$?void 0:$.ready,W]),eB=(0,l.useCallback)(function(){a&&eP(null)},[a]),eR=(0,l.useCallback)(function(){a?(W(K.oX,eE(eE({},eO),{},{ready:!0})),W(K.fv,null)):ef(!0)},[a,W,eO]),ez=(0,l.useCallback)(function(){var e,t;eb(!1),null==V||null===(e=V.current)||void 0===e||null===(t=e.expandReplies)||void 0===t||t.call(e),null==B||B(),P&&W(K.Ek,function(){return{disableEscape:!1}})},[P,W,B]),eG=(0,l.useCallback)(function(){eb(!1)},[]),eU=(0,l.useCallback)(function(e,t){es((0,E.Rr)({post:en,oldVote:e,newVote:t}))},[en]),e$=(0,l.useCallback)(function(){if(a){W(K.fv,{user:e_,post:p,parentTree:k,replyToTree:O}),W(K.oX,null);return}eb(!0)},[a,W,e_,p,k,O]),eW=(0,l.useCallback)(function(){(0,S.H5)(H)},[H]),eH=(0,l.useMemo)(function(){var e=[];if(en&&e.push(en.user),ec&&ec.forEach(function(t){t.post.user&&e.push(t.post.user)}),e.length)return(0,X.uniqBy)(e,"id")},[en,ec]),eq=(0,l.useMemo)(function(){return eI?null:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(G.Z,{reason:d.lT.AddPost,onSuccess:e$,onPending:eW,children:function(e){var t=e.onClick;return(0,w.jsx)(ek,{variant:a?"borderless":"borderless-hover",label:"Reply",typography:"t8",onClick:t})}})})},[eW,e$,eI,a]),eV=er({buttonSize:20,buttonIconSize:14,post:en,level:g,group:o,self:i,onReport:eA,onEdit:eR,onDelete:f,onLinkCopy:h,isAdminOnly:v}),eY=(0,l.useMemo)(function(){if(!en)return null;var e,t,n=!!(null!=o&&null!==(e=o.metadata)&&void 0!==e&&e.codeBlocks),r=(0,_.uq)({content:(null==en||null===(t=en.metadata)||void 0===t?void 0:t.content)||"",allowCode:n});return(0,w.jsxs)(eg,{ref:eN,$level:g,$editing:ep,children:[(0,w.jsx)(eC,{children:(0,w.jsx)(F.Z,{showLevel:!0,userPreview:!0,size:g>=2?32:40,user:e_,group:o})}),(0,w.jsx)(ex,{ref:q,children:ep?(0,w.jsx)(T.Z,{post:en,level:g,confirmButtonLabel:"Save",onPostUpdated:eT,onCancel:eL,group:o,hideLabel:!0,showMeta:!1,contentPlaceholder:g>=2?"Your reply":"Your comment"}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(ew,{$bgAnimation:eD&&!z,$highlighted:z,children:[(0,w.jsx)(ea.Z,{post:eE(eE({},en),{},{user:en.user}),group:o,menu:R?void 0:(0,w.jsx)(eo,{options:eV,isComment:!0,onShow:eF,onHide:eB}),hideAvatar:!0}),eZ?(0,w.jsx)(eS,{children:"Comment is deleted"}):(0,w.jsx)(Q.ZP,{textVariant:"t7",showMoreLimit:eD||A?void 0:R?125:500,showMoreHidden:R,marginBottom:8,value:r.blocks}),!eZ&&(0,w.jsx)(ei.Z,{post:en,onItemClick:x,level:g,style:{marginBottom:5}})]}),!R&&(0,w.jsx)(ej,{children:(0,w.jsx)(eh,{post:en,group:o,itemSpacing:a?0:1,onVoteChange:eU,extraSpacing:a?0:1,newVotes:y&&y[en.id],height:"auto",extra:eq})})]})})]})},[en,o,eN,g,ep,e_,eT,eL,eD,eV,eZ,A,x,a,eU,y,eq,R,z,eF,eB]),eJ=(0,l.useMemo)(function(){return!ec||R?null:(0,w.jsx)(eM,{ref:V,isModal:P,self:i,isMobile:a,group:o,selectedPostID:u,replyItems:ec,onPostDelete:f,onCommentLinkCopy:h,isAdminOnly:v,level:g+1,onFilePreviewItemClick:x,newVotes:y,isGroupAdmin:C,rootPost:j,parentTree:k,replyToTree:O,followingPost:D,allUsers:I,setCommentReplyShowing:M,isBot:A})},[ec,I,D,o,v,C,a,P,g,y,h,x,f,k,O,j,u,i,M,A,R]),eX=(0,l.useMemo)(function(){return!ev||R?null:(0,w.jsx)(Y,{commentId:p.id,commentUser:e_,level:g+1,autoFocus:!0,rootPostID:null==j?void 0:j.id,parentTree:k,replyToTree:O,onSuccess:ez,onCancel:eG,group:o,followingPost:D,isModal:P,allUsers:[].concat((0,J.Z)(eH),(0,J.Z)(I))})},[p,ev,I,e_,eH,D,o,eG,ez,P,g,k,O,null==j?void 0:j.id,R]);return(0,w.jsxs)(w.Fragment,{children:[eY,eX,eJ]})}),eL=n(85064);function eT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eT(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eB(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ez(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return eG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eG(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function eG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var eU={rendered:"rendered",unrendered:"unrendered"},e$={top:"top",bottom:"bottom"},eW=(0,l.forwardRef)(function(e,t){var n,o,i,a,u,p,f,h,v,b,g=e.group,x=e.isMobile,y=e.postTree,C=e.onPostDelete,j=e.onCommentLinkCopy,k=e.isAdminOnly,O=e.onFilePreviewItemClick,P=e.newVotes,D=e.isGroupAdmin,I=e.rootPost,_=e.followingPost,M=e.isModal,A=e.allUsers,T=e.selectedPostID,F=e.setCommentReplyShowing,B=e.onListEndLoaded,R=e.onFocusCommentInput,z=e.isBot,G=e.onInitialRender,U=e.setNumComments,$=(0,m.bI)("self","deletedSelfComment","currentGroup","postData"),W=$.self,H=$.deletedSelfComment,q=$.currentGroup,V=$.postData,Y=$.dispatch,X=(0,L.useRouter)(),Q=(0,l.useState)(null),ee=Q[0],et=Q[1],en=(0,l.useState)(!1),er=en[0],eo=en[1],ei=(0,l.useState)(!1),ea=ei[0],es=ei[1],el=(0,l.useState)([]),ec=el[0],eu=el[1],ed=(0,l.useRef)({}),ep=(0,l.useCallback)(function(){return Y(K.bI,{message:"Failed to load comments",severity:"error"})},[Y]),ef=(0,l.useCallback)((n=(0,r.Z)(s().mark(function e(t){var n,r,o,i,a,l,u,d,p,f,m,h,v,b,x,w,C;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.createdAfter,l=t.createdBefore,u=t.tail,d=t.commentPrefixID,e.next=3,d?c.Z.getLinkedPostComments({groupID:g.id,postID:null==y||null===(n=y.post)||void 0===n?void 0:n.id,limit:25,commentPrefixID:d}):c.Z.getPostComments({groupID:g.id,postID:null==y||null===(r=y.post)||void 0===r?void 0:r.id,createdAfter:a,createdBefore:l,limit:25,tail:u});case 3:if(f=(p=e.sent).data,!(m=p.error)){e.next=8;break}return e.abrupt("return",{error:m});case 8:h=null!==(o=null===(i=(0,E.$T)(f.postTree))||void 0===i?void 0:i.children)&&void 0!==o?o:[],v=[],b=ez(h);try{for(b.s();!(x=b.n()).done;)w=x.value,ed.current[w.post.id]||(ed.current[w.post.id]=!0,v.push(w))}catch(e){b.e(e)}finally{b.f()}return C={comments:v},f.first&&(C.first=String(f.first)),f.last&&(C.last=String(f.last)),e.abrupt("return",{data:C});case 16:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[null==g?void 0:g.id,null==y||null===(h=y.post)||void 0===h?void 0:h.id]),em=(0,l.useCallback)((0,r.Z)(s().mark(function e(){var t,n,r,o,i,a,l,c,u,d;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!er){e.next=2;break}return e.abrupt("return");case 2:if(eo(!0),!(null!=y&&null!==(t=y.children)&&void 0!==t&&t.length)){e.next=8;break}return r=(0,E.$T)(y),et([{type:eU.rendered,items:null==r?void 0:r.children}]),es(!0),e.abrupt("return");case 8:return o=T&&!(null!=y&&null!==(n=y.post)&&void 0!==n&&n.id.startsWith(T))?T:void 0,e.next=11,ef({commentPrefixID:o});case 11:if(a=(i=e.sent).data,!(l=i.error)){e.next=26;break}if(!(!o||400!==l.status)){e.next=18;break}return ep(),e.abrupt("return");case 18:return e.next=20,ef({});case 20:if(!(c=e.sent).error){e.next=24;break}return ep(),e.abrupt("return");case 24:a=c.data,o=void 0;case 26:a.comments.length||a.first||a.last?o?(u=[{type:eU.rendered,items:a.comments}],a.first&&u.unshift({type:eU.unrendered,end:a.first}),a.last&&u.push({type:eU.unrendered,start:a.last}),et(u)):(d=[{type:eU.rendered,items:a.comments}],a.last&&d.push({type:eU.unrendered,start:a.last}),et(d)):et([{type:eU.rendered,items:[]}]),o&&!function(e,t){if(!(null!=e&&e.length))return!1;var n,r=ez(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.post.id.startsWith(t))return!(null!==(a=o.post)&&void 0!==a&&null!==(a=a.metadata)&&void 0!==a&&a.deleted);var i,a,s,l=ez(null!==(i=o.children)&&void 0!==i?i:[]);try{for(l.s();!(s=l.n()).done;){var c,u=s.value;if(u.post.id.startsWith(t))return!(null!==(c=u.post)&&void 0!==c&&null!==(c=c.metadata)&&void 0!==c&&c.deleted)}}catch(e){l.e(e)}finally{l.f()}}}catch(e){r.e(e)}finally{r.f()}return!1}(a.comments,o)&&Y(K.bI,{message:"This comment has been deleted",severity:"error"}),es(!0);case 29:case"end":return e.stop()}},e)})),[y,er,ef,T,Y,ep]),eh=(0,l.useCallback)(function(e){eu(ec.filter(function(t){return t!==e}))},[ec]),eg=(0,l.useCallback)((o=(0,r.Z)(s().mark(function e(t,n){var r,o,i,a,l,c,u;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(-1===(r=ee.indexOf(t))||t.type===eU.rendered||ec.includes(t))){e.next=3;break}return e.abrupt("return");case 3:if(eu(ec.concat(t)),o=(0,J.Z)(ee),n!==e$.top){e.next=20;break}return e.next=8,ef({createdAfter:t.start});case 8:if(a=(i=e.sent).data,!i.error){e.next=15;break}return ep(),eh(t),e.abrupt("return");case 15:return o[r-1]=eR(eR({},o[r-1]),{},{items:o[r-1].items.concat(a.comments)}),a.last&&(!t.end||a.last<t.end)?o[r].start=a.last:o[r]={type:eU.rendered,items:[]},et(o),eh(t),e.abrupt("return");case 20:return l=r===ee.length-1,e.next=23,l?ef({tail:!0}):ef({createdBefore:t.end});case 23:if(u=(c=e.sent).data,!c.error){e.next=30;break}return ep(),eh(t),e.abrupt("return");case 30:l?o.push({type:eU.rendered,items:u.comments}):o[r+1]=eR(eR({},o[r+1]),{},{items:u.comments.concat(o[r+1].items)}),u.last&&(!t.start||u.last>t.start)?o[r].end=u.last:o[r]={type:eU.rendered,items:[]},et(o),eh(t);case 34:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)}),[ee,ef,ec,eh,ep]),ex=(0,l.useCallback)(function(e,t){if(e){var n=e?eF(eF({},e),{},{id:e.postId,metadata:{content:null==e?void 0:e.content,attachments:null==e?void 0:e.attachments,attachmentsData:null==e?void 0:e.attachmentsData,videoLinks:null==e?void 0:e.videoLinks,videoLinksData:null==e?void 0:e.videoLinksData},user:eF(eF({},null!==(a=null==e?void 0:e.user)&&void 0!==a?a:{}),{},{metadata:eF(eF({},null!==(s=null==e?void 0:e.user)&&void 0!==s?s:{}),{},{spData:null==e||null===(l=e.user)||void 0===l?void 0:l.spData,pictureProfile:null==e||null===(c=e.user)||void 0===c?void 0:c.profileImage})})}):{},r={post:n},o=(0,J.Z)(ee);if(e.parentId===(null==y||null===(u=y.post)||void 0===u?void 0:u.id)){var i=null==ee?void 0:ee[ee.length-1];(null==i?void 0:i.type)===eU.unrendered?o.push({type:eU.rendered,items:[r]}):(null==i?void 0:i.type)===eU.rendered&&i.items.push(r)}else{var a,s,l,c,u,d,p=!1,f=ez(o);try{for(f.s();!(d=f.n()).done;){var m=d.value;if(m.type!==eU.unrendered){var h,v=ez(m.items);try{for(v.s();!(h=v.n()).done;){var b=h.value;if(e.parentId===b.post.id){b.children=b.children?b.children.concat(r):[r],b.post.metadata.hasNewComments=1,p=!0;break}}}catch(e){v.e(e)}finally{v.f()}if(p)break}}}catch(e){f.e(e)}finally{f.f()}if(!p)return}t&&(M?Y(K.aK,eR(eR({},V),{},{selectedPostID:n.id})):(0,S.cq)(X,(0,N.P_)({groupName:q.name,postName:y.post.name,selectedPostID:n.id}))),et(o)}},[ee,q.name,Y,M,V,null===(v=y.post)||void 0===v?void 0:v.id,y.post.name,X]),ey=(0,l.useCallback)((i=(0,r.Z)(s().mark(function e(t){var n,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ea&&null!=t&&t.newComment&&(r=(null===(n=t.newComment)||void 0===n?void 0:n.userId)===(null==W?void 0:W.id),ex(t.newComment,r));case 1:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),[ex,ea,null==W?void 0:W.id]);(0,l.useEffect)(function(){(!M||null!=y&&y.initialFetchDone)&&em()},[M,null==y?void 0:y.initialFetchDone,em]),a=null==y||null===(b=y.post)||void 0===b?void 0:b.id,p=(u=(0,m.bI)("self","currentGroup")).self,f=u.currentGroup,(0,l.useEffect)(function(){if((0,d.Rj)({member:null==p?void 0:p.member}))return(0,Z.Ld)([(0,Z.lF)(null==f?void 0:f.id,a)],ey)},[ey,null==f?void 0:f.id,a,null==p?void 0:p.member]),(0,l.useEffect)(function(){if(ea){var e=null==ee?void 0:ee[ee.length-1];(null==e?void 0:e.type)===eU.unrendered?eg(e,e$.bottom):(null==e?void 0:e.type)===eU.rendered&&(null==B||B())}},[ea,eg,ee,B]),(0,l.useEffect)(function(){if(ea&&H){var e,t=(0,J.Z)(ee),n=!1,r=ez(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(o.type!==eU.unrendered){for(var i=0;i<o.items.length;i++){var a=o.items[i];if(H.post.id===a.post.id){if(null!==(c=a.children)&&void 0!==c&&c.length){var s=(0,J.Z)(o.items);o.items[i].post=eR(eR({},a.post),{},{metadata:eR(eR({},a.post.metadata),{},{deleted:1})}),o.items=s}else o.items=o.items.filter(function(e){return e.post.id!==H.post.id});n=!0;break}var l,c,u,d=ez(null!==(l=a.children)&&void 0!==l?l:[]);try{for(d.s();!(u=d.n()).done;){var p=u.value;if(H.post.id===p.post.id){a.children=a.children.filter(function(e){return e.post.id!==H.post.id}),n=!0;break}}}catch(e){d.e(e)}finally{d.f()}if(n)break}if(n)break}}}catch(e){r.e(e)}finally{r.f()}n&&(Y(K.z$,null),et(t),Y(K.bI,{message:"Comment deleted"}),U(function(e){return e-1}),T&&H.post.id.startsWith(T)&&(M?Y(K.aK,eR(eR({},V),{},{selectedPostID:null})):(0,S.cq)(X,(0,N.P_)({groupName:q.name,postName:y.post.name,selectedPostID:void 0}))))}},[ea,ee,Y,M,X,q,y,V,H,T,U]),(0,l.useEffect)(function(){ea&&(null==G||G())},[ea,G]),(0,l.useImperativeHandle)(t,function(){return{loadLastChunk:function(){var e=null==ee?void 0:ee[ee.length-1];(null==e?void 0:e.type)===eU.unrendered&&eg(e,e$.bottom)}}});var ew=(0,l.useCallback)(function(e){var t,n=null==ee?void 0:ee[ee.length-1],r=(null==n?void 0:n.type)===eU.rendered&&(null===(t=n.items[n.items.length-1])||void 0===t?void 0:t.post.id)===e.id;return(0,w.jsx)(eA,{isModal:M,self:W,isMobile:x,group:g,selectedPostID:T,commentItem:e.post,replyItems:e.children,onPostDelete:C,onCommentLinkCopy:j,isAdminOnly:k,level:1,onFilePreviewItemClick:O,newVotes:P,isGroupAdmin:D,rootPost:I,postTree:e,replyToTree:e,followingPost:_,allUsers:A,lastComment:r,setCommentReplyShowing:F,onFocusCommentInput:R,isBot:z},"comment-item-".concat(e.post.id))},[A,ee,_,g,k,z,D,x,M,P,j,O,R,C,I,T,W,F]),eC=(0,l.useCallback)(function(e,t,n){if(e.type===eU.rendered)return(0,w.jsx)("div",{children:e.items.map(ew)},t);if(ec.includes(e))return(0,w.jsx)(eI,{children:(0,w.jsx)(eL.D,{})},"loading-comments-".concat(t));var r,o=(null===(r=n[t-1])||void 0===r?void 0:r.type)===eU.rendered?e$.top:e$.bottom;return(0,w.jsxs)(eI,{onClick:function(){return eg(e,o)},children:["Show more comments",(0,w.jsx)(ev.J,{name:o===e$.top?"ArrowDown":"ArrowUp",style:{width:12}})]},"load-comments-".concat(t))},[ew,ec,eg]);return ea?null!=ee&&ee.length?(0,w.jsx)(eb,{children:ee.map(eC)}):null:(0,w.jsx)(eZ,{children:(0,w.jsx)(eL.D,{})})}),eH=(0,l.memo)(eW);function eq(e){var t=e.width,n=e.height,r=e.fill,o=e.style;return(0,w.jsx)("svg",{width:t,height:n,viewBox:"0 0 26 26",fill:r,style:o,xmlns:"http://www.w3.org/2000/svg",children:(0,w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.9648 9.68903C15.8223 10.1817 15.488 10.6744 14.7489 11.1671C15.5435 11.1671 16.2399 11.186 16.8411 11.2477C19.3606 11.5061 20.2104 12.5163 19.6229 16.0412C19.0357 19.5644 17.8967 19.4458 14.6503 19.1075C14.4421 19.0858 14.2249 19.0632 13.999 19.0406C11.641 18.8048 10.2498 18.6657 10.2498 15.6663C10.2498 14.434 10.3127 13.4317 10.5377 12.6669C10.6122 12.4135 10.7045 12.1862 10.8183 11.9852C11.0394 11.5941 11.3415 11.3026 11.751 11.1126L11.1197 9.75222C10.5579 10.0129 10.1278 10.3796 9.80037 10.81C9.62325 10.4833 9.3554 10.1696 8.94831 9.94989C8.43271 9.67164 7.89109 9.66744 7.62527 9.66744C7.35944 9.66744 6.8179 9.67164 6.3023 9.94989C5.68217 10.2846 5.38531 10.8371 5.23984 11.322C5.13216 11.6997 5.06182 12.2411 5.03333 12.8079C5.00731 13.3503 5.00086 14.0506 5.00078 14.9164C5.00086 15.7822 5.00731 16.4826 5.03333 17.0249C5.06182 17.5918 5.13216 18.1331 5.23984 18.5108C5.38531 18.9958 5.68217 19.5483 6.3023 19.8829C6.8179 20.1612 7.35944 20.1654 7.62527 20.1654C7.89109 20.1654 8.43271 20.1612 8.94831 19.8829C9.33178 19.676 9.59168 19.3856 9.76857 19.0795C9.94794 19.2814 10.1553 19.4649 10.3939 19.6279C11.3624 20.2899 12.6548 20.4161 13.6612 20.5143C13.7252 20.5205 13.7882 20.5267 13.8498 20.5329C14.0621 20.554 14.2691 20.5756 14.4706 20.5965L14.4715 20.5966C15.1453 20.6666 15.7581 20.7303 16.3045 20.7555C17.0123 20.7872 17.7923 20.7654 18.5176 20.4885C20.2115 19.8418 20.7851 18.1904 21.1022 16.2878C21.4643 14.1152 21.4592 12.0805 19.9749 10.8227C19.2817 10.2354 18.4261 9.97089 17.5952 9.83476C17.5501 9.82754 17.5045 9.82062 17.4583 9.81396C17.5284 9.48069 17.5593 9.16458 17.5608 8.91759C17.5608 7.16833 16.538 6.1176 15.6334 5.45694C15.2284 5.16111 14.6927 4.94619 14.0832 5.01187C13.474 5.07752 13.0122 5.39991 12.7132 5.75257C12.1566 6.4093 12.0138 7.30553 12.1477 8.05625C12.2112 8.41206 12.2206 8.6623 12.1436 8.87717C12.0882 9.03169 11.9123 9.38437 11.1197 9.75222L11.751 11.1126C13.9186 10.1066 13.7705 8.61339 13.6241 7.79281C13.4777 6.97223 14.0172 6.13366 14.7489 6.66803C15.4806 7.2024 16.0611 7.86126 16.0611 8.91759C16.0611 9.17474 16.0391 9.43188 15.9648 9.68903ZM6.50049 14.9164C6.50049 18.3532 6.59422 18.6657 7.62527 18.6657C8.65631 18.6657 8.75005 18.3532 8.75005 14.9164C8.75005 11.4796 8.65631 11.1671 7.62527 11.1671C6.59422 11.1671 6.50049 11.4796 6.50049 14.9164Z"})})}function eV(e){var t=e.width,n=e.height,r=e.fill,o=e.style;return(0,w.jsxs)("svg",{width:t,height:n,viewBox:"0 0 26 26",fill:r,style:o,xmlns:"http://www.w3.org/2000/svg",children:[(0,w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.1201 9.75315C10.5582 10.0139 10.128 10.3807 9.80052 10.8112C9.62337 10.4843 9.35548 10.1706 8.9483 9.95086C8.4326 9.67256 7.89087 9.66836 7.625 9.66836C7.35913 9.66836 6.81748 9.67256 6.30177 9.95086C5.68153 10.2856 5.3846 10.8382 5.2391 11.3233C5.1314 11.701 5.06105 12.2425 5.03255 12.8094C5.00652 13.3519 5.00007 14.0523 5 14.9184C5.00007 15.7843 5.00652 16.4848 5.03255 17.0273C5.06105 17.5942 5.1314 18.1357 5.2391 18.5134C5.3846 18.9985 5.68153 19.5511 6.30177 19.8858C6.81748 20.1642 7.35913 20.1684 7.625 20.1684C7.89087 20.1684 8.4326 20.1642 8.9483 19.8858C9.33185 19.6788 9.5918 19.3884 9.76872 19.0823C9.94812 19.2842 10.1555 19.4677 10.3941 19.6308C10.4525 19.6707 10.5121 19.7087 10.5727 19.7448V19.7585H10.596C11.5373 20.3099 12.724 20.4258 13.6621 20.5173C13.7262 20.5236 13.7892 20.5297 13.8508 20.5359C14.0555 20.5563 14.2553 20.5771 14.45 20.5973L14.4512 20.5974L14.4781 20.6002C15.1496 20.6699 15.7612 20.7334 16.306 20.7586C17.0138 20.7903 17.7941 20.7685 18.5194 20.4915C20.2137 19.8447 20.7874 18.193 21.1046 16.29C21.4668 14.117 21.4617 12.0819 19.977 10.8238C19.2838 10.2364 18.428 9.97187 17.5968 9.83571C17.5518 9.82849 17.5061 9.82157 17.4599 9.81491C17.5301 9.48157 17.561 9.1654 17.5625 8.91836C17.5625 7.16876 16.5395 6.11782 15.6347 5.45703C15.2296 5.16114 14.6938 4.94618 14.0842 5.01188C13.4749 5.07753 13.013 5.39999 12.714 5.75271C12.1572 6.40958 12.0144 7.30599 12.1483 8.05685C12.2119 8.41273 12.2212 8.66301 12.1442 8.87793C12.0888 9.03248 11.9128 9.38523 11.1201 9.75315ZM8.57273 11.7585V11.7494L8.57549 11.7585H8.57273Z",fill:u.O9.p3}),(0,w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.9648 9.68903C15.8223 10.1817 15.488 10.6744 14.7489 11.1671C15.5435 11.1671 16.2399 11.186 16.8411 11.2477C19.3606 11.5061 20.2104 12.5163 19.6229 16.0412C19.0357 19.5644 17.8967 19.4458 14.6503 19.1075C14.4421 19.0858 14.2249 19.0632 13.999 19.0406C11.641 18.8048 10.2498 18.6657 10.2498 15.6663C10.2498 14.434 10.3127 13.4317 10.5377 12.6669C10.6122 12.4135 10.7045 12.1862 10.8183 11.9852C11.0394 11.5941 11.3415 11.3026 11.751 11.1126L11.1197 9.75222C10.5579 10.0129 10.1278 10.3796 9.80037 10.81C9.62325 10.4833 9.3554 10.1696 8.94831 9.94989C8.43271 9.67164 7.89109 9.66744 7.62527 9.66744C7.35944 9.66744 6.8179 9.67164 6.3023 9.94989C5.68217 10.2846 5.38531 10.8371 5.23984 11.322C5.13216 11.6997 5.06182 12.2411 5.03333 12.8079C5.00731 13.3503 5.00086 14.0506 5.00078 14.9164C5.00086 15.7822 5.00731 16.4826 5.03333 17.0249C5.06182 17.5918 5.13216 18.1331 5.23984 18.5108C5.38531 18.9958 5.68217 19.5483 6.3023 19.8829C6.8179 20.1612 7.35944 20.1654 7.62527 20.1654C7.89109 20.1654 8.43271 20.1612 8.94831 19.8829C9.33178 19.676 9.59168 19.3856 9.76857 19.0795C9.94794 19.2814 10.1553 19.4649 10.3939 19.6279C11.3624 20.2899 12.6548 20.4161 13.6612 20.5143C13.7252 20.5205 13.7882 20.5267 13.8498 20.5329C14.0621 20.554 14.2691 20.5756 14.4706 20.5965L14.4715 20.5966C15.1453 20.6666 15.7581 20.7303 16.3045 20.7555C17.0123 20.7872 17.7923 20.7654 18.5176 20.4885C20.2115 19.8418 20.7851 18.1904 21.1022 16.2878C21.4643 14.1152 21.4592 12.0805 19.9749 10.8227C19.2817 10.2354 18.4261 9.97089 17.5952 9.83476C17.5501 9.82754 17.5045 9.82062 17.4583 9.81396C17.5284 9.48069 17.5593 9.16458 17.5608 8.91759C17.5608 7.16833 16.538 6.1176 15.6334 5.45694C15.2284 5.16111 14.6927 4.94619 14.0832 5.01187C13.474 5.07752 13.0122 5.39991 12.7132 5.75257C12.1566 6.4093 12.0138 7.30553 12.1477 8.05625C12.2112 8.41206 12.2206 8.6623 12.1436 8.87717C12.0882 9.03169 11.9123 9.38437 11.1197 9.75222L11.751 11.1126C13.9186 10.1066 13.7705 8.61339 13.6241 7.79281C13.4777 6.97223 14.0172 6.13366 14.7489 6.66803C15.4806 7.2024 16.0611 7.86126 16.0611 8.91759C16.0611 9.17474 16.0391 9.43188 15.9648 9.68903ZM6.50049 14.9164C6.50049 18.3532 6.59422 18.6657 7.62527 18.6657C8.65631 18.6657 8.75005 18.3532 8.75005 14.9164C8.75005 11.4796 8.65631 11.1671 7.62527 11.1671C6.59422 11.1671 6.50049 11.4796 6.50049 14.9164Z",fill:u.O9.fgPrimary})]})}eq.defaultProps={width:26,height:26,fill:u.O9.n5},eV.defaultProps={width:26,height:26,fill:u.O9.n5};var eY=(0,h.ZP)(es.x).withConfig({displayName:"styled__ReactionWrapper",componentId:"sc-ne2b7k-0"})(["height:40px;border:1px solid "," !important;border-radius:6px;background:",";align-items:center;"],u.O9.n3,u.O9.n1),eJ=(0,h.iv)(["&:hover{color:",";}&:hover svg{fill:",";}"],u.O9.n7,u.O9.n7),eX=h.ZP.button.withConfig({displayName:"styled__LikeButton",componentId:"sc-ne2b7k-1"})(["background:none;display:flex;justify-content:center;align-items:center;height:30px;width:80px;border:none;color:",";cursor:pointer;&:focus{outline:none;}& svg{fill:",";}",""],u.O9.n5,u.O9.n5,function(e){return!e.theme.isMobile&&eJ}),eK=h.ZP.div.withConfig({displayName:"styled__LikeCount",componentId:"sc-ne2b7k-2"})(["border-width:0px 0px 0px 1px;border-color:",";border-style:solid;height:40px;padding:0px 11px;display:flex;align-items:center;cursor:pointer;color:",";&:hover{text-decoration:underline;color:"," !important;}",""],u.O9.n3,u.O9.n5,u.O9.n7,ec.c.t8),eQ=h.ZP.div.withConfig({displayName:"styled__LikeLabel",componentId:"sc-ne2b7k-3"})(["color:",";margin-left:4px;padding-top:1px;",""],function(e){return e.$upvoted?u.O9.n7:"inherit"},ec.c.t8),e0=(0,l.memo)(function(e){var t,n=e.group,o=e.post,i=e.onVoteChange,a=e.newUpvotes,u=void 0===a?0:a,p=(0,L.useRouter)(),f=(0,m.bI)().dispatch,h=parseInt(o.metadata.upvotes)||0,v=(null==o||null===(t=o.metadata)||void 0===t?void 0:t.myVote)||"",b=(0,l.useCallback)((0,r.Z)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="up"===v?"":"up",e.next=3,c.Z.updatePostVote({postID:o.id,oldVote:v,newVote:t});case 3:if(!e.sent.error){e.next=7;break}return e.abrupt("return");case 7:i&&i(v,t);case 8:case"end":return e.stop()}},e)})),[v,i,o.id]),g=(0,l.useCallback)(function(){return(0,S.H5)(p)},[p]),x=(0,l.useCallback)(function(){f(K.Qg,function(){return{postLikeModalProps:{post:o,group:n}}})},[f,o,n]);return(0,w.jsxs)(eY,{children:[(0,w.jsx)(G.Z,{reason:d.lT.Upvote,onSuccess:b,onPending:g,showSignUp:!0,children:function(e){var t=e.onClick;return(0,w.jsxs)(eX,{type:"button",onClick:t,children:[(0,w.jsx)("div",{style:{height:24,width:24},children:"up"===v?(0,w.jsx)(eV,{fill:"inherit",height:24,width:24}):(0,w.jsx)(eq,{fill:"inherit",height:24,width:24})}),(0,w.jsx)(eQ,{$upvoted:"up"===v,children:"up"===v?"Liked":"Like"})]})}}),(0,w.jsx)(el.I,{postID:o.id,upvotes:h,newUpvotes:u,children:(0,w.jsx)(eK,{onClick:x,style:{cursor:"pointer"},children:(0,E.TN)(h+u)})})]})}),e1=n(63136),e2=n(70299),e9=h.ZP.span.withConfig({displayName:"styled__TitleText",componentId:"sc-w05228-0"})(["& em{","}"],e2.LA);function e3(e){var t,n=e.post,r=e.titleHl,o=e.underline,i=e.disableLink,a=(0,m.bI)("currentGroup").currentGroup,s=e.group||a,l=r?(0,w.jsx)(e9,{dangerouslySetInnerHTML:{__html:r}}):(0,w.jsx)(e9,{children:(null==n||null===(t=n.metadata)||void 0===t?void 0:t.title)||""});return n?i||!s?l:(0,w.jsx)(e1.Z,{postName:n.name,groupName:s.name,underline:o,children:l}):null}e3.defaultProps={disableLink:!1,underline:"none"};var e5=(0,l.memo)(e3),e6=n(67256),e4=n(76958),e8=n(88325),e7=n(60678),te=n(70131),tt=n(89747),tn=n(8662),tr=n(20338),to=n(16531),ti=h.ZP.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-l2urkw-0"})(["max-height:500px;max-width:100%;display:flex;flex-direction:column;overflow:hidden;border-radius:10px;"]),ta=h.ZP.div.withConfig({displayName:"styled__Header",componentId:"sc-l2urkw-1"})(["padding:0px 8px 0px 16px;height:56px;box-shadow:rgb(0 0 0 / 10%) 0px 3px 2px -2px;border-bottom:1px solid ",";display:flex;justify-content:space-between;align-items:center;flex-shrink:0;"],function(e){return e.theme.isDarkTheme?u.O9.n3:"rgb(228, 228, 228)"}),ts=h.ZP.div.withConfig({displayName:"styled__Users",componentId:"sc-l2urkw-2"})(["overflow:auto;height:calc(100vh - 82px);"]),tl=h.ZP.div.withConfig({displayName:"styled__UserWrapper",componentId:"sc-l2urkw-3"})(["padding:13px 16px;display:flex;align-items:center;> div{&:last-child{margin-left:9px;flex:1;min-width:0px;}}"]),tc=h.ZP.div.withConfig({displayName:"styled__ButtonContainer",componentId:"sc-l2urkw-4"})(["width:100%;display:flex;align-items:center;padding:16px 13px;"]),tu=h.ZP.div.withConfig({displayName:"styled__Bio",componentId:"sc-l2urkw-5"})([""," ",""],ec.c.t9,ec.c.ellipsis),td=h.ZP.div.withConfig({displayName:"styled__TotalVotes",componentId:"sc-l2urkw-6"})(["",""],ec.c.t6),tp=(0,l.memo)(function(e){var t=e.onClose,n=e.pollId,o=e.optionIdx,i=e.totalVotes,a=e.group,u=(0,l.useState)([]),d=u[0],p=u[1],h=(0,l.useState)(0),b=h[0],g=h[1],x=(0,m.bI)("isMobile").isMobile,y=(0,l.useCallback)((0,r.Z)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.getPollVotes({pollId:n,optionIdx:o,offset:b,limit:30});case 2:(t=e.sent.data).hasMore?g(b+30):g(0),p(function(e){return[].concat((0,J.Z)(e),(0,J.Z)(t.users))});case 6:case"end":return e.stop()}},e)})),[n,o,b]);(0,l.useEffect)(function(){(0,r.Z)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.getPollVotes({pollId:n,optionIdx:o,offset:0,limit:30});case 2:(t=e.sent.data).hasMore&&g(30),p((null==t?void 0:t.users)||[]);case 6:case"end":return e.stop()}},e)}))()},[o,n]);var C=(0,l.useCallback)(function(e,t){var n;return(0,w.jsxs)(tl,{children:[(0,w.jsx)(F.Z,{user:e,size:40,group:a,userPreview:!0}),(0,w.jsxs)("div",{children:[(0,w.jsx)(e4.Z,{user:e,typographyVariant:"t5",group:a,userPreview:!0}),(0,w.jsx)(tu,{children:null==e||null===(n=e.metadata)||void 0===n?void 0:n.bio})]})]},t)},[a]),j=(0,l.useMemo)(function(){return(0,w.jsxs)(ti,{children:[(0,w.jsxs)(ta,{children:[(0,w.jsx)(td,{children:f()("vote",i,!0)}),(0,w.jsx)(v.z,{variant:"icon-borderless",icon:"Close",onClick:t,iconSize:16.66})]}),(0,w.jsxs)(ts,{children:[d.map(C),!!b&&(0,w.jsx)(tc,{children:(0,w.jsx)(v.z,{onClick:y,variant:"secondary",label:"Load More",style:{width:x?"100%":"auto"}})})]})]})},[t,d,i,y,b,x,C]);return(0,w.jsx)(to.u_,{onClose:t,open:!0,wrapperStyle:{padding:0},size:"small",children:j})}),tf=h.ZP.div.withConfig({displayName:"styled__LoadingOverlay",componentId:"sc-84imhz-0"})(["position:absolute;top:0px;left:0px;height:100%;width:100%;z-index:2;opacity:0.2;background-color:",";"],u.O9.n1),tm=h.ZP.div.withConfig({displayName:"styled__PollWrapper",componentId:"sc-84imhz-1"})(["display:flex;flex-direction:column;position:relative;margin-top:24px;"]),th=h.ZP.div.withConfig({displayName:"styled__ConfirmModalWrapper",componentId:"sc-84imhz-2"})(["& > div:first-child{width:100%;}"]),tv=h.ZP.div.withConfig({displayName:"styled__PollFooter",componentId:"sc-84imhz-3"})(["display:flex;align-items:center;margin-top:8px;white-space:pre;color:",";",""],u.O9.n5,ec.c.t10),tb=h.ZP.div.withConfig({displayName:"styled__PollOption",componentId:"sc-84imhz-4"})(["display:flex;align-items:center;margin-bottom:8px;cursor:pointer;user-select:none;"]),tg=h.ZP.div.withConfig({displayName:"styled__PollVoteCount",componentId:"sc-84imhz-5"})(["color:",";",""],u.O9.n5,ec.c.t10),tx=(0,h.iv)(["position:absolute;left:",";"],function(e){var t=e.$mobileLeft;return t&&"".concat(t,"px")}),ty=h.ZP.div.withConfig({displayName:"styled__PollOptionVoteCount",componentId:"sc-84imhz-6"})(["line-height:1 !important;"," ",""],ec.c.t10,function(e){return e.theme.isMobile&&tx}),tw=h.ZP.div.withConfig({displayName:"styled__PollOptionContent",componentId:"sc-84imhz-7"})(["display:flex;width:100%;justify-content:space-between;min-height:50px;overflow:hidden;align-items:center;padding:14px;border:1px solid ",";border-radius:4px;flex:1;position:relative;",""],u.O9.n3,ec.c.t7),tC=(0,h.iv)(["display:flex;align-items:center;justify-content:center;border:2px solid ",";> div{height:12px;width:12px;background-color:",";border-radius:50%;}"],u.O9.sd1,u.O9.sd1),tj=h.ZP.div.withConfig({displayName:"styled__PollCircle",componentId:"sc-84imhz-8"})(["height:24px;width:24px;border-radius:50%;border:2px solid ",";flex-shrink:0;margin-right:","px;",""],u.O9.n5,function(e){return e.theme.isMobile?16:24},function(e){return e.$voted&&tC}),tk=(0,h.iv)(["flex-direction:column;align-items:flex-start;"]),tO=h.ZP.div.withConfig({displayName:"styled__VotedPollOptionContent",componentId:"sc-84imhz-9"})(["display:flex;align-items:center;justify-content:space-between;width:100%;padding-right:100px;> *{z-index:1;}",""],function(e){return e.theme.isMobile&&tk}),tP=h.ZP.div.withConfig({displayName:"styled__VotedPollOptionLabel",componentId:"sc-84imhz-10"})(["",""],ec.c.t7),tD=h.ZP.div.withConfig({displayName:"styled__ViewPollResults",componentId:"sc-84imhz-11"})(["height:20px;color:",";"," &:hover{text-decoration:underline;cursor:pointer;}"],u.O9.n5,ec.c.t10),tI=h.ZP.div.withConfig({displayName:"styled__VotePercentageBg",componentId:"sc-84imhz-12"})(["height:100%;width:100%;background-color:",";transform-origin:0px 0px;transform:scaleX(",");position:absolute;top:0px;left:0px;z-index:0;transition:background-color 1000ms ease,transform 400ms ease;animation-delay:2ms;"],function(e){var t=e.$selected,n=e.theme;return t?n.isDarkTheme?"".concat(u.O9.p2,"26"):u.O9.p2:n.isDarkTheme?u.O9.n3:u.O9.n2},function(e){return e.$percentage}),tZ=(0,h.iv)(["flex-direction:row;align-items:center;margin-top:8px;> p{flex:1;text-align:right;}"]),tS=(0,h.iv)(["position:absolute;right:13px;top:0px;height:100%;align-items:flex-end;justify-content:center;"]),t_=h.ZP.div.withConfig({displayName:"styled__VoteCount",componentId:"sc-84imhz-13"})(["display:flex;flex-direction:column;align-items:flex-end;flex-shrink:0;> p{line-height:1 !important;}",""],function(e){return e.theme.isMobile?tZ:tS}),tM=(0,h.iv)(["right:0px;"]),tN=(0,h.iv)(["left:0px;"]),tE=h.ZP.div.withConfig({displayName:"styled__VotedUser",componentId:"sc-84imhz-14"})(["position:absolute;top:0px;transition:transform 200ms ease;",""],function(e){return e.theme.isMobile?tN:tM}),tA=h.ZP.div.withConfig({displayName:"styled__VotedUsers",componentId:"sc-84imhz-15"})(["display:flex;position:relative;margin-bottom:4px;height:25px;> div{> div{> div{> span{border:1px solid ",";}}}}"],u.O9.n1);function tL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tL(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tF=function(e){var t=e.shift,n=e.isMobile;return{entering:{transform:n?"translateX(-60px)":"translateX(60px)"},entered:{transform:n?"translateX(".concat(t,"px)"):"translateX(-".concat(t,"px)")},exiting:{transform:n?"translateX(-60px)":"translateX(60px)"},exited:{transform:n?"translateX(-60px)":"translateX(60px)"}}},tB=(0,l.memo)(function(e){var t,n,o,i=e.pollData,a=e.group,u=e.post,p=(0,l.useState)(i),h=p[0],v=p[1],b=(0,l.useState)(!1),g=b[0],x=b[1],y=(0,l.useState)(-1),C=y[0],j=y[1],k=(0,m.bI)("isMobile","self"),O=k.isMobile,P=k.self,D=(0,l.useState)(!1),I=D[0],Z=D[1],_=h.entries,M=h.id,N=h.selfVote,A=h.totalVotes,T=-1!==N,B=(0,l.useState)(!T),R=B[0],z=B[1],U=(0,L.useRouter)(),$=(0,l.useRef)(!1),W=(0,d.TR)({user:P,member:null==P?void 0:P.member,post:u,group:a});(0,l.useEffect)(function(){(T||g)&&setTimeout(function(){z(!1)},0)},[T,g]),(0,l.useEffect)(function(){return $.current=!0,function(){$.current=!1}},[]),(0,l.useEffect)(function(){v(i)},[i]),(0,l.useEffect)(function(){T&&x(!0)},[T]);var H=(0,l.useCallback)(function(e){var t,n=null==e||null===(t=e.entries)||void 0===t?void 0:t.reduce(function(e,t){return e+t.count},0);v(function(t){return tT(tT({id:t.id},e),{},{totalVotes:n})})},[]),q=(0,l.useCallback)((t=(0,r.Z)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.next=3,c.Z.voteOnPoll({pollId:M,optionIdx:t});case 3:if(n=e.sent.data){e.next=9;break}return(0,e6.Lx)({message:"Poll has been deleted",severity:"error"}),e.next=9,(0,S.H5)(U);case 9:H(n),Z(!1);case 11:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[M,H,U]),V=(0,l.useCallback)(function(e,t){var n,o=e.text,i=(n=(0,r.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t);case 2:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,w.jsx)(G.Z,{reason:d.lT.FollowPost,onSuccess:i,children:function(e){var n=e.onClick;return(0,w.jsxs)(tb,{onClick:n,children:[(0,w.jsx)(tj,{}),(0,w.jsx)(tw,{children:o})]},t)}},t)},[q]),Y=(0,l.useCallback)((0,r.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.next=3,c.Z.cancelPollVote({pollId:M});case 3:H(e.sent.data),Z(!1);case 7:case"end":return e.stop()}},e)})),[M,H]),J=(0,l.useCallback)((n=(0,r.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.next=3,c.Z.changePollVote({pollId:M,newIndex:t});case 3:H(e.sent.data),Z(!1);case 7:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[M,H]),X=(0,l.useCallback)(function(e,t){var n,o=e.text,i=e.count,a=e.users,l=R||0===A?0:i/A,c=i?(0,E.W4)(JSON.parse(a)):[],u=N===t,d=(n=(0,r.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t);case 2:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),p=function(){return T?u?Y():d():q(t)};return(0,w.jsx)(th,{children:(0,w.jsx)(tr.s,{header:"".concat(u?"Remove":"Change"," vote?"),content:"Are you sure you want to ".concat(u?"remove":"change"," your vote?"),onConfirm:p,disabled:!T,children:(0,w.jsxs)(tb,{onClick:T?void 0:p,children:[(0,w.jsx)(tj,{$voted:u,children:(0,w.jsx)("div",{})}),(0,w.jsxs)(tw,{children:[(0,w.jsx)(tI,{$selected:u,$percentage:l},t),(0,w.jsxs)(tO,{children:[(0,w.jsx)(tP,{children:o}),i?(0,w.jsxs)(t_,{onClick:function(e){e.stopPropagation(),null!=c&&c.length&&j(t)},children:[(0,w.jsx)(tA,{children:(0,w.jsx)(tt.Z,{children:c.map(function(e,t){var n=(c.length-t-1)*16;return(0,w.jsx)(tn.ZP,{timeout:300,children:function(t){var r=tF({shift:n,isMobile:O});return(0,w.jsx)(tE,{style:r[t],children:(0,w.jsx)(F.Z,{user:e,size:25,disableLink:!0})})}},t)})})}),(0,w.jsx)(ty,{$mobileLeft:43+16*(c.length-1),children:f()("vote",i,!0)})]}):(0,w.jsx)("div",{})]})]})]})})},t)},[J,Y,q,R,O,N,A,T]),K=(0,l.useCallback)(function(){return g||T?_.map(X):_.map(V)},[g,T,_,V,X]),Q=(0,l.useCallback)(function(){j(-1)},[]),ee=(0,l.useCallback)(function(){x(!0)},[]);return(0,w.jsxs)(tm,{children:[K(),(0,w.jsxs)(tv,{children:[(0,w.jsx)(tg,{children:f()("vote",A,!0)}),W&&!T&&!g&&!!A&&(0,w.jsxs)(w.Fragment,{children:[" • ",(0,w.jsx)(tD,{onClick:ee,children:"View results"})]})]}),-1!==C&&(0,w.jsx)(tp,{totalVotes:null===(o=_[C])||void 0===o?void 0:o.count,pollId:M,optionIdx:C,onClose:Q,group:a}),I&&(0,w.jsx)(tf,{})]})}),tR=n(15474),tz=n(54361),tG=n(64597),tU=n(99682),t$=h.ZP.div.withConfig({displayName:"styled__DropdownOption",componentId:"sc-bwvhxj-0"})(["display:flex;align-items:center;"]),tW=h.ZP.div.withConfig({displayName:"styled__DropdownOptionColumn",componentId:"sc-bwvhxj-1"})(["display:flex;flex-direction:column;margin-left:12px;min-width:0;"]),tH=h.ZP.div.withConfig({displayName:"styled__DropdownOptionAsset",componentId:"sc-bwvhxj-2"})(["height:40px;width:40px;border-radius:4px;background-size:cover;flex-shrink:0;"]),tq=h.ZP.div.withConfig({displayName:"styled__DropdownOptionModuleTitle",componentId:"sc-bwvhxj-3"})([""," ",""],ec.c.ellipsis,ec.c.t5),tV=h.ZP.div.withConfig({displayName:"styled__DropdownOptionCourseTitle",componentId:"sc-bwvhxj-4"})([""," ",""],ec.c.ellipsis,ec.c.t11);function tY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tJ=c.Z.debounce(c.Z.searchCourseModules,300),tX=function(e){var t=e.courseTitle,n=e.displayTitle,r=e.videoThumbnail;return(0,w.jsxs)(t$,{children:[(0,w.jsx)(tH,{style:{backgroundImage:r?"url(".concat(r,")"):void 0,visibility:r?"visible":"hidden"}}),(0,w.jsxs)(tW,{children:[(0,w.jsx)(tq,{children:n}),(0,w.jsx)(tV,{children:t})]})]})},tK=(0,l.memo)(function(e){var t,n=e.open,i=e.onClose,a=e.postID,u=(0,l.useState)(""),d=u[0],p=u[1],f=(0,l.useState)([]),h=f[0],v=f[1],b=(0,l.useState)(!1),g=b[0],x=b[1],y=(0,m.bI)("isMobile","currentGroup"),C=y.isMobile,j=y.currentGroup,k=y.dispatch,O=(0,L.useRouter)(),P=(0,l.useCallback)((t=(0,r.Z)(s().mark(function e(t){var n,r,o;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,c.Z.pinPostToModule({postID:a,module:t.id});case 3:if(!(n=e.sent.error)){e.next=11;break}return o="Something went wrong, please try again",(null==n?void 0:n.status)===422&&null!=n&&null!==(r=n.data)&&void 0!==r&&null!==(r=r.fields)&&void 0!==r&&r.length&&(o=n.data.fields[0].error),k(K.bI,{message:o,severity:"error"}),x(!1),e.abrupt("return");case 11:return e.next=13,(0,S.VF)(O,(0,N.rE)({group:{name:j.name},course:{name:t.metadata.courseName},courseModule:t.id}));case 13:k(K.bI,{message:"Post pinned to page"});case 14:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[null==j?void 0:j.name,k,O,a]);return(0,l.useEffect)(function(){(0,r.Z)(s().mark(function e(){var t,n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tJ({query:d||"#",limit:7,groupID:null==j?void 0:j.id});case 2:v((null!==(t=null==(n=e.sent.data)?void 0:n.courses)&&void 0!==t?t:[]).map(function(e){return{label:(0,w.jsx)(tX,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tY(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.metadata)),onClick:function(){return P(e)}}}));case 7:case"end":return e.stop()}},e)}))()},[d,null==j?void 0:j.id,P]),(0,w.jsx)(tG.T,{open:n,disabled:!0,loading:g,header:"Pin to page",confirmLabel:"Pin",cancelButtonVariant:C?"secondary":"borderless",onConfirm:function(){},onCancel:i,onClose:i,children:(0,w.jsx)(tU.F,{options:h,value:d,onChange:p,staticLabel:!0,placeholder:"Search for page",autoFocus:!0})})}),tQ=n(36581),t0=(0,h.F4)(["20%{transform:rotate3d(0,0,1,15deg);}40%{transform:rotate3d(0,0,1,-10deg);}60%{transform:rotate3d(0,0,1,5deg);}80%{transform:rotate3d(0,0,1,-5deg);}to{transform:rotate3d(0,0,1,0deg);}"]),t1=(0,h.iv)(["padding:16px 10px 24px 10px;"]),t2=h.ZP.div.withConfig({displayName:"styled__DisabledCommentsText",componentId:"sc-g7syap-0"})(["padding:16px 32px 24px 32px;color:",";"," ",""],u.O9.n5,ec.c.t5,function(e){return e.theme.isMobile&&t1}),t9=h.ZP.span.withConfig({displayName:"styled__LabelLink",componentId:"sc-g7syap-1"})(["color:",";&:hover{text-decoration:underline;}",""],u.O9.n5,ec.c.t10),t3=h.ZP.div.withConfig({displayName:"styled__HeaderPostTitleWrapper",componentId:"sc-g7syap-2"})(["margin-bottom:0;"," ",""],ec.c.ellipsis,function(e){return e.theme.isMobile?ec.c.t6:ec.c.t4}),t5=h.ZP.div.withConfig({displayName:"styled__PostTitleWrapper",componentId:"sc-g7syap-3"})(["overflow-wrap:break-word;",""],function(e){return e.theme.isMobile?ec.c.t5:ec.c.t1}),t6=h.ZP.div.withConfig({displayName:"styled__CommentsCount",componentId:"sc-g7syap-4"})(["color:",";",""],u.O9.n5,ec.c.t8),t4=h.ZP.div.withConfig({displayName:"styled__DateAndLabelWrapper",componentId:"sc-g7syap-5"})(["color:",";",""],u.O9.n5,ec.c.t11),t8=h.ZP.div.withConfig({displayName:"styled__CommentsSection",componentId:"sc-g7syap-6"})(["position:relative;min-height:48px;padding-bottom:",";"],function(e){var t=e.$commentsDisabled,n=e.theme;return!t&&n.isMobile&&"60px"}),t7=(0,h.ZP)(x.X).withConfig({displayName:"styled__Header",componentId:"sc-g7syap-7"})(["position:fixed;align-items:center;background:",";z-index:1;width:",";left:",";transform:",";height:",";top:",";display:",";",""],u.O9.n1,function(e){var t=e.theme,n=e.$isModal,r=e.$containerWidth;return t.isMobile?"100%":n?"791px":"".concat(r,"px")},function(e){return e.$isModal?"50%":void 0},function(e){return e.$isModal?"translateX(-50%)":void 0},function(e){return e.theme.isMobile?"56px":"66px"},function(e){var t=e.theme;return e.$isModal?0:t.isMobile?"61px":"64px"},function(e){return e.$inView?"none":"flex"},e2.So),ne=(0,h.ZP)(ee.h_).withConfig({displayName:"styled__CategoryDropdownMenu",componentId:"sc-g7syap-8"})(["width:100%;button{width:100%;}"]),nt=h.ZP.div.withConfig({displayName:"styled__PostContentWrapper",componentId:"sc-g7syap-9"})(["background:",";border:",";border-radius:","px;"],function(e){return e.$isModal?"transparent":u.O9.n1},function(e){var t=e.$isModal,n=e.theme;return t||n.isMobile?"none":"1px solid ".concat(u.O9.n3)},function(e){return e.$borderRadius}),nn=(0,h.iv)(["transform-origin:top center;will-change:transform;transform:translateZ(0);"]),nr=(0,h.iv)(["animation:"," 1s forwards linear;"],t0),no=(0,h.iv)(["&:hover{color:",";}"],function(e){var t=e.theme;return e.$following?t.isDarkTheme?u.O9.p2:u.O9.fgPrimary:u.O9.n7}),ni=(0,h.ZP)(v.z).withConfig({displayName:"styled__PostFollowingButton",componentId:"sc-g7syap-10"})(["color:",";",";",";svg{",";",";}",";"],function(e){var t=e.theme;return e.$following?t.isDarkTheme?u.O9.p2:u.O9.fgPrimary:u.O9.n5},function(e){return e.theme.isMobile&&nn},function(e){var t=e.theme,n=e.$animate;return t.isMobile&&n&&nr},function(e){return!e.theme.isMobile&&nn},function(e){var t=e.theme,n=e.$animate;return!t.isMobile&&n&&nr},function(e){return!e.theme.isMobile&&no}),na=h.ZP.div.withConfig({displayName:"styled__PostContent",componentId:"sc-g7syap-11"})(["animation:",";"],function(e){return e.$isSelected?"bg-fade-out ease-in 4s":"none"}),ns=h.ZP.div.withConfig({displayName:"styled__HeaderPostTitleContent",componentId:"sc-g7syap-12"})(["display:flex;flex:1;overflow:hidden;padding:0 8px;align-items:center;cursor:pointer;"]),nl=(0,h.ZP)(x.X).withConfig({displayName:"styled__PostDetailReactionsWrapper",componentId:"sc-g7syap-13"})(["animation:",";border-bottom:1px solid ",";"],function(e){return e.$isSelected?"bg-fade-out ease-in 4s":"none"},u.O9.n3),nc=(0,h.ZP)(ev.J).withConfig({displayName:"styled__ChatIcon",componentId:"sc-g7syap-14"})(["padding:11px;"]),nu=(0,h.ZP)(tQ.s).withConfig({displayName:"styled__MobileStickyCommentWrapper",componentId:"sc-g7syap-15"})(["position:fixed;bottom:","px;width:100%;background-color:",";border-top:1px solid ",";visibility:",";padding:",";z-index:1299;gap:8px;"," > div{width:100%;}"],function(e){var t=e.$bottom;return void 0===t?0:t},u.O9.n1,u.O9.n3,function(e){return e.$visible?"visible":"hidden"},function(e){var t=e.theme,n=e.$bottom;return(void 0===n?0:n)>0?"8px 10px 0 10px":t.isApp?"8px 10px":"8px 10px calc(env(safe-area-inset-bottom) + 8px) 10px"},e2.Wn),nd=h.ZP.div.withConfig({displayName:"styled__MobileStickyCommentReplyTo",componentId:"sc-g7syap-16"})(["display:flex;justify-content:space-between;color:",";gap:8px;div{color:",";}> div:first-child{display:flex;","}"],u.O9.n5,u.O9.n5,ec.c.ellipsis),np=h.ZP.div.withConfig({displayName:"styled__MobileCommentEditInputRow",componentId:"sc-g7syap-17"})(["display:flex;gap:8px;> div:last-child{min-width:0;width:100%;}"]),nf=(0,h.iv)(["margin-bottom:8px;"]),nm=h.ZP.div.withConfig({displayName:"styled__PostDetailHeader",componentId:"sc-g7syap-18"})(["display:flex;gap:8px;justify-content:space-between;margin-bottom:10px;> div:first-child{flex:1;min-width:0px;> div{}}",""],function(e){return e.theme.isMobile&&nf}),nh=(0,h.iv)(["margin-right:8px;"]),nv=h.ZP.div.withConfig({displayName:"styled__PostDetailMeta",componentId:"sc-g7syap-19"})(["display:flex;flex-direction:column;min-width:0px;",""],function(e){return e.theme.isMobile&&nh}),nb=n(42108),ng=n(34811);function nx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ny(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nx(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nw=(0,l.memo)(function(e){var t,n,a,p,h,v,b,g,C,j,k,D,B=e.postTree,R=e.selectedPostID,z=e.isPinned,U=e.msg,$=e.isBot,W=e.isModal,H=e.loading,q=e.poll,V=e.updatePoll,J=e.setUpdatePoll,X=(0,m.bI)("self","currentGroup","previousRouterState","isMobile","mobileReplyContext","mobileCommentEditContext","mobileBottomOffset"),ee=X.dispatch,et=X.self,en=X.currentGroup,ea=X.previousRouterState,el=X.isMobile,ec=X.mobileReplyContext,eu=X.mobileCommentEditContext,ed=X.mobileBottomOffset,ep=(0,l.useState)(B.post),ef=ep[0],em=ep[1],eh=(0,l.useState)(!1),ev=eh[0],eb=eh[1],eg=(0,l.useRef)({}),ex=(0,l.useState)(null),ey=ex[0],ew=ex[1],eC=(0,l.useState)(!1),ej=eC[0],ek=eC[1],eO=(0,l.useState)(0),eP=eO[0],eD=eO[1],eI=(0,L.useRouter)(),eZ=(0,l.useRef)(!1),eS=(0,l.useRef)([]),e_=(0,l.useRef)(null),eM=(0,l.useRef)(!1),eN=(0,l.useRef)(null),eE=(0,l.useRef)(null),eL=(0,l.useRef)(null),eT=(0,l.useRef)(null),eF=(0,l.useRef)(null),eB=(0,l.useRef)(null),eR=!!R&&B.post.id.startsWith(R),ez=(0,l.useState)(!1),eG=ez[0],eU=ez[1],e$=(0,l.useState)(B.followingPost),eW=e$[0],eq=e$[1],eV=(0,l.useState)(!1),eY=eV[0],eJ=eV[1],eX=(0,tz.C1)(),eK=(0,i.Z)(eX,3),eQ=eK[0],e1=eK[1],e2=eK[2],e9=(0,l.useState)(!1),e3=e9[0],tt=e9[1],tn=(0,l.useState)(!1),tr=tn[0],to=tn[1],ti=null==ef?void 0:ef.name,ta=(null==ef?void 0:ef.metadata.labels)||"",ts=ta.length>0?null==en||null===(b=en.labels)||void 0===b?void 0:b.find(function(e){return e.id===ta}):void 0,tl=!ts,tc=(0,l.useState)({}),tu=tc[0],td=tc[1],tp=(0,l.useState)([]),tf=tp[0],tm=tp[1],th=(0,l.useState)(!1),tv=th[0],tb=th[1],tg=(0,l.useState)(ts),tx=tg[0],ty=tg[1],tw=(0,l.useState)(!0),tC=tw[0],tj=tw[1],tk=(0,l.useState)(0),tO=tk[0],tP=tk[1],tD=(0,l.useRef)(),tI=!!(null!=ef&&ef.metadata.contentEdit)||!!(null!=ef&&ef.metadata.titleEdit)||!!(null!=ef&&ef.metadata.attachmentsEdit),tZ=!!(null!=ef&&ef.metadata.commentsDisabled),tS=(0,d.CP)({user:et,member:null==et?void 0:et.member,group:en}),t_=(0,l.useState)(q),tM=t_[0],tN=t_[1],tE=(0,l.useState)(!1),tA=tE[0],tL=tE[1],tT=(0,l.useState)(!1),tF=tT[0],tU=tT[1],t$=(0,l.useState)(!1),tW=t$[0],tH=t$[1],tq=(0,l.useRef)(),tV=(0,l.useRef)(),tY=(0,l.useState)((null==ef||null===(g=ef.metadata)||void 0===g?void 0:g.comments)||0),tJ=tY[0],tX=tY[1],t0=(0,l.useState)(!1),t1=t0[0],nn=t0[1],nr=(0,l.useRef)(!0),no=(0,l.useMemo)(function(){var e;return(0,E.AL)({user:et,group:en,member:null==et?void 0:et.member,labels:null!==(e=null==en?void 0:en.labels)&&void 0!==e?e:[]})},[en,et]);(0,l.useEffect)(function(){em(B.post)},[B]),(0,l.useEffect)(function(){null!=B&&B.initialFetchDone&&(null==eE?void 0:eE.current)===null&&(eE.current=(0,E.XE)(B))},[B,eE]),(0,l.useEffect)(function(){V&&(tN(V),J(null))},[V,J]),(0,l.useEffect)(function(){(0,M.co)({key:M.H0.postRead,value:B.post.id})},[B]),(0,l.useEffect)(function(){if(!ec){tV.current=null;return}if(tV.current!==ec.post.id){var e;null===(e=eL.current)||void 0===e||e.reset()}tV.current=ec.post.id},[ec]);var nf=e3||tr,nh=null==ed||null===(C=ed[P.V.STICKY_COMMENT])||void 0===C?void 0:C.bottom;(0,l.useEffect)(function(){var e,t,n=null!=eu&&eu.ready?eB:eF;if(n.current&&el&&(ee(K.qp,{type:P.V.STICKY_COMMENT,height:null!==(e=null===(t=n.current)||void 0===t?void 0:t.offsetHeight)&&void 0!==e?e:0,hideType:nf?P.V.NAV_BAR:void 0}),"ResizeObserver"in window)){var r=new ResizeObserver(function(e){var t,n=null==e||null===(t=e[0])||void 0===t?void 0:t.borderBoxSize;null!=n&&n.length&&ee(K.qp,{type:P.V.STICKY_COMMENT,height:n[0].blockSize,hideType:nf?P.V.NAV_BAR:void 0})});return r.observe(n.current,{box:"border-box"}),function(){r.disconnect(),ee(K.qp,{type:P.V.STICKY_COMMENT,height:null})}}},[ee,el,null==eu?void 0:eu.ready,nf]),(0,l.useEffect)(function(){if(!el&&!W){var e=function(){var e;tP(null===(e=e_.current)||void 0===e?void 0:e.offsetWidth)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}},[el,W]),(0,l.useEffect)(function(){if(nr.current){nr.current=!1;return}nn(eW)},[eW]);var nx=(0,l.useCallback)(function(e){eZ.current&&e.userId!==et.id&&td(function(t){var n=t[e.postId]||{up:0,down:0},r=e.oldVote,i=e.newVote;return"up"===r&&n.up--,"down"===r&&n.down--,"up"===i&&n.up++,"down"===i&&n.down++,ny(ny({},t),{},(0,o.Z)({},e.postId,n))})},[null==et?void 0:et.id]);(0,l.useEffect)(function(){if((0,d.Rj)({member:null==et?void 0:et.member})){var e=[];(function t(n){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o<2&&null!=n&&null!==(r=n.post)&&void 0!==r&&null!==(r=r.user)&&void 0!==r&&r.id&&e.push(n.post.user),n.children&&n.children.forEach(function(e){return t(e,o+1)})})(B),tm(e)}},[B,null==et?void 0:et.member]),(0,l.useEffect)(function(){!U||eM.current||W||(eM.current=!0,c.Z.markMessageAsRead({messageID:U}),(0,S.cq)(eI,(0,N.P_)({groupName:null==en?void 0:en.name,postName:B.post.name,selectedPostID:R})))},[U,en,B.post.name,eI,R,W]),(0,l.useEffect)(function(){(0,M.tv)({key:M.H0.highlightedPost,storage:"sessionStorage"}).value||(0,M.co)({key:M.H0.highlightedPost,storage:"sessionStorage",value:{postId:B.post.id,isPinned:z}})},[B,z]),(0,l.useEffect)(function(){eZ.current=!0;var e=setInterval(function(){if(eZ.current){var e=new Date().getTime(),t=[];Object.keys(eg.current).forEach(function(n){var r=eg.current[n];e<=(r.typingUntil||0)&&t.push(r.user)}),t.sort(function(e,t){return e.userId.localeCompare(t.userId)}),ee(K.G1,t),eS.current.length!==eP&&eD(eS.current.length)}},1e3);return function(){eZ.current=!1,clearInterval(e)}},[ee,eP]);var nw=(0,l.useCallback)(function(e){if(e.userId!==(null==et?void 0:et.id)){var t=new Date().getTime()+e.duration;eg.current[e.userId]={user:e,typingUntil:t}}},[null==et?void 0:et.id]),nC=(0,l.useCallback)((t=(0,r.Z)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:tX(function(e){return e+1}),n=t.parentId===ef.id,t.userId!==(null==et?void 0:et.id)&&(n&&eS.current.push(t),eg.current[t.userId]={typingUntil:0});case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[ef.id,null==et?void 0:et.id]),nj=(0,l.useCallback)((0,r.Z)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.getPoll({postId:B.post.id});case 2:if(t=e.sent.data){e.next=7;break}return(0,e6.Lx)({message:"Poll no longer exists"}),e.abrupt("return",(0,S.VF)(eI,(0,N.AZ)({groupName:en.name})));case 7:tN(function(e){var n;return e?ny(ny({id:e.id},t),{},{totalVotes:null===(n=t.entries)||void 0===n?void 0:n.reduce(function(e,t){return e+t.count},0)}):null});case 8:case"end":return e.stop()}},e)})),[B,en,eI]),nk=(0,l.useCallback)(function(e){null!=e&&e.pollUpdated&&nj(null==e?void 0:e.postId),null!=e&&e.userCommenting&&nw(null==e?void 0:e.userCommenting),null!=e&&e.newPostVote&&nx(ny(ny({},null==e?void 0:e.newPostVote),{},{topic:null==e?void 0:e.topic,postId:null==e?void 0:e.postId}))},[nx,nw,nj]),nO=(0,l.useCallback)(function(e){null!=e&&e.newComment&&nC(e.newComment)},[nC]);(0,l.useEffect)(function(){if((0,d.Rj)({member:null==et?void 0:et.member})){var e=(0,Z.Ld)([(0,Z.lf)(null==en?void 0:en.id,B.post.id)],nk),t=(0,Z.Ld)([(0,Z.lF)(null==en?void 0:en.id,B.post.id)],nO);return function(){e(),t()}}},[en,B.post.id,et,nk,nO]),(0,l.useEffect)(function(){eS.current=[],eq(B.followingPost),B.followingPost&&(nr.current=!0)},[B.followingPost]);var nP=(0,l.useMemo)(function(){return tM?(0,w.jsx)(tB,{pollData:tM,group:en,post:ef}):null},[tM,en,ef]),nD=(0,l.useCallback)(function(e){var t=e.post;t&&t.id===(null==ef?void 0:ef.id)&&eb(!0)},[ef]),nI=(0,l.useCallback)((n=(0,r.Z)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.post){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,c.Z.deletePost({postID:n.id});case 5:if(n.parentId){e.next=16;break}if((0,e6.Lx)({message:"Post deleted"}),!W){e.next=12;break}return e.next=10,(0,S.VF)(eI,{href:ea.asPath,as:ea.asPath},!0);case 10:e.next=14;break;case 12:return e.next=14,(0,S.VF)(eI,(0,N.AZ)({groupName:en.name}));case 14:e.next=17;break;case 16:ee(K.z$,{post:n});case 17:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[en,eI,W,ee,ea]),nZ=(0,l.useCallback)((a=(0,r.Z)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.post){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,c.Z.reportPost({postID:n.id});case 5:ee(K.bI,{message:"Reported to group admins"});case 6:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),[ee]),nS=(0,l.useCallback)((p=(0,r.Z)(s().mark(function e(t,n){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(!n){e.next=8;break}return e.next=5,c.Z.enablePostComments({postID:t.id});case 5:ee(K.bI,{message:"Commenting is turned on"}),e.next=11;break;case 8:return e.next=10,c.Z.disablePostComments({postID:t.id});case 10:ee(K.bI,{message:"Commenting is turned off"});case 11:W?ee(K.ap,{refresh:1}):(0,S.gx)(eI,(0,N.P_)({groupName:en.name,postName:ti,selectedPostID:void 0}));case 12:case"end":return e.stop()}},e)})),function(e,t){return p.apply(this,arguments)}),[en,ee,W,ti,eI]),n_=(0,l.useCallback)(function(e){return nS(e.post,!1)},[nS]),nM=(0,l.useCallback)(function(e){return nS(e.post,!0)},[nS]),nN=(0,l.useCallback)((0,r.Z)(s().mark(function e(){var t,n,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.pinPost({postID:ef.id});case 2:if(!((null==(n=e.sent.error)?void 0:n.status)===422&&null!=n&&null!==(t=n.data)&&void 0!==t&&null!==(t=t.fields)&&void 0!==t&&t.length)){e.next=8;break}ee(K.bI,{message:null==n||null===(r=n.data)||void 0===r?void 0:r.fields[0].error,severity:"error"}),e.next=17;break;case 8:if(W){e.next=14;break}return(0,e6.Lx)({message:"Pinned"}),e.next=12,(0,S.H5)(eI);case 12:e.next=17;break;case 14:ee(K.bI,{message:"Pinned"}),ee(K.ap),(0,N.mp)({pathname:null==ea?void 0:ea.pathname,query:null==ea?void 0:ea.query})&&ee(K.AP,!0);case 17:case"end":return e.stop()}},e)})),[ef.id,eI,W,ee,ea]),nE=(0,l.useCallback)((h=(0,r.Z)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.post){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,c.Z.unpinPost({postID:n.id});case 5:if(W){e.next=11;break}return(0,e6.Lx)({message:"Unpinned"}),e.next=9,(0,S.H5)(eI);case 9:e.next=14;break;case 11:ee(K.bI,{message:"Unpinned"}),ee(K.ap),(0,N.mp)({pathname:null==ea?void 0:ea.pathname,query:null==ea?void 0:ea.query})&&ee(K.AP,!0);case 14:case"end":return e.stop()}},e)})),function(e){return h.apply(this,arguments)}),[eI,W,ee,ea]),nA=(0,l.useCallback)((0,r.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.unpinPostFromModule({postID:ef.id});case 2:if(W){e.next=8;break}return(0,e6.Lx)({message:"Post unpinned from page"}),e.next=6,(0,S.H5)(eI);case 6:e.next=11;break;case 8:ee(K.bI,{message:"Post unpinned from page"}),ee(K.ap),(0,N.zh)(ea)&&ee(K.AP,!0);case 11:case"end":return e.stop()}},e)})),[ef.id,eI,W,ee,ea]),nL=(0,l.useCallback)(function(e){var t=e.post,n=e.newPollOptions,r=e.pollDeleted,o=e.pollId;eb(!1),em(function(e){return ny(ny({},e),t)}),n&&tN(function(e){return ny(ny({},e),{},{id:o||void 0,totalVotes:0,selfVote:-1,entries:n.map(function(e){return{text:e,count:0}})})}),r&&tN(null),ee(K.gQ,t),W&&ee(K.Ek,function(){return{disableEscape:!1}})},[ee,W]),nT=(0,l.useCallback)((v=(0,r.Z)(s().mark(function e(t){var n,r,o;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.post,r=(0,N.P_)({groupName:en.name,postName:ti,selectedPostID:n.id}).as,o="".concat(location.origin).concat(r),e.prev=3,e.next=6,navigator.clipboard.writeText(o);case 6:ee(K.bI,{message:"Link copied to clipboard"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),ee(K.bI,{message:"Link was not copied to clipboard. Try again later.",severity:"error"});case 12:case"end":return e.stop()}},e,null,[[3,9]])})),function(e){return v.apply(this,arguments)}),[en,ee,ti]),nF=(0,l.useCallback)((0,r.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!eW){e.next=5;break}return e.next=3,c.Z.unfollowPost({postID:ef.id});case 3:e.next=7;break;case 5:return e.next=7,c.Z.followPost({postID:ef.id});case 7:eq(!eW);case 8:case"end":return e.stop()}},e)})),[eW,ef]),nB=(0,l.useMemo)(function(){return(0,d.uw)({member:null==et?void 0:et.member,group:en})?(0,w.jsx)(G.Z,{reason:d.lT.FollowPost,onSuccess:nF,children:function(e){var t=e.onClick;return(0,w.jsx)(ni,{variant:"icon-borderless",onClick:t,disabled:H,onAnimationEnd:function(){nn(!1)},icon:H?"Bell":eW?"BellFilled":"BellDisabled",$following:eW,$animate:t1})}}):null},[nF,eW,en,null==et?void 0:et.member,H,t1]),nR=(0,l.useCallback)((0,r.Z)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=en.labels.find(function(e){return e.id===(null==tx?void 0:tx.id)})){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,c.Z.updatePost({postID:ef.id,labels:tx.id});case 5:if(eJ(!1),!W){e.next=11;break}ee(K.bI,{message:"Changed to ".concat(t.metadata.displayName)}),ee(K.ap,{refresh:1}),e.next=14;break;case 11:return(0,e6.Lx)({message:"Changed to ".concat(t.metadata.displayName)}),e.next=14,(0,S.H5)(eI);case 14:case"end":return e.stop()}},e)})),[ef.id,eI,tx,en,ee,W]),nz=er({isAdminOnly:tl,onReport:nZ,post:ef,level:0,onEdit:nD,onDelete:nI,onPin:nN,onUnpin:nE,onPinToModule:e1,onUnpinFromModule:nA,onDisableComments:n_,onEnableComments:nM,self:et,group:en,onLinkCopy:nT,onChangeCategory:function(){return eJ(!0)},isPinned:z}),nG=(0,l.useMemo)(function(){return(0,w.jsxs)(x.X,{alignItems:"center",children:[nB,(0,w.jsx)(eo,{options:nz})]})},[nB,nz]),nU=(0,l.useCallback)(function(){eb(!1)},[]),n$=(0,l.useCallback)(function(e,t){var n,r=(0,E.Rr)({post:ef,oldVote:e,newVote:t}),i=(null===(n=tu[B.post.id])||void 0===n?void 0:n.up)||0;r.metadata.upvotes+=i,td(function(e){return ny(ny({},e),{},(0,o.Z)({},B.post.id,{up:0,down:0}))}),em(r),ee(K.aK,ny(ny({},B),{},{post:r})),ee(K.gQ,r)},[ef,ee,tu,B]),nW=(0,l.useCallback)(function(e){var t,n,r,o=e.post,i=e.file,a=e.videoLink,s=(null==i||null===(t=i.metadata)||void 0===t?void 0:t.contentType)||"",l=(null==i||null===(n=i.metadata)||void 0===n?void 0:n.readUrl)||(null==i||null===(r=i.metadata)||void 0===r?void 0:r.srcReadUrl);el&&"application/pdf"===s?window.open(l,"_blank"):(ew({post:o,file:i,videoLink:a}),ek(!0),ee(K.Ek,function(){return{disableEscape:!0}}))},[ee,el]),nH=(0,l.useCallback)(function(){ek(!1),ee(K.Ek,function(){return{disableEscape:!1}})},[ee]),nq=(0,l.useCallback)(function(){eD(0),eS.current=[]},[]),nV=(0,l.useCallback)(function(){tU(!0)},[]),nY=(0,l.useCallback)(function(){eP&&nq(),tq.current.loadLastChunk(),setTimeout(function(){var e;eU(!1),null===(e=eN.current)||void 0===e||e.scrollIntoView({behavior:el?"smooth":"instant"})},0)},[eP,eN,nq,el]),nJ=(0,l.useCallback)(function(e){tj(e);var t=!!W&&!e;ee(K.MJ,t)},[ee,W]),nX=(0,l.useCallback)(function(e){e&&eP&&nq(),eU(!e)},[eU,eP,nq]),nK=(0,l.useCallback)(function(){tL(!0)},[tL]),nQ=(0,l.useCallback)(function(){tH(!0)},[]),n0=(0,l.useCallback)(function(){var e,t;null===(e=eL.current)||void 0===e||null===(e=e.getPostInputForm())||void 0===e||null===(e=e.getEditor())||void 0===e||e.clear(!1),null===(t=eL.current)||void 0===t||null===(t=t.getPostInputForm())||void 0===t||null===(t=t.getEditor())||void 0===t||t.blur(),ee(K.fv,null)},[ee]),n1=(0,l.useCallback)(function(){var e;null===(e=eL.current)||void 0===e||null===(e=e.getPostInputForm())||void 0===e||e.cancel()},[]),n2=(0,l.useCallback)(function(){var e;null===(e=eT.current)||void 0===e||null===(e=e.getEditor())||void 0===e||e.clear(!1),ee(K.oX,null)},[ee]),n9=(0,l.useCallback)(function(){var e;null===(e=eT.current)||void 0===e||e.cancel()},[]),n3=(0,l.useCallback)(function(e){var t;null==eu||eu.onPostUpdated(e),(0,S.cq)(eI,(0,N.P_)({groupName:en.name,postName:B.post.name,selectedPostID:null==e||null===(t=e.post)||void 0===t?void 0:t.id})),ee(K.oX,null)},[en,ee,eu,B,eI]),n5=(0,l.useCallback)(function(){var e;null===(e=eL.current)||void 0===e||null===(e=e.getPostInputForm())||void 0===e||null===(e=e.getEditor())||void 0===e||e.blur(),ee(K.fv,null)},[ee]),n6=(0,l.useCallback)(function(){setTimeout(function(){tt(!0)},0)},[]),n4=(0,l.useCallback)(function(){setTimeout(function(){tt(!1)},0)},[]),n8=(0,l.useCallback)(function(){var e;null===(e=eT.current)||void 0===e||null===(e=e.getEditor())||void 0===e||e.focus("end"),setTimeout(function(){to(!0)},0)},[]),n7=(0,l.useCallback)(function(){setTimeout(function(){to(!1)},0)},[]);(0,l.useEffect)(function(){if(null!=eu&&eu.ready){var e;null===(e=eT.current)||void 0===e||null===(e=e.getEditor())||void 0===e||e.focus("end")}},[eu]);var re=(0,l.useMemo)(function(){var e,t,n,r,o,i,a;return el?(0,w.jsxs)(w.Fragment,{children:[eu&&(0,w.jsxs)(nu,{ref:eB,$visible:null==eu?void 0:eu.ready,$bottom:nh,children:[(0,w.jsxs)(nd,{children:[null!=eu&&eu.replyToUser?(0,w.jsxs)("div",{children:[(0,w.jsx)(y.Z,{variant:"t9",inline:!0,children:"Editing reply to"}),"\xa0",(0,w.jsxs)(y.Z,{variant:"t8",inline:!0,ellipsis:!0,children:[null==eu||null===(e=eu.replyToUser)||void 0===e?void 0:e.firstName," ",null==eu||null===(t=eu.replyToUser)||void 0===t?void 0:t.lastName]})]}):(0,w.jsx)(y.Z,{variant:"t9",inline:!0,children:"Editing comment"}),(0,w.jsx)("div",{onClick:n9,children:"Cancel"})]}),(0,w.jsx)(np,{children:(0,w.jsx)(T.Z,{ref:eT,post:null==eu?void 0:eu.post,level:null==eu?void 0:eu.level,onPostUpdated:n3,onCancel:n2,onEditorFocus:n8,onEditorBlur:n7,group:en,hideLabel:!0,showMeta:!1,contentPlaceholder:(null==eu?void 0:eu.level)>=2?"Your reply":"Your comment"},null==eu||null===(n=eu.post)||void 0===n?void 0:n.id)})]}),!tZ&&(0,w.jsxs)(nu,{ref:eF,$visible:!(null!=eu&&eu.ready),$bottom:nh,children:[!!ec&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(eA,{isModal:!1,self:et,isMobile:el,group:en,commentItem:null==ec?void 0:ec.post,level:2,preview:!0,highlighted:!0}),(0,w.jsxs)(nd,{children:[(0,w.jsxs)("div",{children:[(0,w.jsx)(y.Z,{variant:"t9",inline:!0,children:"Replying to"}),"\xa0",(0,w.jsxs)(y.Z,{variant:"t8",inline:!0,ellipsis:!0,children:[null==ec||null===(r=ec.user)||void 0===r?void 0:r.firstName," ",null==ec||null===(o=ec.user)||void 0===o?void 0:o.lastName]})]}),(0,w.jsx)("div",{onClick:n1,children:"Cancel"})]})]}),(0,w.jsx)(Y,{ref:eL,isModal:!1,level:ec?2:1,rootPostID:ef.id,parentTree:null!==(i=null==ec?void 0:ec.parentTree)&&void 0!==i?i:B,replyToTree:null!==(a=null==ec?void 0:ec.replyToTree)&&void 0!==a?a:B,group:en,followingPost:eW,allUsers:tf,commentUser:null==ec?void 0:ec.user,onSuccess:n5,onCancel:n0,onFocus:n6,onBlur:n4})]})]}):tF&&!tZ?(0,w.jsxs)(tQ.s,{marginBottom:W?0:16,paddingLeft:32,paddingRight:32,children:[(0,w.jsx)(O,{typographyVariant:"t7",padding:8}),(0,w.jsx)(Y,{autoFocus:!(null!=eE&&eE.current)||tA,isModal:W,level:1,rootPostID:ef.id,parentTree:B,replyToTree:B,group:en,followingPost:eW,allUsers:tf})]}):null},[tZ,el,tA,W,B,en,eW,tf,tF,ec,eu,n1,n9,n5,n3,n0,n2,n6,n4,n8,n7,ef,et,nh]),rt=(0,l.useMemo)(function(){var e,t=!!(null!=en&&null!==(e=en.metadata)&&void 0!==e&&e.codeBlocks),n=(0,_.uq)({content:ef.metadata.content||"",allowCode:t});return(0,w.jsx)(Q.ZP,{textVariant:"t7",marginBottom:8,value:n.blocks,showMoreLimit:$?void 0:500,showMoreDisabled:H})},[ef,en,H,$]),rn=(0,l.useMemo)(function(){var e,t,n,r;return(0,w.jsxs)(tQ.s,{children:[ev?(0,w.jsx)(T.Z,{poll:tM,allUsers:tf,post:ef,level:0,confirmButtonLabel:"Save",group:en,requireTitle:!0,requireLabel:!0,onCancel:nU,onPostUpdated:nL,contentPlaceholder:"Write something",initialLabel:ta,filteredGroupLabels:no}):(0,w.jsx)(na,{$isSelected:eR,children:(0,w.jsxs)(tQ.s,{paddingTop:el?16:32,paddingBottom:8,paddingLeft:W?32:el?10:32,paddingRight:W?32:el?10:32,children:[(0,w.jsxs)(nm,{children:[(0,w.jsxs)(x.X,{gap:8,flexGrow:1,children:[(0,w.jsx)(F.Z,{userPreview:!0,showLevel:!0,user:ef.user,group:en,size:40}),(0,w.jsxs)(nv,{children:[(0,w.jsx)(e4.Z,{userPreview:!0,user:ef.user,userNameHl:ef.metadata.userNameHl,group:en,hoverUnderline:!0,typographyVariant:"t6",showLevelTitle:!0}),(0,w.jsxs)(t4,{children:["".concat((0,e8.ur)({value:ef.createdAt,partialAgo:!0})," ").concat(tI?"(edited)":""," ").concat(el?"•":"in"," "),(0,w.jsx)(t9,{children:(0,w.jsx)(e7.Z,{group:en,category:null==ts?void 0:ts.id,children:"".concat(null==ts||null===(e=ts.metadata)||void 0===e?void 0:e.displayName)})})]})]})]}),!el&&nG]}),(0,w.jsx)(te.df,{onChange:nJ,children:(0,w.jsx)("div",{ref:tD,children:(0,w.jsx)(t5,{children:(0,w.jsx)(e5,{post:ef,group:en,disableLink:!0})})})}),(0,w.jsx)(es.x,{marginTop:8,children:rt}),!!(null!=ef&&null!==(t=ef.metadata)&&void 0!==t&&t.action)&&(0,w.jsx)(es.x,{marginTop:16,marginBottom:8,children:(0,w.jsx)(tR.Z,{completed:!!(null!=ef&&null!==(n=ef.metadata)&&void 0!==n&&n.actionCompleted)})}),nP,(0,w.jsx)(ei.Z,{post:ef,onItemClick:nW,level:0})]})}),(0,w.jsxs)(tQ.s,{children:[(0,w.jsxs)(nl,{alignItems:"center",paddingTop:ev?16:8,paddingBottom:16,paddingLeft:W?32:el?10:32,paddingRight:W?32:el?10:32,gap:el?8:16,$isSelected:eR,children:[(0,w.jsx)(e0,{post:ef,group:en,onVoteChange:n$,newUpvotes:(null===(r=tu[B.post.id])||void 0===r?void 0:r.up)||0}),(0,w.jsxs)(x.X,{alignItems:"center",children:[(0,w.jsx)(nc,{name:"Chat",color:u.O9.n5}),(0,w.jsx)(t6,{children:f()("comments",tJ,!0)})]})]}),(0,w.jsxs)(t8,{$commentsDisabled:tZ,children:[(0,w.jsx)(eH,{ref:tq,isModal:W,isMobile:el,group:en,postTree:B,onPostDelete:nI,onCommentLinkCopy:nT,isAdminOnly:tl,onFilePreviewItemClick:nW,newVotes:tu,isGroupAdmin:tS,rootPost:ef,followingPost:eW,allUsers:tf,selectedPostID:R,onFocusCommentInput:nK,onListEndLoaded:nV,setCommentReplyShowing:tb,isBot:$,onInitialRender:nQ,setNumComments:tX}),el&&(0,w.jsx)(O,{typographyVariant:"t9",padding:"8px 16px"}),(0,w.jsx)(te.df,{onChange:nX}),tZ&&(0,w.jsx)(t2,{children:"Comments are turned off for this post"}),re]})]}),!ev&&!tv&&tW&&eG&&!e3&&!tr&&(0,w.jsx)(I,{count:eP,onClick:nY})]})},[ev,tM,tf,ef,en,nU,nL,ta,no,eR,W,el,tI,null==ts?void 0:ts.id,null==ts||null===(j=ts.metadata)||void 0===j?void 0:j.displayName,nG,nJ,rt,nP,nW,n$,tu,B,tJ,nI,nT,tl,tS,eW,R,nK,nV,$,nQ,nX,re,tv,tW,eG,eP,nY,tZ,e3,tr]),rr=(0,l.useMemo)(function(){var e,t;return null!==(e=null==en||null===(t=en.labels)||void 0===t?void 0:t.map(function(e){return{label:e.metadata.displayName,active:e.id===(null==tx?void 0:tx.id),onClick:function(){return ty(e)}}}))&&void 0!==e?e:[]},[tx,en]),ro=(0,l.useCallback)(function(){W?e_.current.scrollIntoView(!0):window.scrollTo(0,0)},[W]),ri=(0,l.useMemo)(function(){return el?null:(0,w.jsxs)(t7,{paddingLeft:W?32:10,paddingRight:W?32:10,$isModal:W,$inView:tC,$containerWidth:tO,children:[(0,w.jsx)(F.Z,{user:ef.user,group:en,size:40,showLevel:!0}),(0,w.jsx)(ns,{onClick:ro,children:(0,w.jsx)(t3,{children:(0,w.jsx)(e5,{post:ef,group:en,disableLink:!0})})}),nG]})},[en,W,ro,ef,nG,tC,el,tO]),ra=(0,l.useMemo)(function(){var e;return el?tC||!(null!=ef&&null!==(e=ef.metadata)&&void 0!==e&&e.title)?{withDefaultTitle:!0,dropdownOptions:nz,searchOverride:nB}:{title:(0,w.jsx)(ng.s,{scrollOnClick:!0,children:ef.metadata.title}),dropdownOptions:nz,searchOverride:nB}:null},[el,tC,null==ef||null===(k=ef.metadata)||void 0===k?void 0:k.title,nz,nB]);return(0,nb.l)(nb.C.POST,ra),(0,w.jsxs)("div",{ref:e_,"data-post-id":ef.id,children:[(0,w.jsx)(nt,{$isModal:W,$borderRadius:W||el?0:10,children:rn}),(0,w.jsx)("div",{ref:eN}),!!ey&&(0,w.jsx)(A.Z,{open:ej,post:ey.post,file:ey.file,videoLink:ey.videoLink,onClose:nH}),(0,w.jsx)(tG.T,{open:eY,header:"Change category to",confirmLabel:"Change",cancelButtonVariant:el?"secondary":"borderless",onConfirm:nR,onClose:function(){return eJ(!1)},onCancel:function(){return eJ(!1)},children:(0,w.jsx)(ne,{label:null==tx||null===(D=tx.metadata)||void 0===D?void 0:D.displayName,options:rr,variant:"input",fitButton:!0})}),eQ&&(0,w.jsx)(tK,{open:!0,onClose:e2,postID:ef.id}),ri]})})},51236:function(e,t,n){n.d(t,{C:function(){return m}});var r=n(59499),o=n(4730),i=n(67294),a=n(50378),s=n(20668),l=a.ZP.div.withConfig({displayName:"styled__BadgeWrapper",componentId:"sc-tez1fz-0"})(["width:fit-content;padding:5px 8px;border-radius:4px;color:",";background-color:",";",""],function(e){return e.$color},function(e){return e.$backgroundColor},s.c.t11),c=n(14251),u=n(85893),d=["label","color","backgroundColor"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=(0,i.memo)(function(e){var t=e.label,n=e.color,r=void 0===n?c.O9.fgSuccess:n,i=e.backgroundColor,a=void 0===i?c.O9.success:i,s=(0,o.Z)(e,d);return(0,u.jsx)(l,f(f({$color:r,$backgroundColor:a},s),{},{children:t}))})},8024:function(e,t,n){n.d(t,{A:function(){return g}});var r=n(59499),o=n(4730),i=n(67294),a=n(96276),s=n(50378),l=n(20668),c=n(14251),u=(0,s.iv)(["&:hover{color:",";border:1px solid ",";background-color:",";}"],c.O9.n7,c.O9.n3,c.O9.n3),d=(0,s.iv)(["color:",";border:1px solid ",";background-color:",";",""],c.O9.n7,c.O9.n3,c.O9.n3,function(e){return!e.theme.isMobile&&u}),p=(0,s.iv)(["&:hover{color:",";background-color:",";border:1px solid ",";}"],c.O9.n7,c.O9.n3,c.O9.n3),f=s.ZP.button.withConfig({displayName:"styled__ChipWrapper",componentId:"sc-1etdral-0"})(["width:fit-content;cursor:pointer;height:40px;display:flex;justify-content:center;align-items:center;padding:0px 14px;background:",";border-radius:25px;border:1px solid ",";color:",";transition:background-color 100ms ease;"," color:",";background-color:",";border:1px solid ",";white-space:pre;> div{height:14px;width:14px;margin-left:8px;}"," ",""],c.O9.n1,c.O9.n3,c.O9.n5,l.c.t9,c.O9.n5,c.O9.n1,c.O9.n3,function(e){return!e.theme.isMobile&&p},function(e){return e.$active&&d}),m=n(85893),h=["label","onClick","active","icon"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g=(0,i.memo)(function(e){var t=e.label,n=e.onClick,r=e.active,s=e.icon,l=(0,o.Z)(e,h),c=(0,i.useMemo)(function(){if(s)return(0,m.jsx)(a.J,{name:s})},[s]);return(0,m.jsxs)(f,b(b({type:"button",$active:void 0!==r&&r,onClick:n},l),{},{children:[t,c]}))})},81343:function(e,t,n){n.d(t,{i:function(){return d}});var r=n(59499),o=n(4730),i=n(67294),a=n(14251),s=n(50378).ZP.hr.withConfig({displayName:"styled__DividerElement",componentId:"sc-nw8unn-0"})(["background-color:",";border:none;display:block;height:","px;width:100%;margin:0;"],function(e){return e.$color},function(e){return e.$height}),l=n(85893),c=["color","height"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var d=(0,i.memo)(function(e){var t=e.color,n=void 0===t?a.O9.n3:t,i=e.height,d=(0,o.Z)(e,c);return(0,l.jsx)(s,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({$color:n,$height:void 0===i?1:i},d))})},42470:function(e,t,n){n.d(t,{d:function(){return x}});var r=n(59499),o=n(67294),i=n(46513),a=n(88889),s=n(50378),l=n(92208),c=n(70299),u=n(14251),d=(0,s.F4)(["0%{opacity:0;}100%{opacity:0.5;}"]),p=(0,s.F4)(["0%{opacity:0.5;}100%{opacity:0;}"]),f=s.ZP.div.withConfig({displayName:"styled__DrawerWrapper",componentId:"sc-2yi78h-0"})(["position:fixed;width:100%;height:100%;top:0;left:0;pointer-events:none;z-index:1400;"]),m=s.ZP.div.withConfig({displayName:"styled__DrawerOverlay",componentId:"sc-2yi78h-1"})(["position:absolute;width:100%;height:100%;top:0;left:0;background-color:black;pointer-events:",";opacity:0;",""],function(e){return e.$open?"all":"none"},function(e){var t=e.$open,n=e.$skipAnimation,r=e.$disableAnimation;return n?null:t?(0,s.iv)(["animation:"," ","s forwards linear;"],d,r?0:.25):(0,s.iv)(["animation:"," ","s forwards linear;"],p,r?0:.25)}),h=(0,s.ZP)(l.E.div).withConfig({displayName:"styled__DrawerBody",componentId:"sc-2yi78h-2"})(["position:absolute;height:100%;max-width:",";z-index:1301;pointer-events:all;background-color:",";overflow-y:auto;border-radius:",";",""],function(e){var t=e.$width;return"".concat(t,"px")},u.O9.n1,function(e){return"left"===e.$anchor?"0 10px 10px 0":"10px 0 0 10px"},function(e){return e.theme.isLightTheme&&c.Wn}),v=n(73935),b=n(85893),g={ACTIVE:"active",INACTIVE:"inactive"},x=(0,o.memo)(function(e){var t=e.children,n=e.open,s=e.width,l=e.onClose,c=e.disableAnimation,u=e.anchor,d=void 0===u?"left":u,p=e.dragDirectionLock,x=(0,o.useState)(!0),y=x[0],w=x[1],C=(0,o.useState)(!1),j=C[0],k=C[1],O=(0,i._)(),P="left"===d;(0,a.P)(n),(0,o.useEffect)(function(){n&&w(!1),O.start(n?g.ACTIVE:g.INACTIVE)},[n,O,j]),(0,o.useEffect)(function(){k(!0)},[]);var D=(0,o.useMemo)(function(){var e;return e={},(0,r.Z)(e,g.ACTIVE,{x:0,left:P?0:"auto",right:P?"auto":0}),(0,r.Z)(e,g.INACTIVE,{left:P?-s:"auto",right:P?"auto":-s}),e},[P,s]),I=(0,o.useMemo)(function(){return{left:P?-s:0,right:P?0:s}},[P,s]),Z=(0,o.useMemo)(function(){return{type:"linear",duration:c?0:.25}},[c]),S=(0,o.useCallback)(function(e,t){var r=0===t.point.x&&0===t.point.y,o=Math.abs(t.offset.x+(P?s:-s))<s/2,i=t.velocity.x*(P?-1:1)>50;n&&!r&&(o||i)?l():O.start(n?g.ACTIVE:g.INACTIVE)},[O,P,l,n,s]);return j?(0,v.createPortal)((0,b.jsxs)(f,{children:[(0,b.jsx)(m,{$open:n,onClick:l,$skipAnimation:y,$disableAnimation:c}),(0,b.jsx)(h,{$anchor:d,$width:s,animate:O,drag:"x",dragElastic:0,dragConstraints:I,onDragEnd:S,initial:D[g.INACTIVE],variants:D,transition:Z,dragDirectionLock:void 0===p||p,children:t})]}),document.body):null})},25874:function(e,t,n){n.d(t,{F:function(){return v}});var r=n(59499),o=n(4730),i=n(67294),a=n(12967),s=n(50378),l=n(20668),c=n(14251),u=s.ZP.div.withConfig({displayName:"styled__GroupLogoWrapper",componentId:"sc-1fn54na-0"})(["background-size:cover !important;border-radius:10px;color:",";display:flex;align-items:center;justify-content:center;",";"],c.O9.n1,l.c.t4),d=n(70120),p=n(85893),f=["group","disableLink","size","newTab"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=(0,i.memo)(function(e){var t=e.group,n=e.disableLink,r=e.size,s=void 0===r?40:r,l=e.newTab,c=(0,o.Z)(e,f),m=(0,i.useMemo)(function(){var e,r,o,i=null==t||null===(e=t.metadata)||void 0===e?void 0:e.logoUrl,l=null==t||null===(r=t.metadata)||void 0===r?void 0:r.color,d={width:s,height:s,color:(0,a.zP)(l),background:i?"url(".concat(i,")"):l},f=n?c:{};return(0,p.jsx)(u,h(h({style:d},f),{},{children:i?"":null==t||null===(o=t.metadata)||void 0===o?void 0:o.initials}))},[t,s,c,n]);return n?m:(0,p.jsx)(d.r,h(h({},c),{},{href:"/".concat(null==t?void 0:t.name),newTab:l,children:m}))})},65856:function(e,t,n){n.d(t,{D:function(){return h}});var r=n(59499),o=n(4730),i=n(67294),a=n(50378),s=n(20668),l=function(e){var t=e.$mobileTypography,n=e.$desktopTypography,r=e.theme;return(0,a.iv)(["",""],s.c[r.isMobile?t:n])},c=a.ZP.span.withConfig({displayName:"styled__GroupNameWrapper",componentId:"sc-dph3q3-0"})(["",""],function(e){return l(e)}),u=n(70120),d=n(85893),p=["group","disableLink","mobileTypography","desktopTypography"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=(0,i.memo)(function(e){var t=e.group,n=e.disableLink,r=e.mobileTypography,a=void 0===r?"t6":r,s=e.desktopTypography,l=void 0===s?"t4":s,f=(0,o.Z)(e,p),h=(0,i.useMemo)(function(){var e;return(0,d.jsx)(c,{$mobileTypography:a,$desktopTypography:l,children:null==t||null===(e=t.metadata)||void 0===e?void 0:e.displayName})},[t,a,l]);return n?h:(0,d.jsx)(u.r,m(m({},f),{},{href:"/".concat(null==t?void 0:t.name),children:h}))})},65009:function(e,t,n){n.d(t,{X:function(){return i}});var r=n(50378),o=n(86031),i=(0,r.ZP)(o.x).withConfig({displayName:"Row",componentId:"sc-w8j4n-0"})(["flex-direction:row;"])},28506:function(e,t,n){n.d(t,{Y:function(){return O}});var r=n(59499),o=n(4730),i=n(73793),a=n(67294),s=n(96276),l=n(50378),c=n(20668),u=n(14251),d={square:(0,l.iv)(["background-color:",";"],function(e){var t=e.$disabled;return u.O9[t?"n5":"sd1"]}),circle:(0,l.iv)(["> div{background-color:",";}"],function(e){var t=e.$disabled;return u.O9[t?"n5":"sd1"]})},p=(0,l.iv)(["border:2px solid ",";",""],function(e){var t=e.$disabled;return u.O9[t?"n5":"sd1"]},function(e){return d[e.$variant]}),f=(0,l.iv)(["border-radius:50%;> div{height:","px;width:","px;border-radius:50%;}"],function(e){return e.$size/2},function(e){return e.$size/2}),m={square:(0,l.iv)(["border-radius:4px;> div{height:100%;color:",";}&:hover{> div{color:",";}}"],function(e){return e.$active?u.O9.n1:"transparent"},u.O9.n1),circle:f},h=l.ZP.div.withConfig({displayName:"styled__SelectionItem",componentId:"sc-18j6pxp-0"})(["background-color:transparent;height:","px;width:","px;border:2px solid ",";display:flex;justify-content:center;align-items:center;flex-shrink:0;"," ",""],function(e){return e.$size},function(e){return e.$size},u.O9.n5,function(e){return m[e.$variant]},function(e){return e.$active&&p}),v=(0,l.iv)(["cursor:default;"]),b=(0,l.iv)(["&:hover{","{border:2px solid ",";> div{border-radius:2px;background-color:",";}}}"],h,function(e){var t=e.$active;return u.O9[t?"sd1":"n4"]},function(e){var t=e.$active;return u.O9[t?"sd1":"n4"]}),g=(0,l.iv)(["&:hover{","{border:2px solid ",";> div{background-color:",";color:",";}}}",""],h,function(e){var t=e.$active;return u.O9[t?"sd1":"n4"]},function(e){var t=e.$active;return u.O9[t?"sd1":"n4"]},u.O9.n1,function(e){return"square"===e.$variant&&b}),x=(0,l.iv)(["width:100%;> span{flex:1;",";}"],c.c.ellipsis),y=l.ZP.button.withConfig({displayName:"styled__SelectionWrapper",componentId:"sc-18j6pxp-1"})(["background:none;border:none;padding:0px;width:fit-content;cursor:pointer;display:flex;align-items:",";-webkit-tap-highlight-color:transparent;text-align:left;> span{margin-left:8px;color:",";",";}"," ",""],function(e){return e.$alignItems},u.O9.n7,c.c.t7,function(e){return e.$ellipsis&&x},function(e){var t=e.disabled,n=e.theme;return t?v:!n.isMobile&&g}),w=n(85893),C=["size","label","active","variant","onClick","disabled","alignItems","ellipsis"];function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O=(0,a.memo)(function(e){var t=e.size,n=e.label,r=e.active,l=e.variant,c=void 0===l?"circle":l,u=e.onClick,d=e.disabled,p=e.alignItems,f=e.ellipsis,m=(0,o.Z)(e,C),v=(0,i.bI)("isMobile").isMobile,b=(0,a.useCallback)(function(e){!d&&u&&u(e)},[d,u]),g=(0,a.useMemo)(function(){return"circle"===c?(0,w.jsx)("div",{}):(0,w.jsx)(s.J,{name:"Done"})},[c]);return(0,w.jsxs)(y,k(k({type:"button",$active:r,$variant:c,disabled:d,$ellipsis:void 0!==f&&f,$alignItems:void 0===p?"flex-start":p,onClick:v?void 0:b},m),{},{children:[(0,w.jsx)(h,{$size:void 0===t?24:t,$active:r,$variant:c,$disabled:d,onClick:v?b:void 0,children:g}),n&&(0,w.jsx)("span",{children:n})]}))})},80814:function(e,t,n){n.d(t,{O:function(){return k}});var r=n(59499),o=n(4730),i=n(67294),a=n(50378),s=n(20668),l=n(14251),c=n(70120),u=(0,a.iv)(["color:",';&:after{content:"";position:absolute;bottom:0px;left:0px;height:4px;background:',";width:100%;}"],l.O9.n7,l.O9.n7),d=(0,a.iv)(["pointer-events:none;opacity:0.5;"]),p=(0,a.iv)(["&:hover{color:",";}"],l.O9.n7),f=(0,a.iv)(["height:100%;padding:16px 0px;position:relative;color:",";white-space:nowrap;"," "," "," ",""],l.O9.n5,s.c.t6,function(e){return!e.theme.isMobile&&p},function(e){return e.$active&&u},function(e){return e.disabled&&d}),m=(0,a.iv)(["background:",";color:",";&:hover{background:",";}"],l.O9.p2,l.O9.fgPrimary,l.O9.p2),h=(0,a.iv)(["pointer-events:none;opacity:0.33;"]),v={horizontal:f,vertical:(0,a.iv)(["display:flex;align-items:center;width:100%;height:48px;border-radius:10px;padding:0px 16px;cursor:pointer;color:",";"," transition:background 300ms ease;&:hover{background:",";}"," ",""],l.O9.n7,s.c.t5,l.O9.n3,function(e){return e.$active&&m},function(e){return e.disabled&&h})},b=a.ZP.button.withConfig({displayName:"styled__TabWrapper",componentId:"sc-waplv7-0"})(["display:flex;background:none;border:none;cursor:pointer;letter-spacing:0.4px;",""],function(e){return v[e.$variant]}),g=(0,a.ZP)(c.r).withConfig({displayName:"styled__TabLinkWrapper",componentId:"sc-waplv7-1"})(["",""],function(e){return v[e.$variant]}),x=n(85893),y=["id","label","href","onClick","active","disabled","variant","dataTestId"];function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j=(0,i.forwardRef)(function(e,t){var n=e.id,r=e.label,a=e.href,s=e.onClick,l=e.active,c=e.disabled,u=e.variant,d=void 0===u?"horizontal":u,p=e.dataTestId,f=(0,o.Z)(e,y),m=(0,i.useCallback)(function(e){null==s||s(e,n)},[s,n]),h=(0,i.useMemo)(function(){return{$active:l,$variant:d,"data-testid":p,onClick:m,ref:t}},[l,d,p,m,t]);return a?(0,x.jsx)(g,C(C(C({href:a},h),f),{},{children:r})):(0,x.jsx)(b,C(C(C({disabled:c},h),f),{},{children:r}))}),k=(0,i.memo)(j)},22441:function(e,t,n){n.d(t,{Z:function(){return D}});var r=n(59499),o=n(4730),i=n(67294),a=n(14251),s=n(51236),l=n(50378),c=n(20668),u=n(92208),d=(0,l.iv)(["color:",";"],a.O9.s2),p=(0,l.iv)(["color:",";"],a.O9.n5),f=l.ZP.button.withConfig({displayName:"styled__ToggleWrapper",componentId:"sc-143j1zq-0"})(["background:none;border:none;padding:0px;cursor:",";display:flex;gap:16px;"," transition:color 300ms ease;> span{","}"],function(e){return e.disabled?"default":"pointer"},function(e){return e.$active?d:p},c.c.t5),m=l.ZP.div.withConfig({displayName:"styled__SwitchWrapper",componentId:"sc-143j1zq-1"})(["height:26px;width:52px;position:relative;"]),h=(0,l.iv)(["background-color:",";"],a.O9.s4),v=(0,l.iv)(["background-color:",";"],a.O9.n3),b=l.ZP.div.withConfig({displayName:"styled__SwitchTrack",componentId:"sc-143j1zq-2"})(["height:20px;width:44px;position:absolute;left:3px;top:3px;border-radius:34px;transition:background-color 300ms ease;",""],function(e){return e.$active?h:v}),g=(0,l.iv)(["right:0px;background-color:",";"],a.O9.s2),x=(0,l.iv)(["left:0px;background-color:",";"],a.O9.n5),y=(0,l.ZP)(u.E.div).withConfig({displayName:"styled__SwitchCircle",componentId:"sc-143j1zq-3"})(["height:26px;width:26px;border-radius:50%;position:absolute;top:0px;transition:background-color 300ms ease;",""],function(e){return e.$active?g:x}),w=l.ZP.div.withConfig({displayName:"styled__BadgeToggle",componentId:"sc-143j1zq-4"})(["cursor:pointer;"]),C=n(85893),j=["label","active","onClick","disabled","disableAnimation","variant","labelWidth"];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var P={type:"spring",stiffness:700,damping:30},D=(0,i.memo)(function(e){var t=e.label,n=e.active,r=e.onClick,l=e.disabled,c=e.disableAnimation,u=e.variant,d=e.labelWidth,p=(0,o.Z)(e,j),h=(0,i.useCallback)(function(){!l&&r&&r()},[l,r]);return"badge"===(void 0===u?"switch":u)?(0,C.jsx)(w,O(O({onClick:h},p),{},{children:(0,C.jsx)(s.C,{label:t,backgroundColor:a.O9[n?"s2":"n5"]})})):(0,C.jsxs)(f,O(O({type:"button",onClick:h,disabled:l,$active:n},p),{},{children:[t&&(0,C.jsx)("span",{style:{width:void 0===d?"fit-content":d},children:t}),(0,C.jsxs)(m,{children:[(0,C.jsx)(b,{$active:n}),(0,C.jsx)(y,{layout:!c,$active:n,transition:P})]})]}))})},80199:function(e,t,n){n.d(t,{v:function(){return y}});var r=n(59499),o=n(4730),i=n(73793),a=n(41664),s=n.n(a),l=n(67294),c=n(50378),u=n(20668),d=n(14251),p={name:(0,c.iv)(["color:",";"],d.O9.n7),handle:(0,c.iv)(["color:",";"],d.O9.n5)},f=(0,c.iv)([""," text-decoration:none;width:fit-content;"," ",""],function(e){var t=e.$nameTypography;return u.c[t]},function(e){return p[e.$variant]},function(e){return e.$truncate&&u.c.ellipsis}),m=c.ZP.span.withConfig({displayName:"styled__UserNameWrapper",componentId:"sc-daaao-0"})(["",""],f),h=c.ZP.a.withConfig({displayName:"styled__UserNameLink",componentId:"sc-daaao-1"})(["",""],f),v=n(85893),b=["typography","variant","noLink","newTab","user","truncate"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=(0,l.memo)(function(e){var t=e.typography,n=void 0===t?"t6":t,r=e.variant,a=void 0===r?"name":r,l=e.noLink,c=e.newTab,u=e.user,d=e.truncate,p=void 0!==d&&d,f=(0,o.Z)(e,b),g=(0,i.bI)("currentGroup").currentGroup,y=u.firstName,w=u.lastName,C=u.name,j="name"===a?"".concat(y," ").concat(w):"@".concat(C);return void 0!==l&&l?(0,v.jsx)(m,x(x({$nameTypography:n,$variant:a,$truncate:p},f),{},{children:j})):(0,v.jsx)(s(),{passHref:!0,href:"/@".concat(C).concat(g?"?g=".concat(g.name):""),legacyBehavior:!0,children:(0,v.jsx)(h,x(x({target:void 0!==c&&c?"_blank":void 0,$nameTypography:n,$variant:a,$truncate:p},f),{},{children:j}))})})},13656:function(e,t,n){n.d(t,{v:function(){return g}});var r=n(59499),o=n(4730),i=n(67294),a=n(50378),s=n(14251),l=(0,a.iv)(["> button{right:6px;height:40px;width:90px;top:","px;}> div{input{padding:0px 14px;}}.copy-btn{","}"],function(e){return e.$hasLabel?12:6},function(e){return e.theme.isMobile&&"width: 90px;"}),c=a.ZP.div.withConfig({displayName:"styled__CopyTextboxWrapper",componentId:"sc-1omnt19-0"})(["width:100%;display:flex;align-items:center;color:",";position:relative;overflow:hidden;box-sizing:border-box;height:",";> div{width:100%;input{padding:0px 18px 0px 14px;}}> button{position:absolute;right:12px;height:48px;top:",";}",""],s.O9.n7,function(e){return e.$hasLabel?"62px":"52px"},function(e){return e.$hasLabel?7:2},function(e){return e.theme.isMobile&&l}),u=(0,a.iv)(["right:4px;"]),d=a.ZP.div.withConfig({displayName:"styled__EyeIconWrapper",componentId:"sc-1omnt19-1"})(["display:flex;align-items:center;position:absolute;right:14px;gap:8px;width:auto !important;background:",";padding-left:8px;",""],s.O9.n1,function(e){return e.theme.isMobile&&u}),p=n(47691),f=n(59607),m=n(85893),h=["value","label","isHiddenValue"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g=(0,i.memo)(function(e){var t=e.value,n=e.label,r=e.isHiddenValue,a=(0,o.Z)(e,h),s=(0,i.useState)(!1),l=s[0],u=s[1],v=(0,i.useState)(r),g=v[0],x=v[1],y=(0,i.useCallback)(function(){navigator.clipboard.writeText(t),u(!0),setTimeout(function(){u(!1)},1e3)},[t]),w=(0,i.useMemo)(function(){return(0,m.jsx)(f.z,{className:"copy-btn",label:l?"Copied":"Copy",onClick:y})},[y,l]);return(0,m.jsxs)(c,b(b({$hasLabel:n},a),{},{children:[(0,m.jsx)(p.I,{label:n,value:t,readOnly:!0,type:g?"password":"text"}),r&&(0,m.jsxs)(d,{children:[(0,m.jsx)(f.z,{variant:"icon-borderless",icon:g?"Eye":"EyeDisabled",onClick:function(){x(!g)}}),w]}),!r&&w]}))})},12476:function(e,t,n){n.d(t,{h_:function(){return em}});var r=n(59499),o=n(17674),i=n(4730),a=n(67294),s=n(37894),l=n(70299),c=n(96276),u=n(70120),d=n(66703),p=n(12967),f=n(50378),m=n(92208),h=n(20668),v=n(14251),b=n(66409),g=(0,f.iv)(["*{outline:none;}"]),x=f.ZP.div.withConfig({displayName:"styled__DropdownWrapper",componentId:"sc-13jov82-0"})(["width:fit-content;max-width:100%;cursor:pointer;height:",";",""],function(e){var t=e.$variant;return t.startsWith("input")?"52px":"custom"===t?"auto":"40px"},function(e){return"input-floating-label"===e.$variant&&g}),y=(0,f.iv)(["padding:0px;"]),w=(0,f.iv)(["max-height:","px;overflow:auto;"],function(e){return e.$maxDropdownHeight}),C=(0,f.iv)(["padding-top:0px;"]),j=(0,f.ZP)(m.E.div).withConfig({displayName:"styled__DropdownContent",componentId:"sc-13jov82-1"})(["display:flex;flex-direction:column;border-radius:10px;background-color:",";"," "," "," "," ",""],v.O9.n1,l.Wn,function(e){return e.$maxDropdownHeight&&w},function(e){var t=e.width;return t&&"width: ".concat(t,"px;")},function(e){return e.$customContent&&y},function(e){return e.$dropdownTitle&&C}),k=(0,f.iv)(["opacity:0.33;pointer-events:none;"]),O=(0,f.iv)(["background-color:",";color:",";pointer-events:none;"],v.O9.p2,v.O9.fgPrimary),P=(0,f.iv)(["opacity:0.33;"]),D=(0,f.iv)(["background-color:",";"],v.O9.n3),I=(0,f.iv)(["border:none;text-align:left;transition:background-color 100ms ease;background-color:",";color:",";padding:14px 15px;min-width:186px;cursor:pointer;"," display:flex;align-items:center;&:hover{","}"," "," "," ",""],v.O9.n1,v.O9.n7,h.c.t5,function(e){return!e.$disableHighlight&&"background-color: ".concat(v.O9.n3,";")},function(e){return e.$highlighted&&D},function(e){return e.$active&&O},function(e){return e.$disabled&&k},function(e){return e.$deemphasize&&P}),Z=f.ZP.div.withConfig({displayName:"styled__DropdownItem",componentId:"sc-13jov82-2"})(["",""],I),S=f.ZP.label.withConfig({displayName:"styled__DropdownItemLabel",componentId:"sc-13jov82-3"})(["",""],I),_=f.ZP.div.withConfig({displayName:"styled__DropdownItemDivider",componentId:"sc-13jov82-4"})(["> div{width:100%;height:1px;background-color:",";}"],v.O9.n3),M=(0,f.iv)(["color:",";background-color:",";border:1px solid ",";"],v.O9.n7,v.O9.n1,v.O9.n3),N=(0,f.iv)(["background-color:",";color:",";"],v.O9.n3,v.O9.n7),E=(0,f.iv)(["border:none;background-color:",";height:48px;max-height:100%;padding:0px 16px;border-radius:33px;cursor:pointer;display:flex;align-items:center;color:",";"," border:1px solid transparent;box-sizing:border-box;&:hover{background-color:",";color:",";}"," ",""],v.O9.n1,v.O9.n5,h.c.t11,v.O9.n3,v.O9.n7,function(e){return e.$active&&M},function(e){return e.$dropdownVisible&&N}),A=(0,f.iv)([""," border:1px solid ",";"," &:hover{background-color:",";}"],E,v.O9.n3,h.c.t10,function(e){var t=e.$active,n=e.$dropdownVisible;return v.O9[t||n?"n3":"n1"]}),L=(0,f.iv)(["height:40px;width:32px;padding:6px;"]),T=(0,f.iv)(["&:focus{background:",";color:",";}"],v.O9.n3,v.O9.n7),F=(0,f.iv)(["&:hover{background:",";color:",";}"],v.O9.n3,v.O9.n7),B=(0,f.iv)(["height:48px;width:48px;padding:12px;border:1px solid ",";display:flex;align-items:center;background:",";color:",";border-radius:4px;cursor:pointer;"," "," ",""],v.O9.n3,v.O9.n1,v.O9.n5,function(e){var t=e.theme,n=e.$variant;return(!t.isMobile||"icon-borderless"!==n)&&F},function(e){return!e.theme.isMobile&&T},function(e){return e.theme.isMobile&&L}),R=(0,f.iv)(["border:2px solid ",";"],v.O9.n7),z=f.ZP.fieldset.withConfig({displayName:"styled__InputFloatingLabelBorder",componentId:"sc-13jov82-5"})(["box-sizing:border-box;position:absolute;top:-5px !important;left:0px !important;right:0px !important;bottom:0px !important;padding:0px 8px;height:calc(100% + 5px);pointer-events:none;min-width:0%;border-radius:4px;overflow:hidden;border:1px solid ",";margin:0px;> legend{text-align:left;height:11px;max-width:100%;padding:0px;> span{padding:0px 5px;visibility:hidden;","}}"],v.O9.n3,h.c.t11),G=(0,f.iv)(["color:",";"],v.O9.n7),U=f.ZP.label.withConfig({displayName:"styled__InputFloatingLabel",componentId:"sc-13jov82-6"})(["position:absolute;pointer-events:none;color:",";"," transform-origin:0 0;transform:translateY(-24px) scale(0.8125);"],v.O9.n5,h.c.t7),$=(0,f.iv)(["color:",";svg{color:",";}"],v.O9.n7,v.O9.n5),W=(0,f.iv)(["position:relative;background:",";border:none;height:52px;padding:0px 14px;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:space-between;color:",";"," svg{color:",";}&:hover{color:",";svg{color:",";}}&:focus{color:",";svg{color:",";}","{","}","{","}}",""],v.O9.n1,v.O9.n7,h.c.t7,v.O9.n5,v.O9.n7,v.O9.n7,v.O9.n7,v.O9.n7,z,R,U,G,function(e){return e.$active&&$}),H=(0,f.iv)(["color:",";svg{color:",";}"],v.O9.n7,v.O9.n5),q=(0,f.iv)(["background:",";border:1px solid ",";height:52px;padding:0px 14px;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:space-between;color:",";"," "," svg{color:",";}&:hover{color:",";svg{color:",";}}&:focus{border:2px solid ",";padding:0px 13px;color:",";svg{color:",";}}",""],v.O9.n1,v.O9.n3,v.O9.n5,h.c.t7,h.c.ellipsis,v.O9.n5,v.O9.n7,v.O9.n7,v.O9.n7,v.O9.n7,v.O9.n7,function(e){return e.$active&&H}),V=(0,f.iv)([""," width:40px;height:40px;border-radius:50%;padding:10px;"],B),Y=(0,f.iv)([""," width:40px;height:40px;background:transparent;border:none;border-radius:50%;padding:10px;",""],B,function(e){return e.$dropdownVisible&&N}),J=(0,f.ZP)(c.J).withConfig({displayName:"styled__LabelIcon",componentId:"sc-13jov82-7"})(["height:22px;width:22px;margin-right:8px;"]),X=(0,f.ZP)(c.J).withConfig({displayName:"styled__DropdownItemIcon",componentId:"sc-13jov82-8"})(["height:16px;width:16px;margin-right:12px;"]),K={borderless:E,outlined:A,icon:B,input:q,"input-floating-label":W,"icon-round":V,"icon-borderless":Y},Q=f.ZP.button.withConfig({displayName:"styled__DropdownButton",componentId:"sc-13jov82-9"})(["max-width:100%;",""],function(e){return K[e.$variant]}),ee=f.ZP.div.withConfig({displayName:"styled__DropdownTitleHeader",componentId:"sc-13jov82-10"})(["padding:14px 16px;border-bottom:1px solid ",";"," ",""],v.O9.n3,h.c.t5,h.c.ellipsis),et=(0,f.ZP)(b.ZP).withConfig({displayName:"styled__DropdownBackground",componentId:"sc-13jov82-11"})(["width:100%;position:fixed;top:0px;left:0px;z-index:1400;"]),en=n(20338),er=n(54361),eo=n(73935),ei=n(88889),ea=n(85893),es=["children","placement","options","variant","icon","label","inputLabel","onClick","onShow","onHide","customContent","active","xOffset","yOffset","fitButton","noAnimation","maxDropdownHeight","labelIcon","dropdownTitle","contentPadding","contentWidth","contentHeight","tooltip","onClose","shouldFlip","backgroundDisabled","flipDisabled","scrollToActive","blockPageScroll"],el=["label","onClick","active","disabled","link","newTab","type","confirmAction","htmlFor","testId","icon","deemphasize","disableHighlight","keepOpenOnClick","dividerStyle"];function ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ec(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ed=["Enter","ArrowUp","ArrowDown"],ep=(0,p.s$)()?a.useEffect:a.useLayoutEffect,ef=(0,a.forwardRef)(function(e,t){var n,r=e.children,p=e.placement,f=e.options,m=void 0===f?[]:f,h=e.variant,v=void 0===h?"outlined":h,b=e.icon,g=e.label,y=e.inputLabel,w=e.onClick,C=e.onShow,k=e.onHide,O=e.customContent,P=e.active,D=e.xOffset,I=e.yOffset,M=void 0===I?4:I,N=e.fitButton,E=void 0!==N&&N,A=e.noAnimation,L=e.maxDropdownHeight,T=e.labelIcon,F=e.dropdownTitle,B=e.contentPadding,R=void 0===B?"16px 0px":B,G=e.contentWidth,$=e.contentHeight,W=e.tooltip,H=e.onClose,q=e.shouldFlip,V=e.backgroundDisabled,Y=e.flipDisabled,K=e.scrollToActive,ec=e.blockPageScroll,ef=(0,i.Z)(e,es),em=(0,a.useState)(!1),eh=em[0],ev=em[1],eb=(0,a.useState)(null),eg=eb[0],ex=eb[1],ey=(0,a.useState)(null),ew=ey[0],eC=ey[1],ej=(0,er.C1)(),ek=(0,o.Z)(ej,3),eO=ek[0],eP=ek[1],eD=ek[2],eI=(0,a.useState)(null),eZ=eI[0],eS=eI[1],e_=(0,a.useRef)(null),eM=(0,a.useRef)(null),eN=(0,a.useRef)(null),eE=(0,a.useRef)(null),eA=(0,a.useRef)(!1),eL=(0,a.useRef)(null),eT=(0,a.useState)(null),eF=eT[0],eB=eT[1],eR=(0,a.useState)(!1),ez=eR[0],eG=eR[1];(0,ei.P)(eh&&(void 0===ec||ec));var eU=(0,a.useCallback)(function(){ev(!0),null==C||C()},[C]),e$=(0,a.useCallback)(function(){ev(!1),null==k||k()},[k]),eW=(0,a.useCallback)(function(){eO||(null==H||H(),e$())},[eO,H,e$]);(0,a.useImperativeHandle)(t,function(){return{openDropdown:function(){eU()},closeDropdown:function(){eW()},getNavigatedOption:function(){return eF}}}),ep(function(){if(!eA.current){eA.current=!0;return}},[]);var eH=(0,a.useCallback)(function(e){if(eh&&ed.includes(e.key)){if("Enter"===e.key){var t;document.activeElement===eN.current&&(null==e||e.preventDefault()),null==eF||null===(t=eF.onClick)||void 0===t||t.call(eF);return}null==e||e.preventDefault();var n=function(e,t,n){if(!e||!t&&n)return null;n&&(e=e.slice().reverse());for(var r=t?e.indexOf(t)+1:0,o=r;o<e.length;o++){var i=e[o];if(i.canArrowNavigate)return i}return null}(m,eF,"ArrowUp"===e.key);n&&eB(n)}},[eh,m,eF]);(0,a.useEffect)(function(){return document.addEventListener("keydown",eH),function(){document.removeEventListener("keydown",eH)}},[eH]),ep(function(){if(K&&eh){var e,t,n=(null==eL||null===(e=eL.current)||void 0===e?void 0:e.offsetTop)-eZ/2+(null==eL||null===(t=eL.current)||void 0===t?void 0:t.offsetHeight)/2;eM.current.scrollTo(0,n||0)}},[K,eh,m,eZ]),(0,a.useEffect)(function(){var e,t,n=null!==(e=null==m?void 0:m.indexOf(eF))&&void 0!==e?e:-1;if(!eh||-1===n){eB(null);return}var r=null===(t=eM.current)||void 0===t?void 0:t.querySelector(".skool-ui-dropdown-option-".concat(n));if(r&&eM.current){var o=r.offsetTop,i=r.offsetHeight,a=eM.current,s=a.scrollTop,l=a.offsetHeight;o<s?eM.current.scrollTo(0,o):o+i>s+l&&eM.current.scrollTo(0,o+i-l)}},[eh,m,eF]),(0,a.useEffect)(function(){if(K){var e,t=null!==(e=null==m?void 0:m.findIndex(function(e){return e.active}))&&void 0!==e?e:-1;eB(eh&&-1!==t?m[t]:null)}},[K,m,eh]);var eq=(0,s.D)(e_.current,eE.current,{strategy:"fixed",placement:ez?"top":void 0===p?"bottom-end":p,transformOrigin:{vertical:20,horizontal:"right"},modifiers:[{name:"arrow",options:{element:eg}},{name:"offset",options:{offset:[void 0===D?0:D,M]}},{name:"flip",enabled:!(void 0!==Y&&Y)}]}),eV=eq.styles,eY=eq.attributes,eJ=null==eY||null===(n=eY.popper)||void 0===n?void 0:n["data-popper-placement"],eX=(0,a.useCallback)(function(){if(eE.current&&eh){var e=eE.current.getBoundingClientRect(),t=e.top,n=e.height,r=window.innerHeight-t;eG(t+n>window.innerHeight&&t>r)}},[eh]);ep(function(){if(q)return eX(),window.addEventListener("resize",eX),function(){window.removeEventListener("resize",eX)}},[eX]),ep(function(){var e,t=null===(e=eN.current)||void 0===e?void 0:e.getBoundingClientRect();if(eC(null==t?void 0:t.width),!eh||!t||!eJ||L){eS(null);return}eJ.startsWith("top")?eS(Math.max(t.top-M-8,100)):eJ.startsWith("bottom")?eS(Math.max(window.innerHeight-t.top-t.height-M-8,100)):eS(null)},[eh,eJ,M,L]);var eK=(0,a.useCallback)(function(e){null==e||e.preventDefault()},[]),eQ=(0,a.useCallback)(function(e){null==w||w(e),ev(!eh),eh?e$():eU()},[e$,eU,w,eh]),e0=(0,a.useCallback)(function(){eD(),e$()},[eD,e$]),e1=(0,a.useCallback)(function(e,t){var n=e.label,r=e.onClick,o=e.active,a=e.disabled,s=e.link,l=e.newTab,c=e.type,d=e.confirmAction,p=e.htmlFor,f=e.testId,m=e.icon,h=e.deemphasize,v=e.disableHighlight,b=e.keepOpenOnClick,g=e.dividerStyle,x=(0,i.Z)(e,el),y=function(){if(!a&&!o){if(null==r||r(),b){var e;null===(e=eN.current)||void 0===e||e.focus()}else p?setTimeout(function(){e$()},0):e$()}};if("divider"===c)return(0,ea.jsx)(_,{style:g,children:(0,ea.jsx)("div",{})},t);var w={key:t,$active:o,$disabled:a,className:"skool-ui-dropdown-option skool-ui-dropdown-option-".concat(t),tabIndex:-1,$deemphasize:h,"data-testid":f||"dropdown-item-".concat(t)};if(p)return(0,ea.jsx)(S,eu(eu(eu({},x),w),{},{htmlFor:p,onClick:y,children:n}));var C=(0,ea.jsxs)(Z,eu(eu(eu({},x),w),{},{onClick:d?void 0:y,onMouseDown:eK,$disableHighlight:v,$highlighted:e===eF,ref:o?eL:void 0,children:[m&&(0,ea.jsx)(X,{name:m}),n]}));return d?(0,ea.jsx)(en.s,eu(eu({onConfirm:y,onOpen:eP,onClose:e0,disabled:a,triggerStyles:{width:"100%"}},d),{},{children:C}),t):s?(0,ea.jsx)(u.r,{href:s,newTab:l,children:C},t):C},[e0,eP,eF,eK,e$]),e2=(0,a.useMemo)(function(){return O||m.map(e1)},[m,O,e1]),e9=(0,a.useMemo)(function(){if(r){var e=(0,ea.jsx)("div",{ref:eN,children:(0,a.cloneElement)(r,{active:r.props.active||eh})});return W?(0,ea.jsx)(d.u,eu(eu({hidden:eh},W),{},{children:e})):e}var t=!v.includes("icon"),n=b?(0,ea.jsx)(c.J,{name:b,style:{padding:2}}):null,o=v.startsWith("input"),i="input-floating-label"===v,s=o?12:10,l={height:s,width:s,flexShrink:0};o?l.margin="0 12px":l.marginLeft=12,t&&(n=(0,ea.jsx)(c.J,{style:l,name:eh?o?"ArrowUp":"DropUp":o?"ArrowDown":"DropDown"}));var u=(0,ea.jsxs)(Q,{type:"button",$variant:v,$dropdownVisible:eh,$active:P,ref:eN,children:[T&&(0,ea.jsx)(J,{name:T}),t&&g,n,i&&(0,ea.jsxs)(ea.Fragment,{children:[(0,ea.jsx)(z,{children:(0,ea.jsx)("legend",{children:(0,ea.jsx)("span",{children:y})})}),(0,ea.jsx)(U,{children:y})]})]});return W?(0,ea.jsx)(d.u,eu(eu({hidden:eh},W),{},{children:u})):u},[v,b,eh,g,y,T,P,W,r]),e3=(0,a.useMemo)(function(){return A?{}:l.X7},[A]),e5=(0,a.useMemo)(function(){return F?(0,ea.jsx)(ee,{children:F}):null},[F]),e6=(0,a.useCallback)(function(e){null==e||e.stopPropagation()},[]),e4=(0,a.useMemo)(function(){return(0,ea.jsx)("div",eu(eu({ref:eE,style:eu(eu({},eV.popper),{},{zIndex:1401}),onClick:e6},eY.popper),{},{children:(0,ea.jsxs)(j,eu(eu({ref:eM,tabIndex:-1,width:E&&ew?ew:void 0,$dropdownTitle:F,$customContent:!!O,$maxDropdownHeight:null!=L?L:eZ,style:{padding:R,width:G,height:$}},e3),{},{children:[(0,ea.jsx)("div",{ref:ex}),e5,e2]}))}))},[eV,eY,E,ew,F,O,L,eZ,R,G,$,e3,e5,e2,e6]),e8=(0,a.useMemo)(function(){return V?e4:(0,ea.jsx)(et,{onClick:eW,children:e4})},[e4,V,eW]);return(0,ea.jsxs)("div",{children:[(0,ea.jsx)(x,eu(eu({ref:e_,onClick:eQ,$variant:v},ef),{},{children:e9})),eh?(0,eo.createPortal)(e8,document.body):null]})}),em=(0,a.memo)(ef)},320:function(e,t,n){n.d(t,{a:function(){return p}});var r=n(67294),o=n(64727),i=n(50378),a=n(14251),s=n(96276),l={pdf:"#ea4335",excel:"#489B5F",text:"#5284ED",ppt:"#E76D2D",audio:"#DD4CDF",generic:a.O9.n5},c=(0,i.ZP)(s.J).withConfig({displayName:"styled__FileIconWrapper",componentId:"sc-18fkhof-0"})([""," "," svg{","}"],function(e){var t,n=e.$type;return"color: ".concat(null!==(t=l[n])&&void 0!==t?t:l.generic,";")},function(e){var t=e.size;return t&&"width: ".concat(t,"px; height: ").concat(t,"px;")},function(e){var t=e.size;return t&&"width: ".concat(t,"px; height: ").concat(t,"px;")}),u=n(85893),d={pdf:"FilePDF",excel:"FileExcel",text:"FileText",ppt:"FilePPT",audio:"FileAudio",generic:"FileGeneric"},p=(0,r.memo)(function(e){var t,n=e.fileName,r=void 0===n?"":n,i=e.contentType,a=e.size,s=r.lastIndexOf("."),l=s>=0?r.slice(s):"",p=(0,o.F5)({ext:l,contentType:void 0===i?"":i}),f=null!==(t=d[null==p?void 0:p.iconName])&&void 0!==t?t:d.generic;return(0,u.jsx)(c,{name:f,$type:null==p?void 0:p.iconName,size:a})})},22063:function(e,t,n){n.d(t,{L:function(){return j}});var r=n(59499),o=n(90116),i=n(4730),a=n(67294),s=n(73793),l=n(50378),c=n(20668),u=l.ZP.div.withConfig({displayName:"styled__ResourceItemWrapper",componentId:"sc-1s2ax87-0"})(["padding:16px 0px;display:flex;gap:12px;align-items:flex-start;width:100%;"]),d=l.ZP.div.withConfig({displayName:"styled__ResourceItemLeft",componentId:"sc-1s2ax87-1"})(["display:flex;flex-direction:column;gap:4px;flex:1;width:calc(100% - 190px);"]),p=l.ZP.div.withConfig({displayName:"styled__ResourceItemTitle",componentId:"sc-1s2ax87-2"})(["",""],c.c.t5),f=l.ZP.div.withConfig({displayName:"styled__ResourceItemDescription",componentId:"sc-1s2ax87-3"})([""," word-break:break-word;overflow:hidden;display:-webkit-box;-webkit-line-clamp:",";-webkit-box-orient:vertical;"],function(e){var t=e.$descriptionVariant;return c.c[t]},function(e){return e.theme.isMobile?3:2}),m=l.ZP.div.withConfig({displayName:"styled__ResourceItemRight",componentId:"sc-1s2ax87-4"})(["display:flex;gap:16px;"]),h=l.ZP.div.withConfig({displayName:"styled__ResourceListItemLogo",componentId:"sc-1s2ax87-5"})(["height:48px;width:48px;background-position:center;background-size:cover;border-radius:10px;flex-shrink:0;"]),v=n(12476),b=n(59607),g=n(85893),x=["logo","title","onEdit","menuItems","description","descriptionVariant"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C=(0,a.forwardRef)(function(e,t){var n=e.logo,r=e.title,l=e.onEdit,c=e.menuItems,y=void 0===c?[]:c,C=e.description,j=e.descriptionVariant,k=(0,i.Z)(e,x),O=(0,s.bI)("isMobile").isMobile,P=(0,a.useMemo)(function(){if(!O&&l)return(0,g.jsx)(b.z,{label:"Edit",onClick:l,variant:"secondary"})},[O,l]),D=(0,a.useMemo)(function(){var e=(0,o.Z)(y);if(O&&l&&e.unshift({label:"Edit",onClick:l}),e.length)return(0,g.jsx)(v.h_,{variant:"icon",icon:"HorizontalDots",options:e})},[y,l,O]);return(0,g.jsxs)(u,w(w({ref:t},k),{},{children:[n&&(0,g.jsx)(h,{style:{backgroundImage:'url("'.concat(n,'")')}}),(0,g.jsxs)(d,{children:[(0,g.jsx)(p,{children:r}),C&&(0,g.jsx)(f,{$descriptionVariant:j,children:C})]}),(0,g.jsxs)(m,{children:[P,D]})]}))}),j=(0,a.memo)(C)},66117:function(e,t,n){n.d(t,{M:function(){return h}});var r=n(59499),o=n(90116),i=n(4730),a=n(67294),s=n(28506),l=n(50378),c=(0,l.iv)(["flex-wrap:wrap;gap:","px 0px;> div{width:","% !important;}"],function(e){return e.$gap},function(e){return 100/e.$columns}),u=l.ZP.div.withConfig({displayName:"styled__SelectionGroupWrapper",componentId:"sc-pg3cm6-0"})(["display:flex;gap:","px;flex-direction:",";",""],function(e){return e.$gap},function(e){return e.$direction},function(e){return e.$columns&&c}),d=n(85893),p=["value","options","multiple","ellipsis","onChange","columns","gap","alignItems","direction"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=(0,a.memo)(function(e){var t=e.value,n=e.options,r=e.multiple,l=void 0!==r&&r,c=e.ellipsis,f=void 0!==c&&c,h=e.onChange,v=e.columns,b=e.gap,g=e.alignItems,x=void 0===g?"flex-start":g,y=e.direction,w=(0,i.Z)(e,p),C=(0,a.useCallback)(function(e,n){if(l){var r=t?(0,o.Z)(t):[];n?r=r.filter(function(t){return t!==e}):r.push(e),h(r);return}h(e)},[l,h,t]),j=(0,a.useCallback)(function(e){var n=e.key,r=e.label,o=l?null==t?void 0:t.includes(n):t===n;return(0,d.jsx)(s.Y,{ellipsis:f,active:o||!1,label:r,variant:l?"square":"circle",alignItems:x,onClick:function(){return C(n,o)}},n)},[C,f,l,x,t]);return(0,d.jsx)(u,m(m({$direction:void 0===y?"column":y,$columns:void 0===v?0:v,$gap:void 0===b?8:b},w),{},{children:n.map(j)}))})},5569:function(e,t,n){n.d(t,{m:function(){return y}});var r=n(59499),o=n(4730),i=n(67294),a=n(54361),s=n(80814),l=n(50378),c=n(59607),u=n(70299),d=l.ZP.div.withConfig({displayName:"styled__TabsWrapper",componentId:"sc-1jogvef-0"})(["position:relative;height:56px;padding:0 ",";@media (max-width:600px){padding:0;}"],function(e){return e.$showScrollArrows?"40px":0}),p=l.ZP.div.withConfig({displayName:"styled__TabsScrollContainer",componentId:"sc-1jogvef-1"})(["display:flex;overflow-x:auto;gap:0 ","px;padding:0 ","px;",""],function(e){return e.theme.isMobile?24:32},function(e){return e.theme.isMobile?13:0},u.KZ),f=(0,l.iv)(["position:absolute;top:50%;transform:translateY(-50%);background:none;border:none;padding:0;cursor:pointer;width:30px;height:30px;@media (max-width:600px){display:none;}"]),m=(0,l.ZP)(c.z).withConfig({displayName:"styled__ScrollArrowLeft",componentId:"sc-1jogvef-2"})([""," left:6px;"],f),h=(0,l.ZP)(c.z).withConfig({displayName:"styled__ScrollArrowRight",componentId:"sc-1jogvef-3"})([""," right:6px;"],f),v=n(85893),b=["tabs","activeTab","onChangeTab","showScrollArrows","testidPrefix"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=(0,i.memo)(function(e){var t=e.tabs,n=e.activeTab,r=e.onChangeTab,l=e.showScrollArrows,c=e.testidPrefix,u=(0,o.Z)(e,b),f=(0,i.useState)(!1),g=f[0],y=f[1],w=(0,i.useState)(!1),C=w[0],j=w[1],k=(0,i.useRef)({}),O=(0,i.useRef)();(0,a.YB)(function(){if(k.current[n]){var e=k.current[n].getBoundingClientRect().left;O.current.scrollLeft=Math.max(e-150,0)}},[n]);var P=(0,i.useCallback)(function(e){var t=e.id,o=e.label,i=e.dataTestId||"".concat(c?"".concat(c,"-"):"","tab-").concat(t||"");return(0,v.jsx)(s.O,x({id:t,label:o,variant:"horizontal",active:t===n,onClick:r,ref:function(e){k.current[t]=e},dataTestId:i},e),t)},[n,r,c]),D=(0,i.useCallback)(function(){var e=O.current;0===e.scrollLeft?y(!1):g||y(!0),Math.ceil(e.scrollLeft)>=e.scrollWidth-e.clientWidth?j(!1):C||j(!0)},[O,g,C]);(0,i.useEffect)(function(){l&&D()},[D,l]);var I=(0,i.useCallback)(function(){O.current.scrollLeft=0},[O]),Z=(0,i.useCallback)(function(){var e=O.current;e.scrollLeft=e.scrollWidth},[O]),S=(0,i.useMemo)(function(){return(0,v.jsxs)(v.Fragment,{children:[g&&(0,v.jsx)(m,{variant:"icon-borderless-no-hover",onClick:I,icon:"ArrowLeft",iconSize:10}),(0,v.jsx)(p,{ref:O,onScroll:l?D:void 0,children:t.map(P)}),C&&(0,v.jsx)(h,{variant:"icon-borderless-no-hover",onClick:Z,icon:"ArrowRight",iconSize:10})]})},[t,O,D,l,g,C,I,Z,P]);return(0,v.jsx)(d,x(x({$showScrollArrows:l},u),{},{children:S}))})},64597:function(e,t,n){n.d(t,{T:function(){return v}});var r=n(59499),o=n(4730),i=n(73793),a=n(67294),s=n(50378),l=(0,s.iv)(["flex-direction:column-reverse;gap:8px;"]),c=s.ZP.div.withConfig({displayName:"styled__AskModalButtons",componentId:"sc-16gh6jt-0"})(["display:flex;justify-content:flex-end;",""],function(e){return e.theme.isMobile&&l}),u=n(16531),d=n(59607);n(43201);var p=n(85893),f=["header","children","onConfirm","onCancel","disabled","cancelDisabled","loading","cancelLabel","confirmLabel","confirmButtonVariant","cancelButtonVariant","dataTestId"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=(0,a.memo)(function(e){var t=e.header,n=e.children,r=e.onConfirm,s=e.onCancel,l=e.disabled,m=e.cancelDisabled,v=e.loading,b=void 0!==v&&v,g=e.cancelLabel,x=void 0===g?"Cancel":g,y=e.confirmLabel,w=void 0===y?"Confirm":y,C=e.confirmButtonVariant,j=void 0===C?"primary":C,k=e.cancelButtonVariant,O=e.dataTestId,P=(0,o.Z)(e,f),D=(0,i.bI)("isMobile").isMobile,I=(0,a.useMemo)(function(){if(s)return(0,p.jsx)(d.z,{onClick:s,label:x,variant:k||(D?"secondary":"borderless"),disabled:m||b})},[D,b,s,x,m,k]),Z=(0,a.useMemo)(function(){if(r)return(0,p.jsx)(d.z,{loading:b,variant:j,label:w,onClick:r,disabled:l})},[r,j,w,l,b]),S=(0,a.useMemo)(function(){if(Z||I)return(0,p.jsxs)(c,{children:[I,Z]})},[Z,I]),_=(0,a.useCallback)(function(e){e.preventDefault(),null==r||r()},[r]);return(0,p.jsx)(u.u_,h(h({size:"small"},P),{},{dataTestId:void 0===O?"ask-modal":O,children:(0,p.jsxs)("form",{onSubmit:_,children:[t&&(0,p.jsx)(u.xB,{children:t}),n&&(0,p.jsx)(u.fe,{children:n}),S&&(0,p.jsx)(u.mz,{children:S})]})}))})},20338:function(e,t,n){n.d(t,{s:function(){return x}});var r=n(59499),o=n(4730),i=n(67294),a=n(73793),s=n(50378),l=s.ZP.div.withConfig({displayName:"styled__ConfirmModalWrapper",componentId:"sc-1lzb4qo-0"})(["max-width:454px;"]),c=(0,s.iv)(["flex-direction:column-reverse;"]),u=s.ZP.div.withConfig({displayName:"styled__ConfirmModalButtons",componentId:"sc-1lzb4qo-1"})(["display:flex;justify-content:flex-end;",""],function(e){return e.theme.isMobile&&c}),d=(0,s.iv)(["width:auto;"]),p=s.ZP.div.withConfig({displayName:"styled__ConfirmModalTrigger",componentId:"sc-1lzb4qo-2"})(["width:fit-content;",""],function(e){return e.theme.isMobile&&d}),f=n(16531),m=n(59607);n(43201);var h=n(85893),v=["disabled","header","content","children","onConfirm","hideCancel","onOpen","confirmLabel","confirmButtonVariant","onClose","waitForComplete","completed","loading","triggerStyles"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=(0,i.memo)(function(e){var t=e.disabled,n=e.header,r=e.content,s=e.children,c=e.onConfirm,d=e.hideCancel,b=e.onOpen,x=e.confirmLabel,y=e.confirmButtonVariant,w=e.onClose,C=e.waitForComplete,j=e.completed,k=e.loading,O=e.triggerStyles,P=(0,o.Z)(e,v),D=(0,i.useState)(!1),I=D[0],Z=D[1],S=(0,a.bI)("isMobile").isMobile,_=(0,i.useCallback)(function(){null==b||b(),Z(!0)},[b]),M=(0,i.useCallback)(function(){null==w||w(),Z(!1)},[w]);(0,i.useEffect)(function(){j&&M()},[M,j]);var N=(0,i.useCallback)(function(e){c(e),C||M()},[c,M,C]),E=(0,i.useCallback)(function(e){e.preventDefault(),N()},[N]),A=(0,i.useMemo)(function(){if(!d)return(0,h.jsx)(m.z,{disabled:k,label:"Cancel",style:{marginTop:S?8:void 0},variant:S?"secondary":"borderless",onClick:M})},[M,d,k,S]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(p,{onClick:t?void 0:_,style:O,children:s}),(0,h.jsx)(f.u_,g(g({open:I,size:"small",onClose:M,contentStyle:{maxWidth:"calc(100% - 16px)"},style:{zIndex:1500}},P),{},{children:(0,h.jsx)(l,{children:(0,h.jsxs)("form",{onSubmit:E,children:[(0,h.jsx)(f.xB,{children:n}),(0,h.jsx)(f.fe,{children:r}),(0,h.jsx)(f.mz,{children:(0,h.jsxs)(u,{children:[A,(0,h.jsx)(m.z,{loading:k,variant:y,onClick:N,label:void 0===x?"Confirm":x})]})})]})})}))]})})},96864:function(e,t,n){n.d(t,{D:function(){return b}});var r=n(59499),o=n(4730),i=n(67294),a=n(15948),s=n(50378),l=n(20668),c=n(14251),u=s.ZP.div.withConfig({displayName:"styled__ResourceListWrapper",componentId:"sc-4ck8r0-0"})(["display:flex;flex-direction:column;width:100%;> div{border-bottom:",";}"],function(e){return e.$noBorder?"none":"1px solid ".concat(c.O9.n3)}),d=s.ZP.div.withConfig({displayName:"styled__NoResourceWrapper",componentId:"sc-4ck8r0-1"})(["padding-top:16px;border-bottom:none !important;",""],l.c.t7),p=n(22063),f=n(85893),m=["resources","noResourceView","noBorder","draggable","onDragEnd","descriptionVariant","customNodes"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b=(0,i.memo)(function(e){var t=e.resources,n=void 0===t?[]:t,r=e.noResourceView,s=e.noBorder,l=e.draggable,c=e.onDragEnd,h=e.descriptionVariant,b=e.customNodes,g=(0,o.Z)(e,m),x=(0,i.useCallback)(function(e,t){return(0,f.jsx)(a._l,{draggableId:e.key,index:t,isDragDisabled:!l,children:function(t){var n,r=v(v(v({},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,style:null===(n=t.draggableProps)||void 0===n?void 0:n.style});return b?(0,i.cloneElement)(e,v(v({},e.props),r)):(0,f.jsx)(p.L,v(v(v({},r),e),{},{descriptionVariant:h}))}},e.key)},[l,h,b]),y=(0,i.useMemo)(function(){return!n.length&&r?(0,f.jsx)(d,{children:r}):n.map(x)},[n,r,x]);return(0,f.jsx)(a.Z5,{onDragEnd:void 0===c?function(){}:c,children:(0,f.jsx)(a.bK,{droppableId:"droppable",children:function(e){return(0,f.jsxs)(u,v(v(v({$noBorder:s},g),{},{ref:e.innerRef},e.droppableProps),{},{children:[y,e.placeholder]}))}})})})}}]);