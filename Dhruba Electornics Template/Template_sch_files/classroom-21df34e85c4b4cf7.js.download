(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7088],{42808:function(e,n,t){"use strict";var r=t(50029),o=t(59499),i=t(64687),c=t.n(i),a=t(53531),u=t(5095),s=t(85893);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}n.Z=function(e){var n;function t(n){return(0,s.jsx)(e,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach(function(n){(0,o.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},n))}return t.getRenderData=e.getRenderData,t.initPage=(n=(0,r.Z)(c().mark(function n(t){var r,o,i,s,l,p,d,f,b,m;return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.ctx,o=t.props,i=t.apiClient,s=o.self,l=o.currentGroup,p=r.query,d=(0,u.aK)(p),f=(0,u.VO)(p),b=(0,u.kG)(p),(0,a.Wr)({member:null==s?void 0:s.member,group:l})){n.next=10;break}return m=(0,u.jQ)({invite:d,group:l,ref:b,pending:f}).as,n.abrupt("return",{settings:{redirect:{destination:m,permanent:!1}}});case 10:if(!e.initPage){n.next=16;break}return n.next=13,e.initPage({ctx:r,props:o,apiClient:i});case 13:n.t0=n.sent,n.next=17;break;case 16:n.t0=o;case 17:return n.abrupt("return",n.t0);case 18:case"end":return n.stop()}},n)})),function(e){return n.apply(this,arguments)}),t}},36243:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return A},default:function(){return q}});var r,o,i=t(78271),c=t(59499),a=t(17674),u=t(50029),s=t(64687),l=t.n(s),p=t(67294),d=t(73793),f=t(11163),b=t(27849),m=t(42808),v=t(5095),g=t(53531),j=t(97059),y=t(54361),h=t(29610),O=t(91194),x=t(95419),C=t(38202),P=t(32983),w=t(81737),k=t(96276),D=t(70120),M=t(80181),Z=t(99802),_=t(97221),z=t(30697),S=t(71474),E=t(85893);function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function I(e){var n=e.course,t=e.idx,r=e.page,o=e.numCourses,i=e.onCourseEditClick,c=e.onCourseDeleteClick,a=(0,p.useState)(!1),s=a[0],b=a[1],m=(0,d.bI)("currentGroup","self","isMobile","dispatch"),y=m.currentGroup,h=m.self,C=m.isMobile,P=m.dispatch,w=(0,f.useRouter)(),N=n.metadata,I=n.amount,G=n.currency,R=N.title,A=N.coverImage,q=N.desc,H=N.privacy,L=N.hasAccess,K=N.minAccessLevel,T=N.userCompleted,U=N.numModules,X=void 0===U?0:U,B=X?Math.round((void 0===T?0:T)/X*100):0,J=(0,v.rE)({group:y,course:n,courseModule:C?"menu":void 0}),V=(0,g.CP)({user:h,member:null==h?void 0:h.member,group:y}),W=(0,p.useMemo)(function(){return(0,g.cD)({member:null==h?void 0:h.member,group:y})},[h,y]),$=(null==h||null===(es=h.member)||void 0===es?void 0:es.role)!=="pending"&&(null==h||null===(el=h.member)||void 0===el?void 0:el.role)!=="declined"&&h&&(null===(ep=(0,j._)(h))||void 0===ep?void 0:ep.level)||0,F=!L&&1===H,Q=!L&&2===H&&$<K,Y=!L&&3===H,ee=F||Q||Y,en=2===n.state,et=(0,p.useCallback)(function(){b(!0)},[]),er=(0,p.useCallback)(function(){b(!1)},[]),eo=(0,p.useCallback)(function(){P(z.x0,{course:n,group:y})},[n,y,P]),ei=(0,p.useCallback)(function(){(0,O.H5)(w)},[w]),ec=(0,p.useMemo)(function(){var e,a,s,p=(r-1)*30+t;return[{label:"Edit course",onClick:function(){i(n)}},{disabled:p<=0,label:"Move ".concat(C?"↑":"←"),onClick:(e=(0,u.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Z.moveCourse({courseId:n.id,newOrdinal:p-1});case 2:(0,O.H5)(w);case 3:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})},{disabled:p>=o-1,label:"Move ".concat(C?"↓":"→"),onClick:(a=(0,u.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Z.moveCourse({courseId:n.id,newOrdinal:p+1});case 2:(0,O.H5)(w);case 3:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)})},{label:"Delete course",onClick:(s=(0,u.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c(n);case 1:case"end":return e.stop()}},e)})),function(){return s.apply(this,arguments)})}]},[n,t,o,c,i,r,w,C]),ea=Y&&I&&G?(0,Z.O5)({amount:I,currency:G,showZeroes:!1}):"",eu=(0,E.jsxs)(M.h3,{$published:en,children:[(0,E.jsxs)(M.eI,{$bgColor:A?void 0:null==y||null===(ed=y.metadata)||void 0===ed?void 0:ed.color,children:[A?(0,E.jsx)(M.y5,{src:A,alt:R}):null,ee?(0,E.jsxs)(M.ni,{children:[(0,E.jsx)(k.J,{name:"Private",size:32,padding:0}),(0,E.jsxs)("span",{children:[F&&"Private Course",Y&&"Unlock for ".concat(ea),Q&&"Unlock at Level ".concat(K)]})]}):null]}),(0,E.jsxs)(M.zm,{children:[(0,E.jsx)(M.Vl,{children:R}),(0,E.jsx)(M.Jo,{children:q}),(0,E.jsx)(S.u,{percentage:B,label:"".concat(B,"% complete")})]})]});if(!L&&!W){var es,el,ep,ed,ef,eb="/".concat(y.name,"/classroom?course=").concat(n.id);return(0,E.jsx)(_.Z,{reason:"to view this course in ".concat(null==y||null===(ef=y.metadata)||void 0===ef?void 0:ef.displayName),onPending:ei,onSuccess:eo,subscriptionRedirectUrl:eb,children:function(e){var n=e.onClick;return(0,E.jsx)("div",{onClick:n,children:eu})}})}return ee?(0,E.jsx)("div",{onClick:eo,children:eu}):(0,E.jsxs)(M.aA,{children:[(0,E.jsxs)(D.r,{href:J.as,children:[eu,!en&&(0,E.jsx)(M.vb,{label:"Draft",active:!0})]}),V&&(0,E.jsx)(M.Fy,{variant:"icon-round",icon:"HorizontalDots",options:ec,onShow:et,onHide:er,$forceDropdownVisible:s})]})}function G(e){var n,t,r,o,i=e.allCourses,c=e.course,u=e.page,s=(0,p.useRef)(),l=(0,d.bI)("currentGroup","self","isMobile"),b=l.currentGroup,m=l.self,j=l.isMobile,h=l.dispatch,O=(0,f.useRouter)(),x=(0,y.C1)(),D=(0,a.Z)(x,3),Z=D[0],_=D[1],S=D[2],N=(0,y.C1)(),G=(0,a.Z)(N,4),R=G[0],A=G[1],q=G[2],H=G[3],L=(0,y.C1)(),K=(0,a.Z)(L,4),T=K[0],U=K[1],X=K[2],B=K[3],J=(null!==(n=null==b||null===(t=b.metadata)||void 0===t?void 0:t.numCourses)&&void 0!==n?n:0)+(null!==(r=null==b||null===(o=b.metadata)||void 0===o?void 0:o.numDraftCourses)&&void 0!==r?r:0),V=(0,g.CP)({user:m,member:null==m?void 0:m.member,group:b}),W=(0,p.useCallback)(function(e){O.push("/".concat(b.name,"/classroom?p=").concat(e))},[O,b]),$=(0,p.useMemo)(function(){return 0===J||Math.ceil(J/30)===u},[J,u]),F=(0,p.useMemo)(function(){return c?[c]:i},[c,i]),Q=(0,p.useCallback)(function(e){return F.find(function(n){return n.id==e})},[F]);if((0,p.useEffect)(function(){var e=(0,v.D_)(O.query),n=(0,v.fH)(O.query),t=Q(e||n);if(e&&t){var r=F.find(function(n){return n.id==e});r&&h(z.x0,{course:r,group:b})}else n&&t&&V&&A(t)},[O,F,b,Q,A,V,h]),!V&&0===F.length)return(0,E.jsx)(M.MK,{children:"No courses yet"});var Y=j&&(Z||R);return(0,E.jsxs)(M.XK,{ref:s,children:[!Y&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(M.nS,{children:[F.map(function(e,n){return(0,E.jsx)(I,{course:e,idx:n,numCourses:J,page:u,onCourseEditClick:A,onCourseDeleteClick:U},n)}),V&&$&&(0,E.jsxs)(M.yB,{onClick:_,children:[(0,E.jsx)(k.J,{name:"Add"}),"New course"]})]}),J>0&&(0,E.jsx)(M.Nl,{children:(0,E.jsx)(w.t,{currentPage:u,pageSize:30,totalCount:J,onChange:W})})]}),Z&&(0,E.jsx)(C.Z,{open:!0,inline:j,onClose:S}),R&&(0,E.jsx)(C.Z,{open:!0,inline:j,course:H,onClose:q}),T&&(0,E.jsx)(P.Z,{open:!0,course:B,source:"classroom",onClose:X})]})}G.getRenderData=(r=(0,u.Z)(l().mark(function e(n){var t,r,o,i;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.ctx,r=n.apiClient,o=(0,v.Z9)(t.query),i=(0,v.XT)(t.query),e.next=5,r.readCourseData({groupName:o,offset:(i-1)*30});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),G.initPage=(o=(0,u.Z)(l().mark(function e(n){var t,r,o,i,a,u,s,p,d,f,m,g,j,y,O;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.props,s=n.ctx,p=u.renderData,d=u.currentGroup,f=(0,v.ju)(s.query)||"",m=(0,v.XT)(s.query),g=p.allCourses,j=p.course,y=(null==d||null===(t=d.metadata)||void 0===t?void 0:t.description)||"",O=(null==d||null===(r=d.metadata)||void 0===r?void 0:r.logoBigUrl)||(null==d||null===(o=d.metadata)||void 0===o?void 0:o.coverSmallUrl)||"",e.abrupt("return",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach(function(n){(0,c.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({settings:{pageTitle:"Classroom \xb7 ".concat(null==d||null===(i=d.metadata)||void 0===i?void 0:i.displayName),pageMeta:{description:(0,h.Kv)({content:y}).slice(0,160)||""},image:O,mainMenuItem:b.t5.GroupDefaultClassroom,mainMenuName:b.K0.GroupDefault},allCourses:null!=g?g:[],course:null!==(a=null==j?void 0:j.course)&&void 0!==a?a:null,selectedModule:f,page:m},u));case 8:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),G.defaultProps={allCourses:[]};var R=(0,m.Z)(G),A=!0,q=(0,i.Z)(R)},81737:function(e,n,t){"use strict";t.d(n,{t:function(){return z}});var r=t(59499),o=t(67294),i=t(73793),c=t(90116),a=t(4730),u=t(50378),s=t(20668),l=t(14251),p=u.ZP.div.withConfig({displayName:"styled__DesktopPaginationWrapper",componentId:"sc-4zz1jl-0"})(["display:flex;justify-content:space-between;align-items:center;"]),d=u.ZP.div.withConfig({displayName:"styled__DesktopPaginationControls",componentId:"sc-4zz1jl-1"})(["display:flex;gap:4px;align-items:center;"]),f=u.ZP.div.withConfig({displayName:"styled__DesktopPaginationMeta",componentId:"sc-4zz1jl-2"})(["color:",";",";"],l.O9.n5,s.c.t11),b=t(12967),m=t(59607),v=t(85893),g=["onChange","pageSize","totalCount","currentPage","disableMeta"];function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var h=(0,o.memo)(function(e){var n=e.onChange,t=e.pageSize,r=e.totalCount,i=e.currentPage,u=e.disableMeta,s=(0,a.Z)(e,g),l=(0,o.useMemo)(function(){return Math.ceil(r/t)},[r,t]),j=(0,o.useMemo)(function(){var e=l>7,n=[],t=e&&i>4,r=e&&i<l-3;if(t&&r)n=[i-1,i,i+1];else{for(var o=7===l,a=i<5||5===i&&5===l||o,u=a?l:1,s=a?2:l-4;1!==l&&n.length<4&&s!==u;)n.push(s),s++;o&&n.push(6)}var p=1===l?[]:[l];return[1].concat(t?["..."]:[],(0,c.Z)(n),r?["..."]:[],p)},[i,l]),h=(0,o.useCallback)(function(e,t){return(0,v.jsx)(m.z,{label:e,active:e===i,variant:"pagination-number",onClick:function(){return n(e)},style:"..."===e?{pointerEvents:"none"}:void 0},t)},[i,n]),O=(0,o.useMemo)(function(){return j.map(h)},[j,h]),x=(0,o.useMemo)(function(){if(u)return null;var e=t*(i-1)+1,n=Math.min(e+t-1,r);return"".concat((0,b.x6)(e),"-").concat((0,b.x6)(n)," of ").concat((0,b.x6)(r))},[i,t,r,u]);return(0,v.jsxs)(p,y(y({},s),{},{children:[(0,v.jsxs)(d,{children:[(0,v.jsx)(m.z,{icon:"ArrowLeft",label:"Previous",iconLeft:!0,iconSize:12,variant:"pagination-text",disabled:1===i,onClick:function(){return n(i-1)}}),O,(0,v.jsx)(m.z,{icon:"ArrowRight",label:"Next",iconSize:12,variant:"pagination-text",disabled:i===l,onClick:function(){return n(i+1)}})]}),x&&(0,v.jsx)(f,{children:x})]}))}),O=u.ZP.div.withConfig({displayName:"styled__MobilePaginationWrapper",componentId:"sc-1ezuilf-0"})(["width:100%;display:flex;flex-direction:column;align-items:center;"]),x=u.ZP.div.withConfig({displayName:"styled__MobilePaginationButtons",componentId:"sc-1ezuilf-1"})(["margin-bottom:8px;display:flex;gap:16px;"]),C=u.ZP.div.withConfig({displayName:"styled__MobilePaginationMeta",componentId:"sc-1ezuilf-2"})(["color:",";",""],l.O9.n5,s.c.t11),P=["onChange","pageSize","totalCount","currentPage","disableMeta"];function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var D={width:100,border:"1px solid ".concat(l.O9.n3)},M=(0,o.memo)(function(e){var n=e.onChange,t=e.pageSize,r=e.totalCount,i=e.currentPage,c=e.disableMeta,u=(0,a.Z)(e,P),s=(0,o.useMemo)(function(){return Math.ceil(r/t)},[r,t]),l=(0,o.useMemo)(function(){return c?null:"page ".concat((0,b.x6)(i)," of ").concat((0,b.x6)(s))},[i,s,c]);return(0,v.jsxs)(O,k(k({},u),{},{children:[(0,v.jsxs)(x,{children:[(0,v.jsx)(m.z,{icon:"ArrowLeft",label:"Previous",iconLeft:!0,iconSize:14,variant:"pagination-text",disabled:1===i,onClick:function(){return n(i-1)},style:D}),(0,v.jsx)(m.z,{icon:"ArrowRight",label:"Next",iconSize:14,variant:"pagination-text",disabled:i===s,onClick:function(){return n(i+1)},style:D})]}),l&&(0,v.jsx)(C,{children:l})]}))});function Z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var z=(0,o.memo)(function(e){return(0,i.bI)("isMobile").isMobile?(0,v.jsx)(M,_({},e)):(0,v.jsx)(h,_({},e))})},44340:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[group]/classroom",function(){return t(36243)}])}},function(e){e.O(0,[4027,630,6911,6124,1613,2065,8271,2749,2888,9774,179],function(){return e(e.s=44340)}),_N_E=e.O()}]);